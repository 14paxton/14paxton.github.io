{"0": {
    "doc": "202208_WorkshopNotes",
    "title": "202208_WorkshopNotes",
    "content": "{: .text-delta } 1. TOC {:toc} --- # practices # instructor dropbox # instructor git # my dropbox # relevant docs [service discovery ](https://micronaut-projects.github.io/micronaut-discovery-client/latest/guide/) [built in endpoints ](https://docs.micronaut.io/latest/guide/#providedEndpoints) [grails use micronaut http ](https://guides.grails.org/grails-micronaut-http/guide/index.html) ",
    "url": "/Micronotes/202208_WorkshopNotes",
    
    "relUrl": "/Micronotes/202208_WorkshopNotes"
  },"1": {
    "doc": "ADMIN-ROOT",
    "title": "ADMIN-ROOT",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Reset admin password ```shell sudo passwd root ``` # Ways to purge apps ```shell sudo dpkg --configure -a ``` ```shell sudo apt-get install -f ``` ```shell sudo apt-get remove --purge package_name ``` ```shell sudo apt autoremove ``` ```shell sudo ls -l /var/lib/dpkg/info | grep -i package_name *then* sudo mv /var/lib/dpkg/info/package_name.* /tmp *then* sudo apt-get update ``` ```shell sudo dpkg -i --force-overwrite /var/cache/apt/archives/full_name_of_package ``` # Udate chmod ```shell cd $HOME { sudo chflags -R nouchg,nouappnd ~ $TMPDIR.. ; \\ sudo chown -R $UID:staff ~ $_ ; \\ sudo chmod -R -N ~ $_ ; \\ sudo chmod -R 755 ~ $_ ; \\ sudo chmod 700 Desktop Documents Downloads Dropbox Library Movies Music Pictures Sites $_ ; \\ sudo chmod 777 Public ; \\ sudo chmod 733 Public/Drop\\ Box ; \\ } 2> /dev/null ``` # Find App By Name ```shell mdfind -name [application name] ``` # reset user permissions ```shell diskutil resetUserPermissions / `id -u` ``` ",
    "url": "/Linux/ADMIN-ROOT",
    
    "relUrl": "/Linux/ADMIN-ROOT"
  },"2": {
    "doc": "APIs",
    "title": "APIs",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Google and ASP/.Net API Doc links ## Google -[Cloud Overview](https://cloud.google.com/apis/docs/overview) -[DotNet Auth](https://googleapis.dev/dotnet/Google.Apis.Auth/latest/) ## Dev improvements [Dev improvements](https://google.aip.dev/client-libraries) ## .Net ### [Cloud SDKs](https://cloud.google.com/dotnet/docs/reference ) ### [APIs](https://developers.google.com/api-client-library/dotnet/apis ) #### [Available APIs](https://cloud.google.com/apis/docs/cloud-client-libraries) ##### [API Explorer](https://developers.google.com/apis-explorer) ##### [Test API calls in GoogleCloud console enviroment](https://cloud.google.com/logging/docs/api) # [Logging](https://cloud.google.com/logging/docs/reference/api-overview) *** ### [DotNet API Client Library Repo](https://github.com/googleapis/google-api-dotnet-client) #### [C#](https://cloud.google.com/dotnet/docs/reference) #### [Google Cloud Libraries .NET GitHub ](https://github.com/googleapis/google-cloud-dotnet) #### [Cloud Events](https://github.com/googleapis/google-cloudevents-dotnet) #### [Dialogflow CX](https://cloud.google.com/dotnet/docs/reference/Google.Cloud.Dialogflow.Cx.V3/latest) *** ### [Dialog Flow](https://developers.google.com/api-client-library/dotnet/apis/dialogflow/v3) *** ## [Google Client Libraries Used to Access Google APIs](https://developers.google.com/api-client-library) ### Resources - [How To for Visual Studio Pluggins](https://cloud.google.com/tools/visual-studio/docs/how-to) - [How To for Intellij Pluggins](https://cloud.google.com/code/docs/intellij) - [Nuget Google Packages](https://www.nuget.org/profiles/google-apis-packages) - [GooglAPI Doc](https://cloud.google.com/apis/docs/overview) - [Clients for Google APIs and tools that help produce them.](https://github.com/googleapis) - [API Source Code](https://github.com/googleapis/googleapis#google-apis) - [Developer Docs and Definitions for APIS and objects](https://googleapis.dev/dotnet/Google.Apis.Auth/latest/api/Google.Apis.Auth.OAuth2.ServiceAccountCredential.html) - [The googleapis organization hosts tools, technical articles, and issues related to Google API design and practice. It also hosts client libraries for using many Google APIs from a variety of supported languages.](https://github.com/googleapis/googleapis.github.io/) ",
    "url": "/GoogleNotes/APIs",
    
    "relUrl": "/GoogleNotes/APIs"
  },"3": {
    "doc": "ARM64",
    "title": "ARM64",
    "content": "{: .text-delta } 1. TOC {:toc} --- # cli build ```shell docker build --platform linux/arm64 . ``` # cli run ```shell docker run --platform linux/arm/v8 dbmigration:1.1 ``` ## all platforms ```shell docker buildx build --platform linux/amd64,linux/arm64,linux/arm/v7 -t username/demo:latest --push . ``` # add to from ```shell FROM --platform=linux/x86_64 $REGISTRY_HOST/guardian/base-images/node16-builder:1.0.0 as builder ``` # Stop repeating flag when you perform a docker run command: > useful only for macOS Silicon M1, > still working but useless for the other platforms > Add this snipped to your `~/.zshrc` and `~/.bashrc` ```shell docker() { if [ `uname -m` == \"arm64\" ](%60uname%20-m%60%20==%20%22arm64%22.md#) && [| \"$1\" == \"build\" ](%22$1%22%20==%20%22run%22.md#); then /usr/local/bin/docker \"$1\" --platform linux/amd64 \"${@:2}\" else /usr/local/bin/docker \"$@\" fi } ``` # set the environment variable DOCKER_DEFAULT_PLATFORM ```shell export DOCKER_DEFAULT_PLATFORM=linux/amd64 ``` # add in your docker-compose.yaml ```yaml services: service_name: environment: - DOCKER_DEFAULT_PLATFORM=linux/amd64 ``` # add to build as env ```shell DOCKER_DEFAULT_PLATFORM=linux/amd64 docker-compose build ``` > Keep in mind that if you've already downloaded the image for a different platform, docker will keep using that image no matter what platform you > specify as your default, you would delete the image > using docker image rm your_img first to fix that. # Alternatively - Adding in the Dockerfile > include the following flag in the `FROM` command (for a multi-stage Dockerfile build, the flag is only needed for the first stage): ```shell FROM --platform=linux/amd64 python:3.7-alpine ``` # Building images as part of a docker-compose build > include the platform: `linux/amd64` for each service ```yaml services: frontend: platform: linux/amd64 build: frontend ports: - 80:80 depends_on: - backend backend: platform: linux/amd64 build: backend ``` # Debian ARM ```shell FROM aemdesign/tini:debian-arm LABEL os=\"debian 8 arm\" \\ container.description=\"oracle jdk\" \\ version=\"jdk8\" \\ maintainer=\"devops \" \\ imagename=\"oracle-jdk\" \\ test.command=\" java -version 2>&1 | grep 'java version' | sed -e 's/.*java version \"\\(.*\\)\".*/\\1/'\" \\ test.command.verify=\"1.8\" ARG JAVA_VERSION=\"8\" ARG JAVA_VERSION_TIMESTAMP=\"2133151\" ARG JAVA_DOWNLOAD_URL=\"https://www.oracle.com/au/java/technologies/javase-jdk${JAVA_VERSION}-downloads.html\" ARG JDK_DRIVEID=\"xxx\" ENV JAVA_HOME=/opt/jdk1.8.0_321/ COPY gdrive.sh . RUN \\ echo \"DOWNLOAD JDK DONE\" && \\ bash ./gdrive.sh \"download\" \"${JDK_DRIVEID}\" \"/opt/jdk.tar.gz\" && \\ echo \"INSTALL JDK\" && \\ cd /opt/ && \\ tar -xvzf jdk.tar.gz && \\ export JAVA_HOME=${JAVA_HOME} && \\ update-alternatives --install /usr/bin/java java ${JAVA_HOME%*/}/bin/java 1 && \\ update-alternatives --install /usr/bin/javac javac ${JAVA_HOME%*/}/bin/javac 1 && \\ update-alternatives --config java && \\ rm -rf /opt/jdk.tar.gz ``` ",
    "url": "/DockerNotes/ARM64",
    
    "relUrl": "/DockerNotes/ARM64"
  },"4": {
    "doc": "AWS",
    "title": "AWS",
    "content": "{: .text-delta } 1. TOC {:toc} *** # [AWS Micronaut Docs](https://micronaut-projects.github.io/micronaut-aws/latest/guide/) # [Lambda](https://micronaut-projects.github.io/micronaut-aws/latest/guide/#lambdaTutorials) ## Gradle ```groovy micronaut { nativeLambda { lambdaRuntimeClassName = \"io.micronaut.function.aws.runtime.APIGatewayV2HTTPEventMicronautLambdaRuntime\" } } ``` ### Build Zip file To Deploy ```shell ./gradlew buildNativeLambda ``` ## Handler ### 1) Custom ```example.micronaut.FunctionRequestHandler``` - Purpose: This is a custom class, likely created in a Micronaut-based AWS Lambda project to handle specific business logic or Lambda requests. - Use Case: Typically, this handler extends from a Micronaut AWS Lambda handler class, like io.micronaut.function.aws.proxy.MicronautLambdaHandler. It acts as the entry point for AWS Lambda invocations where the developer defines the specific handling of requests. - Example: It is used when you want to define your own Lambda function logic. For instance, processing an API request, executing business logic, and returning a response. ```java public class FunctionRequestHandler extends MicronautLambdaHandler { // Custom logic for handling Lambda events } ``` ### 2) ```io.micronaut.function.aws.proxy.MicronautLambdaHandler``` - Purpose: This is the primary handler for AWS Lambda requests in a Micronaut application. It integrates the Micronaut framework and makes it possible to run Micronaut applications inside an AWS Lambda environment. - Use Case: MicronautLambdaHandler is used when deploying a Micronaut-based REST API to AWS Lambda. It bridges AWS API Gateway requests with the Micronaut framework, enabling the Lambda function to route HTTP requests to Micronaut controllers and services. - Example: It acts as the core handler in API Gateway integrations where you want to use Micronaut’s dependency injection, HTTP routing, and other framework features inside a Lambda function. ```java public class MyApiHandler extends MicronautLambdaHandler { // Optional: Override methods or add custom behavior if needed } ``` > Use Case: - When you want to run a full Micronaut application within AWS Lambda, especially for handling HTTP requests routed through AWS API Gateway. This handler automatically wires up the HTTP request/response handling via Micronaut controllers. ### 3) ```io.micronaut.function.aws.proxy.payload1.ApiGatewayProxyRequestEventFunction``` - Purpose: This is a specialized handler provided by Micronaut for handling Payload Version 1.0 of AWS API Gateway requests. AWS API Gateway can use different versions of request/response payloads, and this class is designed specifically for handling events that conform to the Payload Version 1.0 format. - Use Case: ApiGatewayProxyRequestEventFunction is used when your API Gateway is configured to use the Payload 1.0 request/response format. It’s a more specific use case than MicronautLambdaHandler and is typically used when the Lambda function receives an event in this format. - Example: This handler is useful if your Lambda function needs to parse or handle API Gateway requests specifically using the Payload Version 1.0 format (as opposed to Version 2.0). ```java public class MyApiHandler extends ApiGatewayProxyRequestEventFunction { // Handles AWS API Gateway Payload v1.0 events } ``` > Use Case: - When you are working with an AWS API Gateway that is configured to use Payload Version 1.0, and you need your Lambda function to specifically process requests formatted in that version. ### FunctionRequestHandler Example ```java import com.amazonaws.services.lambda.runtime.events.APIGatewayProxyRequestEvent; import com.amazonaws.services.lambda.runtime.events.APIGatewayProxyResponseEvent; import io.micronaut.function.aws.MicronautRequestHandler; public class FunctionRequestHandler extends MicronautRequestHandler { @Override public APIGatewayProxyResponseEvent execute(APIGatewayProxyRequestEvent input) { APIGatewayProxyResponseEvent response = new APIGatewayProxyResponseEvent(); //** logic **// } } ``` ## Runtime ### 1) Custom ```example.micronaut.FunctionLambdaRuntime``` ### 2) ```io.micronaut.function.aws.runtime.MicronautLambdaRuntime``` - Purpose: This is the core Micronaut class for running AWS Lambda functions. It is a base class that integrates the Micronaut framework’s features into the AWS Lambda execution environment. This runtime provides automatic support for dependency injection, configuration, and other Micronaut capabilities when running Lambda functions. - Use Case: It is the default runtime you would use to handle Lambda function invocations. It is generic and can be adapted to different event types (API Gateway, SNS, SQS, etc.). You would extend this class if you want to build a function handler that works with various AWS services or APIs, leveraging the full power of the Micronaut framework. - Example: This is typically used when you want to deploy a Micronaut-based Lambda function that will handle AWS events (like API Gateway HTTP requests) or process data from other AWS services. ```java public class MyLambdaRuntime extends MicronautLambdaRuntime { public static void main(String[] args) { try { new MyLambdaRuntime().start(); } catch (Exception e) { e.printStackTrace(); } } } ``` > Use Case: - When you want to deploy a Micronaut-based Lambda function that handles generic AWS events (e.g., API Gateway, SNS, SQS). The class allows you to create Lambda functions with Micronaut’s dependency injection, configuration, and HTTP routing capabilities. ### 3) ```io.micronaut.function.aws.runtime.APIGatewayV2HTTPEventMicronautLambdaRuntime``` - Purpose: This is a specialized runtime class designed specifically to handle AWS API Gateway Version 2.0 HTTP events. This runtime is built on top of MicronautLambdaRuntime, but it focuses on processing API Gateway requests that conform to the Payload Version 2.0 specification. - Use Case: You would use this class if your Lambda function is deployed behind AWS API Gateway, and you want to handle HTTP requests and responses using the Payload Version 2.0 format (which supports richer HTTP features such as cookies, multi-value headers, and more). - Example: This is particularly useful when you are deploying an HTTP-based API to AWS Lambda, and the API Gateway is configured to use the Version 2.0 payload format. ```java public class MyAPIGatewayLambdaRuntime extends APIGatewayV2HTTPEventMicronautLambdaRuntime { public static void main(String[] args) { try { new MyAPIGatewayLambdaRuntime().start(); } catch (Exception e) { e.printStackTrace(); } } } ``` > Use Case: - When your Lambda function is designed to handle HTTP requests routed via AWS API Gateway using Payload Version 2.0. This runtime helps in handling API requests and responses in a web-like manner, leveraging the features of the API Gateway 2.0 specification. ### FunctionLambdaRuntime Example ```java import com.amazonaws.services.lambda.runtime.RequestHandler; import com.amazonaws.services.lambda.runtime.events.APIGatewayProxyRequestEvent; import com.amazonaws.services.lambda.runtime.events.APIGatewayProxyResponseEvent; import io.micronaut.core.annotation.Nullable; import io.micronaut.function.aws.runtime.AbstractMicronautLambdaRuntime; import java.net.MalformedURLException; public class FunctionLambdaRuntime extends AbstractMicronautLambdaRuntime { public static void main(String[] args) { try { new FunctionLambdaRuntime().run(args); } catch (MalformedURLException e) { e.printStackTrace(); } } @Override @Nullable protected RequestHandler createRequestHandler(String... args) { return new FunctionRequestHandler(); } } ``` ## StreamHandler ### AbstractRequestStreamHandlerMicronautLambdaRuntime ```java import com.amazonaws.services.lambda.runtime.RequestStreamHandler; import com.amazonaws.services.lambda.runtime.events.APIGatewayProxyRequestEvent; import com.amazonaws.services.lambda.runtime.events.APIGatewayProxyResponseEvent; import io.micronaut.core.annotation.Nullable; import io.micronaut.function.aws.runtime.AbstractRequestStreamHandlerMicronautLambdaRuntime; import java.net.MalformedURLException; class FunctionLambdaRuntime extends AbstractRequestStreamHandlerMicronautLambdaRuntime { public static void main(String[] args) { try { new FunctionLambdaRuntime().run(args); } catch (MalformedURLException e) { e.printStackTrace(); } } @Override protected @Nullable RequestStreamHandler createRequestStreamHandler(String... args) { return new FunctionRequestHandler(); } } ``` ### MicronautRequestStreamHandler ```java import io.micronaut.context.env.Environment; import io.micronaut.core.annotation.Introspected; import io.micronaut.function.aws.MicronautRequestStreamHandler; @Introspected public class FunctionRequestHandler extends MicronautRequestStreamHandler { @Override protected String resolveFunctionName(Environment env) { return \"requestfunction\"; } } ``` ### RequestFunction Function ```java import com.amazonaws.services.lambda.runtime.events.APIGatewayProxyRequestEvent; import com.amazonaws.services.lambda.runtime.events.APIGatewayProxyResponseEvent; import io.micronaut.function.FunctionBean; import java.util.function.Function; @FunctionBean(\"requestfunction\") public class RequestFunction implements Function { @Override public APIGatewayProxyResponseEvent apply(APIGatewayProxyRequestEvent requestEvent) { APIGatewayProxyResponseEvent response = new APIGatewayProxyResponseEvent(); //** logic **// } } ``` # Database ## setup ```shell export AWS_ACCESS_KEY_ID=AKIASC5Z6WSK4JAMKQ6S; export AWS_SECRET_ACCESS_KEY=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; ``` ```shell export MYSQL_HOST=$(aws rds describe-db-instances --query 'DBInstances[?DBInstanceIdentifier==`crud-data-aws-db-create-micro-person`].Endpoint.Address' --output text) ``` ### custom env variables add to .yml if choose ```shell export JDBC_URL=jdbc:mysql://${MYSQL_HOST}:3306/micro_person export JDBC_USER=admin export JDBC_PASSWORD=secret99 ``` ### micronaut specific env variables - specific to micronaut - [connection pools](https://micronaut-projects.github.io/micronaut-sql/latest/guide/#jdbc-connection-pools) ```shell export DATASOURCES_DEFAULT_URL=jdbc:mysql://${MYSQL_HOST}:3306/micro_person export DATASOURCES_DEFAULT_USERNAME=admin export DATASOURCES_DEFAULT_PASSWORD=secret99 ``` > Micronaut Framework populates the properties `datasources.default.url`, `datasources.default.username` and `datasources.default.password ` > with those environment variables' values. > You can run the application and test the API as it was described in the previous sections. > However, when you run the application, Micronaut Test Resources does not start a MySQL container because you have provided values for > `datasources.default.*properties`. ## Start script to use amazon db ```shell export AWS_ACCESS_KEY_ID=AKIASC5Z6WSK4JAMKQ6S; export AWS_SECRET_ACCESS_KEY=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; export MYSQL_HOST=$(aws rds describe-db-instances --query 'DBInstances[?DBInstanceIdentifier==`crud-data-aws-db-create-micro-person`].Endpoint.Address' --output text); export JDBC_URL=jdbc:mysql://${MYSQL_HOST}:3306/micronaut; export JDBC_USER=admin; export JDBC_PASSWORD=secret99; export DATASOURCES_DEFAULT_URL=jdbc:mysql://${MYSQL_HOST}:3306/micro_person; export DATASOURCES_DEFAULT_USERNAME=admin; export DATASOURCES_DEFAULT_PASSWORD=secret99; ``` ## create db and user > Create the database. You can use any valid database name (e.g., micronaut): ```shell CREATE DATABASE micronaut; ``` > Create a database user. You can use any valid MySQL username (e.g., guide_user) and any valid password: ```shell CREATE USER 'guide_user' IDENTIFIED BY 'M1cr0n4ut!'; ``` > Grant access to the database for the new user: ```shell GRANT ALL ON micronaut.* TO 'guide_user'; ``` ## connecting to aws rds ```shell mysql -h $MYSQL_HOST -P 3306 -u admin -p ``` ",
    "url": "/Micronotes/AWS",
    
    "relUrl": "/Micronotes/AWS"
  },"5": {
    "doc": "AWS",
    "title": "AWS",
    "content": " ",
    "url": "/AWS/",
    
    "relUrl": "/AWS/"
  },"6": {
    "doc": "AccessHibernateAndDataStoreAndSession",
    "title": "AccessHibernateAndDataStoreAndSession",
    "content": "{: .text-delta } 1. TOC {:toc} *** # -Access to session and hibernate- ## -getting session- ```groovy def sessionFactory def session = sessionFactory?.getCurrentSession() RequestContextHolder.currentRequestAttributes().getSession() ``` # -get hibernate datastore in session- ## -Get hibernatedatasource- [hibernate datastore ex.](https://guides.grails.org/grails-dynamic-multiple-datasources/guide/index.html ) ```groovy @Autowired HibernateDatastore hibernateDatastore @Autowired DatabaseProvisioningService databaseProvisioningService @Listener(User) void onUserPostInsertEvent(PostInsertEvent event) { String username = event.getEntityAccess().getPropertyValue(\"username\") DatabaseConfiguration databaseConfiguration = databaseProvisioningService.findDatabaseConfigurationByUsername(username) hibernateDatastore.getConnectionSources().addConnectionSource(databaseConfiguration.dataSourceName, databaseConfiguration.configuration) } ``` ## -get table columns- ```groovy hibernateDatastore.getSessionFactory().getClassMetadata(GroupCompare).getProperties().sort() ctx.sessionFactory.getClassMetadata(Team).attributes.collect { it.name } ``` ## -get data bindings/properties/class/domain table/declared fields- ```groovy def mapping = org.grails.orm.hibernate.cfg.GrailsDomainBinder.getMapping(UserGroup) sessionFactory.getClassMetadata(Foo).tableName org.grails.orm.hibernate.cfg.GrailsDomainBinder.getMapping(groupCompare.class).class.declaedFields ``` ## -get a service- 1. ```groovy @Autowired HibernateDatastore hibernateDatastore UserDataService userDataService UserService(HibernateDatastore hibernateDatastore) { this.userDataService = hibernateDatastore.getService(UserDataService) } ``` 2. ```groovy (YourService) Holders.grailsApplication.mainContext[\"yourService\"] ``` 4. ```groovy applicationContext.\"${yourServiceName}\".serviceMethod() ``` 6. ```groovy ctx.getBean('userGroupService') ``` 8. ```groovy Holders.applicationContext.getBean(\"myService\") ``` 10. ```groovy ApplicationContext ctx = (ApplicationContext) ServletContextHolder.getServletContext().getAttribute(GrailsApplicationAttributes.APPLICATION_CONTEXT) statisticsService = (StatisticsService) ctx.getBean(\"statisticsService \") ``` ",
    "url": "/PersonalGrailsNotes/AccessHibernateAndDataStoreAndSession",
    
    "relUrl": "/PersonalGrailsNotes/AccessHibernateAndDataStoreAndSession"
  },"7": {
    "doc": "Algorithms",
    "title": "Algorithms",
    "content": "--- {: .text-delta } 1. TOC {:toc} --- # Threads ## Create Random Number ```java public class CreateRando { Long rando = ThreadLocalRandom.current().nextLong(100000); } ``` # binary search ```java public class BinarySearch { public static int find(int[] numbers, int target) { int min = 0, max = numbers.length - 1; while (min indexForNumberMap = new LinkedHashMap(); AtomicInteger index = new AtomicInteger(0); List theList = str.chars() .filter(w -> { boolean isDigit = (w >= 47 && w (char) o) .toList(); if (theList.stream().anyMatch(Character::isDigit)) { Set keys = indexForNumberMap.keySet(); Integer[] arr = keys.toArray(new Integer[0]); boolean enoughQuestionMarks = true; for (int i = 0; i < arr.length - 1; i++) { int firstIndex = indexForNumberMap.get(arr[i]); int nextIndex = indexForNumberMap.get(arr[i + 1]); if (enoughQuestionMarks && Character.getNumericValue(firstIndex) + Character.getNumericValue(nextIndex) == 10) { enoughQuestionMarks = arr[i + 1] - arr[i] == 4; returnVal.set(enoughQuestionMarks); } } } return returnVal.get(); } } ``` ",
    "url": "/JavaNotes/Algorithms",
    
    "relUrl": "/JavaNotes/Algorithms"
  },"8": {
    "doc": "Annotations",
    "title": "Annotations",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Create Custom Annotation ![createAnnotation.png](..%2Fassets%2Fimages%2FcreateAnnotation.png) ",
    "url": "/JavaNotes/Annotations",
    
    "relUrl": "/JavaNotes/Annotations"
  },"9": {
    "doc": "Annotations",
    "title": "Annotations",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Web ![SpringBootWebAnnotations.png](..%2Fassets%2Fimages%2FSpringBootWebAnnotations.png) # Security ![img.png](../assets/images/SpringSecurityAnnotations.png) ",
    "url": "/SpringNotes/Annotations",
    
    "relUrl": "/SpringNotes/Annotations"
  },"10": {
    "doc": "Annotations",
    "title": "Annotations",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Quick Snippets ## Generate UUID identity ```java @Id @Column(columnDefinition = \"BINARY(16)\") @GeneratedValue(generator = \"system-uuid\", strategy = GenerationType.IDENTITY) @GenericGenerator(name = \"system-uuid\", strategy = \"org.hibernate.id.UUIDGenerator\") public class MyObject { //code } ``` # Key Annotations | **Annotation** | **Definition** |------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------| `@Inject` | Used for dependency injection to indicate where Micronaut should inject dependencies (like `@Autowired` in Spring). | `@Singleton` | Defines a class as a singleton bean, ensuring only one instance is created and used throughout the application. | `@Introspected` | Optimizes a class for reflection by generating metadata at compile time for GraalVM or serialization use. | `@Controller` | Marks a class as an HTTP controller, responsible for handling HTTP requests and responses in a REST API. | `@Get`, `@Post`, `@Put`, `@Delete` | HTTP method-specific annotations to map requests to specific controller methods for handling HTTP GET, POST, PUT, or DELETE requests. | `@Client` | Used to define a declarative HTTP client interface for making HTTP requests to external services or other applications. | `@Requires` | Specifies that a bean should only be loaded if certain conditions (e.g., presence of a configuration or environment variable) are met. | `@ConfigurationProperties` | Maps external configuration properties (e.g., from `application.yml`) to a POJO. | `@Value` | Injects a specific value from the application configuration (e.g., `application.yml`) into a field or method parameter. | `@Validated` | Enables method-level validation using JSR-380 Bean Validation API (Hibernate Validator). | `@NotNull`, `@Min`, `@Max` | Common validation annotations used in conjunction with `@Validated` for validating method parameters and properties. | `@QueryValue` | Used in a controller to bind query parameters in HTTP requests to method arguments. | `@PathVariable` | Binds URI path variables to method parameters in controllers. | `@Body` | Binds the body of an HTTP request to a method argument in a controller, typically used for POST and PUT requests. | `@Error` | Handles exceptions globally or locally within a controller, providing custom error responses. | `@Cacheable` | Caches the result of a method call to improve performance. | `@Scheduled` | Schedules the execution of a method at a fixed rate, useful for periodic tasks like cron jobs. | `@Filter` | Defines an HTTP filter to intercept and modify requests and responses for cross-cutting concerns (e.g., logging, authentication). | `@Retryable` | Enables automatic retries for methods that fail due to transient issues (e.g., network errors). | `@Secured` | Applies security rules to restrict access to methods or controllers based on roles or authorities. | `@Primary` | Marks a bean as the primary candidate for dependency injection when multiple beans of the same type exist. | `@EventListener` | Listens for specific events and executes the annotated method when the event is published. | `@Header` | Allows you to bind HTTP headers in controllers or clients to method arguments. | `@CircuitBreaker` | Applies a circuit breaker pattern to a method to handle failures gracefully by limiting requests and preventing cascading failures. | `@Factory` | Defines a factory class for producing custom beans. | `@Prototype` | Defines a bean with a prototype scope, creating a new instance each time it is injected. | `@Configuration` | Marks a class as a configuration class, allowing it to provide application-specific beans or configurations. | `@Transactional` | Defines a method or class as transactional, ensuring that database operations are wrapped in a transaction. | `@Trace` | Enables distributed tracing for methods, allowing the application to track request flow across multiple services. | `@Fallback` | Defines a fallback method that gets invoked when a `@Retryable` or `@CircuitBreaker` operation fails. | `@Requires(property)` | Ensures that a bean is only loaded if the specified configuration property is present. | # Core ## [io.micronaut.core.annotation](https://docs.micronaut.io/latest/api/index.html?io/micronaut/core/annotation/package-summary.html) | Blocking | A marker annotation for methods that are blocking. |--------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------| Creator | An annotation applicable to a constructor that provides a hint as to which constructor is the primary constructor. | EntryPoint | EntryPoint is a meta-annotation used on other annotations to indicate that the annotated element is an entry point into the framework from the outside. | Experimental | Annotates a class or method as being experimental and subject to change or removal. | Generated | A marker annotation for methods that are generated though an annotation processor. | Indexed | An annotation that can be used on types where there may be many implementations of a particular interface. | Indexes | Allows Indexed to be repeatable. | InstantiatedMember | An annotation that can be used on another annotation member that returns a class to indicate that the value of the annotation should be populated as an instance of the specified class. | Internal | Annotates a class or method regarded as internal and not for public consumption. | Introspected | An annotation that indicates a type should produce a BeanIntrospection at compilation time. | Introspected.IndexedAnnotation | Allow pre-computed indexes for property lookups based on an annotation and a member. | NonBlocking | A marker annotation for methods that are non-blocking. | NonNull | A common annotation to declare that annotated elements cannot be null. | Nullable | A common annotation to declare that annotated elements can be null under some circumstance. | Order | Annotation for objects that are ordered. | ReflectiveAccess | Descriptive annotation that can be used to declare a field, method, constructor and types for reflective access. | TypeHint | The type hint annotation is a general annotation that can be used on interfaces to provide additional information about types used at runtime. | UsedByGeneratedCode | A marker annotation indicating that a method is used by generated code and should not be modified or removed otherwise a binary compatibility problem will be introduced. | ## [Data](https://micronaut-projects.github.io/micronaut-data/latest/guide/) ## [io.micronaut.data.annotation](https://micronaut-projects.github.io/micronaut-data/1.0.x/api/io/micronaut/data/annotation/package-summary.html) | Annotation Type | Description |-------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------| AutoPopulated | Meta annotation to identity annotations that are auto-populated by the Micronaut Data. | DataTransformer | Generic version of allowing transformations to be applied when reading or writing data to and from the a database. | DateCreated | Can be applied to date type to indicate the property should be populated when it is first inserted. | DateUpdated | Can be applied to date type to indicate the property should be populated when it was last updated. | Embeddable | Annotation to be used on POJOs that are embeddable in MappedEntity types. | EmbeddedId | Annotation that specifies the embedded ID. | GeneratedValue | Designates a property as a generated value. | Id | Designates a field or method that is annotated with the Id of an entity. | Join | A @Join defines how a join for a particular association path should be generated. | MappedEntity | Designates a class as being persisted. | MappedProperty | Designates a method or field that is mapped as a persistent property. | Query | Defines the query string such as SQL, JPA-QL, Cypher etc that should be executed. | QueryHint | Provides a query hint to the underlying query implementation. | Relation | Annotation used to indicate a field or method is a relation to another type. | Repository | Designates a type of a data repository. | RepositoryConfiguration | Models compilation time configuration for the repository. | Transient | Annotation used to indicate a field or method is transient and not persisted. | TypeDef | Type definitions allow associated existing types with a specify DataType. | TypeRole | A type role indicates a method element in a repository that plays a role in query execution and should not be factored into query calculation but instead made available at runtime using the specified role name. | Version | Designates a field or method that is used to version an entity. | Where | There Where annotation allows augmenting the WHERE statement of generated queries with additional criterion. | *** In the case of using JPA only a subset of annotations is supported including the following: *** - > Basic: `@Table`, `@Id ` ,`@Version`, `@Column`, `@Transient`, `@Enumerated` - > Embedded definition: `@Embedded` `@EmbeddedId` `@Embeddable` - > Relationship mapping: `@OneToMany` `@OneToOne ` `@ManyToOne` `@ManyToMany` - > Join specification: `@JoinTable` `@JoinColumn` - > Type converters: `@Convert` `@Converter` and `AttributeConverter Interface` # Validation ## [javax.validation.constraints](https://docs.jboss.org/hibernate/beanvalidation/spec/2.0/api/javax/validation/constraints/package-summary.html) | Annotation Type | Description |----------------------|------------------------------------------------------------------------------------------------------| AssertFalse | The annotated element must be false. | AssertFalse.List | Defines several AssertFalse annotations on the same element. | AssertTrue | The annotated element must be true. | AssertTrue.List | Defines several AssertTrue annotations on the same element. | DecimalMax | The annotated element must be a number whose value must be lower or equal to the specified maximum. | DecimalMax.List | Defines several DecimalMax annotations on the same element. | DecimalMin | The annotated element must be a number whose value must be higher or equal to the specified minimum. | DecimalMin.List | Defines several DecimalMin annotations on the same element. | Digits | The annotated element must be a number within accepted range. | Digits.List | Defines several Digits annotations on the same element. | Email | The string has to be a well-formed email address. | Email.List | Defines several @Email constraints on the same element. | Future | The annotated element must be an instant, date or time in the future. | Future.List | Defines several Future annotations on the same element. | FutureOrPresent | The annotated element must be an instant, date or time in the present or in the future. | FutureOrPresent.List | Defines several FutureOrPresent annotations on the same element. | Max | The annotated element must be a number whose value must be lower or equal to the specified maximum. | Max.List | Defines several Max annotations on the same element. | Min | The annotated element must be a number whose value must be higher or equal to the specified minimum. | Min.List | Defines several Min annotations on the same element. | Negative | The annotated element must be a strictly negative number (i.e. | Negative.List | Defines several Negative constraints on the same element. | NegativeOrZero | The annotated element must be a negative number or 0. | NegativeOrZero.List | Defines several NegativeOrZero constraints on the same element. | NotBlank | The annotated element must not be null and must contain at least one non-whitespace character. | NotBlank.List | Defines several @NotBlank constraints on the same element. | NotEmpty | The annotated element must not be null nor empty. | NotEmpty.List | Defines several @NotEmpty constraints on the same element. | NotNull | The annotated element must not be null. | NotNull.List | Defines several NotNull annotations on the same element. | Null | The annotated element must be null. | Null.List | Defines several Null annotations on the same element. | Past | The annotated element must be an instant, date or time in the past. | Past.List | Defines several Past annotations on the same element. | PastOrPresent | The annotated element must be an instant, date or time in the past or in the present. | PastOrPresent.List | Defines several PastOrPresent annotations on the same element. | Pattern | The annotated CharSequence must match the specified regular expression. | Pattern.List | Defines several Pattern annotations on the same element. | Positive | The annotated element must be a strictly positive number (i.e. | Positive.List | Defines several Positive constraints on the same element. | PositiveOrZero | The annotated element must be a positive number or 0. | PositiveOrZero.List | Defines several PositiveOrZero constraints on the same element. | Size | The annotated element size must be between the specified boundaries (included). | Size.List | Defines several Size annotations on the same element. | # Hibernate | Annotation | Purpose |--------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------| @Entity | Declares an entity class (a class with its own database table an persistent identity) | @MappedSuperclass | A superclass that declares common persistent fields of its @Entity subclasses | @Embeddable or @Embedded | Declare an embeddable class (a class without its own persistent identity or database table) | @Inheritance | Defines how inheritance hierarchies should be mapped to database tables | @Id | Specifies that a field of an entity holds the persistent identity of the entity, and maps to the primary key of its table | @IdClass | Specifies a class representing the composite primary key of the entity (for entities with multiple @Id fields) | @EmbeddedId | Specifies that a field of an entity holds its composite primary key represented as an @Embeddable class | @GeneratedValue | Specifies that an identifier is a system-generated surrogate key | @Version | Specifies that a field of an entity holds a version number used for optimistic locking | @Enumerated | Maps a field holding an enum | @ManyToOne | Declares a many-to-one association to a second entity | @OneToOne | Declares a one-to-one association to a second entity | @OneToMany | Declares a one-to-many association to a second entity | @Table | Specifies a mapping to a database table | @SecondaryTable | Specifies a mapping to a second database table | @Column | Specifies a mapping to a database column | @JoinColumn | Specifies a mapping to a database foreign key | @Cache | Enables second-level caching for an entity | @Formula | Maps field to SQL expression instead of a column | @CreationTimestamp, @UpdateTimestamp | Automatically assign a timestamp to a field | @OptimisticLocking | Enables optimistic locking for entities with no @Version field | @FilterDef and @Filter | Define a Hibernate filter | @FetchProfile | Defines a Hibernate fetch profile | @Generated | Defines a property generated by the database | @ColumnDefault | Specifies a SQL expression used to assign a default value to a column (use in combination with @Generated(INSERT)) | @GenericGenerator | Selects a custom id generator | @DynamicInsert and @DynamicUpdate | Generate SQL dynamically with only needed columns (instead of using static SQL generated at startup) | @Fetch | Specifies the fetching mode for an association | @BatchSize | Specifies the batch size for batch fetching an association | @Loader | Specifies a named query used to fetch an entity by id (for example, when find(type, id) is called) in place of the default SQL generated by Hibernate | @SqlInsert, @SqlUpdate, @SqlDelete | Specify custom DML for entity operations | @NaturalId | Marks a field or fields as an alternative \"natural\" identifier (unique key) of the entity | @Nationalized | Use nchar, nvarchar, or nclob selectively for one particular column. | @Immutable | Specifies that an entity or collection is immutable | @SortNatural or @SortComparator | Maps a SortedSet or SortedMap | @Check | Declares a SQL check constraint to be added to DDL | # Lombok Needs to be above micronaut annotations on classpath in gradle ```gradle annotationProcessor 'org.projectlombok:lombok:1.18.24' ``` For lombok to recognize micronaut annotations and inject into constructor > create `lombok.config` at `root`, insert line: ``` lombok.copyableannotations += io.micronaut.core.annotation.Nullable ``` ",
    "url": "/Micronotes/Annotations",
    
    "relUrl": "/Micronotes/Annotations"
  },"11": {
    "doc": "AppleScripts",
    "title": "AppleScripts",
    "content": "{: .text-delta } 1. TOC {:toc} --- # QuickScripts ## Hold Key for 2 Seconds ```shell repeat 100 times tell application \"System Events\" key down {command} key down \"w\" delay (random number from 0.5 to 3) key up \"w\" key down \"s\" delay (random number from 3 to 4) key up \"s\" key up {command} end tell end repeat ``` ## Move Mouse ```shell (*tell application \"System Events\" key code 83 delay 1 key code 88 delay 1 key up 88 end tell*) ``` ## using key codes and \"normal\" AppleScripting to select the Music library and then put focus on the Search field: ```shell tell application \"iTunes\" activate -- select the Music library reveal (some playlist whose special kind is Music) end tell tell application \"System Events\" -- bring focus to Search box - Command-Option-F key code 3 using {command down, option down} end tell ``` ### A similar version that searches using a string in the clipboard: ```shell tell application \"iTunes\" activate reveal (some playlist whose special kind is Music) end tell tell application \"System Events\" -- bring focus to Search box - Command-Option-F key code 3 using {command down, option down} -- paste the clipboard - Command-V key code 9 using command down end tell ``` ## Select all tracks in the selected playlist and make a new \"untitled\" playlist from them: ```shell tell application \"iTunes\" activate end tell tell application \"System Events\" -- select all tracks - Command-A key code 0 using command down --new playlist from selection- Command-Shift-N key code 45 using {command down, shift down} end tell ``` ## select all tracks of front playlist - Command-A ```shell tell application \"System Events\" tell application \"iTunes\" to activate key code 0 using command down end tell ``` ## toggle browse mode - Command-B ```shell tell application \"System Events\" tell application \"iTunes\" to activate key code 11 using command down end tell ``` ## copy selection (or whatever) - Command-C ```shell tell application \"System Events\" tell application \"iTunes\" to activate key code 8 using command down end tell ``` ## toggle Right Sidebar - Shift-Command-G ```shell tell application \"System Events\" tell application \"iTunes\" to activate key code 5 using {command down, shift down} end tell ``` ## Get Info for selected track(s) - Command-I ```shell tell application \"System Events\" tell application \"iTunes\" to activate key code 34 using command down end tell ``` ## open View options window - Command-J ```shell tell application \"System Events\" tell application \"iTunes\" to activate key code 38 using command down end tell ``` ## select current track - Command-L ```shell tell application \"System Events\" tell application \"iTunes\" to activate key code 37 using command down end tell ``` ## Show File of selected - Shift-Command-R ```shell tell application \"System Events\" tell application \"iTunes\" to activate key code 15 using {command down, shift down} end tell ``` ## toggle Zoom of Main Browser - Control-Command-Z ```shell tell application \"System Events\" tell application \"iTunes\" to activate key code 6 using {command down, control down} end tell ``` ## Close a window with \"Cancel\" - Escape key ```shell tell application \"System Events\" tell application \"iTunes\" to activate key code 53 end tell ``` ## Delete the selected playlist from your Source list without confirming that you want to delete it - Command-Delete ```shell tell application \"System Events\" tell application \"iTunes\" to activate key code 51 using command down end tell ``` ### Delete the selected playlist and all the songs it contains from your library > OR ### Delete the selected song from your library and all playlists ### Option-Delete ```shell tell application \"System Events\" tell application \"iTunes\" to activate key code 51 using option down end tell ``` ### Select the search field - Command-Option-F ```shell tell application \"System Events\" tell application \"iTunes\" to activate key code 3 using {command down, option down} -- and optionally, paste the clipboard - Command-V -- key code 9 using command down end tell ``` ## playlist and folder ### new playlist - Command-N ```shell tell application \"System Events\" tell application \"iTunes\" to activate key code 45 using {command down, shift down} end tell ``` ### new playlist from selection - Command-Shift-N ```shell tell application \"System Events\" tell application \"iTunes\" to activate key code 45 using {command down, shift down} end tell ``` ### new Smart Playlist - Command-Option-N ```shell tell application \"System Events\" tell application \"iTunes\" to activate key code 45 using {command down, option down} end tell ``` ### new Playlist Folder - Command-Option-Shift-N ```shell tell application \"System Events\" tell application \"iTunes\" to activate key code 45 using {command down, option down, shift down} end tell ``` ## toggle Show/Hide Main Browser window - Command-1 ```shell tell application \"System Events\" tell application \"iTunes\" to activate key code 18 using command down end tell ``` ## toggle Show/Hide Equalizer window - Command-2 ```shell tell application \"System Events\" tell application \"iTunes\" to activate key code 19 using command down end tell ``` --- # System Events, Key Code and Keystroke ## Setting Up System Preferences In order for the \"System Events\" application to use the key code or keystroke commands, you have to enable the macOS accessibility frameworks in System Preferences. Mavericks and later. Access must now be set on a per-app basis. See this Apple support document for details. Pre-OS X 10.9/Mavericks operating systems: Click on the \"Accessibility\" pane (formerly \"Universal Access\") in \"System Preferences\". At the bottom left of the pane is a checkbox setting called \"Enable access for assistive devices\". Click on the checkbox so the setting is enabled. Close out of System Preferences. ## AppleScript Implementation \"System Events\" will send a key code or a keystroke to the frontmost application. So, you have to make sure that iTunes is frontmost—activate it, in AppleScript parlance. Here's an example script that should be self-explanatory. It will select the currently playing iTunes track using the keystroke command: ```shell tell application \"iTunes\" activate if player state is not stopped then tell application \"System Events\" to keystroke \"l\" using command down end if end tell ``` > I have emulated a key press for \"Command-L\" (the script makes sure iTunes is not stopped first) by providing the lowercase \"l\", the key you would > press for the actual menu command. The using parameter tells the keystroke command to include a key press of the Command key. Here's the same action > using the key code command: ```shell tell application \"iTunes\" activate if player state is not stopped then tell application \"System Events\" to key code 37 using command down end if end tell ``` > In the example above the number 37 refers to the key \"l\"—lowercase. As with the keystroke command, the using parameter tells the key code command to > include a key press of the Command key. ### You can include multiple helper keys by setting the using parameter to a list. The following scripts each open the iTunes Store in the iTunes browser (Command-Shift-H), first with a keystroke command and then with the key code command. Note the list (stuff in {} brackets) following using: ```shell tell application \"System Events\" tell application \"iTunes\" to activate keystroke \"h\" using {command down, shift down} end tell ``` ```shell tell application \"System Events\" tell application \"iTunes\" to activate key code 4 using {command down, shift down} end tell ``` > The number 4 refers to the key \"h\". (For more info on how to construct a keystroke or key code command, check out the \"System Events\" sdef via > AppleScript Editor's Window > Library.) --- # KeyCodes ## How to Get Key Codes Using the keystroke command is fairly straight forward: just use the key's character as a string. To get the key code number for a key press, [Get KeyCodes Util ](https://manytricks.com/keycodes/) ## SendKeys > From the AppleScript System Events dictionary: `key code integer or list of integer : The key code(s) to be sent. May be a list.` `[using command down/‌control down/‌option down/‌shift down or list of command down/‌control down/‌option down/‌shift down] : modifiers with which the key codes are to be entered` `keystroke text : The keystrokes to be sent.` `[using as above]` - Some examples illustrating their use: ```shell tell application \"System Events\" key code 124 using {shift down, command down} --> Right arrow key code 8 using command down --> ⌘-C key code {4, 14, 37, 37, 31, 47} --> H, e, l, l, o, . keystroke \"v\" using command down --> ⌘-V keystroke \"Hello.\" --> H, e, l, l, o, . end tell ``` (Note: I stylised ⌘-C and ⌘-V with their uppercase representations, but these indicate Cmd+C or V, respectively, without use of the Shift key.) `keystroke can also accept the AppleScript constants tab, space return, and quote.` `The target is always the application window that has focus, so it’s important to set the focus to the desired application before issuing these commands (e.g. tell application \"Finder\" to activate).` ## Move Mouse With Key Codes Now, there is not a direct command in applescript to control the mouse but there is a way to emulate keystrokes. Universal Access allows you to use the number pad in place of a mouse By enabling universal accessibility we can use key strokes to move the mouse. To enable universal accessibility: 1. open up your system preferences, and go to “Universal Access.” 2. go to “Mouse & Trackpad.” 3. turn on Mouse Keys. Mouse keys allow you to use the number pad of the keyboard in place of a mouse. Numpad 5 is click, and the surrounding numbers correspond to direction (2 down, 6 right, 3 down-right, and so on) Once Mouse Keys are enabled, in applescript we can say `tell application \"System Events\" to key code ##` with `##` being replaced with the corresponding integer value of the key code and it will move the cursor roughly 1 pixel in that direction. # References ## [Complete List Of KeyCodes](https://eastmanreference.com/complete-list-of-applescript-key-codes) ## [Mouse Movement Codes](https://support.apple.com/guide/mac-help/control-the-pointer-using-mouse-keys-mh27469/mac) ",
    "url": "/MacNotes/AppleScripts",
    
    "relUrl": "/MacNotes/AppleScripts"
  },"12": {
    "doc": "AppsForWorkflow",
    "title": "AppsForWorkflow",
    "content": "{: .text-delta } 1. TOC {:toc} --- - # [GitHub Desktop](https://desktop.github.com/) - # [GitHub CLI](https://github.com/cli/cli#installation) - # [GitLab CLI](https://gitlab.com/gitlab-org/cli) - ## [gitlab cli Docs ](https://docs.gitlab.com/ee/integration/glab/) - # [1Password](https://1password.com/) - # [ Docker Desktop](https://www.docker.com/products/docker-desktop/) - # [Display Link ](https://www.synaptics.com/products/displaylink-graphics/downloads/macos) > Drivers, for DisplayLink HDMI to 4k (using 3rd monitor) - # [Obsidian](https://help.obsidian.md/Home) - ## Plugins - ### [GitHub Publisher](https://obsidian-publisher.netlify.app/plugin/#github-publisher) - ### [Obsidian Git](https://publish.obsidian.md/git-doc/Start+here) - ### [Obsidian TOC](https://github.com/hipstersmoothie/obsidian-plugin-toc#obsidian-plugin-toc) - # [Zeal Documentation Browser](https://zealdocs.org/download.html#windows) > offline documentation browser --- --- # For Mac - ## [Rectangle](https://rectangleapp.com/) - ## [Cheat Sheet](https://cheatsheet-mac.en.softonic.com/mac) - ## [Mission Control Plus](https://www.fadel.io/missioncontrolplus) - ## [Amphetamine](https://apps.apple.com/us/app/amphetamine/id937984704?mt=12) - ## [BetterDisplay](https://github.com/waydabber/BetterDisplay#readme) - ## [Monitor Control](https://github.com/MonitorControl/MonitorControl#readme) - ## [HomeBrew](https://brew.sh/) - ### Install ```shell /bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh) ``` --- --- # For Windows - ## [WSL](https://learn.microsoft.com/en-us/windows/wsl/install-on-server) - ## [Powertoys](https://learn.microsoft.com/en-us/windows/powertoys/install) - ## [Ubuntu Subsystem](https://learn.microsoft.com/en-us/windows/wsl/install-manual#downloading-distributions) ### Install - #### powershell - ##### download Ubuntu ```powershell Invoke-WebRequest -Uri https://aka.ms/wsl-ubuntu-1604 -OutFile Ubuntu.zip -UseBasicParsing ``` - ##### extract the file ```powershell Expand-Archive ./Ubuntu.zip ./Ubuntu ``` - ##### set path ```powershell $userenv = [System.Environment]::GetEnvironmentVariable(\"Path\", \"User\") [System.Environment]::SetEnvironmentVariable(\"PATH\", $userenv + $(Get-Location).Path + \"\\Ubuntu\", \"User\") ``` - ##### install WSL ```powershell Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux ``` - > Now that everything is in place, please restart the server. After the restart, open up `Powershell` again and run `Ubuntu`. You will be asked to create a new `UNIX` user ```powershell cd Ubuntu ubuntu1604.exe ``` - > Now you can upgrade to the latest version of Ubuntu by this script: ```powershell sudo apt-get update sudo apt-get upgrade ``` ",
    "url": "/GitHubPages/AppsForWorkflow",
    
    "relUrl": "/GitHubPages/AppsForWorkflow"
  },"13": {
    "doc": "Array-Loop-List-Map",
    "title": "Array-Loop-List-Map",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Array ```groovy Int[] arr = [1, 2, 3] ``` # To loop ```groovy 20.times { print } ``` ```groovy 1.upto(10) { num -> println } ``` ```groovy 10.downto(1) ``` ```groovy 0.step(1, 0.1) ``` # List ```groovy Def list = [1, 2, 3] ``` ```groovy List.size ``` ```groovy list Better remove all removes list from list also ```groovy list.removeall(list2) ``` ```groovy userAuthList -= grantedAuthListToRemove ``` ```groovy List.minus ``` ```groovy List - [object] ``` ```groovy List.pop //remove last item ``` ```groovy List.Getat(0..3) // range ``` ```groovy List.clear ``` ```groovy For(x in list) { print x } ``` _**The result is a flattened single List of objects:**_ from [[1,2], 1, 2] to [1,2,1,2] ```groovy List.flatten //for //lists in lists ``` ```groovy List.unique ``` ```groovy List.each { print it } ``` _**creates list of tuples**_ [element, index](element,%20index.md#) ```groovy arr.withIndex().findIndexOf { element, index -> isEven(element) } ``` # map ```groovy arr.indexed().findIndexOf { e -> fn(e.value, e.key) } ``` ```groovy List.find { it == 2 } ``` ```groovy List.findAll { it >= 2 } ``` Finding and getting a specific value ```groovy user.dam = damList.find { it.userId == user.id }.damName ``` join() _**iterates over each element, concatenating every element with the character given as the input parameter.**_ ```groovy List.join(' ') ``` _**Using negative numbers starts on the right, this will get the last number**_ ```groovy list[-1] ``` _**runs list in reverse closuer**_ ```groovy list.reverseEach {} ``` ```groovy list.eachWithIndex {} ``` _**returns list in reverse in place**_ ```groovy list.reverse(true) ``` _**The collect() method, like each(), invokes the closure for each element of the**_ _**collection. However, it collects the return value from the closure into a collection and finally returns that resulting collection**_ ```groovy list.collect { it * 2 } ``` ```groovy Mylist.sum() ``` _**Will drop first 3 elements, does not change array**_ ```groovy List.drop(3) ``` _**Returns boolean**_ _**Modifies this collection so that it retains only its elements that are matched according to the specified closure condition. In other words, removes from this collection all of its elements that don't match.**_ ```groovy List.retainAll {} ``` _**Opposite of retain**_ ```groovy List.removeAll {} ``` ```groovy Mylist.inject { variable, element -> variable + element.size() } ``` _**// With the inject method we 'inject' the**_ _**// first value of the result, and then for**_ _**// each item the result is increased and**_ _**// returned for the next iteration.**_ def sum = (1..4).inject(0) { result, i -> result + i } ```groovy assert 10 == sum ``` _**Merges two lists**_ _**Modifies in place**_ ```groovy Mylist.addall(secondlist) ``` _**Gets similar elements**_ ```groovy Mylist.intersect ``` _**Tests if there are common elements, if not returns true**_ ```groovy Mylist.disjoint ``` _**Checks if any element meets condition return Boolean**_ ```groovy list.any() ``` _**checks if every element meets condition returns Boolean**_ _**fyi - groovy every closure will return true if empty list, even though condition is not met**_ ```groovy list.every() ``` _**use condition and mutate return**_ ```groovy println Employee.list().findResults { it.salary > 25000 ? (firstName + ' ' + lastName) : null } ``` _** transform items from a collection into a collection. The resulting collection is then flattened into a single collection**_ ```groovy list.collectMany { [it, it.toUpperCase()] } ``` _**is a method on any Iterable to split or partition its elements into a sub-list of a certain size**_ ```groovy List.collate(size) ``` _**The result is a map where the key is the grouping condition and the value contains the elements of the Collection type belonging to the key**_ ```groovy list.groupBy {} ``` _**Groovy collectEntries iterates over a collection and return a Map based on the manipulations**_ _**Groovy collectEntries iterates over a collection and return a Map based on the manipulations**_ ```groovy List.collectEntries {} ``` > example using groupBy and collectEntries ```groovy savedUserResponses.groupBy { it.fitGuideType }.collectEntries { [it.key, it.value.collectEntries { [('Q' + it.questionNumber.toString()): it.rating] }] } ``` _**-list of strings to long**_ ```groovy sharedGroupIds?.collect { Long.valueOf(it) } ``` ## paginate or split list substring(beginning index, ending index) ### Paginate ```groovy response.sort { it.groupName }.subList(Math.min(5 as Integer, 21), Math.min((5 as Integer) + (10 as Integer), 21)) ``` ### pagination server side with Paged List Holder Object- ```groovy def queryResults = userDataService.searchForUsersWhereNameOrEmailLike(searchString) def pages = new PagedListHolder(queryResults) //set current page number pages.setPage(params.off) // set the size of page pages.setPageSize(params.max) ``` # Maps ```groovy Def map = [key: value] ``` ```groovy Map.put(key, value) ``` ```groovy Map[yourKey] = yourValue ``` ```groovy Map.'yourKey ' = yourValue ``` ```groovy Map value.size() > 3 } ``` _**find and return value**_ ```groovy mymap.find { it.key == \"likes\" }?.value ``` ```groovy Map.each { key, value -> println \" $key and $value \" } ``` _**Checks if any element meets condition return Boolean**_ Map.any() ```groovy Map.every() //checks //if //every element meets condition returns Boolean ``` ```groovy Map.remove('key') //removes object in place ``` ```groovy Map.minus([key: value]) //removes map values ``` _**Returns the value to which the specified key is mapped, or defaultValue if this map contains no mapping for the key.**_ ```groovy Map.getOrDefault() ``` > params is a Map, so you can use ```groovy params.containsKey(keyYourWanting) ``` ```groovy map.subMap() ``` ### change a key in a map ```groovy List keys = new ArrayList(runMap.keySet( )) ``` ```groovy keys.each { key -> if (testMap.get(key)) { runMap.put(\"${testMap[key]}\", runMap.remove(key)) } } ``` ## HQL create map ```groovy static List getGroupsByUser(Long userId, Long clientSetupId, def offset = 0, def max = 0, String orderBy = 'ug.name', String orderByDirection = 'asc') { def query = \"\"\" select new Map(ug.id as id, ug.name as name, ug.interviewModelId as interviewModelId, im.name as assessmentName, im.sourceId as sourceId, im.source as source, im.subType as subType, ug.visibility as visibility, ugs.id is not null as shared , ug.lastUpdated as lastUpdated , COUNT(ugao.id) as assessmentCount) from UserGroup ug LEFT JOIN UserGroupAssessmentOrder ugao ON ug.id= ugao.userGroupId LEFT JOIN ug.userGroupShare ugs ON ug.id = ugs.userGroupId and ugs.revoked = false LEFT JOIN InterviewModel im ON im.id = ug.interviewModelId where ug.userId = :userId and ug.type = :type and ug.clientSetupId = :clientSetupId GROUP BY ug.id order by @orderBy@ @orderByDirection@\"\"\" def modifiedQuery = query.replaceAll('@orderBy@', orderBy).replaceAll('@orderByDirection@', orderByDirection) findAll(modifiedQuery, [userId: userId, type: UserGroupType.RESULTGROUP, clientSetupId: clientSetupId], [offset: offset, max: max, cache: true]) } ``` ## Map with closure example ```groovy shareResultsList = results.findAll { result -> def catalogDetailProperties = [enableTalentCard : result?.enableTalentCard, externalPredictionReceive: result?.externalPredictionReceive, internalPredictionReceive: result?.internalPredictionReceive, profileReceive: result?.profileReceive] def isValid = isValidTalentCardRecipient(catalogDetailProperties, result?.assessmentPurpose) isValid == true }.collect { result -> [resultId: result?.resultId, firstName: result?.firstName, lastName: result?.lastName, email: result?.email] } ``` ## Get MAP index using keys hashmaps do not have an order ```groovy Object[] keys = map.keySet().toArray() ``` ```groovy map.get(keys[i]) ``` ## Multiput ```groovy LinkedHashMap.metaClass.multiPut delegate[key] = delegate[key] ?: []; delegate[key] += value } def myMap = [:] myMap.multiPut(\"a\", \"1\") myMap.multiPut(\"a\", \"2\") myMap.multiPut(\"a\", \"3\") myMap.each { key, list -> println \"${key} -> ${value.list(\", \")}\" } ``` ",
    "url": "/GroovyNotes/Array-Loop-List-Map",
    
    "relUrl": "/GroovyNotes/Array-Loop-List-Map"
  },"14": {
    "doc": "Async_Parallel-Concurrency",
    "title": "Async_Parallel-Concurrency",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Example Using GPARS - [Compare Groups](https://gist.github.com/14paxton/b7ff93091f4db71beffb0a37140fa0f2) - [Load Requested Group](https://gist.github.com/14paxton/ef4f6e91fa7fa44015c41f26a1caf3ae) # ASYNC ```groovy def resendRegistrationEmailAndLockUserAccount(def userList) { def emailsSent = [] def emailsNotSent = [] def nThreads = Runtime.getRuntime().availableProcessors() def size = (userList.size() / nThreads).intValue() def promises = [] withPool nThreads, { userList.collate(size).each { subList -> def promise = task { subList.each { userInstance -> User.withTransaction { def auth0Response = sendRegistrationEmail(userInstance) if (auth0Response.type == \"success\") { emailsSent << userInstance.email userInstance.inAdminResetProcess = true userInstance.save(flush: true) userInstance.setActive(true) } else { emailsNotSent << userInstance.email } } } } promises.add(promise) } waitAll(promises) } return [\"emailsSent\": emailsSent, \"emailsNotSent\": emailsNotSent] } ``` ",
    "url": "/GroovyNotes/Async_Parallel-Concurrency",
    
    "relUrl": "/GroovyNotes/Async_Parallel-Concurrency"
  },"15": {
    "doc": "Basics",
    "title": "Basics",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Path for ubuntu for windows ``` C:\\\\Users\\\\bpaxton\\\\AppData\\\\Local\\\\Packages\\\\CanonicalGroupLimited.UbuntuonWindows_79rhkp1fndgsc\\LocalState\\\\rootfs ``` # Basic Docker Concepts and Terms ## **Docker Image:** > A lightweight, stand-alone, executable package **that** includes everything needed **to** run a piece **of** software. ## **Docker Container:** > A runtime instance of a Docker image. ## **Docker Hub:** > A cloud-based registry service where Docker users **and** partners create, test, store, **and** distribute container images. ## **Dockerfile:** > A text document that contains all the commands a user could call on the command line **to** assemble an image. ## **Docker Compose:** > A tool **for** defining **and** running multi-container Docker applications. # Basic Docker Commands ## version: Display Docker version. ```shell docker --version ``` ## Display system-wide information. ```shell docker info ``` ## mage: Run a Docker container from an image. ```shell docker run ``` ## List running Docker containers. ```shell docker ps ``` ## List all Docker containers. ```shell docker ps a ``` ## Stop a running container. ```shell docker stop container_id ``` ## Remove a Docker container. ```shell docker rm container_id ``` ## List Docker images. ```shell docker images ``` ## Remove a Docker image. ```shell docker rm image_id ``` ## Pull an image from a Docker registry (Docker Hub by default). ```shell docker pull ``` ## Push an image to a Docker registry. ```shell docker push ``` ## Execute a command in a running container. ```shell docker exec ``` ## Fetch the logs of a container. ```shell docker logs ``` ## Starts one or more stopped containers. ```shell docker start ``` ## Stops one or more running containers. ```shell docker stop ``` ## Build an image from a Dockerfile. ```shell docker build ``` ## Pull an image or a repository from a registry. ```shell docker pull ``` ## Push an image or a repository to a registry. ```shell docker push ``` ## Exports a container's filesystem as a tar archive. ```shell docker export ``` ## Runs a command in a run-time container. ```shell docker exec ``` ## Searches the Docker Hub for images. ```shell docker search ``` ## Attaches to a running container. ```shell docker attach ``` ## Creates a new image from a container's changes. ```shell docker commit ``` # Intermediate Docker Commands ## Run a Docker container in detached mode. ```shell docker run -d image: ``` ## Map a port from the host to a container. ```shell docker run -p host_port:container_port image ``` ## Mount a volume from the host to a container. ```shell docker run -v host_volume:container_volume image ``` ## Set environment variables in a container. ```shell docker run -e VAR=VALUE image ``` ## Return low-level information on Docker objects. ```shell docker inspect container_id/image_id ``` ## Build a Docker image with a tag from a Dockerfile in the current directory. ```shell docker build -t tag . ``` # Dockerfile Commands ## `FROM image` > Set the base image. ## `RUN` > Run a command. ## `CMD` > Set a default command that will run when the container starts. ## `ENV VAR=VALUE` > Set environment variables. ## `ADD source destination` > Copy files from source to the container\\'s filesystem at the destination. ## `COPY source destination` > Copy new files or directories from source and add them to the filesystem of the container at the destination. ## `ENTRYPOINT` > Allow you to configure a container that will run as an executable. ## `LABEL` > Adds metadata to an image. ## `EXPOSE` > Informs Docker that the container listens on the specified network ports at runtime. ## `ENTRYPOINT` > Allows you to configure a container that will run as an executable. ## `VOLUME` > Creates a mount point with the specified name and marks it as holding externally mounted volumes from native host or other containers. ## `USER` > Set the username (or UID) and optionally the user group (or GID) to use when running the image and for any RUN, CMD and ENTRYPOINT instructions that > follow it in the Dockerfile. ## `WORKDIR` > Set the working directory for any RUN, CMD, ENTRYPOINT, COPY, and ADD instructions that follow it in the Dockerfile. ## `ARG` > Define a variable that users can pass at build-time to the builder with the docker build command. ## `ONBUILD` > Adds a trigger instruction when the image is used as the base for another build. # Docker Compose Commands ## Create and start containers. ```shell docker-compose up ``` ## Stop and remove containers, networks, images, and volumes. ```shell docker-compose down ``` ## Build or rebuild services. ```shell docker-compose build ``` ## View output from containers. ```shell docker-compose logs ``` ## Restart services. ```shell docker-compose restart ``` ## Pause services. ```shell docker-compose pause ``` ## Unpause services. ```shell docker-compose unpause ``` ## Start existing containers for a service. ```shell docker-compose start ``` ## Stop running containers without removing them. ```shell docker-compose stop ``` ```shell docker-compose config ``` ## CREATE DOCKER HUB IMAGE ### Docker Push: ```bash docker image push : ``` ### Creating an image for Docker Hub: ```bash docker image tag : ``` ### Set up your environment: ```bash cd docker_images mkdir dockerhub cd dockerhub ``` ### Create the Dockerfile: ```bash vim Dockerfile ``` > Dockerfile contents: ```dockerfile # Create an image for the weather-app using multi-stage build FROM node AS build RUN mkdir -p /var/node/ ADD src/ /var/node/ WORKDIR /var/node RUN npm install FROM node:alpine ARG VERSION=V1.1 LABEL org.label-schema.version=\\$VERSION ENV NODE_ENV=\\\"production\\\" COPY --from=build /var/node /var/node WORKDIR /var/node EXPOSE 3000 ENTRYPOINT \\[\\\"./bin/www\\\"\\] # Git weather-app code: git clone \"https://github.com/linuxacademy/content-weather-app.git\" src # Use the Git commit hash as the image tag: cd src git log -1 --pretty=%H cd ../ ``` ### Build the image: ```shell docker image build -t weather-app: --build-arg VERSION=1.5 . Tag the image before pushing it to Docker Hub: docker image tag linuxacademy/weather-app: weather-app: ``` ### Push the image to Docker Hub: ```shell docker login docker images docker tag stacksimplify/mynginx_image1:v1 stacksimplify/mynginx_image1:v1-release docker push stacksimplify/mynginx_image1:v1-release # Replace your docker hub account Id docker tag /mynginx_image1:v1 /mynginx_image1:v1-release docker push /mynginx_image1:v1-release ``` ### Push the latest image to Docker Hub: ```bash docker login docker image push weather-app:latest ``` # Docker Compose ## INSTALL ### Download the latest version of Docker Compose: ```shell sudo curl -L \\\"https://github.com/docker/compose/releases/download/1.23.2/docker-compose-\\$(uname -s)-\\$(uname -m)\\\" -o /usr/local/bin/docker-compose ``` ### Apply executable permissions: ```shell sudo chmod +x /usr/local/bin/docker-compose ``` ## Test Docker Compose ```shell docker-compose --version ``` ",
    "url": "/DockerNotes/Basics",
    
    "relUrl": "/DockerNotes/Basics"
  },"16": {
    "doc": "Browser",
    "title": "Browser",
    "content": "{: .text-delta } 1. TOC {:toc} --- # [Chromium Docs](https://chromium.googlesource.com/chromium/src/+/master/docs/user_data_dir.md) ## [URIs of interest](chrome://chrome-urls/) ### get profile info ``` chrome://version/ ``` ### get profile settings ``` chrome://profile-internals/ ``` ### flags ``` chrome://flags/ ``` ### url list ``` chrome://chrome-urls/ ``` ``` chrome://about/ ``` ### ? ``` chrome://proximity-auth ``` ### browser apps > paint app that you can use to draw with. ``` https://canvas.apps.chrome ``` > Screen recording app that only works on Chrome OS. Sort of like Windows step recorder. ``` https://screencast.apps.chrome ``` > Note-taking app that can use handwriting. ``` https://cursive.apps.chrome ``` --- # Extensions ## File Locations - Windows XP: - `C:\\Documents and Settings\\%USERNAME%\\Local Settings\\Application Data\\Google\\Chrome\\User Data\\Default\\Extensions\\ ` - Windows 10/8/7/Vista: - `C:\\Users\\%USERNAME%\\AppData\\Local\\Google\\Chrome\\User Data\\Default\\Extensions\\ ` - macOS: - `~/Library/Application Support/Google/Chrome/Default/Extensions/ ` - Linux - `~/.config/google-chrome` The ~/.config portion of the default location can be overridden by $CHROME_CONFIG_HOME (since M61) or by $XDG_CONFIG_HOME. Note that $XDG_CONFIG_HOME affects all applications conforming to the XDG Base Directory Spec, while $CHROME_CONFIG_HOME is specific to Chrome and Chromium. ### Extension ID can be found at `chrome://extensions` (with Developer Mode enabled) Linux: `~/.config/google-chrome/Default/Extensions/ ` Ubuntu: `~/.config/google-chrome/Default/Extensions ` Chrome OS: `/home/chronos/Extensions/ ` You can copy the extension folder and drop it on a USB or in a network drive. To install 1. Open Chrome and go to `chrome://extensions` 2. Make sure Developer Mode is checked. 3. Click Load Unpacked Extension… 4. Find your copied directory and click Open. # [CLI](https://www.chromium.org/developers/how-tos/run-chromium-with-flags/) ## MacOS ### Open Chrome from the terminal ```shell open -a \"Google Chrome\" ``` - #### open a specific URL in Chrome: > This will open the Google homepage in Chrome. ```shell open -a \"Google Chrome\" \"https://www.google.com\" ``` - #### using specified UserProfile ```shell open -a \"Google Chrome\" --args --profile-directory=Default ``` - #### open and create a new profile ```shell open -n -a \"Google Chrome\" --args --user-data-dir=$(mktemp -d) ``` - #### script to run Chrome with given profile, selected by the user-friendly profile name (rather than the profile directory name) ```shell #!/bin/bash -eua profile_name=$1; shift local_state=~/Library/Application\\ Support/Google/Chrome/Local\\ State profile_key=` example usage: ```chrome_profile \"Profile Name\" https://google.com/``` - ##### chrome_profiles_list ```shell or powershell ```powershell Stop-Process chrome ``` ```powershell Get-Process -Name \"chrome\" -ErrorAction SilentlyContinue | kill -PassThru ``` ### runas admin ```winbatch runas /user:administrator \"C:\\Program Files (x86)\\Google\\Chrome\\Application\\Chrome.exe\" ``` ### incognito ```winbatch start chrome /incognito ``` ### at specific site ```winbatch start chrome www..com ``` ## [Run With Switches](https://www.chromium.org/developers/how-tos/run-chromium-with-flags/) ### Exit any running-instance of Chrome. 1. Right-click on your \"Chrome\" shortcut. 2. Choose properties. 3. At the end of your \"Target:\" line adds the command-line switch. For example: `--disable-gpu-vsync ` > With that example flag, it should look like below (replacing `--disable-gpu-vsync` with any other command-line switch you want to use): ```winbatch chrome.exe --disable-gpu-vsync ``` > Launch Chrome like normal with the shortcut. ### [Some Switches ](https://peter.sh/experiments/chromium-command-line-switches/) | Chromium Command | Description |-----------------------------|---------------------------------------------------------------------| --ash-force-desktop | Forces uses of the desktop version of Chrome | --disable-3d-apis | Disables 3D APIs, including WebGL and Pepper 3D | --disable-accelerated-video | Disables GPU accelerated video | --disable-background-mode | Background apps won't continue to run when Chrome exits. | --disable-gpu | Disables hardware acceleration using the GPU | --disable-plugins | Prevents all plugins from running | --disable-plugins-discovery | Disables the discovery of missing plugins | --disable-preconnect | Disables speculative TCP/IP preconnections | --disable-translate | Disables the Google Translate feature | --dns-prefetch-disable | Disable DNS prefetching | --enable-kiosk-mode | Kiosk Mode for Chrome OS | --incognito | Launches Chrome directly in Incognito private browsing mode | --media-cache-size | Disk space used by media cache in bytes | --multi-profiles | Enable multiple profiles in Chrome | --new-profile-management | Enable the new profile management in Chrome | --no-experiments | Run Chrome without experiments set in chrome://flags | --no-pings | No hyperlink auditing pings | --no-referrers | Use Chrome without sending referrers | --purge-memory-button | Add purge memory button to Chrome | --reset-variation-state | Change the field trials that the browser is currently signed up for | --restore-last-session | Restore the last session on run | --ssl-version-min | Specify the minimum SSL version accepted | --start-maximized | Starts the Chrome window maximized. | --window-position | Specify the initial window position using --window-position=x,y | --window-size | Specify the initial window size using --window-size=x,y | --- # Resources - [List Of CLI switches](https://www.ghacks.net/2013/10/06/list-useful-google-chrome-command-line-switches/) - [Browser Dev Console Utilities Doc](https://developer.chrome.com/docs/devtools/console/utilities/#debug-function) - [Developer Tools Documentation](https://developer.chrome.com/docs/) ",
    "url": "/GoogleNotes/Browser",
    
    "relUrl": "/GoogleNotes/Browser"
  },"17": {
    "doc": "Build",
    "title": "Build",
    "content": " ",
    "url": "/Build/",
    
    "relUrl": "/Build/"
  },"18": {
    "doc": "CDN",
    "title": "CDN",
    "content": "{: .text-delta } 1. TOC {:toc} --- # CDN Fallback ## Load jquery ### inline scripts ```html ``` ```html ``` ### function in head or body ```html ``` - > ### check for existence of function from package and write or append to document or body or head ```html ``` ",
    "url": "/JavaScript/CDN",
    
    "relUrl": "/JavaScript/CDN"
  },"19": {
    "doc": "CLI",
    "title": "CLI",
    "content": "{: .text-delta } 1. TOC {:toc} --- # [Docs](https://learn.microsoft.com/en-us/dotnet/core/tools/) # [Environment Variables](https://learn.microsoft.com/en-us/dotnet/core/tools/dotnet-environment-variables#net-sdk-and-cli-environment-variables) # [Install](https://learn.microsoft.com/en-us/dotnet/core/tools/dotnet-install-script) ## Windows PowerShell ```powershell Invoke-WebRequest -Uri https://dot.net/v1/dotnet-install.ps1 -OutFile \"$env:temp/dotnet-install.ps1\"; powershell -executionpolicy bypass \"$env:temp/dotnet-install.ps1\" ``` ## PowerShell Core ```powershell Invoke-WebRequest -Uri https://dot.net/v1/dotnet-install.ps1 -OutFile \"$env:temp/dotnet-install.ps1\"; pwsh \"$env:temp/dotnet-install.ps1\" ``` ## Bash ```shell wget https://dot.net/v1/dotnet-install.sh && chmod +x ./dotnet-install.sh && sudo ./dotnet-install.sh ``` ## Apt ```shell sudo apt update sudo apt install dotnet6 ``` # WinGet ```cmd winget install Microsoft.DotNet.SDK.6 ``` ## Chocolatey ```cmd choco upgrade dotnet-sdk ``` - [Self Updating Plans](https://github.com/dotnet/sdk/issues/23700) - [Chocolatey .Net Packages](https://community.chocolatey.org/packages/dotnet-sdk/) # [Update](https://learn.microsoft.com/en-us/dotnet/core/tools/dotnet-tool-update) ## Upgrade CLI templates ### Checking for Updates > Check if there are updates available for the template packs that are currently installed. Available since .NET Core 3.0 SDK. ```cmd dotnet new --update-check ``` ### Applying Updates > Check if there are updates available for the template packs that are currently installed and installs them. Available since .NET Core 3.0 SDK. ```cmd dotnet new --update-apply ``` # Linux ## ARM64 ### dotnet tool ```shell dotnet tool install --arch arm64 ``` ## File Locations ``` /usr/local/share/dotnet /etc/dotnet ~/.dotnet ``` Anything below 3.1.415 and 5.0.403 is not supported on M1 hardware (because it installs into the wrong location). As per the issues referenced above, the recommended action is to: - Completely clear the entire /usr/local/share/dotnet - Install the latest versions only (which should install into the correct locations) ## Environment Variables ### For Framework dependent apps , x64 , ARCH > I DON'T KNOW IF THIS HELPS, ENV SHOULD BE SET AUTOMATICALLY WHEN INSTALLING,USE CAUTION > set in `~/.zshenv` ```shell export DOTNET_ROOT_ARM64=/usr/local/share/dotnet export DOTNET_ROOT_X64=/usr/local/share/dotnet/x64 ``` # Run ```shell dotnet run --urls=https://localhost:5101 ``` # HttpRepl # Create ```shell dotnet new webapi -controllers -f net8.0.101 ``` # Run ```shell dotnet run --urls=https://localhost:5101 ``` # HttpRepl ```shell ::install dotnet tool install -g Microsoft.dotnet-httprepl; ::set path to tools export PATH=\"$PATH:/Users/bp/.dotnet/tools\"; ::test web api httprepl http://localhost:5001 ``` ## Set text editor for POST ```shell pref set editor.command.default \"/Applications/Visual Studio Code.app/Contents/Resources/app/bin/code\" ``` > set default args ```shell pref set editor.command.default.arguments \"--disable-extensions --new-window\" ``` ## list and select controllers ```shell ls ``` ```shell cd [controller] ``` ## POST ```shell post -h Content-Type=application/json ``` ## GET ```shell get Order ``` > return ```json [ { \"date\": \"2024-05-14\", \"summary\": \"order3\" }, { \"date\": \"2024-05-15\", \"summary\": \"order5\" }, { \"date\": \"2024-05-16\", \"summary\": \"order4\" }, { \"date\": \"2024-05-17\", \"summary\": \"order4\" }, { \"date\": \"2024-05-18\", \"summary\": \"order5\" } ] ``` # Entity Framework ## install ```shell dotnet add package Microsoft.EntityFrameworkCore.Sqlite; dotnet add package Microsoft.EntityFrameworkCore.Design; dotnet tool install --global dotnet-ef; ``` ## create db tables > in Program.cs add ```csharp using RestfulOrderAPI.Data; /// builder.Services.AddSqlite(\"Data Source=RestfulOrderAPI.db\"); ``` > initial migrations ```csharp dotnet ef migrations add InitialCreate --context OrderContext ``` ## apply create ```shell dotnet ef database update --context OrderContext ``` ## revisions ```shell dotnet ef migrations add ModelRevisions --context OrderContext ``` ## update ```shell dotnet ef database update --context OrderContext ``` ## Build scafolding ```shell dotnet ef dbcontext scaffold \"Data Source=./Promotions/Promotions.db\" Microsoft.EntityFrameworkCore.Sqlite --context-dir ./Data --output-dir .\\Models ``` The preceding command: - Scaffolds a DbContext and model classes using the provided connection string. - Specify the Microsoft.EntityFrameworkCore.Sqlite database provider should be used. - Specify directories for the resulting DbContext and model classes. # Resources - ## [dotnet 6 and ubuntu](https://devblogs.microsoft.com/dotnet/dotnet-6-is-now-in-ubuntu-2204/) - ### [Ubuntu Packages](https://packages.ubuntu.com/search?suite=default&section=all&arch=any&keywords=dotnet&searchon=names) ## - [Build Web API Tutorial](https://learn.microsoft.com/en-us/training/modules/build-web-api-aspnet-core/6-exercise-add-controller) ## - [ASP.net Core](https://dotnet.microsoft.com/en-us/apps/aspnet) ",
    "url": "/DotNetNotes/CLI",
    
    "relUrl": "/DotNetNotes/CLI"
  },"20": {
    "doc": "CLI",
    "title": "CLI",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Configure ## sign in ```shell aws configure AWS Access Key ID [None]: AKIAIOSFODNN7EXAMPLE AWS Secret Access Key [None]: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY Default region name [None]: us-west-2 Default output format [None]: json ``` # Lambda ## List Lambdas ```shell aws lambda list-functions ``` ## Update Code #### Update Code ```shell aws lambda update-function-code --function-name GraalVM-Mail --zip-file fileb://./build/libs/micromail-0.1-optimized-lambda.zip ``` # Database > some scripts use `jq` for parsing JSON > [jq](https://stedolan.github.io/jq/) ## get db instances ```shell aws rds describe-db-instances \\ --filters \"Name=engine,Values=mysql\" \\ --query \"*[].[DBInstanceIdentifier,Endpoint.Address,Endpoint.Port,MasterUsername]\" ``` > configure ```shell aws configure ``` ## create mysql db instance ```shell aws rds create-db-instance \\ --db-instance-identifier crud-data-aws-db-create-micro-person \\ --db-instance-class db.t2.micro \\ --engine mysql \\ --master-username admin \\ --master-user-password secret99 \\ --allocated-storage 20 \\ --publicly-accessible \\ # --db-subnet-group-name crud-data-aws-db-create-micro-person-sng \\ # --vpc-security-group-ids $SG_ID \\ ``` ### wait for instance ```shell aws rds wait db-instance-available --db-instance-identifier crud-data-aws-db-create-micro-person ``` ### stop aws instance ```shell aws rds delete-db-instance --db-instance-identifier crud-data-aws-db-create-micro-person --skip-final-snapshot aws rds wait db-instance-deleted --db-instance-identifier crud-data-aws-db-create-micro-person ``` # create IAM user ```shell aws iam create-group --group-name Administrators aws iam create-user --user-name Administrator aws iam add-user-to-group --user-name Administrator --group-name Administrators aws iam attach-group-policy --group-name Administrators --policy-arn $(aws iam list-policies --query 'Policies[?PolicyName==`AdministratorAccess`].{ARN:Arn}' --output text) aws iam create-access-key --user-name Administrator ``` # Create VPC, security group, subnets and subnet group (optional) with jq ```shell # VPC, internet gateway and route table export VPC_ID=$(aws ec2 create-vpc --cidr-block 10.0.0.0/16 | jq -r '.Vpc.VpcId') export IG_ID=$(aws ec2 create-internet-gateway | jq -r '.InternetGateway.InternetGatewayId') aws ec2 attach-internet-gateway --internet-gateway-id $IG_ID --vpc-id $VPC_ID aws ec2 modify-vpc-attribute --enable-dns-hostnames --vpc-id $VPC_ID export RT_ID=$(aws ec2 describe-route-tables --filters \"Name=vpc-id,Values=$VPC_ID\" --query \"RouteTables[].RouteTableId\" --output text) aws ec2 create-route --route-table-id $RT_ID --destination-cidr-block 0.0.0.0/0 --gateway-id $IG_ID # Security group aws ec2 create-security-group --group-name crud-data-aws-db-create-micro-person-sg --description \"Security Group for the Micronaut MySQL guide\" --vpc-id $VPC_ID export SG_ID=$(aws ec2 describe-security-groups --query 'SecurityGroups[?GroupName==`crud-data-aws-db-create-micro-person-sg`].GroupId' --output text) aws ec2 authorize-security-group-ingress --group-id $SG_ID --protocol tcp --port 3306 --cidr $(curl ifconfig.me)/32 # Subnets and subnet group export AZ_0=$(aws ec2 describe-availability-zones --filters \"Name=state,Values=available\" --query \"AvailabilityZones[0].ZoneName\" --output text) export AZ_1=$(aws ec2 describe-availability-zones --filters \"Name=state,Values=available\" --query \"AvailabilityZones[1].ZoneName\" --output text) export SN0_ID=$(aws ec2 create-subnet --vpc-id $VPC_ID --cidr-block 10.0.0.0/20 --availability-zone $AZ_0 | jq -r '.Subnet.SubnetId') export SN1_ID=$(aws ec2 create-subnet --vpc-id $VPC_ID --cidr-block 10.0.16.0/20 --availability-zone $AZ_1 | jq -r '.Subnet.SubnetId') aws ec2 modify-subnet-attribute --subnet-id $SN0_ID --map-public-ip-on-launch aws ec2 modify-subnet-attribute --subnet-id $SN1_ID --map-public-ip-on-launch aws rds create-db-subnet-group --db-subnet-group-name crud-data-aws-db-create-micro-person-sng --db-subnet-group-description \"DB subnet group for the Micronaut MySQL guide\" --subnet-ids \"$SN0_ID\" \"$SN1_ID\" ``` # remove security ec2 instances ```shell aws ec2 delete-subnet --subnet-id $SN0_ID aws ec2 delete-subnet --subnet-id $SN1_ID aws rds delete-db-subnet-group --db-subnet-group-name crud-data-aws-db-create-micro-person-sng aws ec2 delete-security-group --group-id $SG_ID aws ec2 detach-internet-gateway --internet-gateway-id $IG_ID --vpc-id $VPC_ID aws ec2 delete-internet-gateway --internet-gateway-id $IG_ID aws ec2 delete-vpc --vpc-id $VPC_ID ``` ",
    "url": "/AWS/CLI",
    
    "relUrl": "/AWS/CLI"
  },"21": {
    "doc": "CLI_Gradlew",
    "title": "CLI_Gradlew",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Run App ## Run with jvm debug ``` bash ./gradlew bootRun --debug-jvm --full-stacktrace --daemon ``` # Testing ## run with spaces in method name ``` bash ./gradlew test --tests \"com.talentbank.core.UserServiceAPISearchSpec.search for name Dick with clientSetupIds\" ``` ## run jvm debug ``` bash ./gradlew test --debug-jvm --tests \"com.talentbank.tbex.SelfServiceIntegration.SelfServiceIntegrationControllerSpec.test_rest_no_request_object\" --full-stacktrace ``` ## Set system properties ``` bash ./gradlew -Dsample.message=cool run ``` ",
    "url": "/PersonalGrailsNotes/CLI_Gradlew",
    
    "relUrl": "/PersonalGrailsNotes/CLI_Gradlew"
  },"22": {
    "doc": "CLI_Grailsw",
    "title": "CLI_Grailsw",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Grails Command Line | Grails Command | Gradle Task | . | clean . | clean . | . | compile . | classes . | . | package . | assemble . | . | run-app . | bootRun . | . | test-app . | check . | . | test-app --unit . | test . | . | test-app --integration . | integrationTest . | . | war . | assemble . | . ## Set System Props ``` bash ./grailsw run-app -Dsample.message=cool ``` ## Testing ``` bash ./grailsw test-app 'com.talentbank.core.UserServiceAPISearchSpec.manager_query*' -unit ``` # Liquibase > [Liquibase grails > plugin](//grails-plugins.github.io/grails-database-migration/3.0.x/index.html) ## clear liquibase checksums ``` bash ./grailsw dbm-clear-checksum ``` ## clear liquibase locks ``` bash grails dbm-release-locks ``` ## ignore checksums in liquibase > add to xml or groovy > > ``` groovy > validCheckSum 'any' > ``` ",
    "url": "/PersonalGrailsNotes/CLI_Grailsw",
    
    "relUrl": "/PersonalGrailsNotes/CLI_Grailsw"
  },"23": {
    "doc": "CMD",
    "title": "CMD",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Common Commands - ```bat echo ``` > This parameter will allow you to view your working script in the command prompt. > This parameter is useful for viewing your working code. > If any issues arise from the batch file, you will be able to view the issues associated with your script using the echo function. > Adding the following off to this parameter will allow you to quickly close your script after it has finished. --- --- - ```bat cls ``` > Clear your command prompt, best used when extraneous code can make what you're accessing had to find. --- --- - ```bat rem ``` > Shorthand for remark provides the same functionality as ` statements are not entered into your code. > Instead, they are used to explain and give information regarding the code --- --- - ```bat %%a ``` > Each file in the folder. --- --- - ```bat (\".\\\") ``` > The root folder. > When using the command prompt, one must direct the prompt to a particular directory before changing a file name, deleting a file, and so on. > With batch files, you only need to > paste your `BAT` file into the directory of your choosing. --- --- - ```bat pause ``` > Allows a break in the logical chain of your `BAT` file. > This allows for users to read over command lines before proceeding with the code. > The phrase \"Press any key to continue...\" will denote a > pause. --- --- - ```bat start \"[website]\" ``` > Will head to a website of your choice using your default web browser. --- --- - ```bat ipconfig ``` > This is a classic command prompt parameter that releases information concerning network information. This information includes `MAC` addresses, `IP` addresses, and `sub-net masks`. --- --- - ```bat ping ``` > Pings an `IP` address, sending data packets through server routes to gauge their location and latency (response time). --- --- - ```bat net use ``` > Connects a computer to or disconnects a computer from a shared resource, or displays information about computer connections. The command also controls persistent net connections. Used without > parameters, net use retrieves a list of network connections. - > [Microsoft Docs]() --- --- # XCopy > `/y` Suppresses prompting to confirm that you want to overwrite an existing destination file. > `/q` Suppresses the display of xcopy messages. > `/s` Copies directories and subdirectories, unless they are empty. > If you omit /s, xcopy works within a single directory. > `/i` If a source is a directory or contains wildcards and destination does not exist, xcopy assumes destination specifies a directory name and > creates a new directory. > Then, xcopy copies all specified files into the new directory. > By default, xcopy prompts you to specify whether the destination is a file or a directory. > `/r` Copies read-only files. > `/c` Ignores errors. > `/e` Copies all subdirectories, even if they are empty. > Use /e with the /s and /t command-line options. > `/h` Copies files with hidden and system file attributes. > By default, xcopy does not copy hidden or system files > `/j` Copies files without buffering. > Recommended for huge files. > This parameter was added in Windows Server 2008 R2. ## Personal Use Example ```winbatch cd \"C:\\Users\\%USERNAME%\\source\\repos\\GitHub\\Veridian\"; git pull ::xcopy \"C:\\Users\\%USERNAME%\\source\\repos\\GitHub\\Veridian\\Google\\Default\\*\" \"C:\\Users\\%USERNAME%\\AppData\\Local\\Google\\Chrome\\User Data\\Default\\\"/y /q /s /i /r xcopy \"C:\\Users\\%USERNAME%\\source\\repos\\GitHub\\Veridian\\Google\\Default\" \"C:\\Users\\%USERNAME%\\AppData\\Local\\Google\\Chrome\\User Data\\Default\"/y /q /s /i /r /c /e /j ``` # Quick Scripts ## run msi for only current user > From an elevated process call to perform an advertisement. This blesses the package. ```bat msiexec /jm foo.msi ``` > From a standard user process call and this will start the installation off as the user but elevate seamlessly as needed. ```bat msiexec /I foo.msi REBOOT=R /qb ``` ## Check time ```bat echo %date% %time% & tzutil /g ``` > output ```text Central Standard Time ``` ## Force delete ```bat RMDIR /S /Q ``` ## Change TimeZone ### check timezone ```bat tzutil /g ``` ### list timezones ```bat tzutil /l ``` ### set timezone ```bat tzutil /s ``` ## Create a symbolic link ```bat mklink /D \\\"E:\\\\Path\\\\newFolder\\\" \\\"F:\\\\folderIwantToLinkFrom\\\" ``` ## Get WIFI password ```bat netsh wlan show profile ALLO1D67CF_5G key=clear ``` ## power managment ### Power saver ```bat powercfg -duplicatescheme a1841308-3541-4fab-bc81-f71556f20b4a ``` ### Balanced ```bat powercfg -duplicatescheme 381b4222-f694-41f0-9685-ff5bb260df2e ``` ### High Performance ```bat powercfg -duplicatescheme 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c ``` ### Ultimate Performance (available since Windows 10 April 2018 Update) ```bat powercfg -duplicatescheme e9a42b02-d5df-448d-aa00-03f14749eb61 ``` ",
    "url": "/Windows_Notes/CMD",
    
    "relUrl": "/Windows_Notes/CMD"
  },"24": {
    "doc": "CSS",
    "title": "CSS",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Modify CSS ## Style attribute ### Hide Element ```javascript element.style.display = \"block\"; // Show element.style.display = \"inline\"; // Show element.style.visibility = \"visible\"; // Show element.style.display = \"inline-block\"; // Show element.style.display = \"none\"; // Hide element.style.visibility = \"hidden\"; // Hide element.style.opacity = 0; // Hide // hide element.style.zIndex = -1; ``` ## [classList](https://developer.mozilla.org/en-US/docs/Web/API/Element/classList) ```javascript const div = document.createElement(\"div\"); div.className = \"foo\"; // our starting state: console.log(div.outerHTML); // use the classList API to remove and add classes div.classList.remove(\"foo\"); div.classList.add(\"anotherclass\"); // console.log(div.outerHTML); // if visible is set remove it, otherwise add it div.classList.toggle(\"visible\"); // add/remove visible, depending on test conditional, i less than 10 div.classList.toggle(\"visible\", i # [RGB to HEX](https://css-tricks.com/converting-color-spaces-in-javascript/ ) ```javascript function RGBToHex(rgb) { let sep = rgb.indexOf(\",\") > -1 ? \",\" : \" \"; rgb = rgb.substr(4).split(\")\")[0].split(sep); // Convert %s to 0–255 for (let R in rgb) { let r = rgb[R]; if (r.indexOf(\"%\") > -1) rgb[R] = Math.round((r.substr(0, r.length - 1) / 100) * 255); /* Example: 75% -> 191 75/100 = 0.75, * 255 = 191.25 -> 191 */ } } ``` # Create a Style element / modify css style sheets ## insert into document head ```javascript generateRulesAll(tableRef.current).then((css) => { const styleElement = document.createElement(\"style\"); styleElement.innerText = css; iframeRef?.current.contentWindow.document.head.appendChild(styleElement); }); ``` ## Append new stylesheet to current stylesheets > [CSSStyleSheet](https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleSheet) > [AdoptedStyleSheets ](https://developer.mozilla.org/en-US/docs/Web/API/Document/adoptedStyleSheets) > > > The adoptedStyleSheets property of the Document interface is used for setting an array of constructed stylesheets to be used by the document. > > > > > [ShadowRoot AdoptedStyleSheets](https://developer.mozilla.org/en-US/docs/Web/API/ShadowRoot/adoptedStyleSheets) ```javascript const extraSheet = new CSSStyleSheet(); extraSheet.insertRule(\"p { color: green; }\"); // Combine the existing sheets and new one document.adoptedStyleSheets = [...document.adoptedStyleSheets, extraSheet]; ``` ",
    "url": "/JavaScript/CSS",
    
    "relUrl": "/JavaScript/CSS"
  },"25": {
    "doc": "CSS",
    "title": "External CSS Example",
    "content": "In the external stylesheet, the div is styled to have a background color, text color, border, and padding. ``` # [Pseudo-classes / JS Events / Styles](https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-classes) > A CSS pseudo-class is a keyword added to a selector that specifies a special state of the selected element(s). For example, the pseudo-class :hover > can be used to select a button when a user's > pointer hovers over the button and this selected button can then be styled. ## [Hover](https://developer.mozilla.org/en-US/docs/Web/CSS/:hover) ```css a:hover { background-color: gold; } /* Any button over which the user's pointer is hovering */ button:hover { color: blue; } #myID:hover { transform: scale(2); } ``` ### [Any Hover / any-hover / ](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/any-hover) ```css @media (any-hover: hover) { a:hover { background: yellow; } } ``` # Hide Element Display:none - Dynamic Pages/Sections: use this generally for larger dynamic areas on the page to avoid leaving an awkward blank area that makes the page look bad. When displayed it will move the other parts of the page and render itself in the page where its designed to be, altering the position and flow of the surrounding page elements as needed/designed. Visibility:hidden - Static Pages/Sections: use this for smaller pieces where having the surrounding elements move when this piece becomes visible is undesirable, i.e.: showing/hiding a badge in a page section. Using display:none could/would force itself into the section of the page and move its surrounding elements to make room for itself, resulting in movement on the page. Using visibility:hidden in that case would hide/show the \"badge\" element without any movement of the rest of the surrounding page elements as that space had been \"preserved/reserved\" for it, therefore, it just \"turns it on/off\" without any visible movement. ```css html { display: none; /*(don't show, but still hold the space)*/ visibility: hidden; opacity: 0; width: 0; height: 0; } ``` > opacity and z index to hide ```css .yourElement { z-index: -99999; /* this make sure the element go behind everything */ opacity: 0; /* reduce opacity */ } ``` > invisible, but with absolute positioning off the left of the screen: ```css #yourelement { visibility: hidden; position: absolute; left: -1000px; width: 1px; height: 1px; overflow: hidden; } ``` > make element transparent ```css #invisible { background: transparent; color: transparent; border: none; } ``` # [CSS Display Syntax](https://developer.mozilla.org/en-US/docs/Web/CSS/display) ## Display CSS Property ```css html { /* precomposed values */ display: block; display: inline; display: inline-block; display: flex; display: inline-flex; display: grid; display: inline-grid; display: flow-root; /* box generation */ display: none; display: contents; /* multi-keyword syntax */ display: block flow; display: inline flow; display: inline flow-root; display: block flex; display: inline flex; display: block grid; display: inline grid; display: block flow-root; /* other values */ display: table; display: table-row; /* all table elements have an equivalent CSS display value */ display: list-item; /* Global values */ display: inherit; display: initial; display: revert; display: revert-layer; display: unset; } ``` ## [Visibility CSS Property](https://developer.mozilla.org/en-US/docs/Web/CSS/content-visibility) The content-visibility CSS property controls whether or not an element renders its contents at all, along with forcing a strong set of containments, allowing user agents to potentially omit large swathes of layout and rendering work until it becomes needed. It enables the user agent to skip an element's rendering work (including layout and painting) until it is needed — which makes the initial page load much faster. ```css html { /* Keyword values */ visibility: visible; visibility: hidden; visibility: collapse; /* Global values */ visibility: inherit; visibility: initial; visibility: revert; visibility: revert-layer; visibility: unset; } ``` ## Content Visibility CSS Property ```css html { /* Keyword values */ content-visibility: visible; content-visibility: hidden; content-visibility: auto; /* Global values */ content-visibility: inherit; content-visibility: initial; content-visibility: revert; content-visibility: revert-layer; content-visibility: unset; } ``` # Selectors ![cssSelectors.png](..%2Fassets%2Fimages%2FcssSelectors.png) # Tricks ",
    "url": "/HTML&CSS/CSS",
    
    "relUrl": "/HTML&CSS/CSS"
  },"26": {
    "doc": "CSS",
    "title": "CSS",
    "content": "{: .text-delta } 1. TOC {:toc} # Adding to HTML ## Inline ```html Inline CSS Example . Thanks to inline CSS, I can change the color of a word in a paragraph. ``` ## Internal ```html . Internal CSS Example . The default text color for the page is black. However I can change the color of every paragraph element on the page using internal CSS. Using internal CSS, I only need to write one rule set to change the color of every paragraph elemnet. With inline CSS, I'd have to add a style attribute to every single paragraph in my HTML. ``` ## External ```css div { background-color: #eaf0f6; color: #33475b; border: 3px solid #00a4bd; padding: 5px; } ``` ```html | . ",
    "url": "/HTML&CSS/CSS",
    
    "relUrl": "/HTML&CSS/CSS"
  },"27": {
    "doc": "CSharp",
    "title": "CSharp",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Quick tips ## Create Unique Ids [library](https://github.com/RobThree/IdGen) [generators](https://github.com/pbolduc/FlakeGen/tree/master/src/FlakeGen) --- > GUID is 128 bit (16 bytes) data. To convert GUID to integer without data loss, we cannot use Int32 or Int64. > .NET 4.0 introduced BigInteger struct which is 128 bit integer. And GUID can be easily converted to BigInteger as follows. ```csharp using System; using System.Numerics; class Program { static void Main(string[] args) { // ex: 8a847645-8cac-422c-962a-fdf3aa220065 Guid g = Guid.NewGuid(); // Convert GUID to BigInteger // ex: 134252730720501571475137903438348973637 BigInteger bigInt = new BigInteger(g.ToByteArray()); } } ``` --- ```csharp Guid = Guid.NewGuid() ``` --- ```csharp var id64Generator = new Id64Generator(); public string generateID(string sourceUrl) { return string.Format(\"{0}_{1}\", sourceUrl, id64Generator.GenerateId()); } // node 0 var id64Generator = new Id64Generator(0); // node 1 var id64Generator = new Id64Generator(1); // ... node 10 var id64Generator = new Id64Generator(10); ``` --- ```csharp internal static class CorrelationIdGenerator { // Base32 encoding - in ascii sort order for easy text based sorting private static readonly char[] s_encode32Chars = \"0123456789ABCDEFGHIJKLMNOPQRSTUV\".ToCharArray(); // Seed the _lastConnectionId for this application instance with // the number of 100-nanosecond intervals that have elapsed since 12:00:00 midnight, January 1, 0001 // for a roughly increasing _lastId over restarts private static long _lastId = DateTime.UtcNow.Ticks; public static string GetNextId() => GenerateId(Interlocked.Increment(ref _lastId)); private static string GenerateId(long id) { return string.Create(13, id, (buffer, value) => { char[] encode32Chars = s_encode32Chars; buffer[12] = encode32Chars[value & 31]; buffer[11] = encode32Chars[(value >> 5) & 31]; buffer[10] = encode32Chars[(value >> 10) & 31]; buffer[9] = encode32Chars[(value >> 15) & 31]; buffer[8] = encode32Chars[(value >> 20) & 31]; buffer[7] = encode32Chars[(value >> 25) & 31]; buffer[6] = encode32Chars[(value >> 30) & 31]; buffer[5] = encode32Chars[(value >> 35) & 31]; buffer[4] = encode32Chars[(value >> 40) & 31]; buffer[3] = encode32Chars[(value >> 45) & 31]; buffer[2] = encode32Chars[(value >> 50) & 31]; buffer[1] = encode32Chars[(value >> 55) & 31]; buffer[0] = encode32Chars[(value >> 60) & 31]; }); } } ``` --- # Looping ## foreach with index ```csharp foreach ((string msg, int index) in messageStringList.Select((msg, index) => (msg, index))) { if (!msg.Contains(\"https:\")) continue; interactionResponse.output.content.Add(await BuildResponseWithLinks(msg, index, messageStringList)); } ``` --- # Dictionary ## get properties and values of object ```csharp Dictionary customParams = visitor .GetType() .GetProperties(BindingFlags.Instance | BindingFlags.Public) .ToDictionary(keySelector: prop => prop.Name, elementSelector: prop => prop.GetValue(visitor, index: null)); ``` --- # String ## split ```csharp string[] separatingStrings = { \"https://\" }; string[] words = msg.Split(separatingStrings, System.StringSplitOptions.RemoveEmptyEntries); ``` ## Regex ```csharp Regex urlPattern = new Regex(@\"(?:(?<=\\\\n|\\n|\\s\\w*)https:\\/\\/.*?(?<=\\s|$))\", RegexOptions.Compiled | RegexOptions.IgnorePatternWhitespace | RegexOptions.IgnoreCase); MatchCollection matches = urlPattern.Matches(message); foreach (Match match in matches) { Console.WriteLine(message.Substring(match.Index, match.Length)); } ``` ```csharp string mystring = \"Here are some linked FAQs that might answer that: \\nhttps://dev.veridiancu.org/faq/8107/what-is-an-hsa-health-savings-account and here this \\nhttps://dev.veridiancu.org/faq/8108/how-do-i-qualify-for-a-health-savings-account and here this \\nhttps://dev.veridiancu.org/faq/8106/can-i-open-a-cd-on-my-hsa\"; System.Text.RegularExpressions.Regex urlPattern = new System.Text.RegularExpressions.Regex(@\"(?:(?:\\\\n|\\n|\\s\\w*)https:\\/\\/.*?(?:\\s|$))\", System.Text.RegularExpressions.RegexOptions.Compiled | System.Text.RegularExpressions.RegexOptions.IgnorePatternWhitespace | System.Text.RegularExpressions.RegexOptions.IgnoreCase); System.Text.RegularExpressions.MatchCollection matches = urlPattern.Matches( msg); string[] stringArray = urlPattern.Split(msg); string result = urlPattern.Replace(mystring, delegate(System.Text.RegularExpressions.Match m) { System.Text.RegularExpressions.Match urlMatch = System.Text.RegularExpressions.Regex.Match(m.Value, @\" (https:\\/\\/)(.*?)(\\s|$)\"); return $\"~{urlMatch.Value}~\"; }); var nn = result.Split('~'); ``` --- # Stream ```csharp using System; using System.Threading.Tasks; using System.Windows; using System.IO; namespace WpfApplication { public partial class MainWindow : Window { public MainWindow() { InitializeComponent(); } private async void Button_Click(object sender, RoutedEventArgs e) { string StartDirectory = @\"c:\\Users\\exampleuser\\start\"; string EndDirectory = @\"c:\\Users\\exampleuser\\end\"; foreach (string filename in Directory.EnumerateFiles(StartDirectory)) { using (FileStream SourceStream = File.Open(filename, FileMode.Open)) { using (FileStream DestinationStream = File.Create(EndDirectory + filename.Substring(filename.LastIndexOf('\\\\')))) { await SourceStream.CopyToAsync(DestinationStream); } } } } } } ``` --- # Text Writer ```csharp using System.IO; namespace ConsoleApplication { class Program4 { static void Main() { WriteCharacters(); } static async void WriteCharacters() { using (StreamWriter writer = File.CreateText(\"newfile.txt\")) { await writer.WriteLineAsync(\"First line of example\"); await writer.WriteLineAsync(\"and second line\"); } } } } ``` --- # File & Directory ```csharp string currentDir = Directory.GetCurrentDirectory(); string path = Path.Combine(new FileInfo(Assembly.GetExecutingAssembly().Location).DirectoryName,\"vcu-chat-bot\"); FileStream stream = new(path, FileMode.Open, FileAccess.Read); ``` ",
    "url": "/DotNetNotes/Csharp",
    
    "relUrl": "/DotNetNotes/Csharp"
  },"28": {
    "doc": "Clever-Algos",
    "title": "Clever-Algos",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Gists ## [AddToCustomFeed.js](https://gist.github.com/14paxton/63944ec7e8bcd0e7ee9b97e3dc6fd48e) ## [FormFillScript.js](https://gist.github.com/14paxton/fedc95a9b660e1625373bea6f92e4648) ## [GetCSSFromElement.js](https://gist.github.com/14paxton/70018ca1b4b990db4fbf4edfd1907af8) ## [JsEnumUnion.js](https://gist.github.com/14paxton/685637fd8c513c7539a10f66b2386cfe) ## [NewDocumentAndWindow.js](https://gist.github.com/14paxton/fb7f33fd6f5fa7a15077b6ebf18fca44) ## [ReadHTMLToNewDocument.js](https://gist.github.com/14paxton/a5a6b17131a2791b757973f866e3eb98) ## [SeeFormChange.js](https://gist.github.com/14paxton/f7f177713ec7e8effcdeec086c22e43a) ## [SendFormWithFileInput.js](https://gist.github.com/14paxton/eeeb29357613698bd877eb35dcf0ad89) ## [groupArrayOfObjectsByKey.js](https://gist.github.com/14paxton/a87f5d47aaf678e89a1dfeffa51b46d9) # Custom Ready / Load / onLoad ```javascript window.addEventListener(\"load\", async function () { const promise = await fetchHTMLFile(pathToHTML); document.querySelector(\"#insertion\").innerHTML = await promise.text(); }, false,); ``` > or ```javascript function ready(fn) { if (document.readyState !== \"loading\") { fn(); } else { document.addEventListener(\"DOMContentLoaded\", fn); } } ready(loadHTML); ``` # Custom Sort Array ```javascript function sortOptions(a, b) { var at = a.textContent, bt = b.textContent; return at > bt ? 1 : at Returns: {(key to group by) : [{(secondary key) : (key to group by)}]} groupArrayOfObjectsByKey # Union / Enum for JS ## java like enum can be used for pointer type function > [resource](https://dev.to/avalander/union-types-with-javascript-4emo) Union Example # Print separate page from current page print pre-defined page # Script to fill form example fill form # Get All CSS for element and children- returns css string > [recursive css](https://gist.github.com/14paxton/70018ca1b4b990db4fbf4edfd1907af8) # embed, inject, or load an HTML file into an HTML document ## fetch and insert html into onload ```javascript const pathToHTML = '/assets/HTMLSnippets/Nav.html'; async function fetchHTMLFile(path) { return await fetch(path); } async function loadHTML() { console.log(navigator.userAgent); if (/(iphone|android|blackberry|webos)/i.test(navigator.userAgent)) { const promise = await fetchHTMLFile(pathToHTML); document.querySelector('#insertion').innerHTML = await promise.text(); } } function ready(fn) { if (document.readyState !== 'loading') { fn(); } else { document.addEventListener('DOMContentLoaded', fn); } } ready(loadHTML); ``` ## load html and css file into html doc ```javascript //************** Add path to files to test **********************// //path to html file you want to use const pathToHTML = \"/Yuma_Regional/yuma_regional_launch.html\"; //path to html file you want to use //path to css file const cssFilePath = \"01Launch_Page_Default_Template.css\"; //path to css file //************** Add path to files to test **********************// const cssLink = document.createElement(\"link\"); cssLink.rel = \"stylesheet\"; cssLink.type = \"text/css\"; cssLink.href = cssFilePath; document.querySelector(\"head\").appendChild(cssLink); window.addEventListener(\"load\", async function () { const promise = await fetchHTMLFile(pathToHTML); const html = await promise.text(); document.querySelector(\"body\").innerHTML = html; }, false,); async function fetchHTMLFile(path) { return await fetch(path); } ``` ## Create a new document and open in a new window using ReadableStream > using readable stream takes html file and inserts it into a current window document > [inject html file into the current window](https://gist.github.com/14paxton/fb7f33fd6f5fa7a15077b6ebf18fca44) # [Add to Reddit Custom Feed](https://gist.github.com/14paxton/63944ec7e8bcd0e7ee9b97e3dc6fd48e) --- # get middle of webpage ```javascript const x = window.innerWidth / 2; const y = window.innerHeight / 2; const eye = document.documentElement; const {left, top, width, height} = eye.getBoundingClientRect(); const centerX = left + width / 2; const centerY = top + height / 2; ``` # run an async await inline ```javascript (async () => { await createDataUrls(clonedTableArray, dimensionsObj, additionalSlides, resolveURLCreation, rejectURL,); })(); ``` # Conditional load scripts included in HTML by manipulating the type attribute ```javascript if (conditional === true) { const cScripts = document.querySelectorAll(\".conditional\"); cScripts.forEach((item) => { const script = document.createElement(\"script\"); const attrs = item.getAttributeNames(); attrs.forEach((attr) => { script.setAttribute(attr, item.getAttribute(attr)); }); script.type = \"text/javascript\"; script.async = false; item.remove(); document.head.appendChild(script); }); } ``` # Currying > Basically, it allows you to transform a function like `f(a, b, c)` into something like `f(a)(b)(c)`. > What that means is that you can split up a function with multiple arguments into a > sequence of functions with one argument each. ```javascript const newUser = function (name, age, skill) { return { name, age, skill, }; }; newUser(\"John\", 27, \"JS\"); ``` - > Now to the curry part: ```javascript const newUser = function (name) { return function (age) { return function (skill) { return { name, age, skill, }; }; }; }; newUser(\"John\")(27)(\"JS\"); ``` - > Add in some arrow functions and voila: ```javascript const newUser = (name) => (age) => (skill) => { name, age, skill; }; ``` > The purpose of all this you might ask? > Think about situations when you don't have the complete data available in the beginning and you still need your function to gradually pass through > your app and receive its arguments step by step as > more and more data is arriving, until you add the final argument and receive the output. ",
    "url": "/JavaScript/Clever-Algos",
    
    "relUrl": "/JavaScript/Clever-Algos"
  },"29": {
    "doc": "Clever-Snippets",
    "title": "Clever-Snippets",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Gists ## [DynamicToolTip.js](https://gist.github.com/14paxton/9c745874ec384add89c1908c73832594) ## [PrintPresetPage.js](https://gist.github.com/14paxton/8bf4b0df10a7c4add52c9d4d2da88879) ## [DynamicInternationalizedComponent.js](https://gist.github.com/14paxton/bd94c13e40f4faa41d65442d015b2a1f) # Print separate page from current page [ print pre-defined page](https://gist.github.com/14paxton/8bf4b0df10a7c4add52c9d4d2da88879) # Working with Canvas to create image [IFrameComponent](https://github.com/14paxton/IFrameComponent/blob/main/CanvasFunctions.js) # Force an Update ```jsx const [, updateState] = React.useState(); const forceUpdate = React.useCallback(() => updateState({}), []); ``` # recursive component example ## template ```jsx const RecursiveWrapper = (props) => { const wrappedChildren = React.Children.map(props.children, (child) => { if (child.props && child.props.children) { return {child.props.children}; } return {\"children: 0\"}; }); return ( {`children: ${wrappedChildren.length}`} {wrappedChildren} ); }; ``` ## use case ```jsx import React, {forwardRef, useCallback, useEffect, useState} from \"react\"; import PropTypes from \"prop-types\"; import {styled} from \"@material-ui/styles\"; const ChildContainer = styled(\"div\")({}); const RecursiveComponent = forwardRef(({parentRefHandler, nodeNameOrIdArray, children, ...rest}, ref) => { const [containerRef, setContainerRef] = useState(null); const [elementMounted, setElementMounted] = useState(); const [elementRef, setElementRef] = useState(null); const [childrenObject, setChildrenObject] = useState({}); //passing callback to ref will set a container reference const setContainer = useCallback((element) => { if (element && !elementRef?.current && (nodeNameOrIdArray.indexOf(elementRef?.current?.nodeName) === -1 || nodeNameOrIdArray.indexOf(elementRef?.current?.nodeName) === -1)) { const innerContainer = element.firstElementChild; innerContainer.id = `RecursiveComponent_Child_Container`; setContainerRef(innerContainer); } }, [children],); //once container ref is set, we know the element has mounted useEffect(() => { if (containerRef) { setElementMounted(true); } }, [containerRef]); //once the element has mounted we need to query the child elements for any ids or element names that were passed in // from the nodeNameOrIdArray prop //if the element is found it will be added to the object with the name in the array // all unspecified children will be put in an array useEffect(() => { if (containerRef && elementMounted === true && containerRef.children) { const children = {unnamedChildren: []}; for (const el of containerRef.children) { let foundElement; nodeNameOrIdArray.forEach((name, index) => { foundElement = el.querySelector(name); if (foundElement) { foundElement.id = `${name}_${index}` ? `${name}_${index}` : `nested_element_id_${index}`; children[name] = foundElement; } }); if (!foundElement) children.unnamedChildren.push(el); } setElementRef(ref); setChildrenObject(children); } }, [elementMounted]); //after seting a reference to the needed element we can run the method/handler that was passed down useEffect(() => { if (parentRefHandler && childrenObject) { parentRefHandler(childrenObject); } }, [childrenObject]); return ( {React.cloneElement(children, rest)} ); },); RecursiveComponent.propTypes = { children: PropTypes.instanceOf(Object), nodeNameOrIdArray: PropTypes.array, }; RecursiveComponent.defaultProps = { nodeNameOrIdArray: [], }; export default RecursiveComponent; ``` # dynamic component ```jsx const WebApp = (props) => { return ( {config.map((componentName) => { componentMapping[componentName]; return ; })} ); }; ``` # Force Load a JS script file ```jsx import React, {useState, useEffect} from \"react\"; import \"./style.css\"; export default function App() { const [user, setUser] = useState(false); const [scriptLoadingState, setScriptLoadingState] = useState(\"IDLE\"); useEffect(() => { if (user) { var script = document.createElement(\"script\"); script.type = \"text/javascript\"; script.src = \"https://www.google-analytics.com/analytics.js\"; script.onload = function () { setScriptLoadingState(\"LOADED\"); }; script.onerror = function () { setScriptLoadingState(\"FAILED\"); }; document.body.appendChild(script); } }, [user]); return ( setUser(true)} style={{width: \"200px\", height: \"30px\", fontSize: \"16px\"}} > Login Script Loading State:{\" \"} {scriptLoadingState} . ); } ``` # hyperlink ```jsx {product.name} ``` > Rather than `` # Creating tags ```jsx Ul > li[(className = \"test\")]; ``` # Access the Dom > [React Docs - Manipulate Dom With Ref](https://react.dev/learn/manipulating-the-dom-with-refs) ```jsx import {useRef} from \"react\"; function MyInput(props) { return ; } export default function MyForm() { const inputRef = useRef(null); function handleClick() { inputRef.current.focus(); } return ( Focus the input ); } ``` > or ```jsx import {useRef} from \"react\"; const ref = useRef(null); const element = ; // ... ref.current; // DOM element ``` - alt ```jsx export default function Component(props) { const nodeRef = useRef(); useEffect(() => { console.log(nodeRef.current); }, []); // Root Node return ; } ``` # Merge Refs > When developing low level UI components, it is common to have to use a local ref but also support an external one using React.forwardRef. > Natively, React does not offer a way to set two refs inside > the ref property. > This is the goal of this small utility. > Today a ref can be a function or an object, tomorrow it could be another thing, who knows. This utility handles compatibility for you. ```jsx import type * as React from \"react\"; export function mergeRefs(refs: Array | React.LegacyRef | undefined | null>): React.RefCallback { return (value) => { refs.forEach((ref) => { if (typeof ref === \"function\") { ref(value); } else if (ref != null) { (ref as React.MutableRefObject ). current = value; } }); }; } ``` - > ## Use Case ```jsx import {mergeRefs} from \"react-merge-refs\"; const Example = React.forwardRef(function Example(props, ref) { const localRef = React.useRef(); return ; }); ``` # Conditional Rendering ```jsx { error && {error}; } ``` # Axios ## Patch() > Used to update one or more properties ```jsx Axios.patch(apiEndpoint + \"/\" + post.id, {title: post.title}); ``` ## Put() > Update all properties ```jsx axios.put(apiEndpoint + \"/\" + post.id, post); ``` ## Interceptors ```jsx axios.interceptors.response.use(success, error); this.props.history.push(\"/\"); ``` # used to navigate ```jsx this.props.history.push(\"/\"); ``` ```jsx localStorage.setItem(\"token\", response.headers[\"x-auth-token\"]); ``` # set local storage and access response header > need to have backend make headers visible> set local storage and access response header, need to have backend make headers visible `.header(\"access-control-expose-headers\", \"x-auth-token\")` # dangerouslySetInnerHTMLset html in a string ```jsx { __html: '' + result?.themeSummary + '. Theme Of Significance. '} } childrenDisplayStyle=\"inline\"> ``` # useEffect() > used after browser repaints DOM > react will prioritize UI ```jsx React.useEffect(() => { // Will be invoked on the initial render // and all subsequent re-renders. }); ``` ```jsx React.useEffect(() => { // Will be invoked on the initial render // and when \"id\" or \"authed\" changes. }, [id, authed]); ``` ```jsx React.useEffect(() => { // Will only be invoked on the initial render }, []); ``` ```jsx React.useEffect(() => { return () => { // invoked right before invoking // the new effect on a re-render AND // right before removing the component // from the DOM }; }); ``` ## check for unmounting ```jsx useEffect(() => { return () => console.log(\"unmounting...\"); }); ``` ## clean on unmounting ```jsx useEffect(() => { let isMounted = true; register(\"interviewModelId\"); fetchInterviewModels().then((data) => { if (isMounted) setAssessmentChoiceList(data); setSelectedInterviewModel(data); }); if (!groupDetails) { register({name: \"assessmentOrderIds\"}, { required: errorMessages.assIdsRequired, validate: (value) => value.length { isMounted = false; }; }, [errorMessages.assIdsRequired, errorMessages.maxGroupMembers, groupDetails, maxGroupMembers, register, setSelectedInterviewModel,]); ``` # Custom hook for form state management > Goal: defining a custom useForm hook for managing the state of our forms. > This can have some initial state, mainly used for precompleting update forms, but can also provide empty form > fields.> Problem: when we want to operate on a precompleted form, altough we pass all the data for our fields, the form is not being precompleted and its fields are empty. ```jsx export default function useForm(initial = {}) { const [inputs, setInputs] = useState(initial); const handleChange = (e) => { let {value, name, type} = e.target; if (type === \"number\") { value = parseInt(value); } if (type === \"file\") { [value] = e.target.files; } setInputs({ ...inputs, [name]: value, }); }; const resetForm = () => { setInputs(initial); }; const clearForm = () => { const blankState = Object.fromEntries(Object.entries(inputs).map(([key, value]) => [key, \"\"]),); setInputs(blankState); }; return { inputs, clearForm, resetForm, handleChange, }; } ``` > This is what happens: 1. We pass an initial state object which is undefined (server-side rendered) until the GQL query loads. 2. This initial object (which is undefined) populates the form fields making them empty. 3. After the query loads, the initial state object is repassed to the useForm hook, but the DOM is not rerendered => a possible solution is to make use of the useEffect() hook for forcing rerendering. 4. We cannot watch for changes directly on the initial object and reassign it using setInputs, because it triggers the useEffect callback once again and again and again when altering its value, causing an infinite loop. 5. The solution is to watch for changes on a string joined by the values of the initial object. When that changes from undefined to the GraphQL query results, the useEffect callback is called and it initializes and rerenders the fields correspondingly. > An example implementation could be: ```javascript const initialValues = Object.values(initial).join(\"\"); useEffect(() => { setInputs(initial); }, [initialValues]); ``` > Now the form precompletion works fine using our custom useForm() hook. ",
    "url": "/ReactNotes/Clever-Snippets",
    
    "relUrl": "/ReactNotes/Clever-Snippets"
  },"30": {
    "doc": "Clever-Tid-bits",
    "title": "Clever-Tid-bits",
    "content": "{: .text-delta } 1. TOC {:toc} --- # JSON object to map ```groovy import com.fasterxml.jackson.databind.ObjectMapper HashMap returnVal = new ObjectMapper().readValue(response.json.toString(), HashMap.class) def slurper = new groovy.json.JsonSlurper() Map result = slurper.parseText(ftpJSONBody) as Map def paramMap = new grails.web.servlet.mvc.GrailsParameterMap(result, request) def cmdObj = new IntegrationCommand(paramMap) as JSON HashMap expected = new ObjectMapper().readValue(cmdObj.toString(), HashMap.class) expected ``` # Switch Statement ## Use class in case ```groovy switch (ug) { case GroupCompare: comparedGroupIds = ((GroupCompare) ug)?.userGroupJoinGroupCompare*.userGroup.id if (!comparedGroupIds || comparedGroupIds?.size() == 0) comparedGroupIds = null comparedAssessmentOrderIds = ((GroupCompare) ug)?.groupAssessmentOrders*.assessmentOrderId break case ResultCompare: comparedGroupIds = ((ResultCompare) ug)?.groupCompareJoinUserGroup?.userGroupId ? [((ResultCompare) ug)?.groupCompareJoinUserGroup?.userGroupId] : null comparedAssessmentOrderIds = ((ResultCompare) ug)?.groupAssessmentOrders*.assessmentOrderId break case UserGroup: DetachedCriteria groupCompareCriteria = findCompareGroupsByGroupCriteria(ug) groupCompareCriteria.projections { property('id') } comparedGroupIds = groupCompareCriteria.list() break default: break } ``` # deconstruct return ## example 1 ```groovy def fetchGroupAndAssessmentIds { var -> def comparedGroupIds, comparedAssessmentOrderIds return [comparedGroupIds, comparedAssessmentOrderIds] } def (comparedGroupIds, comparedAssessmentOrderIds) = fetchGroupAndAssessmentIds(ug) ``` ## example 2 ```groovy def fetchGroupAndAssessmentIds = { var -> def comparedGroupIds, comparedAssessmentOrderIds return [[returnRGList: returnRGList], [unmatchedGroups: unmatchedGroups], [duplicates: duplicates], [requestedAdminGroups: requestedAdminGroups], [originalValueMap: originalValueMap]] } def (roleGroupList, unmatchedGroups, duplicates, requestedAdminGroups, originalValueMap) = fetchGroupAndAssessmentIds(roleGroups) ``` --- # GISTs ## Use Comparator comparator for 2 merged lists ## Re-group and spread map into new map create new map by conditions ## HTTP Builder get binary stream bin stream ## Use HTTP builder to add attachment to an email from an S3 bucket http builder ",
    "url": "/GroovyNotes/Clever-Tid-bits",
    
    "relUrl": "/GroovyNotes/Clever-Tid-bits"
  },"31": {
    "doc": "CleverSnippets",
    "title": "CleverSnippets",
    "content": "{: .text-delta } 1. TOC {:toc} --- # User Domain ## hibernate id is already being used ```groovy class UserGroupShare { Long userGroupId Long userId String email String encryptedId Boolean revoked = Boolean.FALSE Date dateCreated Date lastUpdated static belongsTo = [userGroup: UserGroup] static constraints = { userGroupId unique: 'userId' email nullable: true encryptedId nullable: true } static mapping = { //can keep userGroupId column, and create usergroup parent reference without creating new db column //need to use foreign Key reference to save userGroup insertable: false userGroup updateable: false } } ``` ",
    "url": "/PersonalGrailsNotes/CleverSnippets",
    
    "relUrl": "/PersonalGrailsNotes/CleverSnippets"
  },"32": {
    "doc": "Cloud",
    "title": "Cloud",
    "content": "{: .text-delta } 1. TOC {:toc} *** # [CLI](https://cloud.google.com/sdk/gcloud) # [CheatSheet](https://cloud.google.com/sdk/docs/cheatsheet) # [Properties](https://cloud.google.com/sdk/docs/properties) # [Script Commands](https://cloud.google.com/sdk/docs/scripting-gcloud) ## [Automated Scripting](https://cloud.google.com/blog/products/management-tools/scripting-with-gcloud-a-beginners-guide-to-automating-gcp-tasks) ## QUICK SCRIPTS > > If you want to logout from all the accounts run the following command ```bash gcloud auth revoke --all ``` > If you want to logout from a specific account then run the following command ```bash gcloud auth revoke ``` > If you want to login with a different account, you can run the following command ```bash gcloud auth login ``` *** ```gcloud init``` If you called gcloud auth login, this stores credentials in your user directory on your computer. You may want to delete these credentials by calling: ```gcloud auth revoke``` If you called gcloud auth application-default login, this stores credentials in your user directory on your computer. You may want to delete these credentials by calling: ```gcloud auth application-default revoke``` ## - [List Available Cloud Components](https://cloud.google.com/sdk/gcloud/reference/components/list) ## [Logging](./Logging.md#) *** ### - Permissions ``` gcloud logging commands are controlled by Identity and Access Management (IAM) permissions. To use any of the gcloud logging commands, you must have the serviceusage.services.use permission. You must also have the IAM role that corresponds to the log's location, and to your use case: ``` [Access Control](https://cloud.google.com/logging/docs/access-control) | Use case | IAM role | --------------------------- | --------------------------------- | List logs | Logging/Logs Viewer | Tail logs | Logging/Logs Viewer | Delete logs | Logging/Logging Admin | Write logs | Logging/Logs Writer | Read logs | Logging/Logs Viewer | Read Data Access audit logs | Logging/Private Logs Viewer | List sinks | Logging/Logs Viewer | Create sinks | Logging/Logs Configuration Writer | Update sinks | Logging/Logs Configuration Writer | Delete sinks | Logging/Logs Configuration Writer | List metrics | Logging/Logs Viewer | Create basic metrics | Logging/Logs Configuration Writer | Create advanced metrics | Logging/Logs Configuration Writer | Update metrics | Logging/Logs Configuration Writer | Delete metrics | Logging/Logs Configuration Writer | ---------------------------------------------------------- ## Audits As part of monitoring the health of your contact center, you’ll want to perform routine audits in some key areas: anything that affects efficiency, helps manage costs and the workforce, or helps keep customers happy. Contact center metrics are provided by your telephony partner and can give you important insights. Which ones are important to your business varies by the purpose of the contact center, such as sales versus tech support. Some typical statistics include the following: ● Average Wait Time is the amount of time, on average, that customers have to wait in queue before getting to an agent. The better this number, likely the happier your customers are. ● Abandon Rate is often used with respect to voice interactions but can be used for other channels since the concept is that a customer is waiting in queue to speak with an agent. It reflects the percentage of callers that hung up while queued but before getting to an agent. There are three types of Cloud Logging Audit Logs for Google Cloud projects: ○ Admin Activity: for API calls or other administrative actions that modify the configuration or metadata of resources. ○ Data Access: for API calls that read the configuration or metadata of resources and for user-driven API calls that create, modify, or read user-provided resource data. ○ System Events: for administrative actions that modify the configuration ○ of resources. ■ System Event audit logs are generated by Google systems, not by direct user action. Cloud Audit Logs reside in highly protected storage, resulting in a secure, immutable, and highly durable audit trail. They are encrypted at rest using either AES256 or AES128, which is also used to help protect the rest of Google’s infrastructure. For more information on Google Cloud Audit logs, see the Encryption At Rest and Encryption in Transit whitepapers. The following is a list of common contact center metrics: ● Average Wait Time: The amount of time, on average, that customers have to wait in queue before getting to an agent. A better number usually results in happier customers and lower costs to your business. ● Average Speed of Answer (ASA): Across all agents and interactions, what was the average amount of time it took for a customer to get to an agent? Included in this number is any time they spent in an IVR, in queue, and waiting for an agent to pick up a ringing phone. To calculate ASA, a call center divides the total amount of waiting time by the number of calls they received in a set period. For instance, if there was a total of 20 minutes of waiting time for 10 calls, the ASA would be five minutes (20/10 = 2). A better number usually results in happier customers and lower costs to your business. ● Average After Call Work Time (ACW): The part of your agent’s time after they’ve finished an interaction with a customer but before they are ready in the system to be assigned the next customer interaction. This could be time the agent spends writing up their notes about the previous interaction, but it’s still time they are working and costing your business. ● Average Handle Time: This reflects the average amount of time it takes agents to answer the customer’s contact and end the interaction. This is one of your biggest costs, so you want it to be low, but don’t forget that there’s a balance between this metric and customer retention and satisfaction. ● Cost per contact: This includes all of your costs for running the contact center, including salary, hardware, electricity, and office expenses. It reflects an average of all of that across all customer interactions. This metric broken down by channel can be helpful in determining if one channel is more cost-effective than others. ● Service Level: This metric is often associated with a Service Level Agreement you have with your clients, such as 80% of interactions answered within 20 seconds. It reflects the percentage of interactions that meet the SLA. ● Abandon Rate: Often used with respect to voice interactions, but can be used for other channels. The concept is that a customer is waiting in queue to speak with an agent. It reflects the percentage of callers who hung up while queued but before getting to an agent. ● First Contact Resolution (FCR): Did the customer have to contact you again later to get their needs met? Calculated differently depending on the business, but in general it reflects the percentage of total cases where the customer’s ● need was met during a single contact. ● Agent Occupancy: The amount of time an agent is considered to be working (i.e., not on break, not sitting waiting for the next interaction, etc). ",
    "url": "/GoogleNotes/Cloud",
    
    "relUrl": "/GoogleNotes/Cloud"
  },"33": {
    "doc": "CloudServices",
    "title": "CloudServices",
    "content": "# Cloud Service Comparison ![CloudServiceComparison.jpg](..%2Fassets%2Fimages%2FCloudServiceComparison.jpg) ",
    "url": "/GitHubPages/CloudServices",
    
    "relUrl": "/GitHubPages/CloudServices"
  },"34": {
    "doc": "CommandLineDiddys",
    "title": "CommandLineDiddys",
    "content": "{: .text-delta } 1. TOC {:toc} --- # [JPS](https://docs.oracle.com/en/java/javase/17/docs/specs/man/jps.html) ## list running java processes ```shell jps -lV ``` ## Find java and remove applications you don’t want killed ```bash jps | egrep -v (pgrep idea) ``` ### Find apps running jvm, deliminate by first space, return the field1 (PID), kill all - ```bash for pid in $(jps | egrep -v $(pgrep webstorm) | egrep -v $(pgrep idea)| egrep -v $(pgrep jps) | cut -d' ' -f1); do kill -9 $pid; done ``` # JVM ## Available Options > run the following command ```shell java -X ``` > and you will get a list of all -X options: ```shell -Xmixed mixed mode execution (default) -Xint interpreted mode execution only -Xbootclasspath: set search path for bootstrap classes and resources -Xbootclasspath/a: append to end of bootstrap class path -Xbootclasspath/p: prepend in front of bootstrap class path -Xdiag show additional diagnostic messages -Xnoclassgc disable class garbage collection -Xincgc enable incremental garbage collection -Xloggc: log GC status to a file with time stamps -Xbatch disable background compilation -Xms set initial Java heap size......................... -Xmx set maximum Java heap size......................... -Xss set java thread stack size -Xprof output cpu profiling data -Xfuture enable strictest checks, anticipating future default -Xrs reduce use of OS signals by Java/VM (see documentation) -Xcheck:jni perform additional checks for JNI functions -Xshare:off do not attempt to use shared class data -Xshare:auto use shared class data if possible (default) -Xshare:on require using shared class data, otherwise fail. -XshowSettings show all settings and continue -XshowSettings:all show all settings and continue -XshowSettings:vm show all vm related settings and continue -XshowSettings:properties show all property settings and continue -XshowSettings:locale show all locale related settings and continue ``` ",
    "url": "/JavaNotes/CommandLineDiddys",
    
    "relUrl": "/JavaNotes/CommandLineDiddys"
  },"35": {
    "doc": "ComputeEngine",
    "title": "ComputeEngine",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Compute Engine ## [API](https://cloud.google.com/dotnet/docs/reference/Google.Cloud.Storage.V1/latest) ",
    "url": "/GoogleNotes/ComputeEngine",
    
    "relUrl": "/GoogleNotes/ComputeEngine"
  },"36": {
    "doc": "Conditionals",
    "title": "Conditionals",
    "content": "{: .text-delta } 1. TOC {:toc} --- # use a variable set by a script ```bash act=$(gh auth status -t >>(tee -a) 2>&1 | sed -n 's/.*Token: //p'); if [ \"$act\" == *\"$GH_TOKEN\"* ](%22$act%22%20==%20*%22$GH_TOKEN%22*.md#) then do things fi ``` # Check if File does Not Exist > Similar to many other languages, the test expression can be negated using the ! (exclamation mark) logical not operator: ```bash FILE=/etc/docker if [ ! -f \"$FILE\" ]; then echo \"$FILE does not exist.\" fi ``` > Different syntax: ```bash [ ! -f /etc/docker ] && echo \"$FILE does not exist.\" ``` # Check if Multiple Files Exist > Instead of using complicated nested if/else constructs you can use -a (or && with [[) to test if multiple files exist: ```bash if [ -f /etc/resolv.conf -a -f /etc/hosts ]; then echo \"Both files exist.\" fi ``` > differnt syntax ```bash if [hosts ](-f%20/etc/resolv.conf%20&&%20-f%20/etc/hosts.md#); then echo \"Both files exist.\" fi ``` ## File test operators The test command includes the following FILE operators that allow you to test for particular types of files: ### True if the FILE exists and is a special block file. ```shell -b FILE ``` ### True if the FILE exists and is a special character file. ```shell -c FILE ``` ### True if the FILE exists and is a directory. ```shell -d FILE ``` ### True if the FILE exists and is a file, regardless of type (node, directory, socket, etc.). ```shell -e FILE ``` ### True if the FILE exists and is a regular file (not a directory or device). ```shell -f FILE ``` ### True if the FILE exists and has the same group as the user running the command. ```shell -G FILE ``` ### True if the FILE exists and is a symbolic link. ```shell -h FILE ``` ### True if the FILE exists and has set-group-id (sgid) flag set. ```shell -g FILE ``` ### True if the FILE exists and has a sticky bit flag set. ```shell -k FILE ``` ### True if the FILE exists and is a symbolic link. ```shell -L FILE ``` ### True if the FILE exists and is owned by the user running the command. ```shell -O FILE ``` ### True if the FILE exists and is a pipe. ```shell -p FILE ``` ### True if the FILE exists and is readable. ```shell -r FILE ``` ### True if the FILE exists and is a socket. ```shell -S FILE ``` ### True if the FILE exists and has nonzero size. ```shell -s FILE ``` ### True if the FILE exists, and `set-user-id (suid)` flag is set. ```shell -u FILE ``` ### True if the FILE exists and is writable. ```shell -w FILE ``` ### True if the FILE exists and is executable. ```shell -x FILE ``` --- # Resources - [File Conditionals](https://linuxize.com/post/bash-check-if-file-exists/) ",
    "url": "/Linux/Conditionals",
    
    "relUrl": "/Linux/Conditionals"
  },"37": {
    "doc": "Config",
    "title": "Config",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Config ## Datasource Adding DB connection In application.yml you can add to dataSource above environments to establish connection ```yml dataSource: pooled: true jmxExport: true driverClassName: com.mysql.jdbc.Driver username: root password: 'computer' environments: development: dataSource: dbCreate: update url: jdbc:mysql://localhost:3306/mytest production: dataSource: pooled: true dbCreate: update url: jdbc:mysql://localhost:3306/jobboard driverClassName: com.mysql.jdbc.Driver dialect: org.hibernate.dialect.MySQL5InnoDBDialect username: root password: 'computer' properties: jmxEnabled: true initialSize: 5 maxActive: 50 minIdle: 5 maxIdle: 25 maxWait: 10000 maxAge: 600000 timeBetweenEvictionRunsMillis: 5000 minEvictableIdleTimeMillis: 60000 validationQuery: SELECT 1 validationQueryTimeout: 3 validationInterval: 15000 testOnBorrow: true testWhileIdle: true testOnReturn: false jdbcInterceptors: ConnectionState defaultTransactionIsolation: java.sql.Connection.TRANSACTION_READ_COMMITTED ``` ## dbCreate 1) `create` - On startup of your application, this will drop and recreate your schema. This will make sure that you will always have a clean table structure, and all your data is reset on every startup. This is ideal when you are in the early stages of the project and heavily modifying your data model. You will need to spend more time on your Bootstrap though, to create all background data that you need. 2) `create-drop` - This will behave exactly like create when starting up your application, with addition that it will drop all your tables when the application is shut down properly or gracefully. I have no idea why you would need to do this. I would prefer the create method, because you still have the chance to inspect your database after stopping your application. 3) `update` - This will not your schema or any of your tables, but will instead try to synch the database with your current data model. This is done by adding the missing tables or columns to your database. In my testing, this will not drop tables or columns from the database when you removed their corresponding items in the data model. It does not guarantee a clean table representation of your data model. This however is ideal when you are in the middle of development, where it is not practical to put most of your test data in the Bootstrap. 4) `validate` - this will not alter your database, but will just compare your data model with the database on start up. And create warnings if necessary. This is ideal when deploying to production environment. - Add the mysql deps as runtime in the dependencies of your build.gradle. E.g. - runtime 'mysql:mysql-connector-java:5.1.36' ",
    "url": "/PersonalGrailsNotes/Config",
    
    "relUrl": "/PersonalGrailsNotes/Config"
  },"38": {
    "doc": "Configuration",
    "title": "Configuration",
    "content": "{: .text-delta } 1. TOC {:toc} *** # YML ```yaml micronaut: server: port: 8082 router: versioning: enabled: true application: name: selfserviceintegration datasources: default: url: jdbc:mysql://localhost:3306/ssi username: root password: T@l3nt dialect: MYSQL driverClassName: com.mysql.cj.jdbc.Driver db-type: mysql schema-generate: none netty: default: allocator: max-order: 3 jpa: default: reactive: true compile-time-hibernate-proxies: true entity-scan: classpath: true packages: - 'com.ssi.integration' - 'com.ssi.result' - 'com.ssi.request' - 'com.ssi.Enums' properties: hibernate: dialect: org.hibernate.dialect.MySQLDialect bytecode: provider: none show-sql: true hbm2ddl: auto: update # connection: # db-type: mysql # url: jdbc:mysql://localhost:3306/ssi # username: root # password: T@l3nt jackson: bean-introspection-module: true serializationInclusion: NON_NULL liquibase: enabled: true datasources: default: change-log: 'classpath:db/liquibase-changelog.xml' endpoints: liquibase: enabled: true sensitive: false ``` ",
    "url": "/Micronotes/Configuration",
    
    "relUrl": "/Micronotes/Configuration"
  },"39": {
    "doc": "Configuring",
    "title": "Configuring",
    "content": "{: .text-delta } 1. TOC {:toc} --- {: .text-delta } 1. TOC {:toc} --- # Change ip or port when running > In Linux and Mac terminals, it would be `export PORT=5000` `export HOST=IP ADDRESS` > In Windows, the command is slightly different `env:PORT=5000` `env:HOST=IP ADDRESS` ",
    "url": "/Javascript/ReactNotes/Configuring",
    
    "relUrl": "/Javascript/ReactNotes/Configuring"
  },"40": {
    "doc": "Context",
    "title": "Context",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Self-Contained Context and Provider ```jsx import React, {useCallback, useContext, useEffect, useMemo} from \"react\"; import worker_script from \"containers/pptx/util/ppt.worker.js\"; // const myWorker = new Worker(worker_script) const TalentGridPPTXContext = React.createContext({ setLoadingExportData: () => {}, setDataCached: () => {}, myWorker: null, }); export function useTalentGridPPTXContext() { const uc = useContext(TalentGridPPTXContext); return uc ? uc : { setLoadingExportData: () => {}, setDataCached: () => {}, myWorker: null, }; } export function TalentGridPPTXProvider({value, children}) { const {setLoadingExportData, isCached, setIsCached} = value; const myWorker = useMemo(function () { return new Worker(worker_script); }, []); const setDataCached = useCallback((cached) => { if (cached) { setLoadingExportData(false); window.removeEventListener(\"message\", handleMessage); } setIsCached(cached); }, [handleMessage, setIsCached, setLoadingExportData],); const handleMessage = useCallback((event) => { if (event.data.hasOwnProperty(\"show_more\")) { if (!isCached) setLoadingExportData(true); if (myWorker) myWorker.postMessage(\"table-resize\"); } }); useEffect(() => { window.addEventListener(\"message\", handleMessage); return () => { window.removeEventListener(\"message\", handleMessage); //make sure webworker is released when component unmounts console.log(\"terminate worker\"); if (myWorker) myWorker.terminate(); }; }, [handleMessage, myWorker]); return ( {children} ); } ``` --- --- ```jsx import {fetchResultsByInterviewModel} from \"../../../../../common/util/externalAPIs\"; import React, {useContext, useEffect, useReducer, useState} from \"react\"; import TeamViewContext from \"../../../../../common/context/TeamViewContext\"; import { groupByArray, imListReducer, initReducer, } from \"./compareIndividualsModal.utils\"; const CompareIndividualsModalContext = React.createContext(); const emptyContext = { resultToIntModelMap: false, promiseList: false, imList: false, teamResultIds: false, imAssTypeObjectList: false, teamMemberResults: false, }; export function useCompareIndividualsModal() { const uc = useContext(CompareIndividualsModalContext); return uc ? uc : emptyContext; } export function CompareIndividualsModalProvider({children}) { const {graphDataMap} = useContext(TeamViewContext); const [imList, setIMList] = useState(); const [teamResultIds, setTeamResultIds] = useState(); const [teamMemberResults, setTeamMemberResulsts] = useState(); const [imAssTypeObjectList, setImAssTypeObjectList] = useState(); const [promiseList, setPromiseList] = useState(); const [resultToIntModelMap, dispatchIMResultMap] = useReducer(imListReducer, {}, () => initReducer(graphDataMap), [graphDataMap],); useEffect(() => { const groupedObject = groupByArray(Object.values(resultToIntModelMap), \"sourceInterviewModelId\", \"assessmentType\",); const teamMembers = graphDataMap ?.map((member) => member?.graphData?.defaultGroupMember) .flat(); const groupList = groupedObject.list; delete groupedObject[\"list\"]; setTeamMemberResulsts(teamMembers); setImAssTypeObjectList(Object.values(resultToIntModelMap)); setTeamResultIds(Object.keys(resultToIntModelMap).map((it) => parseFloat(it)),); setIMList(Object.keys(groupedObject)); setPromiseList(groupList.map((im) => { return async (searchCriteria) => await fetchResultsByInterviewModel({...searchCriteria, ...im}); }),); }, [resultToIntModelMap, graphDataMap]); return ( {children} ); } ``` ## Using Provider ```javascript const {promiseList, teamMemberResults, teamResultIds} = useCompareIndividualsModal(); ``` ",
    "url": "/JavaScript/ReactNotes/Context",
    
    "relUrl": "/JavaScript/ReactNotes/Context"
  },"41": {
    "doc": "Controller",
    "title": "Controller",
    "content": "{: .text-delta } 1. TOC {:toc} --- # The Grails Parameter Map > [Using Param map Object](https://gist.github.com/14paxton/42e595a1bf50e44031b6be6c034003d9) ```groovy def paramMap = [\"firstName\": \"brandon\", \"lastName\": \"paxton\", \"email\": \"bpaxton@talentplus.com\", \"assessmentType\": \"AO6\"] def x = new grails.web.servlet.mvc.GrailsParameterMap(paramMap, request) ``` # Command Object with Validation-\\* ## command object allows you to validate with services GRAILSCommandObject ### Custom Validator for Nested Command objects in a list > creating error code > Error Object = package org.springframework.validation (Public Interface Errors) > Example com.talentbank.tbex.SelfServiceIntegration.WSConfigCommand.rest (Validator)[https://docs.grails.org/latest/ref/Constraints/validator.html] ```groovy rest nullable: true, validator: { RESTCommand restCmd, WSConfigCommand obj -> return (obj?.wSConfigTypes?.size() > 0) ? null : \"error: must have config rest, ftp, or soap\" } ``` > error object params Example - Errors.java ```groovy // void reject(String errorCode, Object[] errorArgs, String defaultMessage); \"com.talentbank.tbex.SelfServiceIntegration.WSConfigCommand.rest\" , Object { \"rest\" : \"${WSConfigCommand.class}\" } , \"Property[{ 0 }] of class [ { 1 } ] with value [ { 2 } ] does not pass custom validation\" ``` ```groovy user.errors.reject('user.password.doesnotmatch', ['password', 'class User'] as Object[], '[Property [{0}] of class [{1}] does not match confirmation]') ``` > usage com.talentbank.tbex.SelfServiceIntegration.CommandObjects.IntegrationCommand ```groovy private void validateSubCommandObject(Validateable childCmdObj) { if (!childCmdObj.validate()) { childCmdObj.errors.allErrors.each { ObjectError errObj -> String msg = errObj.defaultMessage errObj.arguments.eachWithIndex { Object err, int index -> msg = msg.replace(\"{${index}}\", \"${err}\") } errors.reject(errObj.codes[0], errObj.arguments, msg) } } } void beforeValidate() { [\"wSConfig\", \"clientResultConfig\"].each { String prop -> if (this[prop]) { validateSubCommandObject(this[prop] as Validateable) } else { errors.reject($/com.talentbank.tbex.SelfServiceIntegration.validator.null.${prop}/$, [\"$prop\", \"class IntegrationCommand\"] as Object[], $/Property ${prop} of class IntegrationCommand is null/$) } } if (this.clientEntityMap) { this.clientEntityMap.each { ClientEntityMapType key, List value -> value.each { validateSubCommandObject(it as Validateable) } } } } ``` > this forces validate on nested command object, then adds errors to parent errors, only the parent need to be confirmed ```groovy List wSConfig void validateWSConfig() { if (this.wSConfig.size() > 0) { this.wSConfig.each { WSConfigCommand cmd -> if (!cmd.validate()) { cmd.errors.allErrors.each { errors.reject(it.codes[0], it.arguments, it.defaultMessage) } } } } } ``` ### Import and excluding other domain constrains ```groovy importFrom SOAPClientOrderConfig, exclude: [\"binarySecTokenEncodingType\", \"binarySecTokenValueType\", \"countryCodeFormat\"] ``` ### JSON return bodies Spring/Jackson examples #### [jackson-json-view-annotation](https://www.baeldung.com/jackson-json-view-annotation) #### [spring-mvc-ann-jackson](https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-jackson) ",
    "url": "/PersonalGrailsNotes/Controller",
    
    "relUrl": "/PersonalGrailsNotes/Controller"
  },"42": {
    "doc": "Controllers",
    "title": "Controllers",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Core ## [create controllers](https://learn.microsoft.com/en-us/aspnet/core/web-api/?view=aspnetcore-7.0) ### [controller return actions](https://learn.microsoft.com/en-us/aspnet/core/web-api/action-return-types?view=aspnetcore-7.0) # ASP ## [Samples](https://github.com/aspnet/samples/tree/main/samples/aspnet/WebApi) ## [WebAPI](https://learn.microsoft.com/en-us/aspnet/web-api/) --- ### Context > HttpContext exists on both the .NET Framework and .NET Core (both of which implement .NET Standard, by the way), but being specific to the Web, it > does not exist on .NET Standard. > So, you have three options: 1. Target the .NET Framework and use System.Web.HttpContext 2. Target .NET Core and use Microsoft.AspNetCore.Http.HttpContext 3. Move the logic that uses HttpContext away from the .NET Standard project Do notice, though, that those classes vary greatly. The .NET Core version was created for ASP.NET Core which is vastly different to ASP.NET 4.5 and olders. #### .Net Core - GCP serverless function example ```csharp public class Function : IHttpFunction { public async Task HandleAsync(HttpContext context){ HttpRequest httpRequest = context.Request; HttpResponse httpResponse = context.Response; WebhookResponse response = new WebhookResponse { FulfillmentResponse = new WebhookResponse.Types.FulfillmentResponse() }; using TextReader reader = new StreamReader(httpRequest.Body); string text = await reader.ReadToEndAsync(); WebhookRequest webhookRequest = JsonParser.Default.Parse(text); SessionInfo sessionInfo = webhookRequest.SessionInfo; string tag = webhookRequest.FulfillmentInfo.Tag; sessionInfo.Parameters.TryGetValue(key: \"name\", value: out var nameParameterValue); /* MY CODE */ var formatter = new JsonFormatter(new JsonFormatter.Settings(true)); httpResponse.ContentType = \"application/json; charset=UTF-8\"; httpResponse.Headers.Append(key: \"Access-Control-Allow-Methods\", value: \"GET\"); httpResponse.Headers.Append(key: \"Access-Control-Allow-Headers\", value: \"Content-Type\"); // await httpResponse.WriteAsync(response.ToString()); await httpResponse.WriteAsync(formatter.Format(response)); await httpResponse.Body.FlushAsync(); } } ``` ##### HTTP context accessor > you can use the IHttpContextAccessor helper service to get the HTTP context in any class that is managed by the ASP.NET Core dependency injection > system. > This is useful when you have a common > service that is used by your controllers. - Request this interface in your constructor: ```csharp public MyMiddleware(IHttpContextAccessor httpContextAccessor) { _httpContextAccessor = httpContextAccessor; } ``` - You can then access the current HTTP context in a safe way: ```charp var context = _httpContextAccessor.HttpContext; // Do something with the current HTTP context... ``` - IHttpContextAccessor isn't always added to the service container by default, so register it in ConfigureServices just to be safe: ```csharp public void ConfigureServices(IServiceCollection services) { services.AddHttpContextAccessor(); // if (); // Other code... } ``` #### [.Net Framework 4+](https://learn.microsoft.com/en-us/dotnet/api/system.web.httpcontext?view=netframework-4.8.1) ```csharp public static string GetRequestBody() { var bodyStream = new StreamReader(HttpContext.Current.Request.InputStream); bodyStream.BaseStream.Seek(0, SeekOrigin.Begin); var bodyText = bodyStream.ReadToEnd(); return bodyText; } ``` ```csharp public async Task GetSomething() { var rawMessage = await Request.Content.ReadAsStringAsync(); // ... return Ok(); } ``` - using extention method ```csharp using System.IO; using System.Text; namespace System.Web.Http { public static class ApiControllerExtensions { public static string GetRequestBody(this ApiController controller) { using (var stream = new MemoryStream()) { var context = (HttpContextBase)controller.Request.Properties[\"MS_HttpContext\"]; context.Request.InputStream.Seek(0, SeekOrigin.Begin); context.Request.InputStream.CopyTo(stream); var requestBody = Encoding.UTF8.GetString(stream.ToArray()); return requestBody; } } } } ``` ```csharp public static async Task Run([HttpTrigger(AuthorizationLevel.Function, \"get\", \"post\", Route = \"HttpTriggerCSharp/name/{name}\")]HttpRequestMessage req, string name, TraceWriter log) { log.Info(\"C# HTTP trigger function processed a request.\"); dynamic dataArray = await req.Content.ReadAsAsync(); string output = dataArray.ToString(); var data = Newtonsoft.Json.JsonConvert.DeserializeObject(output); // Fetching the name from the path parameter in the request URL return req.CreateResponse(HttpStatusCode.OK, data); } ``` --- **NOTE** > if you're receiving an empty string from this method, it means something else has already read it. > When it does that, it leaves the pointer at the end. > An alternative method of doing this is as > follows: ```csharp public IHttpActionResult GetSomething() { var reader = new StreamReader(Request.Body); reader.BaseStream.Seek(0, SeekOrigin.Begin); var rawMessage = reader.ReadToEnd(); return Ok(); } ``` > In this case, your endpoint doesn't need to be async (unless you have other async-methods) --- > - For other future users who do not want to make their controllers asynchronous, or cannot access the HttpContext, or are using dotnet core (this answer is the first I found on Google trying to do this), the following worked for me: ```csharp [HttpPut(\"{pathId}/{subPathId}\"), public IActionResult Put(int pathId, int subPathId, [FromBody] myViewModel viewModel) { var body = new StreamReader(Request.Body); //The modelbinder has already read the stream and need to reset the stream index body.BaseStream.Seek(0, SeekOrigin.Begin); var requestBody = body.ReadToEnd(); //etc, we use this for an audit trail } ``` --- ##### [Request](https://learn.microsoft.com/en-us/dotnet/api/system.web.httprequestbase?view=netframework-4.8.1) ###### use query string ```csharp public partial class AddToCart : Page { protected void Page_Load(object sender, EventArgs e) { string rawId = Request[\"ProductID\"]; int productId; if (!String.IsNullOrEmpty(rawId) && int.TryParse(rawId, out productId)) { using (ShoppingCartActions usersShoppingCart = new ShoppingCartActions()) { usersShoppingCart.AddToCart(productId); } } else { throw new Exception(\"Tried to call AddToCart.aspx without setting a ProductId.\"); } Response.Redirect(\"ShoppingCart.aspx\"); } } ``` - also ```csharp string fullname1 = Request.QueryString[\"fullname\"]; ``` ###### is authenticated ```csharp public partial class RestrictedPage : Page { protected void Page_Load(object sender, EventArgs e) { if (!Request.IsAuthenticated) { var rawUrl = Request.RawUrl; Response.Redirect(\"/Account/Login?ru=\" + Server.HtmlEncode(rawUrl)); } } } ``` ###### form ```csharp int loop1; NameValueCollection coll; //Load Form variables into NameValueCollection variable. coll=Request.Form; // Get names of all forms into a string array. String[] arr1 = coll.AllKeys; for (loop1 = 0; loop1 \"); } ``` ###### cookies ```csharp int loop1, loop2; HttpCookieCollection MyCookieColl; HttpCookie MyCookie; MyCookieColl = Request.Cookies; // Capture all cookie names into a string array. String[] arr1 = MyCookieColl.AllKeys; // Grab individual cookie objects by cookie name. for (loop1 = 0; loop1 \"); Response.Write (\"Secure:\" + MyCookie.Secure + \"\"); //Grab all values for single cookie into an object array. String[] arr2 = MyCookie.Values.AllKeys; //Loop through cookie Value collection and print all values. for (loop2 = 0; loop2 \"); } } ``` ###### server variables ```csharp int loop1, loop2; NameValueCollection coll; // Load ServerVariable collection into NameValueCollection object. coll=Request.ServerVariables; // Get names of all keys into a string array. String[] arr1 = coll.AllKeys; for (loop1 = 0; loop1 \"); String[] arr2=coll.GetValues(arr1[loop1]); for (loop2 = 0; loop2 \"); } } ``` #### [Response](https://learn.microsoft.com/en-us/dotnet/api/system.web.httpresponsebase?view=netframework-4.8.1) ```csharp HttpResponseMessage fullResponse = Request.CreateResponse(HttpStatusCode.OK); fullResponse.Content = new StreamContent(memStream); fullResponse.Content.Headers.ContentType = _mediaType; return fullResponse; ``` --- # Serialize/Deserialize ```csharp ValueTask t = JsonSerializer.DeserializeAsync(httpRequest.Body); WebhookRequest uu = t.Result; ``` ```csharp TextReader reader = new StreamReader(httpRequest.Body); string text = await reader.ReadToEndAsync(); JsonElement json = JsonSerializer.Deserialize (text); JsonElement json2 = JsonConvert.DeserializeObject(text, new JsonSerializerSettings()); string json3 = JsonConvert.SerializeObject(json, typeof(String), new JsonSerializerSettings()); ``` ```csharp WebhookRequest webhookRequest = new WebhookRequest(json.Deserialize ()); ``` ```csharp webhookRequest = (WebhookRequest) JsonConvert.DeserializeObject (JsonConvert.DeserializeObject(text, typeof(object)).ToString(), new JsonSerializerSettings()); ``` ```csharp WebhookRequest webhookRequest1 = JsonConvert.DeserializeObject (text); JsonConvert.PopulateObject( JsonConvert.ToString(json), webhookRequest); ``` ```csharp string h = JsonConvert.ToString(text); ``` ```csharp WebhookRequest pp = JsonSerializer.Deserialize (text); ``` ```csharp WebhookRequest pp2 = json.Deserialize (); ``` ```csharp object pp3 = JsonSerializer.Deserialize(text, typeof(WebhookRequest)); ``` ```csharp object pp4 = json.Deserialize( typeof(WebhookRequest)); ``` ```csharp object w = JsonConvert.DeserializeObject(value: text, type: typeof(WebhookRequest)); ``` ```csharp object i = json.Deserialize( typeof(WebhookRequest)); ``` ```csharp object kk = json.Deserialize(typeof(WebhookRequest)); ``` ```csharp WebhookRequest webhookRequest = new WebhookRequest JsonConvert.PopulateObject(value: text, target: webhookRequest); ``` ```csharp JObject.Parse(request.Content.ReadAsStringAsync().Result); ``` ```csharp var content = response.Content; var jsonResult = JsonConvert.DeserializeObject(content).ToString(); var result= JsonConvert.DeserializeObject(jsonResult); ``` ",
    "url": "/DotNetNotes/Controllers",
    
    "relUrl": "/DotNetNotes/Controllers"
  },"43": {
    "doc": "CustomVM",
    "title": "CustomVM",
    "content": "{: .text-delta } 1. TOC {:toc} --- # References - > [Other Memory Settings](http://tomaszdziurko.com/2015/11/1-and-the-only-one-to-customize-intellij-idea-memory-settings/) - > [boost performance putting caches in memory](https://medium.com/@sergio.igwt/boosting-performance-of-intellij-idea-and-the-rest-of-jetbrains-ides-cd34952bb978) - > [serpro69 config vmoptions example](https://github.com/serpro69/config/blob/master/idea64.vmoptions#L36) # ORIGINAL idea.vmoptions ```shell -Xms128m= -Xmx750m= -XX=ReservedCodeCacheSize=240m -XX=+UseConcMarkSweepGC -XX=SoftRefLRUPolicyMSPerMB=50 -ea= -XX=CICompilerCount=2 -Dsun.io.useCanonPrefixCache=false -Djava.net.preferIPv4Stack=true -Djdk.http.auth.tunneling.disabledSchemes=\"\" -XX=+HeapDumpOnOutOfMemoryError -XX=-OmitStackTraceInFastThrow -Djdk.attach.allowAttachSelf=true -Dkotlinx.coroutines.debug=off -Djdk.module.illegalAccess.silent=true ``` [UPDATED From Tuning Article](https://medium.com/stochastic-stories/tuning-my-intellij-ide-8255781f6a0d) ```shell -Xms15g= -XX=ReservedCodeCacheSize=2g -XX=+UseCompressedOops -XX=+UseG1GC -XX=MaxGCPauseMillis=100 -XX=+PerfDisableSharedMem -XX=SoftRefLRUPolicyMSPerMB=50 -ea= -XX=CICompilerCount=2 -Dsun.io.useCanonPrefixCache=false -Djava.net.preferIPv4Stack=true -Djdk.http.auth.tunneling.disabledSchemes=\"\" -XX=+HeapDumpOnOutOfMemoryError -XX=-OmitStackTraceInFastThrow -Djdk.attach.allowAttachSelf=true -Dkotlinx.coroutines.debug=off -Djdk.module.illegalAccess.silent=true ``` # Memory ## Set Symbolic link for storing caches in memory ```shell mklink /D \"R:\\Temp\\intellij\\caches\" \"C:\\Users\\bpaxton\\.IntelliJIdea2019.3\\system\\caches\" mklink /D \"R:\\Temp\\intellij\\index\" \"C:\\Users\\bpaxton\\.IntelliJIdea2019.3\\system\\index\" ``` # Working Examples I Have Used ```shell # custom IntelliJ IDEA VM options (expand/override 'bin/idea.vmoptions') -ea= -server= -Xms6g= -Xmx6g= -Xss16m= -XX=MaxMetaspaceSize=2G -XX=MetaspaceSize=512m -XX=ConcGCThreads=6 -XX=ParallelGCThreads=6 -XX=NewRatio=3 -XX=ReservedCodeCacheSize=2g -XX=+AlwaysPreTouch -XX=+UseConcMarkSweepGC -XX=+TieredCompilation -Djava.net.preferIPv4Stack=true -XX=+UseCodeCacheFlushing -XX=+DisableExplicitGC -XX=+ExplicitGCInvokesConcurrent -XX=+AggressiveOpts -XX=+CMSClassUnloadingEnabled -XX=CMSInitiatingOccupancyFraction=60 -XX=+CMSParallelRemarkEnabled -XX=+UseAdaptiveGCBoundary -XX=+OptimizeStringConcat -XX=+UseStringCache -XX=+UseFastAccessorMethods -XX=+UseCompressedOops -XX=-OmitStackTraceInFastThrow ``` > or ```shell -server= -Xms8g= -Xmx8g= -XX=ReservedCodeCacheSize=2g -XX=NewRatio=3 -XX=CICompilerCount=6 -Xss16m= -XX=+UseConcMarkSweepGC -XX=+CMSParallelRemarkEnabled -XX=ConcGCThreads=4 -XX=+AlwaysPreTouch -XX=+TieredCompilation -XX=+UseCompressedOops -XX=SoftRefLRUPolicyMSPerMB=50 -Djava.net.preferIPv4Stack=true -ea= -Djava.net.preferIPv4Stack=true -Djdk.http.auth.tunneling.disabledSchemes=\"\" -XX=+HeapDumpOnOutOfMemoryError -XX=-OmitStackTraceInFastThrow -Djdk.attach.allowAttachSelf=true -Dkotlinx.coroutines.debug=off -Djdk.module.illegalAccess.silent=true -Dide.no.platform.update=true -Dsun.io.useCanonCaches=false -XX=ReservedCodeCacheSize=512m -Didea.plugins.path=C:\\\\Users\\\\bpaxton\\\\AppData\\\\Local\\\\JetBrains\\\\Toolbox\\\\apps\\\\IDEA-U\\\\ch-0\\\\203.6682.168.plugins ``` ## Set JVM args in build.gradle bootRun{} ```groovy jvmArgs = [\"-server\", \"-XX:ReservedCodeCacheSize=2g\", \"-XX:NewRatio=3\", \"-XX:ActiveProcessorCount=12\", \"-Xss16m\", \"-XX:+UseConcMarkSweepGC\", \"-XX:+CMSParallelRemarkEnabled\", \"-XX:ConcGCThreads=4\", \"-XX:+AlwaysPreTouch\", \"-XX:+TieredCompilation\", \"-XX:+UseCompressedOops\", \"-Xdebug\", \"-Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=5005\", \"-Xmx8g\"] ``` ### set remote connection ![Picture1](https://user-images.githubusercontent.com/26972590/159703039-67fe1a5f-8a7e-4555-b422-385b58d1ac51.png) ",
    "url": "/IntelliJNotes/CustomVM",
    
    "relUrl": "/IntelliJNotes/CustomVM"
  },"44": {
    "doc": "DataBase",
    "title": "DataBase",
    "content": "{: .text-delta } 1. TOC {:toc} --- # PostgreSQL ## Connection ![postgreSQLConnection.png](assets%2Fimages%2FpostgreSQLConnection.png) # MySQL ## Connection ![mySQLConnection.png](assets%2Fimages%2FmySQLConnection.png) # Oracle ## Connection ![oracleConnection.png](assets%2Fimages%2ForacleConnection.png) # Azure ## Connection ![azureSQLConnection.png](assets%2Fimages%2FazureSQLConnection.png) ",
    "url": "/JavaNotes/DataBase",
    
    "relUrl": "/JavaNotes/DataBase"
  },"45": {
    "doc": "DataBaseStuff",
    "title": "DataBaseStuff",
    "content": "{: .text-delta } 1. TOC {:toc} --- --- # In Memory ```yml micronaut: application: name: backend datasources: default: url: jdbc:h2:mem:devDb;LOCK_TIMEOUT=10000;DB_CLOSE_ON_EXIT=FALSE username: sa password: \"\" driverClassName: org.h2.Driver schema-generate: CREATE_DROP dialect: H2 netty: default: allocator: max-order: 3 ``` # [MYSQL](https://micronaut-projects.github.io/micronaut-sql/latest/guide/index.html) ## example yml for connecting locally to mysql db ```yml micronaut: server: port: 8082 application: name: crudData datasources: default: url: jdbc:mysql://localhost:3306/micro_person username: root password: pw123 driverClassName: com.mysql.cj.jdbc.Driver db-type: mysql schema-generate: CREATE_DROP dialect: MYSQL netty: default: allocator: max-order: 3 #vertx: # mysql: # client: # port: 3306 # host: localhost # database: micro_person # user: root # password: root # maxSize: 5 ``` # [Hibernate](https://micronaut-projects.github.io/micronaut-sql/latest/guide/index.html#hibernate) > Hibernate uses a proxy object to implement lazy loading with a default implementation generating a proxy during the runtime. > This has a few disadvantages: > Runtime class generation can affect startup and runtime performance > Environments like GraalVM don’t support it If you wish to use lazy entity associations and avoid runtime proxies you can enable compile-time proxies: ```yml jpa: default: compile-time-hibernate-proxies: true ``` The entity Owner needs to be annotated with @GenerateProxy to have a proxy generated and the compile-time. ```java @Entity @GenerateProxy public class Owner { //... } ``` ## [Joins](https://micronaut-projects.github.io/micronaut-data/latest/guide/#_jpa_2_1_entity_graphs) ```java @Repository public interface ProductRepository extends CrudRepository, JpaSpecificationExecutor { @Join(value = \"manufacturer\", type = Join.Type.FETCH) // List list(); } ``` ## JPA Entity Graphs ```java @EntityGraph(attributePaths = {\"manufacturer\", \"title\"}) // List findAll(); ``` ## Hibernate schema generation The hibernate.hbm2ddl.auto configuration property is used to customize the Hibernate database schema generation process, and it can take the following values: - `none` – This option disables the `hbm2ddl.auto` tool, so Hibernate is not going to take any action for managing the underlying database schema. - `create-only` – This option instructs Hibernate to generate the database schema from the entity model. - `drop` – This option instructs Hibernate to drop the database schema using the entity model as a reference for the DDL DROP statements. - `create` – This option instructs Hibernate to drop the database schema and recreate it afterward using the entity model as a reference. - `create-drop` – This option instructs Hibernate to drop the database schema and recreate it afterward using the entity model as a reference. - `validate` – This option instructs Hibernate to validate the underlying database schema against the entity mappings. - `update` – This option instructs Hibernate to update the database schema by comparing the existing schema with the entity mappings and generate the appropriate schema migration scripts. # [Reactive Hibernate](https://micronaut-projects.github.io/micronaut-data/latest/guide/#hibernateReactive) ```yml micronaut: server: port: 8082 router: versioning: enabled: true application: name: hibernate #datasources: # default: # url: jdbc:mysql://localhost:3306/ssi # username: root # password: root # dialect: MYSQL # driverClassName: com.mysql.cj.jdbc.Driver # db-type: mysql # schema-generate: none jpa: default: reactive: true compile-time-hibernate-proxies: true entity-scan: packages: - \"com.ssi.integration\" - \"com.ssi.result\" - \"com.ssi.request\" - \"com.ssi.Enums\" properties: hibernate: show-sql: true hbm2ddl: auto: update connection: db-type: mysql url: jdbc:mysql://localhost:3306/ssi username: root password: root netty: default: allocator: max-order: 3 ``` # DB Migration ## [Liquibase](https://micronaut-projects.github.io/micronaut-liquibase/2.0.0.M1/guide/index.html#endpoint) ### yml ```yml liquibase: enabled: true datasources: default: change-log: \"classpath:db/liquibase-changelog.xml\" endpoints: liquibase: enabled: true sensitive: false ``` ### changelog ```xml ``` #### db change file ```xml ``` ",
    "url": "/Micronotes/DataBaseStuff",
    
    "relUrl": "/Micronotes/DataBaseStuff"
  },"46": {
    "doc": "DataServices",
    "title": "DataServices",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Examples - > [Use dynamic strings and regex for search ](https://gist.github.com/14paxton/a5382dd3898484bf560dc29e8463409c) - > [dataService abstract @Query](https://gist.github.com/14paxton/d63234a1eddeabeb0fa88f782a74d738) - > [dataservice query searching multiple columns by like ]( https://gist.github.com/14paxton/e72c14086f5d9a6a0c58dc8463b93561) ",
    "url": "/PersonalGrailsNotes/DataServices",
    
    "relUrl": "/PersonalGrailsNotes/DataServices"
  },"47": {
    "doc": "Database",
    "title": "Database",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Type Comparisons | .NET Framework Type . | ADO.NET Database Type . | SQL Data Type . | . | String . | Varchar . | Varchar() . | . | String . | Nvarchar . | Nvarchar() . | . | String . | NChar . | Nchar() . | . | String . | NText . | NText . | . | String . | Text . | Text . | . | Double . | BigInt . | Float . | . | DateTime . | DateTime . | Datetime . | . | DateTime . | SmallDateTime . | Smalldatetime . | . | Int . | Int . | Int . | . | Int64 . | BigInt . | Bigint . | . | Int16 . | SmallInt . | smallint . | . | Byte[] . | Binary . | Binary() . | . | Byte[] . | Image . | Image . | . | Byte[] . | VarBinary . | Varbinary() . | . | Byte . | TinyInt . | Tinyint . | . | Bool . | Bit . | Bit . | . | Decimal . | Decimal . | Decimal . | . | Decimal . | Money . | Money . | . | Decimal . | SmallMoney . | SmallMoney . | . | Float . | Float . | Float . | . | Guid . | UniqueIdentifier . | Uniqueidentifier . | . | Real . | Real . | Real . | . ",
    "url": "/DotNetNotes/Database",
    
    "relUrl": "/DotNetNotes/Database"
  },"48": {
    "doc": "DateAndTime",
    "title": "DateAndTime",
    "content": "{: .text-delta } 1. TOC {:toc} *** ## **[Creating and Formatting Dates]** ### **[USE java LocalDate]** Groovy Time ```groovy use(TimeCategory) { endDate = duration ? (endDate + duration.minutes) : (endDate + DEFAULTDURATION.minutes) } ``` ```groovy def form = DateTimeFormatter.ofPattern(\"yyyy/MM/dd\") println LocalDate.parse(\"2020/12/07\", form) form = DateTimeFormatter.ISO_LOCAL_DATE println LocalDate.now().format(form) //java date to localdatetime Date theDate = Date.parse(\"yyyy/MM/dd hh:mm a\", \"2020/04/16 07:35am\") LocalDateTime newDate = theDate.toInstant().atZone(ZoneId.systemDefault()).toLocalDateTime() println LocalDateTime.now().truncatedTo(ChronoUnit.MINUTES) println newDate println newDate.isBefore(LocalDateTime.now().truncatedTo(ChronoUnit.MINUTES)) ``` ```groovy Date scheduledDate = Date.parse(userDateFormat + 'hh:mm a', \"${schedulingParams?.scheduledDate} ${schedulingParams?.scheduledTime}\") Date utcDate = new Date(scheduledDate.format('yyyy/MM/dd HH:mm:ss', TimeZone.getTimeZone(\"UTC\"))) ``` - HH for 24 hour - a is for am/pm - add :ss for seconds - use .format to change date - USING Calendar ![img.png](assets/images/img.png) # Java8 Instant ```groovy Instant nowUtc = Instant.now() ZoneId asiaSingapore = ZoneId.of(\"Asia/Singapore\") ZonedDateTime nowAsiaSingapore = ZonedDateTime.ofInstant(nowUtc, asiaSingapore) ``` ",
    "url": "/GroovyNotes/DateAndTime",
    
    "relUrl": "/GroovyNotes/DateAndTime"
  },"49": {
    "doc": "DateAndTime",
    "title": "DateAndTime",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Format date with local ```javascript const userLocale = navigator.languages && navigator.languages.length ? navigator.languages[0] : navigator.language; new Date().toLocaleDateString(userLocale) ``` ",
    "url": "/JavaScript/DateAndTime",
    
    "relUrl": "/JavaScript/DateAndTime"
  },"50": {
    "doc": "DebuggerConfig",
    "title": "DebuggerConfig",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Micronaut ## Running Application in Debug mode > can run gradle command and attach any debugger listening on 5005 ```bash gradle run --debug-jvm ``` > or modify run/debug config ![debuggerConfig.png](assets%2Fimages%2FdebuggerConfig.png) ",
    "url": "/IntelliJNotes/DebuggerConfig",
    
    "relUrl": "/IntelliJNotes/DebuggerConfig"
  },"51": {
    "doc": "Deploy",
    "title": "Deploy",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Deploy ## [Use Visual Studio to Deploy](https://cloud.google.com/tools/visual-studio/docs/deploy-asp-net-app) ",
    "url": "/GoogleNotes/Deploy",
    
    "relUrl": "/GoogleNotes/Deploy"
  },"52": {
    "doc": "DevTools",
    "title": "DevTools",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Console - ## Logging Messages ```javascript console.log ( 'Printing on the console'); console.error ('Error: Something went wrong' ); consolewarn( 'No Internet: try again later'); ``` - ### Grouping the logs (in the console) ```javascript console-group(); console. log( 'logging user status'); console. log('user logged into the website'); console. log ('user has visited profile page'); console. log/'user has just liked a post from ... certain page'); console.groupEnd(); ``` - ## Using console.dir() ```javascript console.dir(Object) ; console.dir(Array); console.dir(Function); ``` - ## Using console table() to output in the form of table */ ```javascript console.table({ firstName: 'First', lastName: 'Last' }) ; ``` - ## Examining the time taken for a block of code to execute */ ```javascript console.time( 'loopExaminer'); for ( leti = 0; i Inspect your element (right mouse click → Inspect on a visible element or go to Elements tab in Chrome Developer Tools and select wanted element) then go to Console tab and write: ```shell monitorEvents($0) ``` 2. > Now when you move mouse over this element, focus or click it, the name of the fired event will be displayed with its data. To stop getting this data, just write this to console: ```shell unmonitorEvents($0) ``` `$0` is just the last DOM element selected by Chrome Developer Tools. - > monitor all events ```shell monitorEvents(document.body, 'mouse') ``` ## Get All Events with window ```javascript window.getEventListeners(window); // or for a specific element window.getEventListeners(document.body); ``` # [Re-Enable Right click](https://stackoverflow.com/questions/21335136/how-to-re-enable-right-click-so-that-i-can-inspect-html-elements-in-chrome) ```javascript function enableContextMenu(aggressive = true) { void (document.ondragstart = null); void (document.onselectstart = null); void (document.onclick = null); void (document.onmousedown = null); void (document.onmouseup = null); void (document.body.oncontextmenu = null); enableRightClickLight(document); if (aggressive) { enableRightClick(document); removeContextMenuOnAll(\"body\"); removeContextMenuOnAll(\"img\"); removeContextMenuOnAll(\"td\"); } } function removeContextMenuOnAll(tagName) { let elements = document.getElementsByTagName(tagName); for (let i = 0; i < elements.length; i++) { enableRightClick(elements[i]); } } function enableRightClickLight(el) { el || (el = document); el.addEventListener(\"contextmenu\", bringBackDefault, true); } function enableRightClick(el) { el || (el = document); el.addEventListener(\"contextmenu\", bringBackDefault, true); el.addEventListener(\"dragstart\", bringBackDefault, true); el.addEventListener(\"selectstart\", bringBackDefault, true); el.addEventListener(\"click\", bringBackDefault, true); el.addEventListener(\"mousedown\", bringBackDefault, true); el.addEventListener(\"mouseup\", bringBackDefault, true); } function restoreRightClick(el) { el || (el = document); el.removeEventListener(\"contextmenu\", bringBackDefault, true); el.removeEventListener(\"dragstart\", bringBackDefault, true); el.removeEventListener(\"selectstart\", bringBackDefault, true); el.removeEventListener(\"click\", bringBackDefault, true); el.removeEventListener(\"mousedown\", bringBackDefault, true); el.removeEventListener(\"mouseup\", bringBackDefault, true); } function bringBackDefault(event) { event.returnValue = true; typeof event.stopPropagation === \"function\" && event.stopPropagation(); typeof event.cancelBubble === \"function\" && event.cancelBubble(); } enableContextMenu(); ``` ```javascript $(document).unbind(); ``` ```javascript javascript: function enableContextMenu(aggressive = true) { void (document.ondragstart = null); void (document.onselectstart = null); void (document.onclick = null); void (document.onmousedown = null); void (document.onmouseup = null); void (document.body.oncontextmenu = null); enableRightClickLight(document); if (aggressive) { enableRightClick(document); removeContextMenuOnAll(\"body\"); removeContextMenuOnAll(\"img\"); removeContextMenuOnAll(\"td\"); } } function removeContextMenuOnAll(tagName) { let elements = document.getElementsByTagName(tagName); for (let i = 0; i < elements.length; i++) { enableRightClick(elements[i]); enablePointerEvents(elements[i]); } } function enableRightClickLight(el) { el || (el = document); el.addEventListener(\"contextmenu\", bringBackDefault, true); } function enableRightClick(el) { el || (el = document); el.addEventListener(\"contextmenu\", bringBackDefault, true); el.addEventListener(\"dragstart\", bringBackDefault, true); el.addEventListener(\"selectstart\", bringBackDefault, true); el.addEventListener(\"click\", bringBackDefault, true); el.addEventListener(\"mousedown\", bringBackDefault, true); el.addEventListener(\"mouseup\", bringBackDefault, true); } function restoreRightClick(el) { el || (el = document); el.removeEventListener(\"contextmenu\", bringBackDefault, true); el.removeEventListener(\"dragstart\", bringBackDefault, true); el.removeEventListener(\"selectstart\", bringBackDefault, true); el.removeEventListener(\"click\", bringBackDefault, true); el.removeEventListener(\"mousedown\", bringBackDefault, true); el.removeEventListener(\"mouseup\", bringBackDefault, true); } function bringBackDefault(event) { event.returnValue = true; typeof event.stopPropagation === \"function\" && event.stopPropagation(); typeof event.cancelBubble === \"function\" && event.cancelBubble(); } function enablePointerEvents(el) { if (!el) return; el.style.pointerEvents = \"auto\"; el.style.webkitTouchCallout = \"default\"; el.style.webkitUserSelect = \"auto\"; el.style.MozUserSelect = \"auto\"; el.style.msUserSelect = \"auto\"; el.style.userSelect = \"auto\"; enablePointerEvents(el.parentElement); } enableContextMenu(); ``` ",
    "url": "/GoogleNotes/DevTools",
    
    "relUrl": "/GoogleNotes/DevTools"
  },"53": {
    "doc": "DialogFlow",
    "title": "DialogFlow",
    "content": "{: .text-delta } 1. TOC {:toc} *** # GoogleDialogFlow repo for GoogleDialogFlow 1. > Identify the roles, both the customers and your virtual agent, as well as all the potential use cases your virtual agent will need to address. Right > personas, both > for customers and virtual agents, so that conversations will take a natural shape. Model user agent interactions to help identify user requirements, > handle all > possible expected and don't forget unexpected user scenarios, that could occur for your business. 2. > In order to understand why the customers reaching out to you, you'll need to be able to break down the individual parts of the conversation. The > conversation will > include representative words and phrases, and you can use these to dissect and interpret the customer's needs and how you respond. There are three > important parts > to a conversation. Intense, identifying what the customer needs or wants you to do for them. Entities, identifying a thing the customer is referring > to, and > parameters setting the variable of the thing the customer is referring to so that you can reference it later in the conversation. # Key Terms ![](assets/images/Capture.PNG) # QUICK TID BITS ## params ``` $intent.params.user-input, $session.params.user-input, $page.params.valid-input, ``` ``` $page.params.status = \"FINAL\" $page.params.parameter-id.status = \"UPDATED\" ``` ## [functions](https://cloud.google.com/dialogflow/cx/docs/reference/system-functions#func-append) ``` $sys.func.CONCATENATE($session.params.user-authentication-map-key, $session.params.user-input) $sys.func.JOIN(\", \", $session.params.user-authentication-map) $sys.func.TO_TEXT($session.params.user-authentication-map) $sys.func.SUBSTITUTE(\"$sys.func.TO_TEXT($session.params.user-authentication-map)\" , \" { \", \"PP\") \"$sys.func.ADD($session.params.verify-member-attempt, 1)\" ``` ``` ($sys.func.GET_FIELD($session.params, phone-number) != null OR $sys.func.GET_FIELD($session.params, last-4-ssn) != null) AND $session.params.member-verified != true AND $sys.func.GET_FIELD($session.params, security-code) = null ``` `$sys.func.ADD( $sys.func.TO_NUMBER( $session.params.total-questions-resolved) , $sys.func.TO_NUMBER( $session.params.resolved))\"` ## when using func in parameter value be cognizant of quotation marks, they need to be there ``` $sys.func.IF(\"$session.params.account-found = null OR $session.params.account-found = false\" , null , true) $sys.func.IF(\"($session.params.current-flow = null AND $session.params.current-route = null)\" , null, {name : $session.params.current-flow , route : $session.params.current-route} ) $sys.func.IF(\"$session.params.current-flow = null\" , null , \"{name : $session.params.current-flow , route : $session.params.current-route}\") {name : $sys.func.TO_TEXT($session.params.current-flow) , route : $sys.func.TO_TEXT($session.params.current-route)} ``` ## [get the json key file from DialogFlow](https://support.woztell.com/portal/en/kb/articles/how-to-get-the-json-key-file-from-dialogflow) 1. Once in the Google Cloud Platform, go to IAM & admin > Service account > Create service account 2. Fill out the details of the service account and click on the button \"create\" 3. Select \"DialogFlow API Admin\" in the field \"Role\" 4. Now, once the creation of the service account is finalized, select it and click on \"Create Key\" 5. Select JSON as \"key type\" 6. Download the new private key in JSON --- # [API Docs C# Client](https://cloud.google.com/dotnet/docs/reference/Google.Cloud.Dialogflow.Cx.V3/latest) # Intents > A couple of things to look for: - Note that as you enter your training phrase, Dialogflow CX will automatically annotate your entities. If it doesn't do so, you may need to update your entity (by adding a synonym) or by manually annotating the training phrase yourself. Shorter training phrases: Dialogflow's NLU system can also work with shorter training phrases and we have provided a couple of examples here. - Over-training: Too many training phrases for an intent may cause over-training and a less desirable result. It is best practice to use iterative and incremental testing and add in training phrases in the case that there isn't an intent matched. --- # Parameters ## [Presets](https://cloud.google.com/dialogflow/cx/docs/concept/fulfillment#param-preset) You can use a fulfillment to provide presets that set or override current parameter values. These presets will be applied before resolving static response messages or calling a webhook. You can also use [system functions](https://cloud.google.com/dialogflow/cx/docs/reference/system-functions) to preset the parameter to a dynamically generated value. | Parameter | Value |-----------------|--------------------------------------------------------------------------------------------------------------| now | `$sys.func.NOW()` | counter | `$sys.func.ADD($session.params.counter, 1)` | new-cost | `$sys.func.IDENTITY($session.params.other-cost)` | member-verified | $sys.func.IF(\"$session.params.member-found-count />) > GitHub personal token. If you use a fine-grained personal access token, you need the > following permissions access: - `Repository Permissions > Contents: Read and write` - `Repository Permissions > Metadata: Read-only (should be auto-selected after selecting Contents permission)` --- # [Detect Intent](https://cloud.google.com/dotnet/docs/reference/Google.Cloud.Dialogflow.Cx.V3/latest/Google.Cloud.Dialogflow.Cx.V3.SessionsClient#Google_Cloud_Dialogflow_Cx_V3_SessionsClient_DetectIntent_Google_Cloud_Dialogflow_Cx_V3_DetectIntentRequest_Google_Api_Gax_Grpc_CallSettings_) > You can use [APIs or Client Libraries](https://cloud.google.com/dialogflow/cx/docs/reference) to set the queryParams.parameters and > queryParams.currentPage in the detectIntent method. ## Detect Intent Request ```json { \"queryInput\": { \"text\": { \"text\": \"test\" }, \"languageCode\": \"en\" } } ``` ### trigger intent ```json { \"queryInput\": { \"languageCode\": \"en\", \"intent\": { \"intent\": \"projects/vcu-virtual-assistant-bot/locations/global/agents/8ec51540-2933-43d6-aad5-355545059bfe/intents/335ebd4c-bb93-4ed1-bd4c-610789dbb7ea\" } }, \"queryParams\": { \"timeZone\": \"America/Los_Angeles\" } } ``` ### trigger event ```json { \"queryInput\": { \"event\": { \"event\": \"custom-event\" // custom event to be triggered }, \"languageCode\": \"en\" }, \"queryParams\": { \"timeZone\": \"America/Los_Angeles\" } } ``` ### Set params and current page > Here’s a sample reference using [REST API](https://cloud.google.com/dialogflow/cx/docs/reference/rest) to set > the [QueryParameters](https://cloud.google.com/dialogflow/cx/docs/reference/rest/v3/QueryParameters) of > the [detectIntent](https://cloud.google.com/dialogflow/cx/docs/reference/rest/v3/projects.locations.agents.environments.sessions/detectIntent#request-body) method request body: ```json { \"queryParams\": { \"parameters\": { \"param1\": { \"value\": \"sample1\" }, \"currentPage\": \"projects//locations//agents//flows//pages/\" } } } ``` ## [Detect Intent Response](https://cloud.google.com/dialogflow/cx/docs/reference/rest/v3/DetectIntentResponse) ```json { \"responseId\": \"bda416d2-134c-4bbb-a0a1-37820eb0257e\", \"queryResult\": { \"text\": \"test\", \"languageCode\": \"en\", \"parameters\": { \"session-id\": \"a57d22-fbe-afb-ee4-69a8f62b3\", \"session-url\": \"projects/vcu-virtual-assistant-bot/locations/global/agents/8ec51540-2933-43d6-aad5-355545059bfe/environments/ec5f3114-e5d6-497f-bf92-53723c698230/sessions/a57d22-fbe-afb-ee4-69a8f62b3\" }, \"responseMessages\": [ { \"text\": { \"text\": [ \"When you test me that helps my developers improve my performance.\" ], \"allowPlaybackInterruption\": true } }, {} ], \"currentPage\": { \"name\": \"projects/vcu-virtual-assistant-bot/locations/global/agents/8ec51540-2933-43d6-aad5-355545059bfe/flows/00000000-0000-0000-0000-000000000000/pages/START_PAGE\", \"displayName\": \"Start Page\" }, \"intent\": { \"name\": \"projects/vcu-virtual-assistant-bot/locations/global/agents/8ec51540-2933-43d6-aad5-355545059bfe/intents/3a13ea29-83bd-4131-9144-2f511b42fcc2\", \"displayName\": \"small_talk.user.testing_agent\" }, \"intentDetectionConfidence\": 1, \"diagnosticInfo\": { \"Transition Targets Chain\": [ { \"TargetFlow\": \"7bf60f85-19fe-48bd-ac27-2b5db2cde4de\" }, { \"TargetPage\": \"END_FLOW\" } ], \"Session Id\": \"a57d22-fbe-afb-ee4-69a8f62b3\", \"Triggered Transition Names\": [ \"807b27e2-59da-4a37-8b1c-c7d109cb816f\", \"807b27e2-59da-4a37-8b1c-c7d109cb816f\" ], \"Execution Sequence\": [], \"Alternative Matched Intents\": [ { \"Active\": true, \"Id\": \"3a13ea29-83bd-4131-9144-2f511b42fcc2\", \"Type\": \"NLU\", \"Score\": 1, \"DisplayName\": \"small_talk.user.testing_agent\" } ] }, \"match\": { \"intent\": { \"name\": \"projects/vcu-virtual-assistant-bot/locations/global/agents/8ec51540-2933-43d6-aad5-355545059bfe/intents/3a13ea29-83bd-4131-9144-2f511b42fcc2\", \"displayName\": \"small_talk.user.testing_agent\" }, \"resolvedInput\": \"test\", \"matchType\": \"INTENT\", \"confidence\": 1 } }, \"responseType\": \"FINAL\" } ``` --- # [Match Intent](https://cloud.google.com/dialogflow/cx/docs/reference/rest/v3beta1/projects.locations.agents.sessions/matchIntent?apix_params=%7B%22session%22%3A%22projects%2Fvcu-virtual-assistant-bot%2Flocations%2Fglobal%2Fagents%2F8ec51540-2933-43d6-aad5-355545059bfe%2Fsessions%2Fcd205a-958-7fc-5d5-0824cd93b%22%2C%22resource%22%3A%7B%22queryInput%22%3A%7B%22languageCode%22%3A%22en%22%2C%22intent%22%3A%7B%22intent%22%3A%22projects%2Fvcu-virtual-assistant-bot%2Flocations%2Fglobal%2Fagents%2F8ec51540-2933-43d6-aad5-355545059bfe%2Fintents%2F335ebd4c-bb93-4ed1-bd4c-610789dbb7ea%22%7D%7D%2C%22queryParams%22%3A%7B%22timeZone%22%3A%22America%2FLos_Angeles%22%7D%7D%7D&apix=true) ## Request Body ```json { \"queryInput\": { \"languageCode\": \"en\", \"intent\": { \"intent\": \"projects/vcu-virtual-assistant-bot/locations/global/agents/8ec51540-2933-43d6-aad5-355545059bfe/intents/335ebd4c-bb93-4ed1-bd4c-610789dbb7ea\" } }, \"queryParams\": { \"timeZone\": \"America/Los_Angeles\" } } ``` ## Response Body ```json { \"triggerIntent\": \"projects/vcu-virtual-assistant-bot/locations/global/agents/8ec51540-2933-43d6-aad5-355545059bfe/intents/335ebd4c-bb93-4ed1-bd4c-610789dbb7ea\", \"matches\": [ { \"intent\": { \"name\": \"projects/vcu-virtual-assistant-bot/locations/global/agents/8ec51540-2933-43d6-aad5-355545059bfe/intents/335ebd4c-bb93-4ed1-bd4c-610789dbb7ea\", \"displayName\": \"additional-feedback\" }, \"matchType\": \"DIRECT_INTENT\", \"confidence\": 1 } ], \"currentPage\": { \"name\": \"projects/vcu-virtual-assistant-bot/locations/global/agents/8ec51540-2933-43d6-aad5-355545059bfe/flows/798f5699-958d-4fb2-abd5-2f16837b059f/pages/20f79bd5-019d-4f07-a64e-e6740122b731\", \"displayName\": \"additional-feedback\" } } ``` --- # [Fulfill Intent](https://cloud.google.com/dialogflow/cx/docs/reference/rest/v3beta1/projects.locations.agents.sessions/fulfillIntent?apix_params=%7B%22session%22%3A%22projects%2Fvcu-virtual-assistant-bot%2Flocations%2Fglobal%2Fagents%2F8ec51540-2933-43d6-aad5-355545059bfe%2Fsessions%2Fcd205a-958-7fc-5d5-0824cd93b%22%2C%22resource%22%3A%7B%22matchIntentRequest%22%3A%7B%22session%22%3A%22projects%2Fvcu-virtual-assistant-bot%2Flocations%2Fglobal%2Fagents%2F8ec51540-2933-43d6-aad5-355545059bfe%2Fsessions%2Fcd205a-958-7fc-5d5-0824cd93b%22%2C%22queryInput%22%3A%7B%22languageCode%22%3A%22en%22%2C%22intent%22%3A%7B%22intent%22%3A%22projects%2Fvcu-virtual-assistant-bot%2Flocations%2Fglobal%2Fagents%2F8ec51540-2933-43d6-aad5-355545059bfe%2Fintents%2F335ebd4c-bb93-4ed1-bd4c-610789dbb7ea%22%7D%7D%2C%22persistParameterChanges%22%3Atrue%7D%2C%22match%22%3A%7B%22intent%22%3A%7B%22name%22%3A%22projects%2Fvcu-virtual-assistant-bot%2Flocations%2Fglobal%2Fagents%2F8ec51540-2933-43d6-aad5-355545059bfe%2Fintents%2F335ebd4c-bb93-4ed1-bd4c-610789dbb7ea%22%2C%22displayName%22%3A%22additional-feedback%22%7D%2C%22matchType%22%3A%22DIRECT_INTENT%22%2C%22confidence%22%3A1%7D%7D%7D&apix=true) ## Request Body ```json { \"matchIntentRequest\": { \"session\": \"projects/vcu-virtual-assistant-bot/locations/global/agents/8ec51540-2933-43d6-aad5-355545059bfe/sessions/cd205a-958-7fc-5d5-0824cd93b\", \"queryInput\": { \"languageCode\": \"en\", \"intent\": { \"intent\": \"projects/vcu-virtual-assistant-bot/locations/global/agents/8ec51540-2933-43d6-aad5-355545059bfe/intents/335ebd4c-bb93-4ed1-bd4c-610789dbb7ea\" } }, \"persistParameterChanges\": true }, \"match\": { \"intent\": { \"name\": \"projects/vcu-virtual-assistant-bot/locations/global/agents/8ec51540-2933-43d6-aad5-355545059bfe/intents/335ebd4c-bb93-4ed1-bd4c-610789dbb7ea\", \"displayName\": \"additional-feedback\" }, \"matchType\": \"DIRECT_INTENT\", \"confidence\": 1 } } ``` ## Response Body ```json { \"responseId\": string, \"queryResult\": { object (QueryResult) }, \"outputAudio\": string, \"outputAudioConfig\": { object (OutputAudioConfig) } } ``` --- # [Webhooks](https://cloud.google.com/dialogflow/cx/docs/reference/rest/v3/WebhookRequest) ## [Request](https://cloud.google.com/dialogflow/cx/docs/reference/rpc/google.cloud.dialogflow.cx.v3beta1#webhookrequest) ```json { \"detectIntentResponseId\": \"e8379fe3-5090-44be-8df4-a064b5ebb3dc\", \"intentInfo\": { \"lastMatchedIntent\": \"projects/vcu-virtual-assistant-bot/locations/global/agents/8ec51540-2933-43d6-aad5-355545059bfe/intents/00000000-0000-0000-0000-000000000000\", \"displayName\": \"Default Welcome Intent\", \"confidence\": 1.0 }, \"pageInfo\": { \"currentPage\": \"projects/vcu-virtual-assistant-bot/locations/global/agents/8ec51540-2933-43d6-aad5-355545059bfe/flows/00000000-0000-0000-0000-000000000000/pages/START_PAGE\", \"displayName\": \"Start Page\" }, \"sessionInfo\": { \"session\": \"projects/vcu-virtual-assistant-bot/locations/global/agents/8ec51540-2933-43d6-aad5-355545059bfe/sessions/40e94b-779-70d-a9f-3e08ab3fe\", \"parameters\": { \"name\": \"ziggy fresh\" } }, \"fulfillmentInfo\": { \"tag\": \"comm100-customfields\" }, \"messages\": [ { \"text\": { \"text\": [ \"Greetings! How can I assist?\" ], \"redactedText\": [ \"Greetings! How can I assist?\" ] }, \"responseType\": \"HANDLER_PROMPT\", \"source\": \"VIRTUAL_AGENT\" } ], \"text\": \"hello\", \"languageCode\": \"en\" } ``` ## dialog flow simple request body ```json { \"sessionInfo\": { \"parameters\": { \"item\": \"tshirt\" } }, \"fulfillmentInfo\": { \"tag\": \"confirm\" } } ``` ## post request `curl -X POST -H \"Authorization: Bearer $(gcloud auth print-access-token)\" -H \"x-goog-user-project: dialogflow-378918\" -H \"Content-Type: application/json; charset=utf-8\" -d '{\"queryInput\": {\"event\": {\"event\": \"custom-event\"},\"languageCode\": \"en\"}, \"queryParams\": {\"timeZone\": \"America/Los_Angeles\"}}' \"https://us-central1-dialogflow.googleapis.com/v3/projects/dialogflow-378918/locations/us-central1/agents/340fe3aa-6e96-4ac3-b61b-00c79bd55733/sessions/1ca764-0e7-a39-581-11093b511 :detectIntent\"` --- ## [Response Body](https://cloud.google.com/dialogflow/cx/docs/concept/webhook#webhook-response) - [webhookresponse RPC](https://cloud.google.com/dialogflow/cx/docs/reference/rpc/google.cloud.dialogflow.cx.v3#webhookresponse) - [fullfillment response REST](https://cloud.google.com/dialogflow/cx/docs/reference/rest/v3/Fulfillment#responsemessage) - [Response Body REST](https://cloud.google.com/dialogflow/cx/docs/reference/rest/v3/WebhookResponse) ```json { \"fulfillmentResponse\": { \"mergeBehavior\": null, \"messages\": [ { \"text\": { \"text\": [ \"This is a sample response.\" ] } } ], \"ETag\": null }, \"pageInfo\": null, \"payload\": null, \"sessionInfo\": { \"parameters\": { \"security-code\": \"jj444\" }, \"session\": null, \"ETag\": null }, \"targetFlow\": null, \"targetPage\": null, \"ETag\": null } ``` ### custom Webhook with rich text and chips ```json { \"fulfillment_response\": { \"messages\": [ { \"text\": { \"text\": [ \"Please select anyone\" ] }, \"payload\": { \"richContent\": [ [ { \"type\": \"chips\", \"options\": [ { \"text\": \"Chip 1\", \"image\": { \"src\": { \"rawUrl\": \"https://example.com/images/logo.png\" } }, \"link\": \"https://example.com\" }, { \"text\": \"Chip 2\", \"image\": { \"src\": { \"rawUrl\": \"https://example.com/images/logo.png\" } }, \"link\": \"https://example.com\" } ] } ] ] } } ] } } ``` ### - rich text custom buttons ```json { \"richContent\": [ [ { \"type\": \"button\", \"icon\": { \"type\": \"chevron_right\", \"color\": \"#FF9800\" }, \"text\": \"Button text\", \"link\": \"https://yoursite.org\", \"event\": { \"name\": \"\", \"languageCode\": \"en\", \"parameters\": {} } } ] ] } ``` #### In the webhookResponse > you can set the fulfillment_response and target_page fields to send a fulfillment response as well as transition to another page respectively. > Here’s an example below: ##### Here are possible ways to continue/resume a conversation by passing previously collected customer data from a previous conversation into a new conversation You can create a custom implementation using a [webhook](https://cloud.google.com/dialogflow/cx/docs/concept/webhook) wherein a function will store the [parameter](https://cloud.google.com/dialogflow/cx/docs/basics#parm) and [forms](https://cloud.google.com/dialogflow/cx/docs/basics#form) you collected and use that to continue the chat from where the user left off during a conversation flow or a [session](https://cloud.google.com/dialogflow/cx/docs/concept/session). In the [webhookResponse](https://cloud.google.com/dialogflow/cx/docs/reference/rpc/google.cloud.dialogflow.cx.v3#webhookresponse) you can set the fulfillment_response, target_page fields and session_info field to update and send back the stored parameters you collected from the previous conversation. > Here’s an example of how to pass the session parameter, target page and fulfillment response from your webhook response: ```json { \"sessionInfo\": { \"parameters\": { \"param1\": { \"value\": \"sample1\" } } }, \"targetPage\": \"projects / /locations//agents//flows//pages/\", \"fulfillment_response\": { \"messages\": [ { \"text\": [ \"This is where you left\" ] } ] } } ``` --- ### Custom Web Hooks #### Resources ##### bot for front end calls i used > projects/dialogflow-378918/locations/global/agents/069075ae-67c3-4223-88cc-137335336001 ##### bot for backend/function/cli calls i used > projects/dialogflow-378918/locations/global/agents/6b645750-50d1-42bc-be58-cc8489cc2f24 ##### format for detectintent with session id `projects//locations//agents//sessions/` - ex. `projects/dialogflow-378918/locations/global/agents/ab41f453-1740-49c5-b352-9f8017868355/sessions/dfMessenger-71737901` # [WELCOME intent/ Default start call intent](https://cloud.google.com/dialogflow/cx/docs/concept/intent#welcome) - format `projects//locations//agents//intents/00000000-0000-0000-0000-000000000000` - ex. `projects/dialogflow-378918/locations/global/agents/069075ae-67c3-4223-88cc-137335336001/intents/00000000-0000-0000-0000-000000000000` --- #### CLI ##### [test in API Console](https://cloud.google.com/dialogflow/cx/docs/reference/rest/v3beta1/projects.locations.agents.sessions/detectIntent?hl=en&apix=true&apix_params=%7B%22session%22%3A%22projects%2Fdialogflow-378918%2Flocations%2Fglobal%2Fagents%2F6b645750-50d1-42bc-be58-cc8489cc2f24%2Fsessions%2Fthis_is_a_session_id_123456%22%2C%22resource%22%3A%7B%22queryInput%22%3A%7B%22intent%22%3A%7B%22intent%22%3A%22projects%2Fdialogflow-378918%2Flocations%2Fglobal%2Fagents%2F069075ae-67c3-4223-88cc-137335336001%2Fintents%2F00000000-0000-0000-0000-000000000000%22%7D%2C%22languageCode%22%3A%22en%22%7D%2C%22queryParams%22%3A%7B%22timeZone%22%3A%22America%2FLos_Angeles%22%7D%7D%7D) - fyi > use [OAuthPlayground](https://developers.google.com/oauthplayground/) > to get ACCESS TOKEN to test > > > need access token to test, but can set up function to have 0Auth already but using a service account or your own ##### curl call , with body to trigger event ```shell curl -m 70 -X POST --header 'Authorization: Bearer ya29.a0Ael9sCM7Gfk0D95ta0FAr2CR_fMUk1mjyY9RHHOp-KR7xAMR5AjP1p9XNvFrkKhyPjrzfa_Il0YdOcNPCDhtCzLODrgzIEqXR_YyW_FkQWYm8VYTHA2jHD49UMuqyh1WBqdZUe3ukkbwKTpQiIHb2AVc8h4TaCgYKASASARMSFQF4udJh_4KVLgiUV5Gcufk4KcK_WQ0163' --header 'Accept: application/json' --header 'Content-Type: application/json' --data '{\"query_input\":{\"event\":{\"event\":\"initiate-bot-event\"},\"language_code\":\"en\"},\"queryParams\":{\"time_zone\":\"America/Los_Angeles\"}}' --compressed ``` ##### curl, call to trigger \"WELCOME\" event , or default start card ```shell curl -m 70 -X POST --header 'Authorization: Bearer ya29.a0Ael9sCM7Gfk0D95ta0FAr2CR_fMUk1mjyY9RHHOp-KR7xAMR5AjP1p9XNvFrkKhyPjrzfa_Il0YdOcNPCDhtCzLODrgzIEqXR_YyW_FkQWYm8VYTHA2jHD49UMuqyh1WBqdZUe3ukkbwKTpQiIHb2AVc8h4TaCgYKASASARMSFQF4udJh_4KVLgiUV5Gcufk4KcK_WQ0163' --header 'Accept: application/json' --header 'Content-Type: application/json' --data '{\"queryInput\":{\"intent\":{\"intent\":\"projects/dialogflow-378918/locations/global/agents/069075ae-67c3-4223-88cc-137335336001/intents/00000000-0000-0000-0000-000000000000\"},\"languageCode\":\"en\"},\"queryParams\":{\"timeZone\":\"America/Los_Angeles\"}}' --compressed ``` --- # Events ## [EventHandler](https://cloud.google.com/dialogflow/cx/docs/reference/rest/v3beta1/EventHandler?hl=en) ## [EventInput](https://cloud.google.com/dialogflow/es/docs/reference/rest/v2beta1/EventInput) --- # Agent Handoff Select Live agent handoff from the Add dialogue option dropdown. Add dialogue option dropdown menu This will result in an area to provide a custom JSON message. Live agent handoff text field Every target live agent system is different. Refer to the system's documentation as to what message format will be necessary to add to provide the proper communication parameters. As an example, if you're using [Business Messages](https://developers.google.com/business-communications/business-messages), the format that you'd enter here would look something like this: { \"userStatus\": { \"requestedLiveAgent\": true } } Copied! Please check the Business Messages documentation for the precise JSON message. For more information on Business Messages live agent handoff formats, see [Handoff from bot to live agent](https://developers.google.com/business-communications/business-messages/guides/how-to/message/conversations/bot-live-agent-handoff?hl=en). --- # Agent Responses ## [Custom Payload](https://developers.google.com/assistant/df-asdk/rich-responses) ## [DialogFlow CX Doc](https://cloud.google.com/dialogflow/cx/docs/concept/integration/dialogflow-messenger#suggestion_chip_response_type) --- # Testing ## Select All Test checkboxes for Environment settings ```javascript for (let e of document.querySelectorAll(\"mat-option\")) { e.click(); } ``` # PostMan ## Setup oauth2 DialogFlow example > Download and launch [Postman](https://www.postman.com/). **Generate an OAuth 2.0 token** 1. From the GCP console (APIs & Services -> Library), ensure that the **Dialogflow API** is enabled 2. Create an OAuth 2.0 client ID - From the GCP console (API & Services -> OAuth consent screen) - Add “_getpostman.com_” to the Authorized domains. Click Save. - From the GCP console (API & Services -> Credentials) - Select _+Create Credentials_ -> OAuth client ID and choose Application type ‘_Web application_’. - Name: '**getpostman**' - Authorized redirect URIs: \\*\\*https://www.getpostman.com/oauth2/callback - Copy the generated Client ID and Client secret fields for later use 3. From Postman, create a new Request and select the “Authorization” tab and choose Type \"OAuth 2.0\". Click 'Get New Access Token'. - Fill the GET NEW ACCESS TOKEN form as follows: - Token Name: 'Google OAuth getpostman' - Grant Type: 'Authorization Code' - Callback URL: https://www.getpostman.com/oauth2/callback - Auth URL: https://accounts.google.com/o/oauth2/auth - Access Token URL: https://accounts.google.com/o/oauth2/token - Client ID: generated in the Step 2 (e.g., '111111111111-aaaaaaaaaaa1234546789blablabl12.apps.googleusercontent.com') - Client Secret: generated in the Step 2 (e.g., 'ABRACADABRAus1AAAAvq9R-A') - Scope: https://www.googleapis.com/auth/dialogflow - State: Leave empty - Client Authentication: \"Send as Basic Auth header\" - Click 'Request Token' and 'Use Token' Send GET request to Dialogflow API 1. See the Dialogflow API Rest [reference](https://cloud.google.com/dialogflow/priv/docs/reference/rest/v2-overview) for the full list of APIs you can query. 2. From Postman, enter the API you want to query in the GET field. In this example, we want to get a list of all the Intents for this Dialogflow Agent. _Be sure to replace this Project ID ‘ai-assisted-student’ with your Project ID._ ![alt_text](images/postman-get-request.png \"image_tooltip\") 3. Click the “Send” button. You should see the query results in the Response Body: ![alt_text](images/postman-get-response.png \"image_tooltip\") **Send POST request to Dialogflow API** 1. Now let’s try a POST request. For this example, we want to use the detectIntent API by providing a query text in our request of what our intention is and the agent will “detect” our intention by matching one of our agent Intents. 2. From the drop down, change the request type to “POST” and enter the appropriate HTTP request. **Do not click the “Send” button just yet.** _Be sure to replace this Project ID ‘ai-assisted-student’ with your Project ID._ ![alt_text](images/postman-post-request.png \"image_tooltip\") 3. Now we want to include a JSON payload with our query text as input*.* Under the POST field, select “Body->raw->Text” and from the drop down, choose “JSON”. 4. Enter the appropriate JSON payload details from the Dialogflow API documentation (see this [example](https://cloud.google.com/dialogflow/es/docs/reference/rest/v2/QueryInput)). ![alt_text](images/postman-post-body.png \"image_tooltip\") 5. Now click the “Send” button. In the response body, you should see that your query input (in this example, “is the cafe open”), is matched with the appropriate Intent and the fulfillment text response provides our agent answer to the question. ![alt_text](images/postman-post-response.png \"image_tooltip\") --- # Quick Notes/References - [Prebuilt Agents](https://dialogflow.cloud.google.com/cx/projects/dialogflow-378918/locations/us-central1/agents/96cc3d6a-66e6-4fb2-a065-4b1132fd905a/prebuilt) - [Console/Shell in Browser](https://shell.cloud.google.com/?hl=en_US&fromcloudshell=true&show=terminal) - [Customizable chat Dialog and Facebook integration](https://cloud.google.com/dialogflow/cx/docs/concept/integration/dialogflow-messenger#suggestion_chip_response_type?utm_source=codelabs&utm_medium=et&utm_campaign=CDR_lee_aiml_leedialogflowlabs_cx_&utm_content=-) - [internationalization (I18N)](https://cloud.google.com/dialogflow/cx/docs/concept/agent-multilingual) - [Language References](https://cloud.google.com/dialogflow/cx/docs/reference/language) ",
    "url": "/GoogleNotes/DialogFlow",
    
    "relUrl": "/GoogleNotes/DialogFlow"
  },"54": {
    "doc": "Docker",
    "title": "Docker",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Postgres ```shell docker pull postgres:9.6.14 ``` > You can change the Postgres password by changing the `_POSTGRESS_PASSWORD_` value from `_hydrogen_` to any preferred secured password ```bash docker run --name -e POSTGRES_PASSWORD=hydrogen -p 5432:5432 -d -v $HOME/docker/volumes/postgres:/var/lib/postgresql postgres:9.6.14 ``` ## PSQL Terminal > Use the following command to hop into the PSQL terminal session. ```bash docker exec -ti psql -h localhost -U postgres ``` > data-source in `respository/conf/identity/identity.xml` with the `Postgres` `JNDI` configuration name ```xml jdbc/WSO2CarbonPostgresDB ``` # MySQL ```shell docker pull mysql ``` ## Run Container ```shell docker run --detach --name=jspmysql --env=\"MYSQL_ROOT_PASSWORD=jsppassword\" --publish 6603:3306 mysql ``` ### Exposing MySQL Container to Host > Expose the `MySQL` container to the outside world by mapping the container’s `MySQL` port to the host machine port using the `publish` flag. > Now, we can connect to the `MySQL` > container through port 6703 > Notice, the IP address comes from docker machine. For my docker machine, it is 192.168.99.100. ```shell docker rm -f jspmysql docker run --detach --name=jspmysql --env=\"MYSQL_ROOT_PASSWORD=jsppassword\" --publish 6703:3306 mysql ``` ## Creating MySQL Image ```shell docker run --detach --name=jspmysql --env=\"MYSQL_ROOT_PASSWORD=jsppassword\" --publish 6603:3306 mysql ``` > What is this command doing? - > Create a `MySQL` container named `jspmysql` - > Set environment variable ` MYSQL_ROOT_PASSWORD` to `jsppassword` - > Expose `3306` and map to `6603` for an outside world to connect to this `MySQL` database - > In addition, we manually created database `jsptutorial` and table `Product` ```bash mysqladmin -u root -p create jsptutorial ``` ```bash mysql -u root -p jsptutorial Create one file named Dockerfile in any directory on local machine. ```bash cd ~/Johnny mkdir DockerMySQL cd DockerMySQL vim Dockerfile ``` #### Create MySQL Image for JSP Tutorial Application ```dockerfile FROM mysql MAINTAINER csgeek@mail.com ENV MYSQL_ROOT_PASSWORD jsppassword ADD jsp_backup.sql /docker-entrypoint-initdb.d EXPOSE 3306 ``` The following points need to be noted about the above file. - > The first line is a comment. You can add comments to the Docker File with the help of the # command - > The FROM keyword tells which base image you want to use. In our example, we are creating an image from the mysql image. - > The next command is the person who is going to maintain this image. - > The ENV command is used to set environment variable. We set MYSQL_ROOT_PASSWORD to jsppassword for MySQL database. - > The ADD command copies the database backup file to /docker-entrypoint-initdb.d directory in the Docker container. - > The docker-entrypoint.sh file will run any files in this directory ending with“.sql” against the MySQL database. > In our example, we have only one sql script file jsp_backup.sql. - > The EXPOSE command exposes port 3306 of the image. ### Creating Image with Dockerfile > Open Docker terminal, navigate to the folder where the Dockerfile and MySQL backup file locates. Run the following command. ```bash docker build -t jspmysql:0.1 . ``` ",
    "url": "/SQLNotes/Docker",
    
    "relUrl": "/SQLNotes/Docker"
  },"55": {
    "doc": "DockerNotes",
    "title": "DockerNotes",
    "content": "# [REPO](https://github.com/14paxton/DockerNotes) {: .text-delta } 1. TOC {:toc} | --- ",
    "url": "/DockerNotes/",
    
    "relUrl": "/DockerNotes/"
  },"56": {
    "doc": "Dockerfile",
    "title": "Dockerfile",
    "content": "# [Docker File for building Grails 2.0.3 app ](https://gist.github.com/14paxton/c9fba71cd90ec3716974a48e386b3e1f) > Use `Java 7`, `SDKMAN`, and `Tomcat` to build and run `Grails` app in a `Dockerfile` # [Partial Code example for building Grails app and running in docker container](https://github.com/14paxton/run_grails_in_docker_container) ",
    "url": "/DockerNotes/Dockerfile",
    
    "relUrl": "/DockerNotes/Dockerfile"
  },"57": {
    "doc": "Document",
    "title": "Document",
    "content": "{: .text-delta } 1. TOC {:toc} --- # CREATE STRING FUNCTION TO INSERT WHEN DYNAMICALLY CREATING NEW HTML DOCUMENT ```javascript var s = doc.createElement(\"script\"); s.type = \"text/javascript\"; let sum = function () { alert(\"mooo\"); }; const x = sum.toString(); var code = `${x}; sum();`; try { s.appendChild(doc.createTextNode(code)); doc.body.appendChild(s); } catch (e) { s.text = code; doc.body.appendChild(s); } ``` # create an onload function > was using this to insert a string function for a window popup ```javascript //can use if making string script and inserting via innertext //i.e. const script = `` const myOnloadFunction = `()=> console.log(\"this works\")`; export function insertReadyFunctionString() { const readyFunction = `function ready(fn) { if (document.readyState != 'loading'){ fn(); } else { document.addEventListener('DOMContentLoaded', fn); } } ready(${myOnloadFunction})`; return readyFunction; } ``` # dynamically create scripts ```javascript //Functions for dynamically adding script elements export function fireReadyScript(stringOnloadScript) { const readyFunction = `function ready(fn) { if (document.readyState != 'loading'){ fn(); } else { document.addEventListener('DOMContentLoaded', fn); } } ready(${stringOnloadScript})`; return readyFunction; } const whereToAddObject = { head: (documentElement, s) => { documentElement.head.prepend(s); }, body_top: (documentElement, s) => { documentElement.body.prepend(s); }, body_bottom: (documentElement, s) => { documentElement.body.appendChild(s); }, }; async function addScript(documentElement, functionToAdd, stringElementName) { try { let s = documentElement.createElement(\"script\"); s.type = \"text/javascript\"; const stringFunc = cleanWebPackImports(functionToAdd.toString()); let code = `${stringFunc}`; try { s.appendChild(documentElement.createTextNode(code)); if (Object.hasOwn(whereToAddObject, stringElementName)) { return Promise.resolve(whereToAddObject[stringElementName](documentElement, s),); } } catch (e) { s.text = code; if (Object.hasOwn(whereToAddObject, stringElementName)) { return Promise.resolve(whereToAddObject[stringElementName](documentElement, s),); } } } catch (e) { console.error(\"Can not add script to window:\", e); return Promise.reject(\"Can not add script to window: \" + e); } } //pass object example {elementToAppend: [array of functions]} export function addFunctionsAsScript(documentElement, elementFunctionObject) { const promises = []; for (let [stringElementName, arrayOfFunctions] of Object.entries(elementFunctionObject,)) { const functionArray = Array.isArray(arrayOfFunctions) ? arrayOfFunctions : [arrayOfFunctions]; functionArray.forEach((functionToAdd) => { promises.push(addScript(documentElement, functionToAdd, stringElementName),); }); } return Promise.all(promises); } //expecting array of objects {src: cdn url , integrity: (optional) token, nonce: (optional) generated random id for script} //and optional documentElement to attach to body const scriptAttrObject = {}; scriptAttrObject.src = (src, scriptTag) => (scriptTag.src = src); scriptAttrObject.nonce = (nonce, scriptTag) => (scriptTag.nonce = nonce); scriptAttrObject.integrity = (integrity, scriptTag) => (scriptTag.integrity = integrity); export async function addScriptsWithSRC(scriptSrcArray, documentElement) { const srcArray = Array.isArray(scriptSrcArray) ? scriptSrcArray : [scriptSrcArray]; return srcArray.map((scriptTagInfoObj) => { const script = document.createElement(\"script\"); script.async = true; script.crossOrigin = \"anonymous\"; Object.keys(scriptTagInfoObj).forEach((key) => { if (scriptAttrObject.hasOwnProperty(key)) { scriptAttrObject[key](scriptTagInfoObj[key], script); } }); if (documentElement) documentElement.body.prepend(script); return script; }); } ``` ## can pass cdn strings ```javascript const jsDependents = [{ src: `https://cdn.jsdelivr.net/npm/pptxgenjs@3.10.0/dist/pptxgen.bundle.js`, metaSrcContent: `https://cdn.jsdelivr.net`, integrity: `sha256-Wy9VBv6NL/AYHtNghEzGN525/yDwqqVoNXOScJYakwc=`, nonce: `cdn-${Math.floor(Math.random() * 35)}`, }, { src: `https://cdn.jsdelivr.net/npm/jszip@3.10.0/dist/jszip.min.js`, metaSrcContent: `https://cdn.jsdelivr.net`, integrity: `sha256-RJEp/lRYoP8E7Mlpwa0GG4iCrDTmCSa8jxO6NrYUrOQ=`, nonce: `cdn-${Math.floor(Math.random() * 35)}`, },]; ``` # CDN or workaround for Content Security Policy [content-security-policy](https://content-security-policy.com/) [source whitelist](https://web.dev/csp/#source-whitelists) [stack overflow refused-to-load-the-script-because-it-violates-the-following-content-security](https://stackoverflow.com/questions/31211359/refused-to-load-the-script-because-it-violates-the-following-content-security-po/31219814#31219814) ```javascript export async function add_Dangerous_CSP_MetaTags(scriptSrcArray, documentElement,) { const srcArray = Array.isArray(scriptSrcArray) ? scriptSrcArray : [scriptSrcArray]; const contentType = document.createElement(\"meta\"); contentType.httpEquiv = \"content-type\"; contentType.content = \"text/html; charset=utf-8 ;\"; return srcArray.map((scriptTagInfoObj) => { const metaContentSecurityPolicy = document.createElement(\"meta\"); metaContentSecurityPolicy.httpEquiv = \"Content-Security-Policy\"; metaContentSecurityPolicy.content = `script-src 'self' 'unsafe-inline' 'unsafe-eval' ${scriptTagInfoObj?.metaSrcContent} ${scriptTagInfoObj?.nonce} ${scriptTagInfoObj?.integrity}`; documentElement.head.prepend(metaContentSecurityPolicy); return metaContentSecurityPolicy; }); } ``` ",
    "url": "/JavaScript/Document",
    
    "relUrl": "/JavaScript/Document"
  },"58": {
    "doc": "Domain_Stuff",
    "title": "Domain_Stuff",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Binding > [Groovy Examples](https://paxtonb.com/GroovyNotes/MetaProgramming#objects) ## BindingResult > package org.springframework.validation; ```groovy domain.properties = newMap as BindingResult ``` ## DataBinder > package grails.web.databinding ```groovy @Transactional class BindSomeData implements DataBinder { Map createUpdateClientSetup(IntegrationCommand integrationCMD, def clientSetup = null) { ClientSetup newClientSetup = (clientSetup && clientSetup instanceof ClientSetup) ? clientSetup as ClientSetup : new ClientSetup() Map clientAndCompany = (clientSetup && clientSetup instanceof ClientSetup) ? [clientId: clientSetup.clientId, clientName: clientSetup.clientName] : fetchClientIdAndCompanyName(integrationCMD) clientAndCompany.externalClientId = integrationCMD.externalClientId ? Long.valueOf(integrationCMD.externalClientId) : clientAndCompany.clientId Object paramMap = [*: integrationCMD.buildClientSetup(), *: clientAndCompany] if (paramMap?.errors) return [*: paramMap, code: 422] bindData(newClientSetup, paramMap as Object) def errors = validatingClosure(newClientSetup) return errors ?: [clientSetup: newClientSetup.save(flush: true)] } } ``` # Discriminator ## utilizing formula was used to modify existing domain to add a parent , and existing records would have a class ```groovy class Group { String name UserGroupType type Long userId Long interviewModelId Long clientSetupId Date dateCreated Date lastUpdated Visibility visibility = Visibility.PRIVATE static hasMany = [groupAssessmentOrders: UserGroupAssessmentOrder, userGroupShare: UserGroupShare] static constraints = { interviewModelId nullable: true name(unique: ['clientSetupId', 'userId', 'type']) groupAssessmentOrders cascade: \"all-delete-orphan\" visibility nullable: true } static mapping = { table \"user_group\" discriminator formula: \"case when (type = 'GROUP_COMPARE') then '${UserGroupType.GROUP_COMPARE.key}' when (type = 'RESULT_COMPARE') then '${UserGroupType.RESULT_COMPARE.key}' when (type in ('RESULTGROUP', 'MYSAVEDGROUP')) then '${UserGroupType.RESULTGROUP.key}' else '${UserGroupType.GROUPDEFAULT.key}' end \", type: 'string', value: UserGroupType.GROUPDEFAULT.key groupAssessmentOrders joinTable: ['user_group_assessment_order', column: 'user_group_assessment_order_id', key : 'user_group_id'] //Custom Join Table name and Column visibility defaultValue: Visibility.PRIVATE } } class ResultCompare extends Group { static hasOne = [groupCompareJoinUserGroup: GroupCompareJoinUserGroup] static mapping = { table 'user_group' groupCompareJoinUserGroup nulable: true, cascade: \"all-delete-orphan\" discriminator value: UserGroupType.RESULT_COMPARE.key groupAssessmentOrders cascade: \"all-delete-orphan\" } ResultCompare() { this.type = UserGroupType.RESULT_COMPARE } ResultCompare(Group group, Long userId, String name) { this.type = UserGroupType.RESULT_COMPARE this.interviewModelId = group.properties.get('interviewModelId') as Long this.clientSetupId = group.properties.get('clientSetupId') as Long this.type = UserGroupType.RESULT_COMPARE this.userId = userId this.name = name this.groupCompareJoinUserGroup = new GroupCompareJoinUserGroup(userGroup: group) } } class UserGroup extends Group { static hasMany = [userGroupJoinGroupCompare: GroupCompareJoinUserGroup] static constraints = { } static mapping = { table 'user_group' discriminator value: UserGroupType.RESULTGROUP.key userGroupJoinGroupCompare cascade: \"all\", joinTable: ['user_group_group_compare', column: 'group_compare_id', key : 'user_group_id'] } } class GroupCompare extends Group { static hasMany = [userGroupJoinGroupCompare: GroupCompareJoinUserGroup] static constraints = { userGroupShare nullable: true } static mapping = { table 'user_group' discriminator value: UserGroupType.GROUP_COMPARE.key userGroupJoinGroupCompare cascade: \"all-delete-orphan\", joinTable: ['group_compare_user_group', column: 'user_group_id', key: 'group_compare_id'] groupAssessmentOrders cascade: \"all-delete-orphan\" } GroupCompare() { this.type = UserGroupType.GROUP_COMPARE } GroupCompare(Group group, Long userId, String name) { this.interviewModelId = group?.interviewModelId as Long this.clientSetupId = group?.clientSetupId as Long this.type = UserGroupType.GROUP_COMPARE this.userId = userId this.name = name GroupCompareJoinUserGroup join = new GroupCompareJoinUserGroup(userGroup: group, groupToCompare: this) addToUserGroupJoinGroupCompare(join) } void addUserGroupToCompare(Group group) { if (this.interviewModelId == group?.interviewModelId) { GroupCompareJoinUserGroup join = new GroupCompareJoinUserGroup(userGroup: group) addToUserGroupJoinGroupCompare(join) } } } class GroupCompareJoinUserGroup implements Serializable { Group groupCompare Group userGroup static belongsTo = [groupCompare: Group, userGroup: Group] static constraints = { groupCompare unique: 'userGroup' userGroup cascade: \"none\", validator: { Group val, GroupCompareJoinUserGroup obj, errors -> if (val.interviewModelId != obj.groupCompare.interviewModelId) errors.reject(\"different_interview_models\", \"interviewModelId is not the same for these groups\") } } } ``` ## standard ```groovy class TeamCompare extends Team { Collection teamsToCompare static hasMany = [teamsToCompare: TeamCompareJoinUser] static mapping = { table \"team_compare\" discriminator value: TeamCompareType.TEAM_COMPARE.key teamsToCompare cascade: 'all-delete-orphan' } TeamCompare(User team, User user, String name, Long clientSetupId) { this.user = user this.name = name this.clientSetupId = clientSetupId TeamCompareJoinUser join = new TeamCompareJoinUser(team: team, teamCompare: this as Team) addToTeamsToCompare(join) } void addTeamsToCompare(User team) { TeamCompareJoinUser join = new TeamCompareJoinUser(team: team) addToTeamsToCompare(join) } } ``` ",
    "url": "/PersonalGrailsNotes/Domain_Stuff",
    
    "relUrl": "/PersonalGrailsNotes/Domain_Stuff"
  },"59": {
    "doc": "DotNetNotes",
    "title": "DotNetNotes",
    "content": "# [REPO](https://github.com/14paxton/DotNetNotes) | --- ",
    "url": "/DotNetNotes/",
    
    "relUrl": "/DotNetNotes/"
  },"60": {
    "doc": "Elements",
    "title": "Elements",
    "content": "{: .text-delta } 1. TOC {:toc} --- # [HTMLElement Interface](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement) # Hide/Show ## CSS Style Hide ```javascript element.style.display = \"block\"; // Show element.style.display = \"inline\"; // Show element.style.visibility = \"visible\"; // Show element.style.display = \"inline-block\"; // Show element.style.display = \"none\"; // Hide element.style.visibility = \"hidden\"; // Hide element.style.opacity = 0; // Hide element.setAttribute(\"hidden\", true); //hide element.toggle(); // hide/show ``` ## Aria Hidden ```javascript let el = document.getElementById(\"hidden\"); console.log(el.ariaHidden); // true el.ariaHidden = \"false\"; console.log(el.ariaHidden); // false ``` ## jQuery ```javascript \"element\".show(); //also $(\"element\").toggle(); ``` # find / search / get by Attributes ```javascript document.querySelector(\"input[name=rate]:checked\").value; ``` ## wild card / search ids where id is like ```javascript document.querySelector('[id^=\"poll-\"]').id; ``` ## check if exists ```javascript document.body.contains(document.getElementById(\"test\")); ``` ## jQuery ```javascript $(\"input[type='radio'][name='scheduleType']:not(:checked)\").attr(\"disabled\", true,); ``` > find by text jQuery `:contains(text)` # Attribute Value - > [Using Custom data- attributes](https://html5doctor.com/html5-custom-data-attributes/) > dataset returns DOMStringMap > Attribute must be camel cased `Element.dataset.attributeNameCamelCased` ## Get . | Attributes can be set and read by the camelCase name/key as an object property of the dataset: element.dataset.keyname | Attributes can also be set and read using bracket syntax: element.dataset['keyname'] | The in operator can check if a given attribute exists: 'keyname' in element.dataset | . ```javascript document .getElementById(\"groupsWrapper-\" + id) .getAttribute(\"data-saved-assessment-count\"); ``` > or ```javascript imageContainer.dataset.images; ``` ## Set When the attribute is set, its value is always converted to a string. For example: element.dataset.example = null is converted into data-example=\"null\" To remove an attribute, you can use the delete operator: delete element.dataset.keyname . ```javascript document .getElementById(\"groupsWrapper-\" + id) .setAttribute(\"data-saved-assessment-count\", \"my text value\"); ``` > or ```javascript // set a data attribute el.dataset.dateOfBirth = \"1960-10-03\"; // Result on JS: el.dataset.dateOfBirth === '1960-10-03' ``` ```html Carina Anand ``` ## Remove ```javascript document .getElementById(\"groupsWrapper-\" + id) .removeAttribute(\"data-saved-assessment-count\"); ``` > or ```javascript delete el.dataset.dateOfBirth; // Result on JS: el.dataset.dateOfBirth === undefined ``` ```html Carina Anand ``` ## null check ```javascript if (!(\"someDataAttr\" in el.dataset)) { el.dataset.someDataAttr = \"mydata\"; // Result on JS: 'someDataAttr' in el.dataset === true } ``` ```html Carina Anand ``` ## jQuery ```javascript $(selectElement).data(\"saved-assessment-count\", currentTotalResultCount); ``` If using .data() to modify, you need to retrieve by .data() so new value will be reflected . # [Node Types](https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType) - > ## Node.ELEMENT_NODE (1) - An Element node ```html ``` ~~ OR ~~ ```html ``` - > ## Node.ATTRIBUTE_NODE (2) - An Attribute of an Element - > ## Node.TEXT_NODE (3) - The actual Text inside an Element or Attr. - > ## Node.CDATA_SECTION_NODE(4) - A CDATASection, ```xml ``` - > ## Node.PROCESSING_INSTRUCTION_NODE (7) - A ProcessingInstruction of an XML document, ```html ``` - > ## Node.COMMENT_NODE (8) - A Comment node, ```html ``` - > ## Node.DOCUMENT_NODE (9) - A Document node - > ## Node.DOCUMENT_TYPE_NODE (10) - A DocumentType node, ```html ``` - > ## Node.DOCUMENT_FRAGMENT_NODE (11) - A DocumentFragment node ```html a ``` ## Check Type ```javascript if (element.tagName === \"OL\") { } ``` ```javascript if (elementsObject && elementsObject?.body?.nodeName === \"TABLE\") { } ``` ```javascript const tagName = el.tagName || el.nodeName; ``` ```javascript if (node?.nodeType) { } ``` - > ### JavaScript check type on node element ```javascript node = e; node.nodeType === 1; node.nodeName === \"DIV\"; node.tagName === \"DIV\"; node = e.getAttributeNode(\"class\"); node.nodeType === 2; node.nodeName === \"class\"; node.tagName === undefined; node = e.childNodes[0]; node.nodeType === 3; node.nodeName === \"#text\"; node.tagName === undefined; ``` only use nodeType to get the node type. nodeName breaks for nodeType === 1 only use tagName for nodeType === 1 ## Deconstruct element to get node names and tag names / NodeName TagName ```javascript function addBlankSelectOption(selectBox) { const {nodeName, tagName} = selectBox; if (nodeName === \"SELECT\" || tagName === \"SELECT\") { const blankOption = document.createElement(\"option\"); blankOption.setAttribute(\"selected\", true); blankOption.setAttribute(\"disabled\", true); blankOption.setAttribute(\"hidden\", true); selectBox.prepend(blankOption); } } ``` ## Get Element Type ```javascript Object.prototype.toString .call(obj) .replace(/^\\[object (.+)\\]$/, \"$1\") .toLowerCase(); ``` # create clone ```javascript function createClone(element, setCSS, width, height) { const newElement = element.cloneNode(true); const createStyles = new Promise((resolve) => { if (!setCSS) { resolve(true); } else { generateRulesAll(element) .then((css) => { newElement.setAttribute(\"style\", css); }) .then(resolve); } }); createStyles.then((css) => { if (width) { newElement.width = width; newElement.style.width = `${width}`; } if (height) { newElement.height = height; newElement.style.height = `${height}`; } }); return newElement; } ``` # clone element to base64 png > using XMLSerializer ```javascript function svgToDataURL(svg) { return Promise.resolve() .then(() => new XMLSerializer().serializeToString(svg)) .then(encodeURIComponent) .then((html) => `data:image/svg+xml;charset=utf-8,${html}`); } function nodeToDataURL(node, width, height) { return new Promise((resolve) => { const xmlns = \"http://www.w3.org/2000/svg\"; const foreignObject = document.createElementNS(xmlns, \"foreignObject\"); foreignObject.setAttribute(\"width\", \"100%\"); foreignObject.setAttribute(\"height\", \"100%\"); foreignObject.setAttribute(\"x\", \"0\"); foreignObject.setAttribute(\"y\", \"0\"); foreignObject.setAttribute(\"externalResourcesRequired\", \"true\"); const svg = document.createElementNS(xmlns, \"svg\"); svg.setAttribute(\"width\", `${width}`); svg.setAttribute(\"height\", `${height}`); svg.setAttribute(\"viewBox\", `0 0 ${width} ${height}`); svg.appendChild(foreignObject); foreignObject.appendChild(node); resolve(svgToDataURL(svg)); }); } function createImage(url) { return new Promise((resolve, reject) => { const img = new Image(); img.onload = () => resolve(img); img.onerror = reject; img.crossOrigin = \"anonymous\"; img.decoding = \"sync\"; img.src = url; }); } function buildCanvas(img) { return new Promise((resolveCanvas) => { const canvas = document.createElement(\"canvas\"); const context = canvas.getContext(\"2d\"); const canvasHeight = img.height + 50; const canvasWidth = img.width + 50; canvas.width = canvasWidth; canvas.height = canvasHeight; canvas.style.width = `${canvasWidth}`; canvas.style.height = `${canvasHeight}`; context.drawImage(img, 0, 0, canvas.width, canvas.height); resolveCanvas(defaultSlideObject(canvas.toDataURL(), canvas.width, canvas.height),); }); } //this is similar to how html2canvas and html-to-image libraries work // take element -> get generated css -> create ans svg(needed to paint canvas element) -> // use svg to create xml then uri then uri data string -> use data uri to create image element by adding uri to src attribute -> // create a canvas element inserting/drawing image in -> get dataURL to use export function createElementToPNGBase64(arrayOfElementObjects, dimensionsObj, addIndividualElementCSS,) { if (arrayOfElementObjects) { return new Promise((resolve) => { elementsToNewDocument(arrayOfElementObjects, dimensionsObj, addIndividualElementCSS,) .then(({clonedDocument, width, height, newElementArray}) => nodeToDataURL(clonedDocument.documentElement, width, height),) .then(createImage) .then(buildCanvas) .then(resolve); }); } } export function cloneNodeToDocument(node, elementToAppend, idToSet, width, height, addIndividualElementCSS,) { if (node) { const w = width ? width : node.scrollWidth; const h = height ? height : node.scrollHeight; const newNode = createClone(node, !!addIndividualElementCSS, w, h); newNode.id = idToSet; elementToAppend.appendChild(newNode); return newNode; } } //array of element objects example: [{key: element}] // dimension object key should match element if custom dimension needed // example: {key:{height: number, width: number}} export function elementsToNewDocument(arrayOfElementObjects, dimensionsObj, addIndividualElementCSS,) { return new Promise((resolveNewDocument) => { const usableArray = Array.isArray(arrayOfElementObjects) ? arrayOfElementObjects : [arrayOfElementObjects]; const clonedDocument = document.cloneNode(true); // documentElement.querySelectorAll(\"noscript\").forEach(el => el.remove()) const body = clonedDocument.body; body.innerHTML = \"\"; let totalWidth = 0; let totalHeight = 0; const clonedElementArray = usableArray.map((elementObj) => { const key = Object.keys(elementObj)[0]; const element = elementObj[key]; const width = Object.hasOwn(dimensionsObj, key) ? dimensionsObj[key]?.width : element.scrollWidth; const height = Object.hasOwn(dimensionsObj, key) ? dimensionsObj[key]?.height : element.scrollHeight; totalWidth = totalWidth > width ? totalWidth : width; totalHeight += height; cloneNodeToDocument(element, body, key, width, height, addIndividualElementCSS,); }); resolveNewDocument({ clonedDocument: clonedDocument, width: totalWidth, height: totalHeight, newElementArray: clonedElementArray, }); }); } ``` # create table ```javascript export const createRow = async (row, index, newBody) => { const newRow = newBody.insertRow(index); newRow.innerHTML = row.innerHTML; return newRow; }; export const createTable = async (tableRows, rowIndex, elementsObject, divToAppend,) => { if (elementsObject && elementsObject?.body?.nodeName === \"TABLE\") { const table = elementsObject.body; const tableId = `clone_table_${rowIndex + 1}`; const { nodeClone: newTable, widthToSet, heightToSet, } = buildNewNodeClone(table, tableId, null, null, true, true); newTable.tBodies[0].remove(); const tBody = newTable.createTBody(); const tFoot = newTable.createTFoot(); const tHead = newTable.createTHead(); tHead.innerHTML = table.tHead.innerHTML; tFoot.innerHTML = table.tFoot.innerHTML; const rowPromises = tableRows.map((row, index) => new Promise((resolve) => resolve(createRow(row, index, tBody))),); await Promise.all(rowPromises).then((resolved) => { console.log(`rows for table ${tableId} added`); }); const tableWrapper = document.createElement(\"div\"); tableWrapper.id = `clone_table_wrapper_${rowIndex + 1}`; if (elementsObject?.header) { const { nodeClone: newHeader, widthToSet, heightToSet, } = buildNewNodeClone(elementsObject?.header, null, null, null, true, true,); tableWrapper.appendChild(newHeader); } tableWrapper.appendChild(newTable); if (divToAppend) divToAppend.appendChild(tableWrapper); return tableWrapper; } }; ``` # get children ```javascript export const getChildren = (element) => { let childArray = []; childArray.push(element); const children = element?.children; if (children) { for (let child of children) { childArray.push.apply(childArray, getChildren(child)); } } return childArray; }; ``` # [get un-rendered element dimensions](https://gist.github.com/remarkablemark/51ff6d8405d8c023d4aa30c5d0826225) ```javascript function getWidthAndHeight(node) { const width = node.scrollWidth || node.offsetWidth || measure(node, \"scrollWidth\"); const height = node.scrollHeight || node.offsetHeight || measure(node, \"scrollHeight\"); return {width, height}; } function measure(element, returnValue, parentNode) { parentNode = parentNode || window.document.documentElement.lastElementChild; const display = element.style.display; const zIndex = element.style.zIndex; const visibility = element.style.visibility; element.style.display = \"block\"; element.style.visibility = \"hidden\"; element.style.zIndex = -1; parentNode.appendChild(element); const { clientWidth, clientHeight, offsetWidth, offsetHeight, scrollWidth, scrollHeight, } = element; parentNode.removeChild(element); element.style.display = display; element.style.visibility = visibility; element.style.zIndex = zIndex; const returnObj = { clientWidth: clientWidth, clientHeight: clientHeight, offsetWidth: offsetWidth, offsetHeight: offsetHeight, scrollWidth: scrollWidth, scrollHeight: scrollHeight, }; if (returnObj.hasOwnProperty(returnValue)) { return returnObj[returnValue]; } return { clientWidth, clientHeight, offsetWidth, offsetHeight, scrollWidth, scrollHeight, }; } ``` # Script Type > Classic ``s block the `HTML` parser by default. > You can work around it by adding the `defer` attribute, which ensures that the script download happens in parallel with `HTML` > parsing. ## Script Element defer / async / module, fetch, load, and execution timeline ",
    "url": "/JavaScript/Elements",
    
    "relUrl": "/JavaScript/Elements"
  },"61": {
    "doc": "Email",
    "title": "Email",
    "content": "{: .text-delta } 1. TOC {:toc} *** # JavaMail API ```java import javax.mail.*; import javax.mail.internet.*; public class SendEmail { public static void main(String[] args) throws Exception { // Create a new MimeMessage object MimeMessage message = new MimeMessage(Session.getDefaultInstance(System.getProperties())); // Set the sender's email address message.setFrom(new InternetAddress(\"from@example.com\")); // Set the recipient's email address message.setRecipient(Message.RecipientType.TO, new InternetAddress(\"to@example.com\")); // Set the subject of the email message.setSubject(\"This is a test email\"); // Set the body of the email message.setText(\"This is the body of the email.\"); // Send the email Transport.send(message); } } ``` > where: `from@example.com` is the sender's email address `to@example.com` is the recipient's email address This is a test email is the subject of the email This is the body of the email. is the body of the email --- # Spring ## **2. Project Setup and Dependency**[](https://www.baeldung.com/java-email#project-setup-and-dependency) For this article, we'll be using a simple Maven-based project with a dependency on[Angus Mail](https://eclipse-ee4j.github.io/angus-mail/). This is the Eclipse implementation of the[Jakarta Mail API](https://github.com/jakartaee/mail-api)specification: ```xml org.eclipse.angus angus-mail 2.0.1 ``` The latest version can be found[here](https://mvnrepository.com/artifact/org.eclipse.angus/angus-mail). ## **3. Sending a Plain Text and an HTML Email**[](https://www.baeldung.com/java-email#sending-a-plain-text-and-an-html-email) First, we need to configure the library with our email service provider's credentials. Then we'll create a_Session_that'll be used in constructing our message for sending. The configuration is via a Java_Properties_object: ```java Properties prop = new Properties(); prop. put(\"mail.smtp.auth\",true); prop. put(\"mail.smtp.starttls.enable\",\"true\"); prop. put(\"mail.smtp.host\",\"smtp.mailtrap.io\"); prop. put(\"mail.smtp.port\",\"25\"); prop. put(\"mail.smtp.ssl.trust\",\"smtp.mailtrap.io\"); ``` In the properties configuration above, we configured the email host as Mailtrap and used the port provided by the service as well. Now let's create a session with our username and password: ```java Session session = Session.getInstance(prop, new Authenticator() { @Override private PasswordAuthentication getPasswordAuthentication() { return new PasswordAuthentication(username, password); } }); PasswordAuthentication getPasswordAuthentication() { return new PasswordAuthentication(username, password); } }); ``` The username and password are given by the mail service provider alongside the host and port parameters. Now that we have a mail_Session_object, let's create a_Mime__Message_for sending: ```java Message message = new MimeMessage(session); message. setFrom(new InternetAddress(\"from@gmail.com\")); message. setRecipients( Message.RecipientType.TO, InternetAddress.parse(\"to@gmail.com\")); message. setSubject(\"Mail Subject\"); String msg = \"This is my first email using JavaMailer\"; MimeBodyPart mimeBodyPart = new MimeBodyPart(); mimeBodyPart. setContent(msg,\"text/html; charset=utf-8\"); Multipart multipart = new MimeMultipart(); multipart. addBodyPart(mimeBodyPart); message. setContent(multipart); Transport. send(message); ``` In the snippet above, we first created a_message_instance with the necessary properties — to, from and subject. This is followed by a_mimeBodyPart_that has an encoding of_text/html_since our message is styled in HTML. Next, we created an instance of_MimeMultipart_object that we can use to wrap the_mimeBodyPart_we created. Finally, we set the_multipart_object as the content of our_message_and used the_send()_of_Transport_object to do the mail sending. **So, we can say that the_mimeBodyPart_is contained in the_multipart_that is contained in the_message_. This way, a_multipart_can contain more than one_mimeBodyPart_.** This is going to be the focus of the next section. ## **4. Sending Email With an Attachment**[](https://www.baeldung.com/java-email#sending-email-with-an-attachment) Next, to send an attachment, we only need to create another_MimeBodyPart_and attach the file(s) to it: ```java MimeBodyPart attachmentBodyPart = new MimeBodyPart(); attachmentBodyPart. attachFile(new File(\"path/to/file\")); ``` We can then add the new body part to the_MimeMultipart_object we created earlier: ```java multipart.addBodyPart(attachmentBodyPart); ``` **That's all we need to do.** **Once again, we set the_multipart_instance as the content of the_message_object, and finally we'll use the_send()_to do the mail sending.** ## **5. Formatting Email Text**[](https://www.baeldung.com/java-email#formatting-email-text) To format and style our email text, we can use HTML and CSS tags. For example, if we want our text to be bold, we will implement the__tag. For coloring the text, we can use the_style_tag.**We can also combine HTML tags with CSS tags if we want to have additional properties, such as bold.** Let's create a_String_containing bold-red text: ```java String msgStyled = \"This is my bold-red email using JavaMailer\"; ``` This_String_will hold our styled text to be sent in the email body. --- # Google Cloud Function ```java import com.google.cloud.functions.Context; import com.google.cloud.functions.HttpFunction; import com.google.cloud.functions.HttpRequest; import com.google.cloud.functions.HttpResponse; import com.google.cloud.functions.Mail; public class SendEmailFunction implements HttpFunction { @Override public void call(HttpRequest request, HttpResponse response, Context context) { // Get the email address from the request body. String emailAddress = request.getBody(); // Create a new Mail object. Mail mail = new Mail(); // Set the email address to send the email to. mail.setFrom(\"from@example.com\"); mail.setTo(emailAddress); mail.setSubject(\"This is a test email.\"); mail.setBody(\"This is the body of the email.\"); // Send the email. mail.send(); // Respond with a success message. response.setStatusCode(200); response.setBody(\"Email sent successfully.\"); } } ``` --- # [Using GCP App Enging](https://cloud.google.com/appengine/docs/legacy/standard/java/mail/sending-mail-with-mail-api) `To send an email using Java and Google Cloud Platform, you can use the following steps:` ``` Create a Google Cloud Platform project and enable the Cloud Messaging API. Create a service account and download its JSON key file. Create a Java project and add the following dependencies to your pom.xml file: ``` ```xml com.google.cloud google-cloud-messaging 1.2.0 ``` ``` Create a Java class that implements the GoogleCloudMessaging.MessageSender interface. The following is an example of a class that sends an email message: ``` ```java public class EmailSender implements GoogleCloudMessaging.MessageSender { @Override public void sendMessage(String toAddress, String subject, String body) { // Create a Cloud Messaging message. GoogleCloudMessaging.Message message = new GoogleCloudMessaging.Message(); message.setTo(toAddress); message.setSubject(subject); message.setBody(body); // Send the message. GoogleCloudMessaging.send(message); } } ``` ``` In your main method, create an instance of the EmailSender class and call the sendMessage() method to send the email message. EmailSender sender = new EmailSender(); sender.sendMessage(\"to@example.com\", \"Subject\", \"Body\"); ``` --- # [Through Gmail Server](https://developers.google.com/gmail/api/guides/sending) ## To send an email using Google App Script, you can use the following code: ```java function sendEmail(to, subject, body) { var mail = GmailApp.createEmail(); mail.setSubject(subject); mail.setBody(body); mail.setTo(to); mail.send(); } ``` ```java package org.Test19; import javax.mail.*; import javax.mail.internet.InternetAddress; import javax.mail.internet.MimeMessage; import java.util.Properties; class Mailer { public static void send(String from, String password, String to, String sub, String msg) { //Get properties object Properties props = new Properties(); props.put(\"mail.smtp.host\", \"smtp.gmail.com\"); props.put(\"mail.smtp.socketFactory.port\", \"465\"); props.put(\"mail.smtp.socketFactory.class\", \"javax.net.ssl.SSLSocketFactory\"); props.put(\"mail.smtp.auth\", \"true\"); props.put(\"mail.smtp.port\", \"465\"); //get Session Session session = Session.getDefaultInstance(props, new Authenticator() { private PasswordAuthentication getPasswordAuthentication() { return new PasswordAuthentication(from, password); } }); //compose message try { MimeMessage message = new MimeMessage(session); message.addRecipient(Message.RecipientType.TO, new InternetAddress(to)); message.setSubject(sub); message.setText(msg); //send message Transport.send(message); System.out.println(\"message sent successfully\"); } catch (MessagingException e) { throw new RuntimeException(e); } } } ``` --- # With GCP and SendGrid API ```java package com.manju.gcp.mail; import com.sendgrid.Method; import com.sendgrid.Request; import com.sendgrid.Response; import com.sendgrid.SendGrid; import com.sendgrid.helpers.mail.Mail; import com.sendgrid.helpers.mail.objects.Attachments; import com.sendgrid.helpers.mail.objects.Content; import com.sendgrid.helpers.mail.objects.Email; import com.sendgrid.helpers.mail.objects.Personalization; import java.io.IOException; import java.nio.file.Files; import java.nio.file.Path; import java.util.*; public class SendGridMailService { private final String SENDGRID_ENDPOINT = \"mail/send\"; private final String HTML_TYPE = \"text/html\"; private final String fromEmailAddress; private final String fromName; private final SendGrid sendGrid; public SendGridMailService(String sendGridAPIKey, String fromEmailAddress, String fromName) { sendGrid = new SendGrid(sendGridAPIKey); this.fromEmailAddress = fromEmailAddress; this.fromName = fromName; } /** * Method to send mail with out an attachment. * * @param toEmailsList -- List of to email addresses. * @param ccEmailsList -- List of cc email addresses. * @param bccEmailsList -- List of bcc email addresses. * @param subject -- Subject of the mail. * @param body -- Content of the body mail. */ public void sendMailWithoutAttachment(List toEmailsList, List ccEmailsList, List bccEmailsList, String subject, String body) { sendMail(toEmailsList, ccEmailsList, bccEmailsList, HTML_TYPE, subject, body, Optional.empty()); } /** * Method to send mail with an attachment. * * @param toEmailsList -- List of to email addresses. * @param ccEmailsList -- List of cc email addresses. * @param bccEmailsList -- List of bcc email addresses. * @param subject -- Subject of the mail. * @param body -- Content of the body mail. * @param attachment -- Holds the type to file along with content to be attached in the mail. Use method convertPathToAttachment(filepath, attchmentType) method to get attachment object. */ public void sendMailWithAttachment(List toEmailsList, List ccEmailsList, List bccEmailsList, String subject, String body, Optional attachment) { sendMail(toEmailsList, ccEmailsList, bccEmailsList, HTML_TYPE, subject, body, attachment); } /** * Method to send mail with attachment if is present using send grid sdk. * Attaches attachment object if it present. * * * @param toEmailsList -- List of to email addresses. * @param ccEmailsList -- List of cc email addresses. * @param bccEmailsList -- List of bcc email addresses. * @param contentType -- Type of the content type to be send in the body of the mail. ex: text/plain, text/html etc., * @param subject -- Subject of the mail. * @param body -- Content of the body mail. * @param attachment -- Holds the file content to be attached in the mail. */ private void sendMail(List toEmailsList, List ccEmailsList, List bccEmailsList, String contentType, String subject, String body, Optional attachment) { try { if (Objects.isNull(toEmailsList) || toEmailsList.size() == 0) return; Email fromEmail = new Email(fromEmailAddress, fromName); Content bodyContent = new Content(contentType, body); Mail mail = new Mail(); mail.setFrom(fromEmail); mail.setSubject(subject); mail.addContent(bodyContent); Personalization personalization = new Personalization(); //add to email addresses toEmailsList.forEach(toAddress -> { Email toEmail = new Email(toAddress); personalization.addTo(toEmail); }); //add cc email addresses if (Objects.nonNull(ccEmailsList) && ccEmailsList.size() > 0) { ccEmailsList.forEach(ccAddress -> { Email ccEmail = new Email(ccAddress); personalization.addCc(ccEmail); }); } //add bcc email addresses if (Objects.nonNull(bccEmailsList) && bccEmailsList.size() > 0) { bccEmailsList.forEach(bccAddress -> { Email bccEmail = new Email(bccAddress); personalization.addBcc(bccEmail); }); } mail.addPersonalization(personalization); //Add an attachment if it is present attachment.ifPresent(mail::addAttachments); Request request = new Request(); request.setMethod(Method.POST); request.setEndpoint(SENDGRID_ENDPOINT); request.setBody(mail.build()); Response response = sendGrid.api(request); System.out.println(\"Email Sent: response status code:\" + response.getStatusCode()); System.out.println(\"Email Sent: response status body:\" + response.getBody()); } catch (Exception ex) { System.err.println(\"Error in sending email->\" + ex.getLocalizedMessage()); ex.printStackTrace(); } } /** * Method to convert file into send grid specific attachment object. * * @param filePath -- Path of the file to be converted into an attachment object. * @param attachmentFileType -- Type of the file to be converted. ex: application/pdf, application/json etc., * @return -- Returns the send grid specific attachment object which holds the file content, file name and its type. */ public Optional convertPathToAttachment(Path filePath, String attachmentFileType) { try { if (!filePath.toFile().exists()) { return Optional.empty(); } Attachments attachment = new Attachments(); byte[] attachmentContentBytes = Files.readAllBytes(filePath); String attachmentContent = Base64.getEncoder().encodeToString(attachmentContentBytes); attachment.setContent(attachmentContent); attachment.setType(attachmentFileType); attachment.setFilename(filePath.getFileName().toString()); attachment.setDisposition(\"attachment\"); return Optional.of(attachment); } catch (IOException io) { System.out.println(\"Error in reading and converting file ->\" + filePath.toString()); io.printStackTrace(); } return Optional.empty(); } } ``` ",
    "url": "/JavaNotes/Email",
    
    "relUrl": "/JavaNotes/Email"
  },"62": {
    "doc": "Email",
    "title": "Sendgrid",
    "content": "With Publisher . public String execute() { return Mono.from(emailSendingService.sendTestEmail()).doOnNext(rsp -&gt; { LOG.info(\"response status {}\\nresponse body {}\\nresponse headers {}\", rsp.getStatusCode(), rsp.getBody(), rsp.getHeaders()); }).map(rsp -&gt; rsp.getHeaders()); } . Micronaut Email . public Mono&lt;Map&lt;String, String&gt;&gt; index() throws Exception { return emailSendingService.send(Email.builder() .to(\"recipient@email.com\") .from(\"sender@email.com\") .subject(\"Sending email with Twilio Sendgrid is Fun\") .body(\"and &lt;em&gt;easy&lt;/em&gt; to do anywhere with &lt;strong&gt;Micronaut Email&lt;/strong&gt;\", HTML) .build()).getHeaders(); } . Basic Send . Basic Send From Controller @ExecuteOn(TaskExecutors.IO) @Controller(value = \"/\") @SerdeImport(Response.class) @ReflectiveAccess @ReflectionConfig.ReflectiveMethodConfig(name = \"index\") @Requires(property = \"micronaut.email.host\") public class HomeController { EmailSender&lt;?, ?&gt; emailSender; public HomeController(EmailSender&lt;?, ?&gt; emailSender) { this.emailSender = emailSender; } @Post(uri = \"/send\", produces = \"application/json\") public Map&lt;String, ?&gt; index() { var result = emailSender.send(Email.builder() .to(\"recipient@email.com\") .from(\"sender@email.com\") .subject(\"Email Subject: \" + LocalDateTime.now()) .body(\"Basic email\", BodyType.TEXT)); return Collections.singletonMap(\"result\", result); } } . Use SengridSendingService build out with Composer . Build Request With Composer @FunctionBean(\"requestfunction\") @SerdeImport(StringBody.class) public class RequestFunction implements Function&lt;APIGatewayProxyRequestEvent, APIGatewayProxyResponseEvent&gt; { private static final Logger LOG = LoggerFactory.getLogger(RequestFunction.class); @Inject JsonMapper jsonMapper; @Inject EmailSendingService emailSendingService; @Inject GenericServices genericServices; @Inject SendGridConfiguration sendGridConfiguration; @Override public APIGatewayProxyResponseEvent apply(APIGatewayProxyRequestEvent requestEvent) { LOG.info(\"Request: {}\", requestEvent); Optional&lt;Map&lt;String, String&gt;&gt; params = Optional.ofNullable(requestEvent.getQueryStringParameters()); QueryCommand queryCommand = params.map(stringStringMap -&gt; genericServices.mapToCommandObject(stringStringMap, QueryCommand.class)) .orElse(new QueryCommand()); APIGatewayProxyResponseEvent response = new APIGatewayProxyResponseEvent(); SendgridEmailComposer composer = new SendgridEmailComposer(); try { Email.Builder emailBuilder = emailSendingService.buildAndSend(queryCommand); emailBuilder.from(new Contact(\"sender@email.com\", \"no-reply\")); emailBuilder.body(\"test my email fuck\", BodyType.TEXT); Consumer&lt;Request&gt; requestConsumer = (request) -&gt; { LOG.info(\"Processing Request: {}\", request); // Additional custom logic for processing the request (if needed) }; Email email = emailBuilder.build(); Request sendGridRequest = composer.compose(email); requestConsumer.accept(sendGridRequest); SendgridEmailSender sendGridEmailSender = new SendgridEmailSender(sendGridConfiguration, composer); Response sendGridResponse = sendGridEmailSender.send(email, requestConsumer); String emailValues = new String(jsonMapper.writeValueAsBytes(email)); Map&lt;String, Object&gt; returnMessage = Map.of(\"header\", sendGridResponse.getHeaders(), \"body\", sendGridResponse.getBody(), \"micronautemail\", emailValues); Map&lt;String, Map&lt;String, Object&gt;&gt; returnMap = Collections.singletonMap(\"message\", returnMessage); String jsonResponse = new String(jsonMapper.writeValueAsBytes(returnMap)); response.setStatusCode(sendGridResponse.getStatusCode()); response.setBody(jsonResponse); } catch (Exception e) { LOG.error(\"Error processing request\", e); response.setStatusCode(500); response.setBody(e.getMessage()); } LOG.info(\"Response: {}\", response); return response; } } . Build with JSON and Send . Use JSON to build SendGrid Email and Send @ExecuteOn(TaskExecutors.IO) @Controller(value = \"/\") @SerdeImport(Response.class) @ReflectiveAccess @ReflectionConfig.ReflectiveMethodConfig(name = \"index\") @Requires(property = \"micronaut.email.host\") public class HomeController { private final SendGrid sendGrid; @Inject public HomeController(SendGrid sendGrid) { this.sendGrid = sendGrid; } @Post(uri = \"/send\", produces = \"application/json\") public Map&lt;String, ?&gt; index() { Map&lt;String, Object&gt; emailData = new HashMap&lt;&gt;(); emailData.put(\"personalizations\", Collections.singletonList( Collections.singletonMap(\"to\", Collections.singletonList( Collections.singletonMap(\"email\", \"recipient@email.com\").put(\"name\", \"receiver\"))))); emailData.put(\"from\", Collections.singletonMap(\"email\", \"sender@email.com\").put(\"name\", \"sender\")); emailData.put(\"subject\", \"Micronaut Email Basic Test: \" + LocalDateTime.now()); emailData.put(\"content\", Collections.singletonList( Collections.singletonMap(\"type\", \"text/plain\") )); emailData.put(\"content\", Collections.singletonList( Collections.singletonMap(\"value\", \"Email Subject\"))); try { Request request = new Request(); request.setMethod(Method.POST); request.setEndpoint(\"mail/send\"); request.setBody(new ObjectMapper().writeValueAsString(emailData)); Response response = sendGrid.api(request); return Collections.singletonMap(\"result\", response.getStatusCode()); } catch (IOException ex) { return Collections.singletonMap(\"error\", ex.getMessage()); } } } . ",
    "url": "/Micronotes/Email#sendgrid",
    
    "relUrl": "/Micronotes/Email#sendgrid"
  },"63": {
    "doc": "Email",
    "title": "Email",
    "content": ". | Sendgrid . | With Publisher | Micronaut Email | Basic Send | Use SengridSendingService build out with Composer | Build with JSON and Send | . | . ",
    "url": "/Micronotes/Email",
    
    "relUrl": "/Micronotes/Email"
  },"64": {
    "doc": "Email",
    "title": "Account confirmation reqest.",
    "content": "\" + Environment.NewLine + \"Dear User, \" + Environment.NewLine + \"In order to be able to use musicshop app properly, we require You to confirm Your email address.\" + Environment.NewLine + \"This is the last step towards using our app.\" + Environment.NewLine + \"Pleas follow this hyperlink to confirm your address.\" + Environment.NewLine + \"[Callback url]\" + \"\"; try { using (var smtpClient = new System.Net.Mail.SmtpClient(\"smtp-relay.brevo.com\", 587)) { smtpClient.UseDefaultCredentials = false; smtpClient.Credentials = new System.Net.NetworkCredential() { UserName = \"email\", Password = \"password\", }; smtpClient.DeliveryMethod = System.Net.Mail.SmtpDeliveryMethod.Network; smtpClient.EnableSsl = true; smtpClient.Send(\"14paxton@gmail.com\", \"14paxton@gmail.com\", \"Account verification\", body); } } catch (Exception e) { Console.Error.WriteLine(\"{0}: {1}\", e.ToString(), e.Message); } ``` > ### [MailMessage Class ](https://learn.microsoft.com/en-us/dotnet/api/system.net.mail.mailmessage?redirectedfrom=MSDN&view=net-9.0) ```csharp using (var client = new System.Net.Mail.SmtpClient()) { client.Host = \"smtp.office365.com\"; client.Port = 587; // client.Host = \"smtp.elasticemail.com\"; // client.Port = 2525;#1# // client.Host = \"smtp.gmail.com\"; // client.Port = 587; client.DeliveryMethod = System.Net.Mail.SmtpDeliveryMethod.Network; client.UseDefaultCredentials = false; client.EnableSsl = true; client.Credentials = new System.Net.NetworkCredential(\"email\", \"password\"); var bpaxton = new System.Net.Mail.MailAddress(\"14paxton@gmail.com\", \"Bpaxton\"); var megs = new System.Net.Mail.MailAddress(\"megs@gmail.com\", \"Megan\"); using (var message = new System.Net.Mail.MailMessage( from: megs, to: bpaxton )) { message.Subject = \"Hello from code!\"; message.Body = \"Loremn ipsum dolor sit amet ...\"; client.Send(message); } } ``` > ### MailKit.Net.Smtp.SmtpClient >> [MailKit Github](https://github.com/jstedfast/MailKit) ```csharp using MailKit.Net.Smtp.SmtpClient client = new MailKit.Net.Smtp.SmtpClient(); client.Connect(\"smtp.add.org\", 587, false); // client.Connect(\"smtp.office365.com\", 587, false); // client.Connect(\"smtp.gmail.com\", 587, false); // client.Connect(\"smtp-relay.brevo.com\", 587, false); // Note: only needed if the SMTP server requires authentication client.Authenticate(\"admin\", \"pw\"); client.Send(message); client.Disconnect(true); ``` > #### MailKitSimplified ```csharp using (var smtpSender = MailKitSimplified.Sender.Services.SmtpSender.Create(\"smtp.gmail.com\").SetCredential(\"email\", \"password\")) { smtpSender.WriteEmail .From(\"my.name@example.com\") .To(\"14paxton@gmail.com\") .Subject(\"Hello World\") .BodyHtml(\"Hi . \") .Send(); smtpSender.Dispose(); } Console.WriteLine(\"resp\"); ``` # use GMail as SMTP Server > GMail accounts can actually be used as an SMTP server, in a manner of speaking. > That’s exactly what we need – a way of sending an email to the mobile phone carrier, so they can in turn send a text > message to the mobile phone. > We send the email to GMail, GMail passes it on to the mobile phone carrier, which turns it into a text message and sends it to our cell phone. > Yes, it does involve a few > steps, but you can’t argue against the price (free!). > The SMTP server functionality isn’t exactly available for anyone to get access to – you have to have a GMail account (which is free). > Because of this, we will need to do a few special things. > More on > that later though. > Let’s see how it’s done. > Here’s a code snippet on how to do it. First of all, in our Windows App, we need to include the following “using” statements: ```csharp using System.Net; using System.Net.Mail; ``` > Somewhere in the body of the program, we need to create a new MailMessage, give it some details, like so: ```csharp MailMessage message = new MailMessage(); message.To.Add(\"1234567890@txt.bell.ca\"); message.From = new MailAddress(\"yourgmailaccount@gmail.com\", \"App\"); //See the note afterwards... message.Body = \"This is your cell phone. How was your day?\"; ``` > At this point, the email address that the message comes from really doesn’t matter – it won’t show up as GMail will override it when it gets passed > on to the mobile phone carrier. > The important one to get right is the email address that it is going to be sent to. > This depends on your phone number and your mobile carrier. > In this case, the phone number is (123)456-7890 and the carrier is Bell. > Check out the previously mentioned wikipedia link to see what your carrier-specific email address is. > If you don’t get this right, the message will most certainly not get through. > Next, we need to create an SMTP client, and set it up: ```csharp SmtpClient smtp = new SmtpClient(\"smtp.gmail.com\"); smtp.EnableSsl = true; smtp.Port = 587; smtp.DeliveryMethod = SmtpDeliveryMethod.Network; smtp.Credentials = new NetworkCredential(\"yourgmailaddress@gmail.com\", \"yourgmailpassword\"); ``` > Here we create a new SMTP Client that will connect to the GMail SMTP server. > Because we are connecting to a GMail secured server we need to enable SSL, as well as use a particular port – port 587. >> (There is apparently another port that can be used, but I haven’t heard of anyone getting it to work – port 465). > Next, you need to put your own GMail email address where “yourgmailaddress.gmail.com” > is, as well as replace “yourgmailpassword” with your actual GMail password. > After this, there isn’t much you need to do – send the email, like so: ```csharp try { smtp.Send(message); } catch (Exception ex) { MessageBox.Show(ex.Message); } ``` # Resources ## Free SMTP Servers | Provider | SMTP Server | SMTP Port | SMTP Host Name | Use TLS | Use Start TLS | . | Plasec Brinkster | mymail.brinkster.com | 2525 | leave blank/empty | no | no | . | Yahoo Mail | smtp.mail.yahoo.com | 587 | leave blank/empty | no | no | . | Hotmail | smtp.live.com | 587 | leave blank/empty | yes | yes | . | Google Gmail | smtp.gmail.com&nbsp; [or&nbsp;smtp-relay.gmail.com if enabled&nbsp;within&nbsp;client's Gmail account] | 587 | leave blank/empty | no | yes | . | Microsoft Office 365 | smtp.office365.com | 587 | leave blank/empty | no | yes | . ## Paid SMTP Servers | Free SMTP Servers | Starting price | Free email Daily limit | Free Email/Month | Used for | . | Brevo | $25/month for 20K emails | 300 | 9000 | SMTP, email marketing, SMS, and marketing automation | . | Elastic Emails | No daily limit | 100 | 3000 | Email campaigns | . | Sendpulse | $6.40 forUnlimited emails | 400 | 15000 | Email marketing, WhatsApp campaigns, and SMS | . | Amazon SES | $0.10 per1000 emails | NA | 62000 | Email marketing, notifications, and transactional emails | . | Mailgun | $35/month for50K emails | 200 | 50000 for the First 30 days | Transactional emails | . | Google SMTP | $6/month for2000 emails/day | 500mails/day for 14 days | Valid for 14 days | For low email volumes | . | Sendgrid | $19.95/month for50K emails | 100 | 3000 | Promotional emails, Newsletters, Password reset emails | . | Moosend | $9/month for Unlimited emails | Unlimited | Unlimited for the First 30 days | Email marketing | . | SMTP2GO | $10/month for10K emails | 200 | 1000 | Transactional and Marketing emails | . | MailerSend | $24/month for 50K emails | NA | 3000 | Transactional emails, Email marekting ,SMTP | . | Mailtrap | $10/month for 10k emails | NA | 1000 | SMTP, Email marketing, QA automation | . | Postmark | $15/month for 10,000 emails | NA | 100 emails per month | Free SMTP relay and transactional emails | . | Sarbacane | 129€/month* for unlimited emails | No daily limitF | NA | SMS marketing, SMTP, email marketing, Transactional emails | . ",
    "url": "/DotNetNotes/CSharp/Email",
    
    "relUrl": "/DotNetNotes/CSharp/Email"
  },"65": {
    "doc": "Email",
    "title": "Email",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Email Packages ## Body ### MimeKit ```csharp using MimeKit; MimeMessage message = new MimeMessage(); message.From.Add(new MailboxAddress(\"brandon paxton\", \"14paxton@gmail.com\")); message.To.Add(new MailboxAddress(\"cunt bigalow\", \"14paxton@gmail.com\")); message.Subject = \"How you doin'?\"; message.Body = new TextPart(\"plain\") { Text = @\"Hey Chandler, I just wanted to let you know that Monica and I were going to go play some paintball, you in? -- Joey\" }; ``` ### BodyBuilder > adding attachments too ```csharp var builder = new BodyBuilder { // Set the plain-text version of the message text TextBody = @\"Hey Alice, What are you up to this weekend? Monica is throwing one of her parties on Saturday. I was hoping you could make it. Will you be my +1? -- Joey \" }; string currentDir = Directory.GetCurrentDirectory(); // string path = Path.Combine(new FileInfo(Assembly.GetExecutingAssembly().Location).DirectoryName,\"vcu-chat-bot\"); Console.WriteLine(currentDir); builder.Attachments.Add ($@\"{currentDir}/../Files.zip\"); // Now we just need to set the message body and we're done message.Body = builder.ToMessageBody (); ``` ## SMTP sending > ### System.Net.Mail.SmtpClient ```csharp string body = \"\" + \"Here comes some logo\" + \" . \" + \"\" + \" ",
    "url": "/DotNetNotes/CSharp/Email",
    
    "relUrl": "/DotNetNotes/CSharp/Email"
  },"66": {
    "doc": "Email",
    "title": "This is the HTML body",
    "content": ". \" ATTACHMENT=\"file.txt\" # Send the email echo \"$BODY\" | mailx -a \"Content-Type: text/html\" -s \"$SUBJECT\" -a \"From: $FROM\" $TO -A $ATTACHMENT ``` # Mutt ## Install on Debian/Ubuntu * ```apt-get install mutt``` ## Install on Redhat/Centos * ```yum install mutt``` ## Command ```shell echo \"This is the message body\" | mutt -a \"/path/to/file.to.attach\" -s \"subject of message\" -- recipient@example.com ``` # uuencode and mail This sends the uuencoded part inline and not as an attachment. Many mail-clients recognize this though and display the uuencoded part as an attachment. Don't use uuencode when other alternatives use MIME. ## Command ```shell gzip -c ldiff.sql | uuencode mysqldbbackup.sql.gz | mail -s \"Ldiff from openldap\" backup@example.com ``` # Mpack ## Install Debian/Ubuntu * ```apt-get install mpack``` ## Command ```shell mpack -s subject /dev/stdin loser@example.com Swaks is an smtp of CURL, install it first: ```shell curl http://www.jetmore.org/john/code/swaks/files/swaks-20130209.0/swaks -o swaks ``` > Set the permissions for the script so you can run it ```shell chmod +x swaks ``` > It's based on perl, so install perl ```shell sudo apt-get -y install perl ``` * apt-get install swaks ## Command ```shell swaks -tls \\ --to ${MAIL_TO} \\ --from ${MAIL_FROM} \\ --server ${MAIL_SERVER} \\ --auth LOGIN \\ --auth-user ${MAIL_USER} \\ --auth-password ${MAIL_PASSWORD} \\ --header \"Subject: $MAIL_SUBJECT\" \\ --header \"Content-Type: text/html; charset=UTF-8\" \\ --body \"$MESSAGE\" \\ --attach mysqldbbackup.sql ``` ## Bash Script - Uses HTML file - Uses an inline Image for an HTML file and attachment Bash Script With Attachments ```shell #!/bin/bash swaks -f sender@gmail.com --auth \\ --server smtp.sendgrid.net:587 \\ --au apikey \\ --ap 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 \\ --to receiver@gmail.com \\ --header \"Content-Type: text/html; charset=UTF-8\" \\ --attach-type text/html \\ --attach-body @../EmailTemplate/EmailTemplate.html \\ --h-From: '\"bob\" ' \\ --h-Subject: \"Subject\" \\ --add-header \"Content-ID: inlineImage.png\" \\ --attach-name \"inlineImage.png\" \\ --attach-type image/png \\ --attach @../EmailTemplate/inlineImage.png ``` # Telnet > First, you need to find out the SMTP server address for the domain. Let's find out the SMTP server address for gmail.com > Goto MS Dos prompt and type ```nslookup``` command. ``` > set q=mx > gmail.com Non-authoritative answer: gmail.com MX preference = 30, mail exchanger = gmail.com MX preference = 20, mail exchanger = alt2.gmail-smtp-in.l.google.com gmail.com MX preference = 5, mail exchanger = gmail-smtp-in.l.google.com gmail.com MX preference = 10, mail exchanger = alt1.gmail-smtp-in.l.google.com gmail.com MX preference = 40, mail exchanger = alt4.gmail-smtp-in.l.google.com ``` > Now connect to gmail SMTP server with Telnet by typing the following command on the command prompt. ```shell telnet alt3.gmail-smtp-in.l.google.com 25 ``` ``` 220 mx.google.com ESMTP t15si14936218ibf.58 helo kathir 250 mx.google.com at your service mail from: 250 2.1.0 OK t15si14936218ibf.58 rcpt to: 250 2.1.5 OK t15si14936218ibf.58 data 354 Go ahead t15si14936218ibf.58 from: kathir to: kathir subject: hi from kathir This is for testing . 250 2.0.0 OK 1287958967 t15si14936218ibf.58 ``` # Sending Email with a MIME Boundary > MIME (Multipurpose Internet Mail Extensions) boundaries - > `BOUNDARY`: This is a unique string that acts as a boundary between different parts of the email content.Each section is separated by `--BOUNDARY`, and the end of the email is indicated with `--BOUNDARY--`. - > `Multipart/alternative`: This allows sending both plain text and `HTML` versions of the email so that the email client can choose which one to display. - > `Content-Type`: This specifies the type of content in each part. `text/plain` for plain text and `text/html` for `HTML`. - > `Content-Type`: `multipart/mixed`: This specifies that the email contains multiple parts (like text and attachments). - > `base64`: Converts the file into a `base64` string for safe transmission via email. - > `Content-Disposition`: attachment: Marks the part of the email as an attachment. ## Sendmail Example 1 ```shell #!/bin/bash to=\"any@email.com\" from=\"your@email.com\" boundary=$(uuidgen -t) body_boundary=$(uuidgen -t) now=$(date +\"%a, %d %b %Y %T %z\") sendmail -t Here am going to incorporate text version --${body_boundary} Content-type: text/html; charset=utf-8 Content-Disposition: inline Hello, This is a html version. --> here am going to incorporate html version Regards... --${body_boundary}-- --${boundary}-- EOF2 sc=$? echo \"sedmail rc=${rc}\" ``` Example With Attachment ```shell #!/bin/bash # Define email details TO=\"recipient@example.com\" SUBJECT=\"Test Email with Attachment\" FROM=\"sender@example.com\" ATTACHMENT=\"file.txt\" FILENAME=$(basename \"$ATTACHMENT\") # Define the boundary BOUNDARY=\"ZZ_/afg6432dfgkl.94531q\" # Create the email content { echo \"From: $FROM\" echo \"To: $TO\" echo \"Subject: $SUBJECT\" echo \"MIME-Version: 1.0\" echo \"Content-Type: multipart/mixed; boundary=\\\"$BOUNDARY\\\"\" echo \"\" # Plain text version of the email echo \"--$BOUNDARY\" echo \"Content-Type: text/plain; charset=\\\"UTF-8\\\"\" echo \"Content-Transfer-Encoding: 7bit\" echo \"\" echo \"This is the plain text version of the email.\" echo \"\" # Attachment part echo \"--$BOUNDARY\" echo \"Content-Type: application/octet-stream; name=\\\"$FILENAME\\\"\" echo \"Content-Transfer-Encoding: base64\" echo \"Content-Disposition: attachment; filename=\\\"$FILENAME\\\"\" echo \"\" base64 \"$ATTACHMENT\" echo \"\" # End of the multipart message echo \"--$BOUNDARY--\" } | sendmail -t ``` # Netcat # Install Debian/Ubuntu ```shell apt-get install netcat ``` Script for Netcat ```shell #!/bin/sh # Default reception TOEMAIL=\"myEmail@domain.ltd\"; # Default Subject SUBJECT=\"You got mail - $DATE\"; # Default Contents MSGBODY=\"Hello, this is the default message body\"; # Default Attachment #ATTACHMENT=\"/tmp/testoutput\" # Default smtp server mailserver=\"smtp.server.ltd\" mailserverPort=\"25\" showUsage() { echo \"$0 -a /file/to/attach [-m /message/file] [-M \\\"Message string\\\"] -s \\\"subject\\\" -r receiver@domain.com\" echo echo \"The attachment (-a) is required, if no attachment is used then rather use sendmail directly.\" } fappend() { echo \"$2\">>$1; } DATE=`date` # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # This might need correction to work on more places, this is tested at a ubuntu 13.10 machine. # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # domain=`grep search /etc/resolv.conf | awk '{print $2;}'` computer=`hostname` user=`whoami` FREMAIL=\"$user@$computer.$domain\" while getopts \"M:m:a:s:r:\" opt; do case $opt in s) SUBJECT=\"$OPTARG - $DATE\" ;; r) TOEMAIL=\"$OPTARG\" ;; m) MSGBODY=`cat $OPTARG` ;; M) MSGBODY=\"$OPTARG\" ;; a) ATTACHMENT=\"$OPTARG\" ;; :) showUsage ;; \\?) showUsage ;; esac done if [ \"$ATTACHMENT\" = \"\" ]; then showUsage exit 1 fi MIMETYPE=`file --mime-type -b $ATTACHMENT` TMP=\"/tmp/tmpmail_\"`date +%N`; BOUNDARY=`date +%s|md5sum|awk '{print $1;}'` FILENAME=`basename $ATTACHMENT` DATA=`cat $ATTACHMENT|base64` rm $TMP 2> /dev/null fappend $TMP \"EHLO $computer.$domain\" fappend $TMP \"MAIL FROM:\" fappend $TMP \"RCPT TO:\" fappend $TMP \"DATA\" fappend $TMP \"From: $FREMAIL\" fappend $TMP \"To: $TOEMAIL\" fappend $TMP \"Reply-To: $FREMAIL\" fappend $TMP \"Subject: $SUBJECT\" fappend $TMP \"Content-Type: multipart/mixed; boundary=\\\"$BOUNDARY\\\"\" fappend $TMP \"\" fappend $TMP \"This is a MIME formatted message. If you see this text it means that your\" fappend $TMP \"email software does not support MIME formatted messages.\" fappend $TMP \"\" fappend $TMP \"--$BOUNDARY\" fappend $TMP \"Content-Type: text/plain; charset=UTF-8; format=flowed\" fappend $TMP \"Content-Disposition: inline\" fappend $TMP \"\" fappend $TMP \"$MSGBODY\" fappend $TMP \"\" fappend $TMP \"\" fappend $TMP \"--$BOUNDARY\" fappend $TMP \"Content-Type: $MIMETYPE; name=\\\"$FILENAME\\\"\" fappend $TMP \"Content-Transfer-Encoding: base64\" fappend $TMP \"Content-Disposition: attachment; filename=\\\"$FILENAME\\\";\" fappend $TMP \"\" fappend $TMP \"$DATA\" fappend $TMP \"\" fappend $TMP \"\" fappend $TMP \"--$BOUNDARY--\" fappend $TMP \"\" fappend $TMP \".\" fappend $TMP \"quit\" netcat $mailserver $mailserverPort > $TMP rc=\"$?\" if [ \"$rc\" -ne \"0\" ]; then echo \"Returncode: $rc\" echo \"Please inspect $TMP\" else rm $TMP; fi ``` ",
    "url": "/Linux/Email",
    
    "relUrl": "/Linux/Email"
  },"67": {
    "doc": "Email",
    "title": "Email",
    "content": "{: .text-delta } 1. TOC {:toc} *** # [Setup a Local Only SMTP Email Server (Linux, Unix, Mac)](https://gist.github.com/raelgc/6031274) # curl ```shell curl --url 'smtp://smtp.gmail.com:587' \\ --ssl-reqd \\ --mail-from 'your-email@gmail.com' \\ --mail-rcpt 'recipient-email@example.com' \\ --upload-file mail.txt \\ --user 'your-email@gmail.com:your-email-password' \\ --insecure \\ --verbose ``` > Detailed Explanation of Options - ```--url 'smtp://smtp.gmail.com:587':``` - Specify the SMTP server and port to connect to. Gmail uses smtp.gmail.com on port 587. - ```--ssl-reqd:``` - Enforces SSL/TLS encryption. - ```--mail-from 'your-email@gmail.com':``` - The sender's email address. - ```--mail-rcpt 'recipient-email@example.com':``` - The recipient's email address. You can specify multiple recipients by using multiple --mail-rcpt options. - ```--upload-file mail.txt:``` - Specify the file that contains the email's content. This file should include the email headers and body. - ```--user 'your-email@gmail.com:your-email-password':``` - The SMTP server authentication details in the format username:password. - ```--insecure:``` - Allows connections to SSL sites without certificates. Remove this if you want to enforce certificate validation. - ```--verbose:``` - Provides detailed information about the curl operation. ## with attachment ```shell curl --url 'smtp://smtp.gmail.com:587' \\ --ssl-reqd \\ --mail-from 'your-email@gmail.com' \\ --mail-rcpt 'recipient-email@example.com' \\ --user 'your-email@gmail.com:your-email-password' \\ --upload-file mime-email.txt \\ --insecure \\ --verbose ``` - mem-email.txt ```text From: your-email@gmail.com To: recipient-email@example.com Subject: Test Email with Attachment MIME-Version: 1.0 Content-Type: multipart/mixed; boundary=\"simple boundary\" --simple boundary Content-Type: text/plain; charset=us-ascii This is the body of the email. --simple boundary Content-Type: text/plain; charset=us-ascii Content-Disposition: attachment; filename=\"attachment.txt\" This is the content of the attachment. --simple boundary-- ``` # mailx ## Install on Debian/Ubuntu * ```apt-get install postfix``` **Alternatively, without the bloat of postfix** * ```apt-get install heirloom-mailx``` ## Install on Redhat/Centos ```yum install mailx``` ## Command ```shell cat mysqldbbackup.sql | mailx backup@email.com ``` ```shell mailx -a backup.sql -a grants.sql backup@email.com ``` > Newer versions of mailx support -a flag for attachments! > Script Example ```shell #!/bin/bash # Email details TO=\"recipient@example.com\" SUBJECT=\"Test Email with Attachment\" FROM=\"sender@example.com\" BODY=\"This is the plain text body of the email\" HTML_BODY=\" ",
    "url": "/Linux/Email",
    
    "relUrl": "/Linux/Email"
  },"68": {
    "doc": "Encoding",
    "title": "Encoding",
    "content": "{: .text-delta } 1. TOC {:toc} --- > Preferred encoding is an overall preference and cannot be specified for individual servers. > If you have a particular server that requires a different encoding from your usual setting, you can change > the preferred encoding temporarily to work with that server, and then set it back once you are done with that connection. - > Western (ISO Latin 1) is the default preferred encoding because it is the most common and compatible character set. > While filenames may appear garbled, they will at least be displayed. > (ISO Latin > 1 is the ISO 8859-1 character set.) - > Unicode (UTF-8) - Use this encoding when connecting to Mac OS X, Java, or newer Windows servers. - > Western (macOS Roman) - Use this encoding when connecting to servers based on Mac OS 9 or earlier. - > Western (Windows Latin 1) - Use this encoding for connecting to older Windows servers. # Encode to UTF-8 /utf8 > Run : `iconv --list` to see a list of all supported encodings. ## Mac Roman character to equivalent UTF-8 ```shell iconv -f ISO-8859-1 -t UTF-8 output.utf8 ``` ## \\*nix like computers (including Mac OS X) ```shell iconv -f original_charset -t utf-8 originalfile > newfile ``` ## script ```bash #!/bin/bash FROM=iso-8859-1 TO=UTF-8 ICONV=\"iconv -f $FROM -t $TO\" # Convert find ToUTF/ -type f -name \"*\" | while read fn; do cp ${fn} ${fn}.bak $ICONV ${fn} rm ${fn}.bak done ``` ## Emacs > - The default Unicode format for Microsoft Excel and Wordpad is UTF-16. These files can be converted to UTF-8 using GNU Emacs 22.1 1. Open the file with Emacs 2. Enter the command C-x RET c utf-8 RET 3. You will then be asked what command you want this encoding to apply to 4. Enter the command C-x C-w then enter a new file name > The file you have saved will be UTF-8 # Text files as binaries > I have found that sometimes text files contain unprintable ASCII characters. > In such cases, even though the files are \"text\" files, dos2unix thinks they are binary. > If this is the case, you can use > the tr command as such: ```shell tr -cd '\\11\\12\\15\\40-\\176' This is the basic command and will clean out those unprintable characters and output your new ASCII-clean text to stdout. To actually save this > output as a file, just pipe the output to a file: ```shell tr -cd '\\11\\12\\15\\40-\\176' newfile.txt ``` > Now `newfile.txt `is your text file on which you can run dos2unix. > The complement `(ie, -c)` of string `'\\11\\12\\15\\40-\\176' ` means that the `tr` command strips out everything but the characters defined in that > string, which are: - > `octal \\11` : `tab` - > `octal \\12` : `new line` - > `octal \\15` : `carriage return` - > `octal \\40-\\176` : `all the good/normal keyboard characters` ## Git > [stackoverflow answer](https://stackoverflow.com/questions/5046032/git-says-binary-files-a-and-b-differ-on-for-reg-files) > gitattributes has a new working-tree-encoding attribute. ```text *.sql text working-tree-encoding=UTF-16LE eol=CRLF ``` ",
    "url": "/Linux/Encoding",
    
    "relUrl": "/Linux/Encoding"
  },"69": {
    "doc": "EntityFramework",
    "title": "EntityFramework",
    "content": "{: .text-delta } 1. TOC {:toc} --- # [EntityFramework](https://learn.microsoft.com/en-us/ef/core/get-started/overview/first-app?tabs=netcore-cli) ## CLI ### add ```bat dotnet add package Microsoft.EntityFrameworkCore.Sqlite; dotnet add package Microsoft.EntityFrameworkCore.Design; dotnet tool install --global dotnet-ef; ``` ### create db tables ```bat using ContosoPizza.Data; ``` ### apply create ```bat dotnet ef database update --context PizzaContext ``` ### revisions ```bat dotnet ef migrations add ModelRevisions --context PizzaContext ``` ### update ```bat dotnet ef database update --context PizzaContext ``` ### Build scafolding ```bat dotnet ef dbcontext scaffold \"Data Source=./Promotions/Promotions.db\" Microsoft.EntityFrameworkCore.Sqlite --context-dir ./Data --output-dir .\\Models ``` ``` The preceding command: Scaffolds a DbContext and model classes using the provided connection string. Specifies the Microsoft.EntityFrameworkCore.Sqlite database provider should be used. Specifies directories for the resulting DbContext and model classes. ``` ",
    "url": "/DotNetNotes/EntityFramework",
    
    "relUrl": "/DotNetNotes/EntityFramework"
  },"70": {
    "doc": "Enum",
    "title": "Enum",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Check Enum Availability ## MY ENUM CHECK ```groovy def assessmentType = AssessmentType.getEnumConstants().find { it.key.toLowerCase() == securityParamMap.get('assessmentType').toLowerCase() } ``` # Enum Example ## Enum with EnumSet ```groovy enum UserGroupType { MYSAVEDGROUP('My Saved Group', 50, 1), RESULTGROUP('Result Group', 50, Double.POSITIVE_INFINITY), RESULT_COMPARE(\"Comparing Individual with Group\", 50, Double.POSITIVE_INFINITY), GROUP_COMPARE(\"Comparing Two or more Groups\", 50, Double.POSITIVE_INFINITY), GROUPDEFAULT(\"default\", 50, Double.POSITIVE_INFINITY) final String value final int limit final int max UserGroupType(String value) { this.value = value this.limit = 0 this.max = 0 } UserGroupType(String value, limit, max) { this.value = value this.limit = limit this.max = max } static def canDelete = EnumSet.of(RESULTGROUP, RESULT_COMPARE, GROUP_COMPARE, GROUPDEFAULT) boolean isDeletableType() { return canDelete.contains(this) } String toString() { value } String getKey() { name() } } ``` ## Enum with static method ```groovy enum ColorEnum { WHITE('white', 'White is mix of all colors'), BLACK('black', 'Black is no colors'), RED('red', 'Red is the color of blood') final String id final String desc static final Map map static { map = [:] as TreeMap values().each { color -> println \"id: \" + color.id + \", desc:\" + color.desc map.put(color.id, color) } } private ColorEnum(String id, String desc) { this.id = id this.desc = desc } static getColorEnum(id) { map[id] } } MainTest.groovy println ColorEnum.values().size() println ColorEnum.getColorEnum('white') println ColorEnum.WHITE.desc // values return array of all enums defined in ColorEnum println ColorEnum.values().getClass() ``` ",
    "url": "/GroovyNotes/Enum",
    
    "relUrl": "/GroovyNotes/Enum"
  },"71": {
    "doc": "Enviroment",
    "title": "Enviroment",
    "content": "{: .text-delta } 1. TOC {:toc} *** # How To Check If Environment is Test, Development, or Production in Grails [Reference](http://grails.asia/how-to-check-if-environment-is-test-development-or-production-in-grails) ## Bootstrap ```groovy import grails.util.Environment class BootStrap { def init = { servletContext -> if (Environment.current == Environment.DEVELOPMENT) { // insert Development environment specific code here } else if (Environment.current == Environment.TEST) { // insert Test environment specific code here } else if (Environment.current == Environment.PRODUCTION) { // insert Production environment specific code here } } } ``` ## Controller ```groovy import grails.util.Environment class SomeController { def someAction() { if (Environment.current == Environment.DEVELOPMENT) { // insert Development environment specific code here } else if (Environment.current == Environment.TEST) { // insert Test environment specific code here } else if (Environment.current == Environment.PRODUCTION) { // insert Production environment specific code here } render \"Environment is ${Environment.current}\" } } ``` ## View/GSP ```html We are in Development Mode We are in Production Mode We are in Test Mode ``` ",
    "url": "/PersonalGrailsNotes/Enviroment",
    
    "relUrl": "/PersonalGrailsNotes/Enviroment"
  },"72": {
    "doc": "EnviromentStuff",
    "title": "EnviromentStuff",
    "content": "{: .text-delta } 1. TOC {:toc} --- # [Environment Settings](https://docs.micronaut.io/latest/guide/#environments) > The Micronaut framework uses the following hierarchy for environment processing (lowest to highest priority): - Deduced environments - Environments from the `micronaut.environments` system property - Environments from the `MICRONAUT_ENVIRONMENTS` environment variable - Environments specified explicitly through the application context builder Available Env Fields # Run in Development ## replace application ```java public class Application { public static void main(String[] args) { Micronaut.build(args) .mainClass(Application.class) .defaultEnvironments(Environment.DEVELOPMENT) .start(); } } ``` ## add to build.gradle ```gradle run { systemProperty('micronaut.environments', 'dev') } ``` ## cli ```shell ./gradlew -Dmicronaut.environments=dev run ``` ## ide ",
    "url": "/Micronotes/EnviromentStuff",
    
    "relUrl": "/Micronotes/EnviromentStuff"
  },"73": {
    "doc": "Environment",
    "title": "Environment",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Core ## Set ENV variable ```xml ``` > or set in launchSettings.json ```json { \"https\": { \"commandName\": \"Project\", \"dotnetRunMessages\": true, \"launchBrowser\": true, \"launchUrl\": \"swagger\", \"applicationUrl\": \"https://localhost:7278;http://localhost:5277\", \"environmentVariables\": { \"ASPNETCORE_ENVIRONMENT\": \"Development\", \"GOOGLE_APPLICATION_CREDENTIALS\": \"C:\\\\Users\\\\bp01232023\\\\source\\\\repos\\\\GoogleCloudLogging\\\\application_default_credentials.json\" } } } ``` # MVC ## Set ENV variable set in Web.config ```xml ``` # C# ```csharp public class EnvironmentService { string GetAppSettingValue(string key) { return ConfigurationManager.AppSettings[key]; } public bool SetEnvironmentVariableFromAppSetting(string envVariableName) { var envSet = !string.IsNullOrWhiteSpace(Environment.GetEnvironmentVariable(envVariableName)); if (!envSet) { var envValue = GetAppSettingValue(envVariableName); envSet = !string.IsNullOrWhiteSpace(envValue); if (envSet) { Environment.SetEnvironmentVariable(envVariableName, envValue); return envSet; } } return envSet; } } ``` ",
    "url": "/DotNetNotes/Environment",
    
    "relUrl": "/DotNetNotes/Environment"
  },"74": {
    "doc": "Environment",
    "title": "Environment",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Env Variables | VARIABLE | WINDOWS 10 |-----------------------------|---------------------------------------------------------------------------------------| %ALLUSERSPROFILE% | C:\\ProgramData | %APPDATA% | C:\\Users\\{username}\\AppData\\Roaming | %COMMONPROGRAMFILES% | C:\\Program Files\\Common Files | %COMMONPROGRAMFILES(x86)% | C:\\Program Files (x86)\\Common Files | %CommonProgramW6432% | C:\\Program Files\\Common Files | %COMSPEC% | C:\\Windows\\System32\\cmd.exe | %HOMEDRIVE% | C:\\ | %HOMEPATH% | C:\\Users\\{username} | %LOCALAPPDATA% | C:\\Users\\{username}\\AppData\\Local | %LOGONSERVER% | \\\\{domain_logon_server} | %PATH% | C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem | %PathExt% | .com;.exe;.bat;.cmd;.vbs;.vbe;.js;.jse;.wsf;.wsh;.msc | %PROGRAMDATA% | C:\\ProgramData | %PROGRAMFILES% | C:\\Program Files | %ProgramW6432% | C:\\Program Files | %PROGRAMFILES(X86)% | C:\\Program Files (x86) | %PROMPT% | $P$G | %SystemDrive% | C: | %SystemRoot% | C:\\Windows | %TEMP% | C:\\Users\\{username}\\AppData\\Local\\Temp | %TMP% | C:\\Users\\{username}\\AppData\\Local\\Temp | %USERDOMAIN% | Userdomain associated with current user. | %USERDOMAIN_ROAMINGPROFILE% | Userdomain associated with roaming profile. | %USERNAME% | {username} | %USERPROFILE% | C:\\Users\\{username} | %WINDIR% | C:\\Windows | %PUBLIC% | C:\\Users\\Public | %PSModulePath% | %SystemRoot%\\system32\\WindowsPowerShell\\v1.0\\Modules\\ | %OneDrive% | C:\\Users\\{username}\\OneDrive | %DriverData% | C:\\Windows\\System32\\Drivers\\DriverData | %CD% | Outputs current directory path. (Command Prompt.) | %CMDCMDLINE% | Outputs command line used to launch current Command Prompt session. (Command Prompt.) | %CMDEXTVERSION% | Outputs the number of current command processor extensions. (Command Prompt.) | %COMPUTERNAME% | Outputs the system name. | %DATE% | Outputs current date. (Command Prompt.) | %TIME% | Outputs time. (Command Prompt.) | %ERRORLEVEL% | Outputs the number of defining exit status of previous command. (Command Prompt.) | %PROCESSOR_IDENTIFIER% | Outputs processor identifier. | %PROCESSOR_LEVEL% | Outputs processor level. | %PROCESSOR_REVISION% | Outputs processor revision. | %NUMBER_OF_PROCESSORS% | Outputs the number of physical and virtual cores. | %RANDOM% | Outputs random number from 0 through 32767. | %OS% | Windows_NT | ## Server 2019 | Name | Value |--------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------| ALLUSERSPROFILE | C:\\ProgramData | APPDATA | C:\\Users\\bp01232023\\AppData\\Roaming | ChocolateyInstall | C:\\ProgramData\\chocolatey | ChocolateyLastPathUpdate | \"133207961706168795\" | CLIENTNAME | 10-LTOP-WD-19 | CommonProgramFiles | C:\\Program Files\\Common Files | CommonProgramFiles | (x86) C:\\Program Files (x86)\\Common Files | CommonProgramW6432 | C:\\Program Files\\Common Files | COMPLUS_FusionEnableForcedF | ... 1 | COMPUTERNAME | SRV-WEBDEV-10 | ComSpec | C:\\Windows\\system32\\cmd.exe | DevEnvDir | C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\Common7\\IDE\\ | DriverData | C:\\Windows\\System32\\Drivers\\DriverData | FACADES_4 | .5.0.0 C:\\Program Files (x86)\\Reference Assemblies\\Microsoft\\Framework\\.NETFramework\\v4.5\\Facades | FACADES_4 | .5.1.0 C:\\Program Files (x86)\\Reference Assemblies\\Microsoft\\Framework\\.NETFramework\\v4.5.1\\Facades | FACADES_4 | .5.2.0 C:\\Program Files (x86)\\Reference Assemblies\\Microsoft\\Framework\\.NETFramework\\v4.5.2\\Facades | FACADES_4 | .6.0.0 C:\\Program Files (x86)\\Reference Assemblies\\Microsoft\\Framework\\.NETFramework\\v4.6\\Facades | FACADES_4 | .6.1.0 C:\\Program Files (x86)\\Reference Assemblies\\Microsoft\\Framework\\.NETFramework\\v4.6.1\\Facades | FACADES_4 | .6.2.0 C:\\Program Files (x86)\\Reference Assemblies\\Microsoft\\Framework\\.NETFramework\\v4.6.2\\Facades | FACADES_4 | .7.0.0 C:\\Program Files (x86)\\Reference Assemblies\\Microsoft\\Framework\\.NETFramework\\v4.7\\Facades | FACADES_4 | .7.1.0 C:\\Program Files (x86)\\Reference Assemblies\\Microsoft\\Framework\\.NETFramework\\v4.7.1\\Facades | FACADES_4 | .7.2.0 C:\\Program Files (x86)\\Reference Assemblies\\Microsoft\\Framework\\.NETFramework\\v4.7.2\\Facades | FACADES_4 | .8.0.0 C:\\Program Files (x86)\\Reference Assemblies\\Microsoft\\Framework\\.NETFramework\\v4.8\\Facades | FPS_BROWSER_APP_PROFILE_STRING | Internet Explorer | FPS_BROWSER_USER_PROFILE_ST | ... Default | Framework40Version | v4.0 | FrameworkDir | C:\\Windows\\Microsoft.NET\\Framework\\ | FrameworkDir32 | C:\\Windows\\Microsoft.NET\\Framework\\ | FrameworkVersion | v4.0.30319 | FrameworkVersion32 | v4.0.30319 | FSHARPINSTALLDIR | C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\Common7\\IDE\\CommonExtensions\\Microsoft\\FSharp\\Tools | HOMEDRIVE | C: | HOMEPATH | \\Users\\bp01232023 | IIS_BIN | C:\\Program Files (x86)\\IIS Express | IIS_DRIVE | C: | IIS_SITES_HOME | C:\\Users\\bp01232023\\Documents\\My Web Sites | IIS_USER_HOME | C:\\Users\\bp01232023\\Documents\\IISExpress | INCLUDE | C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.8\\include\\um | LIB | C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.8\\lib\\um\\x86 | LIBPATH | C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319 | LOCALAPPDATA | C:\\Users\\bp01232023\\AppData\\Local | LOGONSERVER | \\\\SRV-ADC2 | MSBuildLoadMicrosoftTargets | ... true | NETFXSDKDir | C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.8\\ | NUMBER_OF_PROCESSORS | 8 | OS | Windows_NT | Path | C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\Common7\\IDE\\\\Extensions\\Microsoft\\IntelliCode\\CLI;C:\\Program Files (x86)\\Microsoft Visual Stud... | PATHEXT | .COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.CPL | PkgDefApplicationConfigFile | C:\\Users\\bp01232023\\AppData\\Local\\Microsoft\\VisualStudio\\16.0_e983c4e7\\devenv.exe.config | POWERSHELL_DISTRIBUTION_CHA | ... MSI:Windows Server 2019 Standard | PROCESSOR_ARCHITECTURE | AMD64 | PROCESSOR_IDENTIFIER | Intel64 Family 6 Model 85 Stepping 7, GenuineIntel | PROCESSOR_LEVEL | 6 | PROCESSOR_REVISION | 5507 | ProgramData | C:\\ProgramData | ProgramFiles | C:\\Program Files | ProgramFiles | (x86) C:\\Program Files (x86) | PROGRAMFILESDIR | C:\\Program Files (x86)\\ | ProgramW6432 | C:\\Program Files | PROMPT | $P$G | PSModulePath | C:\\Users\\bp01232023\\Documents\\WindowsPowerShell\\Modules;C:\\Program Files\\WindowsPowerShell\\Modules;C:\\Windows\\system32\\WindowsPowerShell\\v1.0\\Modules;C:\\Progra... | PUBLIC | C:\\Users\\Public | ServiceHubClientProcessVersion | 16.11.33214.272 built by: D16.11 | ServiceHubCurrentOsLocale | en-US | ServiceHubLocationServicePi | ... 96246ee45046e583025fe831a8e38e5a7f2ea6e5174539fb3b48667531cd120d//\\\\devenv.exe.config | ServiceHubLogSessionKey | FD032B08 | SESSIONNAME | RDP-Tcp#2 | SystemDrive | C: | SystemRoot | C:\\Windows | TEMP | C:\\Users\\BP0123~1\\AppData\\Local\\Temp\\4 | ThreadedWaitDialogDpiContext | -4 | TMP | C:\\Users\\BP0123~1\\AppData\\Local\\Temp\\4 | USERDNSDOMAIN | AD.JDCCU.ORG | USERDOMAIN | JDCCU | USERDOMAIN_ROAMINGPROFILE | JDCCU | USERNAME | bp01232023 | USERPROFILE | C:\\Users\\bp01232023 | VisualStudioDir | C:\\Users\\bp01232023\\Documents\\Visual Studio 2019 | VisualStudioEdition | Microsoft Visual Studio Professional 2019 | VisualStudioVersion | 16.0 | VS160COMNTOOLS | C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\Common7\\Tools\\ | VSAPPIDDIR | C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\Common7\\IDE\\ | VSAPPIDNAME | devenv.exe | VSCMD_ARG_app_plat | Desktop | VSCMD_ARG_HOST_ARCH | x86 | VSCMD_ARG_TGT_ARCH | x86 | VSCMD_VER | 16.11.23 | VSINSTALLDIR | C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\ | VSLANG | 1033 | VSSKUEDITION | Professional | windir | C:\\Windows | WindowsLibPath | References\\CommonConfiguration\\Neutral | WindowsSDK_ExecutablePath_x64 | C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v10.0A\\bin\\NETFX 4.8 Tools\\x64\\ | WindowsSDK_ExecutablePath_x86 | C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v10.0A\\bin\\NETFX 4.8 Tools\\ | WindowsSDKLibVersion | winv6.3\\ | WindowsSDKVersion | \\ | --- ",
    "url": "/Windows_Notes/Environment",
    
    "relUrl": "/Windows_Notes/Environment"
  },"75": {
    "doc": "Events",
    "title": "Events",
    "content": "{: .text-delta } 1. TOC {:toc} --- # [Keyboard Event / keydown / keyup / keypress](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent#events) ## Read Barcode Scanner Input Event ```typescript const CheckInPCF = {}; function Scan(evt: Event): void { const e: KeyboardEvent = evt as KeyboardEvent; const timeDiff = e.timeStamp - CheckInPCF.LastTimeStamp; CheckInPCF.LastTimeStamp = e.timeStamp; //\"global\" //console.log(e.key + ': ' + timeDiff); if (timeDiff < 100) { if (e.key == \"Enter\") { //Assemble complete scan text CheckInPCF.ScanText = CheckInPCF.FirstCharacterCandidate + CheckInPCF.ScanText; //.replace('\\u000D',''); //console.log('finished: ' + CheckInPCF.ScanText); CheckInPCF._this._notifyOutputChanged(); //Power Apps related } else { CheckInPCF.ScanText += e.key; } } else { CheckInPCF.ScanText = \"\"; CheckInPCF.FirstCharacterCandidate = e.key; } } ``` ### [React Typescript Example](https://gist.github.com/14paxton/09adce350289bdcc1df92ed425c1d548) ",
    "url": "/JavaScript/TypeScript/Events",
    
    "relUrl": "/JavaScript/TypeScript/Events"
  },"76": {
    "doc": "Events",
    "title": "Events",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Create Event Listeners ```javascript element.addEventListener('click', function () { }); element.onclick = function () { }; element.addEventListener('load', function () { }); element.onload = function () { }; ``` - > In HTML ```html ``` # Find and List Active Events and Event Listeners ## List Events defined with the event attribute ```javascript function listAllEventListeners() { const allElements = Array.prototype.slice.call(document.querySelectorAll('*')); allElements.push(document); allElements.push(window); const types = []; for (let ev in window) { if (/^on/.test(ev)) types[types.length] = ev; } let elements = []; for (let i = 0; i 0) { for (let evt of Object.keys(evts)) { for (k = 0; k { if (/./.test(key)) { window.addEventListener(key.slice(2), (event) => { console.log(key, event); }); } }); ``` > or ```javascript console.log(getEventListeners(document.body)); console.table([document, window].concat([...document.querySelectorAll('*')]).map(el => { let evs = getEventListeners(el); // evs = (evs.click ? { click: evs.click } : []); return { el: el, types: Object.keys(evs).join(', '), listeners: evs }; }).filter(item => item.types)); ``` ## Override addEventListener prototype > The override consists in adding an object eventListenerList that will store added event listeners. The method that will retrieve the event listeners > will return this object. ```javascript Window.prototype._addEventListener = Window.prototype.addEventListener; Window.prototype.addEventListener = function (a, b, c) { if (c == undefined) c = false; this._addEventListener(a, b, c); if (!this.eventListenerList) this.eventListenerList = {}; if (!this.eventListenerList[a]) this.eventListenerList[a] = []; this.eventListenerList[a].push({listener: b, options: c}); }; ``` > To avoid duplicate code, the prototype modification can be applied once in the interface EventTarget. > ```EventTarget``` is a ```DOM``` interface implemented by objects that can receive events and may have listeners for them. > ```Element```, ```Document```, and ```Window``` are the most common event targets, but other objects can be event targets, too. > For example ```XMLHttpRequest```, ```AudioNode```, ```AudioContext```, > and others. ```javascript EventTarget.prototype._addEventListener = EventTarget.prototype.addEventListener; EventTarget.prototype.addEventListener = function (a, b, c) { if (c == undefined) c = false; this._addEventListener(a, b, c); if (!this.eventListenerList) this.eventListenerList = {}; if (!this.eventListenerList[a]) this.eventListenerList[a] = []; this.eventListenerList[a].push({listener: b, options: c}); }; ``` ## Override Get event Listeners / _getEventListeners ```javascript EventTarget.prototype._getEventListeners = function (a) { if (!this.eventListenerList) this.eventListenerList = {}; if (a == undefined) { return this.eventListenerList; } return this.eventListenerList[a]; }; It is ready : function _showEvents(events) { for (let evt of Object.keys(events)) { console.log(evt + \" ----------------> \" + events[evt].length); for (let i = 0; i ## JQuery ```javascript $(document).ready(function () { Console.log(\"ready\"); }); ``` # use `arguments` keyword in function to get arguments passed or available ```javascript function getArgs() { const argList = arguments; } ``` # Delegate / On[Event] ```javascript document.addEventListener(eventName, (event) => { if (event.target.closest(elementSelector)) { handler.call(event.target, event); } }); ``` - > ## JQuery ```javascript $(\"selector\").on(\"click\", myHandlerFunction); ``` ## Delegate Event Handling ```javascript function addEventListener(el, eventName, eventHandler, selector) { if (selector) { const wrappedHandler = (e) => { if (!e.target) return; const el = e.target.closest(selector); if (el) { eventHandler.call(el, e); } }; el.addEventListener(eventName, wrappedHandler); return wrappedHandler; } else { const wrappedHandler = (e) => { eventHandler.call(el, e); }; el.addEventListener(eventName, wrappedHandler); return wrappedHandler; } } // Use the return value to remove that event listener, see #off addEventListener(el, eventName, eventHandler); // Or when you want to delegate event handling addEventListener(el, eventName, eventHandler, selector); ``` - > ### JQuery ```javascript $(el).on(eventName, eventHandler); // Or when you want to delegate event handling $(el).on(eventName, selector, eventHandler); ``` # Trigger Custom Events ```javascript const event = new CustomEvent(\"my-event\", {detail: {some: \"data\"}}); el.dispatchEvent(event); ``` - > ## JQuery ```javascript $(el).trigger(\"my-event\", { some: \"data\" }); ``` ## Trigger Event Natively ```javascript function trigger(el, eventType) { if (typeof eventType === \"string\" && typeof el[eventType] === \"function\") { el[eventType](); } else { const event = typeof eventType === \"string\" ? new Event(eventType, {bubbles: true}) : eventType; el.dispatchEvent(event); } } trigger(el, \"focus\"); // For a full list of event types: https://developer.mozilla.org/en-US/docs/Web/API/Event trigger(el, new PointerEvent(\"pointerover\")); ``` - > ### JQuery ```javascript $(el).trigger(\"focus\"); ``` # [Keyboard Event / keydown / keyup / keypress](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent#events) ## Detect Barcode Scanner input > [Javascript for detecting usb connected - hand held - barcode scanner input](https://gist.github.com/neelbhanushali/8b77171ae7b775f2b25325760f2b5191) ### BarcodeScanner Class ```javascript const events = mitt(); class BarcodeScaner { initialize = () => { document.addEventListener(\"keypress\", this.keyup); if (this.timeoutHandler) { clearTimeout(this.timeoutHandler); } this.timeoutHandler = setTimeout(() => { this.inputString = \"\"; }, 10); }; close = () => { document.removeEventListener(\"keypress\", this.keyup); }; timeoutHandler = 0; inputString = \"\"; keyup = (e) => { if (this.timeoutHandler) { clearTimeout(this.timeoutHandler); this.inputString += String.fromCharCode(e.keyCode); } this.timeoutHandler = setTimeout(() => { if (this.inputString.length Opt 2 ```javascript export class BarcodeScanner extends EventTarget { constructor(options = {}) { super(); options = Object.assign({ timeOut: 130, characterCount: 13, }, options,); this.timeOut = options.timeOut; this.characterCount = options.characterCount; this.timer = Date.now(); this.capture = \"\"; this.target = new EventTarget(); document.addEventListener(\"keypress\", this.keypress.bind(this)); } keypress(e) { // Set current time let now = Date.now(); // If out timer is out, we need to reset because it was not a barcode if (now - this.timer > this.timeOut) { this.reset(); } // It seems we are still fast enough to be a barcode, so add to capture let sinceFirst = now - this.timer; if (sinceFirst { //usually scanners throw an 'Enter' key at the end of read if (e.keyCode === 13) { if (code.length > 10) { console.log(code); /// code ready to use code = \"\"; } } else { code += e.key; //while this is not an 'enter' it stores the every key } //run a timeout of 200ms at the first read and clear everything if (!reading) { reading = true; setTimeout(() => { code = \"\"; reading = false; }, 200); //200 works fine for me but you can adjust it } }); ``` ## Detect keyboard input manually ```javascript document.addEventListener(\"keydown\", (ev) => { if (ev.ctrlKey || ev.altKey) return; // Ignore command-like keys if (ev.key == \"Enter\") { // ...submit the content here... } else if (ev.key == \"Space\") { // I think IE needs this document.getElementById(\"barcode-input\").value += \" \"; } else if (ev.key.length == 1) { // A character not a key like F12 or Backspace document.getElementById(\"barcode-input\").value += ev.key; } }); ``` ",
    "url": "/JavaScript/Events",
    
    "relUrl": "/JavaScript/Events"
  },"77": {
    "doc": "File",
    "title": "File",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Reading Files ```java import java.io.File; import java.nio.file.Files; import java.nio.file.Path; byte[] imageBytes = Files.readAllBytes(Path.of(\"src/main/resources/EmailTemplate/picture.png\")); File file = new File(\"src/main/resources/EmailTemplate/picture.png\"); ``` ## Read HTML to String ```java package example.micronaut.services; import io.micronaut.context.annotation.Requires; import io.micronaut.context.annotation.Value; import jakarta.inject.Singleton; import java.io.IOException; import java.io.InputStream; import java.nio.charset.StandardCharsets; @Singleton @Requires(property = \"html.file.path\") public class HtmlFileService { private final String filePath; public HtmlFileService(@Value(\"${html.file.path}\") String filePath) { this.filePath = filePath; } public String readHtmlFile() throws IOException { ClassLoader classLoader = Thread.currentThread().getContextClassLoader(); try (InputStream inputStream = classLoader.getResourceAsStream(filePath)) { if (inputStream == null) { throw new IOException(\"File not found: \" + filePath); } return new String(inputStream.readAllBytes(), StandardCharsets.UTF_8); } } } ``` ## Read JSON file to Map ```java package example.micronaut.services; import io.micronaut.context.annotation.Requires; import io.micronaut.core.annotation.Nullable; import io.micronaut.serde.ObjectMapper; import jakarta.inject.Singleton; import java.io.IOException; import java.nio.file.Files; import java.nio.file.Paths; import java.util.Map; @Singleton @Requires(classes = ObjectMapper.class) public class JsonFileReader { private final ObjectMapper objectMapper; @jakarta.inject.Inject public JsonFileReader(ObjectMapper objectMapper) { this.objectMapper = objectMapper; } public @Nullable Map readJsonFileToMap(String filePath) throws IOException { byte[] jsonData = Files.readAllBytes(Paths.get(filePath)); return objectMapper.readValue(jsonData, Map.class); } } ``` ",
    "url": "/JavaNotes/File",
    
    "relUrl": "/JavaNotes/File"
  },"78": {
    "doc": "FormStuff",
    "title": "FormStuff",
    "content": "{: .text-delta } 1. TOC {:toc} *** # get form data ```javascript const data = Object.fromEntries(new FormData(document.forms.requestForm).entries()); console.log(data) ``` ```javascript document.querySelector('form').addEventListener('submit', (e) => { const data = Object.fromEntries(new FormData(e.target).entries()); console.log(data) }); ``` ```javascript const formElem = document.getElementById(\"requestForm\"); formElem.onformdata = (e) => { console.log('formdata fired'); console.log(e) return false // modifies the form data }; formElem.addEventListener('submit', (e) => { // on form submission, prevent default // e.preventDefault(); // construct a FormData object, which fires the formdata event const formData = document.getElementById('requestForm') console.log(formData) console.log(e.target) alert(\"fuck me\") // return false }); ``` ```javascript function handleSubmit(e) { e.preventDefault(); const formData = new FormData(e.target); const formProps = Object.fromEntries(formData); console.log(\"submit\", formProps) } const requestForm = document.getElementById(\"requestForm\"); requestForm.addEventListener(\"submit\", handleSubmit); ``` ```javascript function myFunction() { var elements = document.getElementById(\"myForm\").elements; var obj = {}; for (var i = 0; i { constantMock.apply(this, arguments) .then((response) => { if (response.url.indexOf(\"/me\") > -1 && response.type != \"cors\") { console.log(response); // do something for specificconditions } resolve(response); }) .catch((error) => { reject(response); }) }); } function bodyResults(reqBody) { console.log(reqBody) } ``` ## XMLHTTPRequest Intercept POST ```javascript (function () { var origOpen = XMLHttpRequest.prototype.send; XMLHttpRequest.prototype.send = function () { console.log('request started!'); console.log(arguments[0]); this.addEventListener('load', function () { console.log('request completed!'); console.log(this.status); }); origOpen.apply(this, arguments); }; })(); ``` ## JQuery ```javascript $(document).on(\"ajaxSend\", function (e) { console.log(\"before request is sent\"); }).on(\"ajaxComplete\", function (e) { console.log(\"after success or error\"); }).on(\"ajaxSuccess \", function (e) { console.log(\"on success\"); }).on(\"ajaxError \", function (e) { console.log(\"on error\"); }); ``` # Intercept XHR Requests ```javascript (function (open) { XMLHttpRequest.prototype.open = function (method, url, async, user, pass) { alert('Intercept'); open.call(this, method, url + \".ua\", async, user, pass); }; })(XMLHttpRequest.prototype.open); ``` # manually set validity on form field - > [Validity State](https://developer.mozilla.org/en-US/docs/Web/API/ValidityState) ## with listener ```javascript var field = document.getElementById('field_robot'); field.addEventListener('input', function (event) { fieldValidator(event, (field.value == '42')); }); function fieldValidator(event, condition) { var val = event.target.value; if (!condition) { event.target.setCustomValidity('invalid'); } else { event.target.setCustomValidity(''); } } ``` ```html ``` ## core use case ```javascript // ... var email = emailInput.value; emailInput.required = !!email.trim(); var reqAddRemove = emailInput.required ? 'add' : 'remove'; function setEmailInputValid() { emailInput.setCustomValidity(''); errorBlock.html(\"\").removeClass('emailValidationError').addClass('hidden'); errorIcon.attr(\"class\", \"\"); errorIcon.parent().removeClass(\"has-error\"); } emailInput.previousElementSibling.classList[reqAddRemove]('req'); if (emailInput.required) { var inValidEmail = !AssessmentOrderEmailNotification.validateEmail(email); var inValidDomain = !AssessmentOrderEmailNotification.validateDomain(email); var respondentEmail = AssessmentOrderEmailNotification.respondentEmailCheck(email); if (inValidEmail || inValidDomain || respondentEmail) { emailInput.setCustomValidity('invalid'); var errorMessage = inValidEmail ? email + \" is not a valid Email\" : (inValidDomain ? email + \" does not have a valid domain\" : \"Error: Email address cannot be the same as the assessment respondent.\"); errorBlock.html(errorMessage).removeClass('hidden').addClass('emailValidationError'); errorIcon.attr(\"class\", \"glyphicon glyphicon-remove form-control-feedback\"); errorIcon.parent().addClass(\"has-error\"); event.target.previousSibling.classList.add('multi-input-height'); } else { setEmailInputValid(); } } else { setEmailInputValid(); } ``` ",
    "url": "/JavaScript/FormStuff",
    
    "relUrl": "/JavaScript/FormStuff"
  },"79": {
    "doc": "FunctionObject",
    "title": "FunctionObject",
    "content": "{: .text-delta } 1. TOC {:toc} --- # TidBits ## Function Properties You Can pass arguments to functions that do no accept parameters: call arguments in method to see what has been passed . --- > `arguments.callee`: Reference to the currently executing function that the arguments belong to. > `arguments.caller`: Reference to the function that invoked the currently executing function. > `arguments.length`: The number of arguments that were passed to the function. > `arguments[@@iterator]`: Returns a new Array iterator object that contains the values for each index in arguments. ## Function Methods > `Fn.call`: immediately calls a function > `Fn.apply`: allows you to pass in an array for parameters > `Fn.bind`: will bind parameters to a new function ```javascript var newFunc = oldFunc.bind({name: ted}, params[(\"param1\", \"param2\")]); ``` # Get function as string ```javascript function extractFunctionBody(fn) { var reg = /function \\((.*)\\)[ ]?{(.*)}$/g; var match = reg.exec(fn.toString().replace(/\\n/g, \";\")); if (match) { return match[2]; } else { return \"\"; } } ``` ```javascript console.log(\"1\", Function.prototype.toString.call(cloneNodeToDocument)); console.log(\"2\", cloneNodeToDocument + \"\"); const entire = cloneNodeToDocument.toString(); ``` > strip string ```javascript console.log(\"3\", entire.slice(entire.indexOf(\"{\") + 1, entire.lastIndexOf(\"}\")),); console.log(\"4\", entire.replace(/^[^{]*{\\s*/, \"\")); console.log(\"5\", entire.match(/^[^{]+\\{(.*?)\\}$/)); console.log(\"6\", entire.substring(entire.indexOf(\"{\") + 1, entire.lastIndexOf(\"}\")),); console.log(\"7\", \"(\" + cloneNodeToDocument.toString() + \")()\"); console.log(\"8\", \"(\" + cloneNodeToDocument + \")()\"); console.log(\"9\", extractFunctionBody(cloneNodeToDocument)); ``` # get function info ```javascript var FN_ARGS = /^function\\s*[^\\(]*\\(\\s*([^\\)]*)\\)/m; var FN_ARG_SPLIT = /,/; var FN_ARG = /^\\s*(_?)(\\S+?)\\1\\s*$/; var STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/gm; function annotate(fn) { var $inject, fnText, argDecl, last; if (!($inject = fn.$inject)) { $inject = []; if (fn.length) { fnText = fn.toString().replace(STRIP_COMMENTS, \"\"); console.log(\"text\", fnText); argDecl = fnText.match(FN_ARGS); console.log(\"args\", argDecl); argDecl[1].split(FN_ARG_SPLIT).forEach(function (arg) { arg.replace(FN_ARG, function (all, underscore, name) { $inject.push(name); }); }); } fn.$inject = $inject; } console.log(fn); console.log(fn.toString()); return $inject; } ``` # remove imported function ```javascript export function cleanWebPackImports(stringFunc) { const webPackRegex = /[^\\s]*(WEBPACK_IMPORTED)(.*?)(\\]\\)|\\])/g; const importedFunctionRegex = /\\[\\\"(.*?)\\\"\\]/g; let cleanedFunc = \"\"; const extractedWebpack = Array.from(stringFunc.matchAll(webPackRegex)); extractedWebpack.forEach((webPackGarbage) => { const extractedFunction = Array.from(webPackGarbage[0].matchAll(importedFunctionRegex), (x) => x[1],); cleanedFunc += stringFunc.replace(webPackGarbage[0], extractedFunction); //TODO find way to call function with string then can dynamically add used imports // let imported = '' // if (webPackRegex.test(window[func] + '')) { // imported = cleanWebPackImports(window[func] + '') // console.log(\"imported\", imported) // cleanedFunc += `${imported} ` // } }); return cleanedFunc ? cleanedFunc : stringFunc; } ``` ",
    "url": "/JavaScript/FunctionObject",
    
    "relUrl": "/JavaScript/FunctionObject"
  },"80": {
    "doc": "Functions",
    "title": "Functions",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Quick Scripts ## [Tips and Tricks](https://cloud.google.com/functions/docs/bestpractices/tips?_ga=2.165287036.-213526365.1679410207#functions-tips-scopes-csharp) ## Enable APIs and services for functions ```shell gcloud services enable \\ cloudfunctions \\ cloudbuild.googleapis.com \\ chat.googleapis.com ``` *** # [Write Function](https://cloud.google.com/functions/docs/writing#event-driven_functions) *** # Client Libraries ## [DotNet Functions Framework](https://github.com/GoogleCloudPlatform/functions-framework-dotnet) *** # [Local Development](https://cloud.google.com/functions/docs/running/overview) ## [Running Function with Framework](https://cloud.google.com/functions/docs/running/function-frameworks) *** # [Triggers](https://cloud.google.com/functions/docs/calling) ## [PubSub 1st Gen](https://cloud.google.com/functions/docs/tutorials/pubsub-1st-gen#functions-prepare-environment-csharp) ## [PubSub 2nd Gen](https://cloud.google.com/functions/docs/tutorials/pubsub) *** # [Deploy](https://cloud.google.com/functions/docs/deploy#console) ## [Gen 1](https://cloud.google.com/functions/docs/create-deploy-http-dotnet) > where my-first-function is the registered name by which your function will be identified in the Google Cloud console, and --entry-point specifies > your function's fully qualified class name (FQN). ```shell gcloud functions deploy my-first-function --entry-point HelloWorld.Function --runtime dotnet6 --trigger-http --allow-unauthenticated ``` ### test ```shell gcloud functions describe my-first-function ``` ### logs ```shell gcloud functions logs read my-first-function ``` *** # [Event Driven](https://cloud.google.com/functions/docs/writing/write-event-driven-functions) # Resources - [Code Samples](https://cloud.google.com/functions/docs/samples) ",
    "url": "/GoogleNotes/Functions",
    
    "relUrl": "/GoogleNotes/Functions"
  },"81": {
    "doc": "Functions",
    "title": "Functions",
    "content": "{: .text-delta } 1. TOC {:toc} --- # extract JSON ```sql select JSON_EXTRACT(app_metadata, '$.tb5', '$.tb6.roleGroups') as \"all\", JSON_EXTRACT(app_metadata, '$.tb5.\"roleGroups\"') as \"tb5\" from user; ``` # Resources - [string-functions](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html) ",
    "url": "/SQLNotes/Functions",
    
    "relUrl": "/SQLNotes/Functions"
  },"82": {
    "doc": "GCP",
    "title": "GCP",
    "content": "{: .text-delta } 1. TOC {:toc} *** # [App Engine](https://cloud.google.com/appengine/docs/standard/java-gen2/runtime) --- # Resources - [API and Ref](https://cloud.google.com/appengine/docs/standard/apis) - [Java Cloud Client Libraries](https://cloud.google.com/java/docs/reference) - [appengine-apis overview (2.0.0)](https://cloud.google.com/appengine/docs/standard/java-gen2/reference/services/bundled/latest/overview) ",
    "url": "/JavaNotes/GCP",
    
    "relUrl": "/JavaNotes/GCP"
  },"83": {
    "doc": "GORM_WhereQueris",
    "title": "GORM_WhereQueris",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Altering fetch ```groovy // Using a dynamic finder Author.findAllByNameLike(\"John%\", [sort: 'name', order: 'asc', fetch: [location: 'join']]) import org.hibernate.FetchMode as FM def results = Airport.withCriteria { eq \"region\", \"EMEA\" fetchMode \"flights\", FM.SELECT } ``` # More Advanced Subqueries in GORM ```groovy def results = Person.where { firstName in where { age where { age > 18 }.avg('age') } ``` ## Correlated queries that span two domain classes can be used: ```groovy def employees = Employee.where { region.continent in ['APAC', \"EMEA\"] }.id() def results = Sale.where { employee in employees && total > 100000 }.employee.list() ``` ## And support for aliases (cross query references) using simple variable declarations has been added to where queries: ```groovy def query = Employee.where { def em1 = Employee exists Sale.where { def s1 = Sale def em2 = employee return em2.id == em1.id }.id() } def results = query.list() ``` # ARGS Map , list of args that can be passed i.e. findall([sort: ), count(), ect ```groovy public static final String ARGUMENT_FETCH_SIZE = \"fetchSize\" public static final String ARGUMENT_TIMEOUT = \"timeout\" public static final String ARGUMENT_READ_ONLY = \"readOnly\" public static final String ARGUMENT_FLUSH_MODE = \"flushMode\" public static final String ARGUMENT_MAX = \"max\" public static final String ARGUMENT_OFFSET = \"offset\" public static final String ARGUMENT_ORDER = \"order\" public static final String ARGUMENT_SORT = \"sort\" public static final String ORDER_DESC = \"desc\" public static final String ORDER_ASC = \"asc\" public static final String ARGUMENT_FETCH = \"fetch\" public static final String ARGUMENT_IGNORE_CASE = \"ignoreCase\" public static final String ARGUMENT_CACHE = \"cache\" public static final String ARGUMENT_LOCK = \"lock\" ``` # CriteriaBuilder ## Creating Criteria ```groovy static dropdownList(def getActive = false, def excludeClient = null) { def clientSetupList = createCriteria().list() { resultTransformer(CriteriaSpecification.ALIAS_TO_ENTITY_MAP) projections { property('id', 'id') property('clientName', 'clientName') property('clientId', 'clientId') property('isActive', 'isActive') } cache true if (getActive) eq('isActive', true) if (excludeClient) ne('clientName', excludeClient) order('clientName', 'asc') } return clientSetupList } ``` ## Where using a not in and deleteAll() ```groovy UserGroupAssessmentOrder.where { userGroupId == ug.id not { 'in'('assessmentOrderId', command.assessmentOrderIds.collect { (Long) it }) } }.deleteAll() def results = Person.withCriteria { notIn \"firstName\", Person.where { age filteredUsers, sort, order, _clientSetupId, statusFilters, unassignedManagerFilter, unassignedAssessmentFilter) { def (firstNameSearch, lastNameSearch, rest) = searchString?.tokenize() def stringToRegex = { string -> string ? \"^${string}.*\" : null } def managerQuery = UserRelationship.whereAny { manager { firstName ==~ ~/${stringToRegex(searchString)}/ || lastName ==~ ~/${stringToRegex(searchString)}/ } manager { firstName ==~ ~/${stringToRegex(firstNameSearch)}/ && lastName ==~ ~/${stringToRegex(lastNameSearch)}/ } if (filteredUsers) { not { 'in'('user.id', filteredUsers.collect { (Long) it }) } } }.join('user').distinct('user.id') DetachedCriteria detachedUserQuery = User.where { id in managerQuery projections { distinct('id') property('username') property('clientSetupId') property('email') property('firstName') property('lastName') property('userMetadata') property('lastLogin') property('pictureUrl') } } if (_clientSetupId) { detachedUserQuery.eq('clientSetupId', _clientSetupId) } if (unassignedManagerFilter || unassignedAssessmentFilter) { def userIdsWithManager = getClientUserIdsWithManagers(_clientSetupId) detachedUserQuery.or { if (unassignedManagerFilter) { if (userIdsWithManager) { not { 'in'('id', userIdsWithManager) } } } if (unassignedAssessmentFilter) { def userIdsWithAssessment = getClientUserIdsLinkedToAssessments(_clientSetupId) if (userIdsWithAssessment) { not { 'in'('id', userIdsWithAssessment) } } } } } detachedUserQuery.sort(sort, order) .collect { [id : it[0], username: it[1], clientSetupId: it[2], email: it[3], firstName: it[4], lastName : it[5], userMetadata: it[6], lastLogin: it[7], pictureUrl: it[8]] } } def (firstNameSearch, lastNameSearch, rest) = searchString?.tokenize() def stringToRegex = { string -> string ? \"^${string}.*\" : null } ``` ### EXAMPLE2 ```groovy DetachedCriteria managerQuery = UserRelationship.where { manager { firstName ==~ ~/${stringToRegex(searchString)}/ || lastName ==~ ~/${stringToRegex(searchString)}/ } || manager { firstName ==~ ~/${stringToRegex(firstNameSearch)}/ lastName ==~ ~/${stringToRegex(lastNameSearch)}/ } if (filteredUsers) { not { 'in'('user.id', filteredUsers.collect { (Long) it }) } } }.join('user').distinct('user.id') DetachedCriteria detachedUserQuery = User.where { id in managerQuery }.id if (_clientSetupId) { detachedUserQuery.eq('clientSetupId', _clientSetupId) } if (unassignedManagerFilter || unassignedAssessmentFilter) { def userIdsWithManager = getClientUserIdsWithManagers(_clientSetupId) detachedUserQuery.or { if (unassignedManagerFilter) { if (userIdsWithManager) { not { 'in'('id', userIdsWithManager) } } } if (unassignedAssessmentFilter) { def userIdsWithAssessment = getClientUserIdsLinkedToAssessments(_clientSetupId) if (userIdsWithAssessment) { not { 'in'('id', userIdsWithAssessment) } } } } } User.createCriteria().list(max: params?.max, offset: params?.offset) { resultTransformer(CriteriaSpecification.ALIAS_TO_ENTITY_MAP) projections { distinct('id', 'id') property('username', 'username') property('clientSetupId', 'clientSetupId') property('email', 'email') property('firstName', 'firstName') property('lastName', 'lastName') property('userMetadata', 'userMetadata') property('lastLogin', 'lastLogin') property('pictureUrl', 'pictureUrl') } 'in'('id', detachedUserQuery) order(params?.sort, params?.order) } ``` ## Criteria Builder with bean transformation [TransformResultToCustomBean](https://gist.github.com/14paxton/f384df3ac36befc64c894eeb28439387) ",
    "url": "/PersonalGrailsNotes/GORM_WhereQueris",
    
    "relUrl": "/PersonalGrailsNotes/GORM_WhereQueris"
  },"84": {
    "doc": "GRAALVM",
    "title": "GRAALVM",
    "content": "{: .text-delta } 1. TOC {:toc} --- # TidBits - [Microservices as GraalVM Micronaut Docs](https://docs.micronaut.io/latest/guide/index.html#graalServices) - [Handling Reflection Micronaut Guide](https://guides.micronaut.io/latest/micronaut-graalvm-reflection-gradle-java.html#handling-reflection) ## Create Graal Native Image ```shell ./gradlew nativeCompile ``` ## using the following to generate reflection meta-data ```shell java -agentlib:native-image-agent=config-output-dir=./META-INF/native-image -jar your-micronaut-app.jar ``` # Reflective Acccess > add a ```reflect-config.json ```for refelctive access > to ```/src/main/resources/META-INF/native-image/[package]``` - [Example](https://github.com/microstream-one/example-graalvm-native/tree/master/graalvm-native/src/main/resources/META-INF/native-image) ## Run Native Image In Dev ```shell ./build/native/nativeCompile/graal-mail -Dmicronaut.environments=dev ``` # Reflective Access > add a `reflect-config.json ` so `Graal` recognizes imported classes that need to be reflective ```bash touch /src/main/resources/META-INF/native-image/com/ssi/reflect-config.json ``` [MicroStream Source Reference](https://gist.github.com/14paxton/d51cc2f493b8d8f4271c0cf55f2aefab) ```json { \"name\": \"fts.marketing.utils.deserializers.CampaignEmailStatusDeserializer\", \"allDeclaredConstructors\": true, \"allPublicConstructors\": true, \"allDeclaredMethods\": true, \"allPublicMethods\": true, \"allDeclaredClasses\": true, \"allPublicClasses\": true } ``` # GraalVM annotation processor > gradle import ```groovy annotationProcessor(\"io.micronaut:micronaut-graal\") ``` This processor generates additional classes that implement the GraalReflectionConfigurer Interface and programmatically register reflection configuration. > Example Class: ```java @ReflectiveAccess @Serdeable public class Integration { //code } ``` If you have more advanced requirements and only wish to include certain fields or methods, use the annotation on any constructor, field or method to include only the specific field, constructor or method. # TidBits ## Bug with GraalVM and Java Records > include the flag when building the native executable ``` --report-unsupported-elements-at-runtime ``` > Create the file `native-image.properties ` at ``` src/main/resources/META-INF/native-image/example.micronaut/guide/native-image.properties ``` > MY Example, only line in text file ``` Args = --report-unsupported-elements-at-runtime ``` # Gradle > The Gradle plugin has a new `testNativeImage` task that builds the `GraalVM` Native Image and uses the native application as an embedded > server enabling the ability to write native integration tests. ## Method to check if GraalVM JDK Distribution > Method to check if you are running in GraalVM JDK distribution. I have used it often in Gradle build files to decide whether a Gradle task should be > enabled. ```java public class GraalStuff { private static boolean isGraalVMJava() { return (System.getProperty(\"java.home\") != null && Files.exists(Paths.get(\"${System.getProperty(\"java.home\")}/lib/graalvm\"))) || Arrays.asList(\"jvmci.Compiler\", \"java.vendor.version\", \"java.vendor\") .stream() .anyMatch(propertyName -> { String value = System.getProperty(propertyName); return value != null && value.toLowerCase(Locale.ENGLISH) .contains(\"graal\"); }); } } ``` ## add tool chain to gradle You can already build a native executable by running `./gradlew nativeCompile` or run it directly by invoking `./gradlew nativeRun ` However, at this stage, running the native executable will fail because this application requires additional metadata: you need to provide it with a list of resources to load. Instruct the plugin to automatically detect resources to be included in the native executable. Add this to your `build.gradle ` file: ```groovy graalvmNative { binaries.all { resources.autodetect() } toolchainDetection = false } ``` Another thing to note here, the plugin may not be able to properly detect the `GraalVM` installation because of limitations in Gradle. By default, the plugin selects a `Java 11 GraalVM Community Edition` If you want to use `GraalVM Enterprise`, or a particular version of `GraalVM` and `Java`, you need to explicitly tell in plugin’s configuration. For example: ```groovy graalvmNative { binaries { main(({ javaLauncher = javaToolchains.launcherFor { languageVersion = JavaLanguageVersion.of(8) vendor = JvmVendorSpec.matching(\"GraalVM Community\") } } as java.lang.String)) } } ``` > my working example ```groovy graalvmNative { toolchainDetection = false binaries { main(({ javaLauncher = javaToolchains.launcherFor { languageVersion = JavaLanguageVersion.of(17) vendor = JvmVendorSpec.matching(\"GraalVM Community\") } imageName.set('graal-vm-ssi') buildArgs.add('--verbose') } as java.lang.String)) } } ``` > The workaround to this is to disable toolchain detection with this command ```groovy toolchainDetection = false ``` ### get java toolchains ```shell ./gradlew-q javaToolchains ``` > output ```shell Oracle JDK 11.0.18+9-LTS-jvmci-22.3-b11 | Location: /Library/Java/JavaVirtualMachines/graalvm-ee-java11-22.3.1/Contents/Home | Language Version: 11 | Vendor: Oracle | Architecture: x86_64 | Is JDK: true | Detected by: Current JVM ``` # Plugins - [Java Assist](https://mvnrepository.com/artifact/org.javassist/javassist) - [GraalVM Hibernate](https://mvnrepository.com/artifact/org.hibernate/hibernate-graalvm/6.1.5.Final) # Resources - [Gradle Plugin](https://micronaut-projects.github.io/micronaut-gradle-plugin/latest/#_micronaut_graalvm_plugin) - [Micronaut Docs: GraalVM ](https://docs.micronaut.io/latest/guide/index.html#graal) - [Gradle plugin for GraalVM Native Image building : Config Doc](https://graalvm.github.io/native-build-tools/0.9.13/gradle-plugin.html#configuration-options) - [Gradle Plugin for Micronaut : io.micronaut.graalvm](https://plugins.gradle.org/plugin/io.micronaut.graalvm) - [GraalVM Docs : Reflection](https://www.graalvm.org/22.2/reference-manual/native-image/metadata/) - [reflect-config.json Graal SourceCode](https://github.com/oracle/graal/blob/master/docs/reference-manual/native-image/Reflection.md) - [Micronaut graalvm Tests Source Code](https://github.com/micronaut-graal-tests/micronaut-liquibase-graal/tree/2.3.x_h2) ",
    "url": "/Micronotes/GRAALVM",
    
    "relUrl": "/Micronotes/GRAALVM"
  },"85": {
    "doc": "Git",
    "title": "Git",
    "content": "--- --- {: .text-delta } 1. TOC {:toc} # Scripts ## main to master ```shell git branch -m main master git fetch origin git branch -u origin/master master git remote set-head origin -a ``` ## get users gists ```shell curl -L \\ -H \"Accept: application/vnd.github+json\" \\ -H \"Authorization: Bearer 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\" \\ -H \"X-GitHub-Api-Version: 2022-11-28\" \\ https://api.github.com/users/14paxton/gists ``` --- # Cheat Sheets ![GitCheatSheet.png](../assets/images/GitCheatSheet.png) ![GitDetailedCheat.png](../assets/images/GitDetailedCheat.png) --- # Authentication # There are three main approaches you can take 1. Using a personal authentication token or password 2. Using an SSH key 3. Using your GitHub password with 2-factor authentication > With either of the first two approaches you can avoid entering a username and password each time --- ## Personal Authentication ```shell git config -l ``` In what follows, I'll refer to the account or organization the repository exists in as ACCOUNT and the repository as REPO. Using HTTPS with a personal authentication token or a password The standard way to interact with a repository is via HTTPS. You can clone a repository using HTTPS like this: ```shell git clone https://github.com/ACCOUNT/REPO ``` > You'll be asked to enter your username and password (where the latter could be either your > GitHub password or your personal authentication token. > As of fall 2021, GitHub will no longer allow usage of a password alone. > One good option is to use a personal authentication > token in place of a password. > You can create a token using these instructions or simply go here. > If you're just interacting with repositories, you probably > want to simply select 'repo' as the \"scope\". > Saving your password or token to avoid entering it > You can save, or cache, your credentials so that you don't have to reenter them each time you interact with the remote repository. > Your credentials can be stored in the keychain of your operating system or cached in memory > or in a file. > To cache in memory, in the MacOS keychain, or in the Windows keychain, choose the relevant > one of these three invocations: --- ### In memory ```shell git config --global credential.helper cache ``` > MacOS ```shell git config --global credential.helper osxkeychain ``` > Windows ```shell git config --global credential.helper wincred ``` > To set the cache in memory to last for a particular amount of time, here 3600 seconds (i.e., 1 hour): ```shell git config --global credential.helper 'cache --timeout=3600' ``` > If you prefer to set the credential helper on a repository-specific basis, you can omit the `--global` flag. > To check if the credential helper is set up: ```shell git config --get credential.helper ``` ## SSH keys To use SSH, you need to put your SSH public key in your GitHub account. Your public key file is found in the `~/.ssh` directory on a Mac or Linux machine and will generally be a file ending in .pub Go to and copy/paste your public key from the public key file. > You can then clone a repository using syntax of either of the following types: ```shell git clone git@github.com:ACCOUNT/REPO.git git clone ssh://github.com/ACCOUNT/REPO ``` > To confirm you are using ssh, run ```shell git config --get remote.origin.url ``` > If you see either of the following, you know you're using SSH to interact with the repository. ```shell git@github.com:paciorek/test-auth.git ``` ```shell ssh://github.com/paciorek/test-auth ``` > Avoiding having to enter your SSH passphrase > Note that you may be asked to enter your SSH passphrase when interacting with a repository. > To avoid having to keep doing this, > you can add your passphrase to your running SSH authentication agent, like this (assuming here your key is > called 'id_rsa'): ```shell ssh-add ~/.ssh/id_rsa ``` > Note that you might need to start your SSH agent with: ```shell eval `ssh-agent -s ``` > More details on using the SSH agent can be > found [here](https://docs.github.com/en/github/authenticating-to-github/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent) > If you have a repository that is using HTTPS and you want to switch to SSH, you can run either of these invocations from within a > directory within > your repository: ```shell git config remote.origin.url git@github.com:ACCOUNT/REPO.git ``` ```shell git remote set-url origin git@github.com:ACCOUNT/REPO.git ``` > Using a password plus two-factor authentication > Finally, if you want you can use your GitHub password (potentially saved via credential.helper as discussed above so you don't > have to enter it), rather than a token or SSH, and enable two-factor authentication. --- # Diff ## set difftool with config file ```shell git config --global -e ``` > text to add [core] `editor = code --wait` [diff] `tool = vscode` [difftool \"vscode\"] `cmd = code --wait --diff $LOCAL $REMOTE` [merge] `tool = vscode` [mergetool \"vscode\"] `cmd = code --wait $MERGED` ## set default editor ```shell git config --global core.editor 'code --wait' git config --global core.editor 'code --wait --new-window' ``` ## unset ```shell git config --global --unset core.editor ``` ## default tool ```shell git config --global diff.tool vscode git config --global difftool.vscode.cmd 'code --wait --diff $LOCAL $REMOTE' ``` ## default merge ```shell git config --global merge.tool vscode git config --global mergetool.vscode.cmd 'code --wait $MERGED' ``` ",
    "url": "/Git",
    
    "relUrl": "/Git"
  },"86": {
    "doc": "GitHub",
    "title": "GitHub",
    "content": "# SSH ## Create 1) Open Terminal. 2) Paste the text below, replacing the email used in the example with your GitHub email address. ```shell ssh-keygen -t ed25519 -C \"your_email@example.com\" ``` > Note: If you are using a legacy system that doesn't support the `Ed25519` algorithm, use: >> ```ssh-keygen -t rsa -b 4096 -C \"your_email@example.com\"``` 3) At the prompt, type a secure passphrase. ``` > Enter passphrase (empty for no passphrase): [Type a passphrase] > Enter same passphrase again: [Type passphrase again] ``` ## Adding your SSH key to the ssh-agent ```shell ssh-add ~/.ssh/id_ed25519 ``` ### Mac Get Public Key, Copy to clipboard ```shell pbcopy Still in the same terminal, try using ls to see if a file name config exists. If it does, use code config to open it up in your code editor. If it > doesn’t exist, you can create it by using touch > config, then open it with code config. Copy and paste the following in your config: ### Example ```shell # Work account Host bitbucket.org HostName bitbucket.org IdentityFile ~/.ssh/id_rsa_work User git IdentitiesOnly yes # Personal account Host github.com HostName github.com IdentityFile ~/.ssh/id_rsa_personal User git IdentitiesOnly yes ``` ### Errors - Permissions for '/Users/username/.ssh/id_rsa' are too open. It is recommended that your private key files are NOT accessible by others. This private key will be ignored. > If your private key is not-so-private, you can easily fix that. > Use chmod 600 ```~/.ssh/id_rsa_work ``` to make it only read-writeable by you. > If you just want to make it readable by > you, then you can use ```chmod 400 ~/.ssh/id_rsa``` > I recommend using the 600 over the 400 in this case. - we created a field called Host for each of our SSH keys. In my example, I named them after the website used for source control. If you decided to name yours something else, make sure you reference it when you clone a new repo. Let’s say you decided to do Host personal instead of Host github.com, that means to clone into your github account you would need to use: ```shell git clone git@personal:username/repo-name.git ``` # gh cli ## use token to authorize and merge ```shell export GH_TOKEN=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; act=$(gh auth status -t >>(tee -a) 2>&1 | sed -n 's/.*Token: //p'); if [ \"$act\" == *\"$GH_TOKEN\"* ](%22$act%22%20==%20*%22$GH_TOKEN%22*.md#) then echo $GH_TOKEN | gh auth login --with-token; gh repo sync --force; ``` # workflow ## print env variables ```yaml name: Print environment variables on: workflow_dispatch: jobs: debug: runs-on: ubuntu-latest steps: - name: Print run: env | sort ``` # Tricks & Tips ## Use URL for a file on GitHub > use the word 'raw' : `https://raw.githubusercontent.com/14paxton/14paxton.github.io/master/assets/images/kubernetes.gif` - > Example: ```html ``` ",
    "url": "/Git/GitHub",
    
    "relUrl": "/Git/GitHub"
  },"87": {
    "doc": "GitHubPages",
    "title": "GitHubPages",
    "content": "{: .text-delta } 1. TOC {:toc} --- # [QUICKSTART](https://docs.github.com/en/pages/quickstart) # `_config.yml` ## [my config for githubpages](https://gist.github.com/14paxton/e0dd671b07d810ab13ae37b6828fe63f) ## old simple config ```yml lsi: false safe: true source: docs incremental: false highlighter: rouge gist: noscript: false kramdown: math_engine: mathjax syntax_highlighter: rouge markdown: kramdown title: Paxton's Notes remote_theme: pages-themes/time-machine@v0.2.0 plugins: - jekyll-remote-theme relative_links: enabled: true collections: true ``` --- # [Custom Domain](https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site) 1. On GitHub, navigate to your site's repository. 2. Under your repository name, click**Settings**. If you cannot see the \"Settings\" tab, select the dropdown menu, then click **Settings** ![Screenshot of a repository header showing the tabs. The \"Settings\" tab is highlighted by a dark orange outline.](https://docs.github.com/assets/cb-28266/images/help/repository/repo-actions-settings.png) 3. In the \"Code and automation\" section of the sidebar, click **Pages**. 4. Under \"Custom domain\", type your custom domain, then click **Save**. If you are publishing your site from a branch, this will create a commit that adds a`CNAME`file to the root of your source branch. If you are publishing your site with a custom GitHub Actions workflow, no`CNAME`file is created. For more information about your publishing source: [Configuring a publishing source for your GitHub Pages site](https://docs.github.com/en/pages/getting-started-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site) 5. Navigate to your DNS provider and create either an `ALIAS`,`ANAME`, or `A` record You can also create`AAAA`records for IPv6 support. If you're implementing IPv6 support, we highly recommend using an`A`record in addition to your`AAAA`record, due to slow adoption of IPv6 globally. For more information about how to create the correct record, see your DNS provider's documentation. - To create an`ALIAS`or`ANAME`record, point your apex domain to the default domain for your site. For more information about the default domain for your site, see [About GitHub Pages](https://docs.github.com/en/pages/getting-started-with-github-pages/about-github-pages#types-of-github-pages-sites) - To create`A`records, point your apex domain to the IP addresses for GitHub Pages. ```shell 185.199.108.153 185.199.109.153 185.199.110.153 185.199.111.153 ``` - To create`AAAA`records, point your apex domain to the IP addresses for GitHub Pages. ```shell 2606:50c0:8000::153 2606:50c0:8001::153 2606:50c0:8002::153 2606:50c0:8003::153 ``` **Warning:**We strongly recommend that you do not use wildcard DNS records, such as `*.example.com`. These records put you at an immediate risk of domain takeovers, even if you verify the domain. For example, if you verify`example.com` this prevents someone from using `a.example.com` but they could still take over `b.a.example.com` (which is covered by the wildcard DNS record) For more information: [Verifying your custom domain for GitHub Pages](https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/verifying-your-custom-domain-for-github-pages) 6. Open Terminal. 7. To confirm that your DNS record configured correctly, use the`dig`command, replacing_EXAMPLE.COM_with your apex domain. Confirm that the results match the IP addresses for GitHub Pages above. - For `A` records: ```shell $ dig EXAMPLE.COM +noall +answer -t A > EXAMPLE.COM 3600 IN A 185.199.108.153 > EXAMPLE.COM 3600 IN A 185.199.109.153 > EXAMPLE.COM 3600 IN A 185.199.110.153 > EXAMPLE.COM 3600 IN A 185.199.111.153 ``` - For `AAAA` records: ```shell $ dig EXAMPLE.COM +noall +answer -t AAAA > EXAMPLE.COM 3600 IN AAAA 2606:50c0:8000::153 > EXAMPLE.COM 3600 IN AAAA 2606:50c0:8001::153 > EXAMPLE.COM 3600 IN AAAA 2606:50c0:8002::153 > EXAMPLE.COM 3600 IN AAAA 2606:50c0:8003::153 ``` ## Personal Steps ## Step 1 — Set domain in GitHub project Go to your GitHub Pages site’s repository settings. Under “Custom domain,” add or remove your custom domain and click “Save” Setting “custom domain” creates a file named `CNAME` in the same repository. Don’t delete it. ## Step 2 — Set custom resource record for domain This step is specific to your domain name register (like GoDaddy, Domain.com, Google Domains, etc.). All you need to do is set `A` & `CNAME` records for the selected domain. ![](https://miro.medium.com/v2/resize:fit:2000/1*lT1CCfb9jX74vGrsF5AoLA.png) > For `A` record, set `185.199.108.153`,`185.199.109.153`,`185.199.110.153`and`185.199.111.153`. > To redirect `www`subdomain to the original domain, add a `CNAME` record with your GitHub pages > profile URL with a `.`(dot) in the end, for example, `YOUR-GITHUB-USERNAME.github.io.` **_Official References_**_: For most up-to-date IP Addresses, use GitHub’s_[_official documentation_](https://help.github.com/articles/setting-up-an-apex-domain/)_ and for setting up `CNAME` use this_[documentation\\_](https://help.github.com/articles/setting-up-a-www-subdomain/) > UPDATE #1: The IP addresses for DNS`A`record is updated. The new IP addresses are required to use the free HTTPS support for GitHub pages > UPDATE #2: Some people said this change is not working, it is actually because the DNS update can**take upto\\*\\***24 hours\\*\\*to propagate. So, I > guess try hitting your domain the next day. 🤓 > NOTE #1: Even though it’s very obvious, you should replace`_YOUR-GITHUB-USERNAME_`and`your-domain.com`with your personal GitHub username and domain > name you are trying to use respectively --- # [DEPLOY](https://github.com/actions/deploy-pages) > [Ex.](https://github.com/JamesIves/github-pages-deploy-action) ```yaml jobs: # Build job build: # # At a minimum, this job should upload artifacts using actions/upload-pages-artifact # Deploy job deploy: # Add a dependency to the build job needs: build # Grant GITHUB_TOKEN the permissions required to make a Pages deployment permissions: pages: write # to deploy to Pages id-token: write # to verify the deployment, originates from an appropriate source # Deploy to the github-pages environment environment: name: github-pages url: ${{ steps.deployment.outputs.page_url }} # Specify runner + deployment step runs-on: ubuntu-latest steps: - name: Deploy to GitHub Pages id: deployment uses: actions/deploy-pages@v2 # or the latest \"vX.X.X\" version tag for this action ``` # Template ## [just-the-docs (current)](https://github.com/just-the-docs/just-the-docs) > [template readme](https://github.com/just-the-docs/just-the-docs-template/blob/main/README.md#hosting-your-docs-from-an-existing-project-repo) > [YAML Example](https://github.com/just-the-docs/just-the-docs/blob/f246498a8fab71a8716194aaca8ef690bbdc1b94/_config.yml) ```yaml # Set a path/url to a logo that will be displayed instead of the title #logo: \"/assets/images/just-the-docs.png\" # Enable or disable the site search # Supports true (default) or false search_enabled: true search: # Split pages into sections that can be searched individually # Supports 1 - 6, default: 2 heading_level: 2 # Maximum amount of previews per search result # Default: 3 previews: 2 # Maximum amount of words to display before a matched word in the preview # Default: 5 preview_words_before: 3 # Maximum amount of words to display after a matched word in the preview # Default: 10 preview_words_after: 3 # Set the search token separator # Default: /[\\s\\-/]+/ # Example: enable support for hyphenated search words tokenizer_separator: /[\\s/]+/ # Display the relative url in search results # Supports true (default) or false rel_url: true # Enable or disable the search button that appears in the bottom right corner of every page # Supports true or false (default) button: false # For copy button on code enable_copy_code_button: true # By default, consuming the theme as a gem leaves mermaid disabled; it is opt-in mermaid: # Version of mermaid library # Pick an available version from https://cdn.jsdelivr.net/npm/mermaid/ version: \"9.1.6\" # Put any additional configuration, such as setting the theme, in _includes/mermaid_config.js # See also docs/ui-components/code # To load mermaid from a local library, also use the `path` key to specify the location of the library; e.g. # for (v10+): # path: \"/assets/js/mermaid.esm.min.mjs\" # for (MIT license. This site is powered by Netlify.' # Footer last edited timestamp last_edit_timestamp: true # show or hide edit time - page must have `last_modified_date` defined in the frontmatter last_edit_time_format: \"%b %e %Y at %I:%M %p\" # uses ruby's time format: https://ruby-doc.org/stdlib-2.7.0/libdoc/time/rdoc/Time.html # Footer \"Edit this page on GitHub\" link text gh_edit_link: true # show or hide edit this page link gh_edit_link_text: \"Edit this page on GitHub\" gh_edit_repository: \"https://github.com/just-the-docs/just-the-docs\" # the github URL for your repo gh_edit_branch: \"develop\" # the branch that your docs are served from # gh_edit_source: docs # the source that your files originate from gh_edit_view_mode: \"tree\" # \"tree\" or \"edit\" if you want the user to jump into the editor immediately # Color scheme currently only supports \"dark\", \"light\"/nil (default), or a custom scheme that you define color_scheme: nil callouts_level: quiet # or loud callouts: highlight: color: yellow important: title: Important color: blue new: title: New color: green note: title: Note color: purple warning: title: Warning color: red # Google Analytics Tracking (optional) # Supports a CSV of tracking ID strings (eg. \"UA-1234567-89,G-1AB234CDE5\") # Note: the main Just the Docs site does *not* use Google Analytics. # ga_tracking: UA-2709176-10,G-5FG1HLH3XQ # ga_tracking_anonymize_ip: true # Use GDPR compliant Google Analytics settings (true/nil by default) plugins: - jekyll-seo-tag - jekyll-github-metadata kramdown: syntax_highlighter_opts: block: line_numbers: false compress_html: clippings: all comments: all endings: all startings: [ ] blanklines: false profile: false # ignore: # envs: all ``` # [Themes](https://pages.github.com/themes/) ## [REPO](https://github.com/pages-themes) ## [Add Theme](https://docs.github.com/en/pages/setting-up-a-github-pages-site-with-jekyll/adding-a-theme-to-your-github-pages-site-using-jekyll) ",
    "url": "/GitHub/GitHubPages",
    
    "relUrl": "/GitHub/GitHubPages"
  },"88": {
    "doc": "Google",
    "title": "Google",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Client Libraries # [API ExplorerV3](https://developers.google.com/apis-explorer/#p/dialogflow/v3/) ## [.Net client Library](https://cloud.google.com/dotnet/docs/reference/Google.Cloud.Dialogflow.Cx.V3/latest) --- ## [Authorizing Example](https://github.com/14paxton/GCPAuthorization) ```csharp using System.Reflection; using Google.Apis.Auth.OAuth2; using Google.Cloud.Dialogflow.Cx.V3; using Google.Cloud.Iam.Credentials.V1; using Grpc.Auth; using Grpc.Core; using Environment = System.Environment; string currentDir = Directory.GetCurrentDirectory(); string path = Path.Combine(new FileInfo(Assembly.GetExecutingAssembly().Location).DirectoryName, \"vcu-chat-bot\"); // string[] scopes = { \"https://www.googleapis.com/auth/dialogflow\", \"https://www.googleapis.com/auth/cloud-platform\" }; IReadOnlyList scopes = SessionsClient.DefaultScopes; FileStream stream = new(path, FileMode.Open, FileAccess.Read); GoogleCredential? credentialAccount = GoogleCredential.FromFile(path); GoogleCredential? credentialAccountFromStreamAsync = GoogleCredential.FromStreamAsync(stream, CancellationToken.None).Result; //MANUALLY SET ENV VAR Environment.SetEnvironmentVariable(\"GOOGLE_APPLICATION_CREDENTIALS\", path); //IAMCredentialsClientBuilder //From an ICredential from file ICredential credential = GoogleCredential.FromFile(path); IAMCredentialsClientBuilder iamcredintialFromPathBuilder = new() { CredentialsPath = path, Scopes = scopes }; IAMCredentialsClient? iamcredintialFromPath = iamcredintialFromPathBuilder.Build(); IAMCredentialsClientBuilder iamcredintialJsonBuilder = new() { JsonCredentials = File.ReadAllText(path), Scopes = scopes }; IAMCredentialsClient iamcredentialsJson = iamcredintialJsonBuilder.BuildAsync().Result; IAMCredentialsClientBuilder iamcredintialGoogleCredentialsClientBuilder = new() { GoogleCredential = credentialAccountFromStreamAsync, Scopes = scopes }; IAMCredentialsClient? iamcredentialGoogleCred = iamcredintialGoogleCredentialsClientBuilder.BuildAsync().Result; SessionsClientBuilder? sessionsClientBuilderTokenAccess = new() { TokenAccessMethod = (s, token) => credential.GetAccessTokenForRequestAsync(s, token) }; SessionsClient sessionsClientICred = sessionsClientBuilderTokenAccess.Build(); // SessionsClient sessionsClient = SessionsClient.CreateAsync().Result; // from file stream // GoogleCredential credentialStream; // using (FileStream stream = new(path, FileMode.Open, FileAccess.Read)) // { // credentialStream = GoogleCredential.FromStream(stream) // .CreateScoped(scopes); // } // use default credential GoogleCredential credentialDefault = GoogleCredential.GetApplicationDefault(); ServiceAccountCredential? serviceAccountCredential = credentialDefault.UnderlyingCredential as ServiceAccountCredential; SessionsClientBuilder sessionsClientBuilderFromDefault = new() { ChannelCredentials = serviceAccountCredential.ToChannelCredentials() }; SessionsClient sessionsClientFromDefault = sessionsClientBuilderFromDefault.Build(); //Authenticate to the service by using Service Account from channel GoogleCredential? credentialFromFile = GoogleCredential.FromFile(path).CreateScoped(SessionsClient.DefaultScopes); Channel channel = new(SessionsClient.DefaultEndpoint, credentialFromFile.ToChannelCredentials()); Sessions.SessionsClient sessionsClientFromChannel = new(channel); //USE SESSION BUILDER SessionsClientBuilder sessionsClientBuilderFromCred = new() { GoogleCredential = credentialAccount }; SessionsClient sessionsClientFromCred = sessionsClientBuilderFromCred.Build(); // From a path to a JSON file SessionsClient? sessionsClientFromeJson = new SessionsClientBuilder { CredentialsPath = path }.Build(); // From JSON you already have as a string string json = File.ReadAllText(path); SessionsClient? sessionsClientFromJsonString = new SessionsClientBuilder { JsonCredentials = json }.Build(); DetectIntentRequest request = new() { SessionAsSessionName = SessionName.FromProjectLocationAgentSession(\"project\", \"global\", \"agent\", \"1234session\"), QueryParams = new QueryParameters(), QueryInput = new QueryInput(), OutputAudioConfig = new OutputAudioConfig() }; request.QueryInput.Text = new TextInput { Text = \"hello\" }; request.QueryInput.LanguageCode = \"en\"; // Make the request DetectIntentResponse response = sessionsClientFromCred.DetectIntent(request); Console.WriteLine(response); ``` --- ## [REST API Client Library](https://developers.google.com/api-client-library/dotnet/apis) ### [DialogFlowCXV3](https://cloud.google.com/dotnet/docs/reference/Google.Cloud.Dialogflow.Cx.V3/latest) #### [Detect Intent](https://cloud.google.com/dotnet/docs/reference/Google.Cloud.Dialogflow.Cx.V3/latest/Google.Cloud.Dialogflow.Cx.V3.SessionsClient#Google_Cloud_Dialogflow_Cx_V3_SessionsClient_DetectIntent_Google_Cloud_Dialogflow_Cx_V3_DetectIntentRequest_Google_Api_Gax_Grpc_CallSettings_) ##### using `Google.Apis.Dialogflow.v3.Data` ```csharp GoogleCloudDialogflowCxV3EventInput eventInput = new GoogleCloudDialogflowCxV3EventInput { Event__ = eventName }; GoogleCloudDialogflowCxV3DetectIntentRequest detectIntentRequestBody = new GoogleCloudDialogflowCxV3DetectIntentRequest { QueryInput = new GoogleCloudDialogflowCxV3QueryInput { Event__ = eventInput, LanguageCode = \"en-US\" }, QueryParams = new GoogleCloudDialogflowCxV3QueryParameters() }; Dictionary customParams = visitor .GetType() .GetProperties(BindingFlags.Instance | BindingFlags.Public) .ToDictionary(keySelector: prop => prop.Name, elementSelector: prop => prop.GetValue(visitor, index: null)); customParams.Add(\"session-id\", sessionId); customParams.Add(\"session-uri\", sessionUri); detectIntentRequestBody.QueryParams = new GoogleCloudDialogflowCxV3QueryParameters { Parameters = customParams }; GoogleCloudDialogflowCxV3DetectIntentResponse detectIntentResponse = new DialogflowService(new BaseClientService.Initializer { HttpClientInitializer = credential, ApplicationName = projectId }).Projects .Locations .Agents .Sessions .DetectIntent(detectIntentRequestBody, sessionUri) .Execute(); ``` ##### using `GoogleCloudGoogle.Cloud.DialogflowGoogle.Cloud.Dialogflow.CxV3` ```csharp // Create client SessionsClient sessionsClient = SessionsClient.Create(); // Initialize request argument(s) DetectIntentRequest request = new DetectIntentRequest { SessionAsSessionName = SessionName.FromProjectLocationAgentSession(\"[PROJECT]\", \"[LOCATION]\", \"[AGENT]\", \"[SESSION]\"), QueryParams = new QueryParameters(), QueryInput = new QueryInput(), OutputAudioConfig = new OutputAudioConfig(), }; // Make the request DetectIntentResponse response = sessionsClient.DetectIntent(request); //or public virtual Task DetectIntentAsync(DetectIntentRequest request, CallSettings callSettings = null) ``` #### [DetectIntentResponse](https://cloud.google.com/dotnet/docs/reference/Google.Cloud.Dialogflow.Cx.V3/latest/Google.Cloud.Dialogflow.Cx.V3.DetectIntentResponse) ```json { \"responseId\": \"bda416d2-134c-4bbb-a0a1-37820eb0257e\", \"queryResult\": { \"text\": \"test\", \"languageCode\": \"en\", \"parameters\": { \"session-id\": \"a57d22-fbe-afb-ee4-69a8f62b3\", \"session-url\": \"projects/vcu-virtual-assistant-bot/locations/global/agents/8ec51540-2933-43d6-aad5-355545059bfe/environments/ec5f3114-e5d6-497f-bf92-53723c698230/sessions/a57d22-fbe-afb-ee4-69a8f62b3\" }, \"responseMessages\": [ { \"text\": { \"text\": [ \"When you test me that helps my developers improve my performance.\" ], \"allowPlaybackInterruption\": true } }, {} ], \"currentPage\": { \"name\": \"projects/vcu-virtual-assistant-bot/locations/global/agents/8ec51540-2933-43d6-aad5-355545059bfe/flows/00000000-0000-0000-0000-000000000000/pages/START_PAGE\", \"displayName\": \"Start Page\" }, \"intent\": { \"name\": \"projects/vcu-virtual-assistant-bot/locations/global/agents/8ec51540-2933-43d6-aad5-355545059bfe/intents/3a13ea29-83bd-4131-9144-2f511b42fcc2\", \"displayName\": \"small_talk.user.testing_agent\" }, \"intentDetectionConfidence\": 1, \"diagnosticInfo\": { \"Transition Targets Chain\": [ { \"TargetFlow\": \"7bf60f85-19fe-48bd-ac27-2b5db2cde4de\" }, { \"TargetPage\": \"END_FLOW\" } ], \"Session Id\": \"a57d22-fbe-afb-ee4-69a8f62b3\", \"Triggered Transition Names\": [ \"807b27e2-59da-4a37-8b1c-c7d109cb816f\", \"807b27e2-59da-4a37-8b1c-c7d109cb816f\" ], \"Execution Sequence\": [], \"Alternative Matched Intents\": [ { \"Active\": true, \"Id\": \"3a13ea29-83bd-4131-9144-2f511b42fcc2\", \"Type\": \"NLU\", \"Score\": 1, \"DisplayName\": \"small_talk.user.testing_agent\" } ] }, \"match\": { \"intent\": { \"name\": \"projects/vcu-virtual-assistant-bot/locations/global/agents/8ec51540-2933-43d6-aad5-355545059bfe/intents/3a13ea29-83bd-4131-9144-2f511b42fcc2\", \"displayName\": \"small_talk.user.testing_agent\" }, \"resolvedInput\": \"test\", \"matchType\": \"INTENT\", \"confidence\": 1 } }, \"responseType\": \"FINAL\" } ``` #### [WebhookRequest](https://cloud.google.com/dotnet/docs/reference/Google.Cloud.Dialogflow.Cx.V3/latest/Google.Cloud.Dialogflow.Cx.V3.WebhookRequest#Google_Cloud_Dialogflow_Cx_V3_WebhookRequest__ctor) > Get WebhookRequest , From DialogFlowCX request call ##### .Net Core 6 ```csharp public async Task HandleAsync(HttpContext context){ HttpRequest httpRequest = context.Request; HttpResponse httpResponse = context.Response; using TextReader reader = new StreamReader(httpRequest.Body); string text = await reader.ReadToEndAsync(); JsonParser.Settings parserSettings = JsonParser.Settings.Default.WithIgnoreUnknownFields(true); JsonParser jParser = new (parserSettings); WebhookRequest webhookRequest = jParser.Parse (text); SessionInfo sessionInfo = webhookRequest.SessionInfo; string tag = webhookRequest.FulfillmentInfo.Tag; sessionInfo.Parameters.TryGetValue(key: \"name\", value: out var nameParameterValue); ... JsonFormatter formatter = new JsonFormatter(new JsonFormatter.Settings(true)); httpResponse.ContentType = \"application/json; charset=UTF-8\"; httpResponse.Headers.Append(key: \"Access-Control-Allow-Methods\", value: \"GET\"); httpResponse.Headers.Append(key: \"Access-Control-Allow-Headers\", value: \"Content-Type\"); // await httpResponse.WriteAsync(response.ToString()); await httpResponse.WriteAsync(formatter.Format(response)); await httpResponse.Body.FlushAsync(); } ``` ##### .Net Framework 4.8 ```csharp public async Task Post(object sender) { HttpRequest httpRequest = HttpContext.Current.Request; TextReader reader = new StreamReader(httpRequest.InputStream); string text = await reader.ReadToEndAsync(); _log.Info($\"http request body- WebhookRequest : {text}\"); JsonParser.Settings parserSettings = JsonParser.Settings.Default.WithIgnoreUnknownFields(true); JsonParser jParser = new JsonParser(parserSettings); WebhookRequest webhookRequest = jParser.Parse(text); SessionInfo sessionInfo = webhookRequest.SessionInfo; string tag = webhookRequest.FulfillmentInfo.Tag; sessionInfo.Parameters.TryGetValue(key: \"name\", value: out Value nameParameterValue); ... return Json(JsonConvert.DeserializeObject(response.ToString())); } ``` ##### JSON Example ```json { \"detectIntentResponseId\": \"ffd03c89-b8c3-4d43-99ac-a31f5cc3e761\", \"pageInfo\": { \"currentPage\": \"projects/vcu-virtual-assistant-bot/locations/global/agents/8ec51540-2933-43d6-aad5-355545059bfe/flows/00000000-0000-0000-0000-000000000000/pages/START_PAGE\", \"displayName\": \"Start Page\" }, \"sessionInfo\": { \"session\": \"projects/vcu-virtual-assistant-bot/locations/global/agents/8ec51540-2933-43d6-aad5-355545059bfe/sessions/ffd700-fa3-4dc-d35-231249af3\", \"parameters\": { \"name\": \"rusty\" } }, \"fulfillmentInfo\": { \"tag\": \"comm100-customfields\" }, \"triggerEvent\": \"initiate-bot-event\", \"languageCode\": \"en\" } ``` ###### JSON With types for Protobuf ```json { \"detectIntentResponseId\": \"e8379fe3-5090-44be-8df4-a064b5ebb3dc\", \"intentInfo\": { \"lastMatchedIntent\": \"projects/vcu-virtual-assistant-bot/locations/global/agents/8ec51540-2933-43d6-aad5-355545059bfe/intents/00000000-0000-0000-0000-000000000000\", \"displayName\": \"Default Welcome Intent\", \"confidence\": 1.0 }, \"pageInfo\": { \"currentPage\": \"projects/vcu-virtual-assistant-bot/locations/global/agents/8ec51540-2933-43d6-aad5-355545059bfe/flows/00000000-0000-0000-0000-000000000000/pages/START_PAGE\", \"displayName\": \"Start Page\" }, \"sessionInfo\": { \"session\": \"projects/vcu-virtual-assistant-bot/locations/global/agents/8ec51540-2933-43d6-aad5-355545059bfe/sessions/40e94b-779-70d-a9f-3e08ab3fe\", \"parameters\": { \"@type\": \"type.googleapis.com/google.protobuf.Struct\", \"name\": { \"@type\": \"type.googleapis.com/google.protobuf.Value\", \"StringValue\": \"rusty\" } } }, \"fulfillmentInfo\": { \"tag\": \"comm100-customfields\" }, \"messages\": [ { \"text\": { \"text\": [ \"Greetings! How can I assist?\" ], \"redactedText\": [ \"Greetings! How can I assist?\" ] }, \"responseType\": \"HANDLER_PROMPT\", \"source\": \"VIRTUAL_AGENT\" } ], \"text\": \"hello\", \"languageCode\": \"en\" } ``` #### [WebhookResponse](https://cloud.google.com/dotnet/docs/reference/Google.Cloud.Dialogflow.Cx.V3/latest/Google.Cloud.Dialogflow.Cx.V3.WebhookResponse) ##### using `Google.Apis.Dialogflow.v3.Data` ```csharp GoogleCloudDialogflowCxV3WebhookResponse response = new GoogleCloudDialogflowCxV3WebhookResponse { FulfillmentResponse = new GoogleCloudDialogflowCxV3WebhookResponseFulfillmentResponse { Messages = new List () }, SessionInfo = new GoogleCloudDialogflowCxV3SessionInfo { Parameters = new Dictionary () } }; ``` ##### using `Google.Cloud.Dialogflow.Cx.V3` ```csharp WebhookResponse response = new WebhookResponse { FulfillmentResponse = new WebhookResponse.Types.FulfillmentResponse() }; ``` ##### JSON Example ```json { \"fulfillmentResponse\": { \"mergeBehavior\": null, \"messages\": [], \"ETag\": null }, \"pageInfo\": null, \"payload\": null, \"sessionInfo\": { \"parameters\": { \"security-code\": \"69420\" }, \"session\": null, \"ETag\": null }, \"targetFlow\": null, \"targetPage\": null, \"ETag\": null } ``` --- ### [Logging](https://cloud.google.com/logging/docs/reference/libraries) #### [Logging Code Examples](https://cloud.google.com/logging/docs/samples?hl=en) #### [Writing Logs](https://cloud.google.com/functions/docs/monitoring/logging) #### [Configuring Longs](https://cloud.google.com/dotnet/docs/reference/Google.Cloud.Diagnostics.AspNetCore3/latest#configuration-1) --- ### [Google.Protobuf.WellKnownTypes](https://protobuf.dev/reference/protobuf/google.protobuf/#value) #### - [API Docs](https://protobuf.dev/reference/csharp/api-docs/) #### - [GIT Protocol Buffers](https://github.com/protocolbuffers/protobuf/blob/main/README.md) #### - [Protobuf Reference](https://cloud.google.com/dotnet/docs/reference/help/protobuf) #### - [Namespace Google.Protobuf.WellKnownTypes (3.15.8)](https://cloud.google.com/dotnet/docs/reference/Google.Protobuf/latest/Google.Protobuf.WellKnownTypes) #### parsing a variable into googles protobuf Value object ```csharp string key = fieldObject .GetProperty(\"name\") .GetString()?.Trim().ToLower() .Replace(oldValue: \" \", newValue: \"-\"); Value value = Value.ForString(fieldObject.GetProperty(\"value\").GetString()); if(!string.IsNullOrEmpty(key)) { response.SessionInfo.Parameters.Add(key: key, value: value); } ``` #### deserialize into object ##### [JsonFormatter](https://cloud.google.com/dotnet/docs/reference/Google.Protobuf/latest/Google.Protobuf.JsonFormatter) ```csharp using Google.Protobuf.JsonFormatter; JsonFormatter formatter = new JsonFormatter(new JsonFormatter.Settings(true)); string jsonString = formatter.Format(testMessage); ``` ##### [JsonParser](https://cloud.google.com/dotnet/docs/reference/Google.Protobuf/latest/Google.Protobuf.JsonParser) ```csharp using Google.Protobuf.JsonParser; JsonParser.Settings parserSettings = JsonParser.Settings.Default.WithIgnoreUnknownFields(true); JsonParser jParser = new JsonParser(parserSettings); WebhookRequest webhookRequest = jParser.Parse(text); ``` ",
    "url": "/DotNetNotes/Google",
    
    "relUrl": "/DotNetNotes/Google"
  },"89": {
    "doc": "GoogleNotes",
    "title": "GoogleNotes",
    "content": "# [REPO](https://github.com/14paxton/GoogleNotes) # Disable Unsecure Notification > If you work with HTTPS connections on your localhost development environment, you will often get an un-secure notification from Chrome, and this > will be getting annoying. > To disable those notifications in Chrome type this in your address bar: ``` chrome://flags/ ``` > search for: - > ```Allow invalid certificates for resources loaded from localhost.``` > click on \"Enable\". Done! ",
    "url": "/GoogleNotes/",
    
    "relUrl": "/GoogleNotes/"
  },"90": {
    "doc": "Gradle",
    "title": "Gradle",
    "content": "{: .text-delta } 1. TOC {:toc} *** # CLI ## Get Local Java Versions ```shell ./gradlew -q javaToolchain ``` ",
    "url": "/Build/Gradle",
    
    "relUrl": "/Build/Gradle"
  },"91": {
    "doc": "GroovyNotes",
    "title": "GroovyNotes",
    "content": "# [REPO](https://github.com/14paxton/GroovyNotes) ",
    "url": "/GroovyNotes/",
    
    "relUrl": "/GroovyNotes/"
  },"92": {
    "doc": "HQL",
    "title": "HQL",
    "content": "--- {: .text-delta } 1. TOC {:toc} --- # [Database Overview](http://www.h2database.com/html/features.html#database_url) ![H2_DB_Overview.png](..%2Fassets%2Fimages%2FH2_DB_Overview.png) --- # run in postgres mode ```shell jdbc:h2:mem:test;MODE=PostgreSQL;DATABASE_TO_LOWER=TRUE ``` ```shell jdbc:h2:~/siris;MODE=PostgreSQL;DATABASE_TO_LOWER=TRUE;DEFAULT_NULL_ORDERING=HIGH ``` --- # [H2 Database Engine Cheat Sheet](http://www.h2database.com/html/cheatSheet.html) ## Using H2 - > [H2](https://h2database.com/) is[open source](https://github.com/h2database/h2database),[free to use and distribute](http://www.h2database.com/html/license.html). - > [Download](https://h2database.com/html/download.html):[jar](https://repo1.maven.org/maven2/com/h2database/h2/2.2.220/h2-2.2.220.jar),[installer (Windows)](https://github.com/h2database/h2database/releases/download/version-2.2.220/h2-setup-2023-07-04.exe),[zip](https://github.com/h2database/h2database/releases/download/version-2.2.220/h2-2023-07-04.zip). - > To start the[H2 Console tool](http://www.h2database.com/html/quickstart.html#h2_console), double click the jar file, or run`java -jar h2*.jar`, `h2.bat`, or`h2.sh`. - > [A new database is automatically created](http://www.h2database.com/html/tutorial.html#creating_new_databases)[by default > if an embedded URL is used](http://www.h2database.com/html/features.html#database_only_if_exists). - > [Closing the last connection closes the database](http://www.h2database.com/html/features.html#closing_a_database). ## Documentation Reference:[SQL grammar](http://www.h2database.com/html/grammar.html),[functions](http://www.h2database.com/html/functions.html),[data types](http://www.h2database.com/html/datatypes.html),[tools](http://www.h2database.com/html/tutorial.html#command_line_tools),[API](http://www.h2database.com/javadoc/index.html) [Features](http://www.h2database.com/html/features.html):[fulltext search](http://www.h2database.com/html/tutorial.html#fulltext),[encryption](http://www.h2database.com/html/features.html#file_encryption),[read-only](http://www.h2database.com/html/features.html#read_only)[(zip/jar)](http://www.h2database.com/html/features.html#database_in_zip),[CSV](http://www.h2database.com/html/tutorial.html#csv),[auto-reconnect](http://www.h2database.com/html/features.html#auto_reconnect),[triggers](http://www.h2database.com/html/features.html#triggers),[user functions](http://www.h2database.com/html/features.html#user_defined_functions) ## [Database URLs](http://www.h2database.com/html/features.html#database_url) ### **[Embedded](http://www.h2database.com/html/features.html#connection_modes)** #### `jdbc:h2:~/test` 'test' in the user home directory #### `jdbc:h2:/data/test` 'test' in the directory /data #### `jdbc:h2:./test` 'test' in the current(!) working directory ### **[In-Memory](http://www.h2database.com/html/features.html#in_memory_databases)** #### `jdbc:h2:mem:test` multiple connections in one process, database is removed when all connections are closed #### `jdbc:h2:mem:test;DB_CLOSE_DELAY=-1` multiple connections in one process, database in not removed when all connections are closed ([may create a memory leak](http://www.h2database.com/html/features.html#in_memory_databases)) #### `jdbc:h2:mem:`unnamed private; one connection ### **[Server Mode](http://www.h2database.com/html/tutorial.html#using_server)** #### `jdbc:h2:tcp://localhost/~/test` user home dir #### `jdbc:h2:tcp://localhost//data/test` or `jdbc:h2:tcp://localhost/D:/data/test` absolute dir #### [Server start](http://www.h2database.com/html/tutorial.html#using_server): `java -cp *.jar org.h2.tools.Server` ### **[Settings](http://www.h2database.com/html/features.html#database_url)** #### `jdbc:h2:..;MODE=MySQL;DATABASE_TO_LOWER=TRUE` [compatibility (or HSQLDB,...)](http://www.h2database.com/html/features.html#compatibility) #### `jdbc:h2:..;TRACE_LEVEL_FILE=3` [log to \\*.trace.db](http://www.h2database.com/html/features.html#trace_options) ## [Using the JDBC API](http://www.h2database.com/html/tutorial.html#connecting_using_jdbc) ```java public class JDBC { static closCon() { Connection conn = DriverManager.getConnection(\"jdbc:h2:~/test\"); conn.close(); } } ``` ## [Connection Pool](http://www.h2database.com/html/tutorial.html#connection_pool) ```java import org.h2.jdbcx.JdbcConnectionPool; public class ConnPool { static conPool() { JdbcConnectionPool cp = JdbcConnectionPool. create(\"jdbc:h2:~/test\", \"sa\", \"sa\"); Connection conn = cp.getConnection(); conn.close(); cp.dispose(); } } ``` ## [Maven 2](http://www.h2database.com/html/build.html#maven2) ```xml com.h2database h2 2.2.220 ``` ## [Hibernate](http://www.h2database.com/html/tutorial.html#using_hibernate) > `hibernate.cfg.xml` (or use the `HSQLDialect`) ```xml org.hibernate.dialect.H2Dialect . ``` ## [TopLink and Glassfish](http://www.h2database.com/html/tutorial.html#using_toplink) > Datasource class: `org.h2.jdbcx.JdbcDataSource`, `oracle.toplink.essentials.platform`, `database.H2Platform` ## Run **H2 Database** in three different modes: 1. Server Mode `jdbc:h2:tcp://localhost/~/test` > When using H2 db in**server mode**(also known as client/server mode) all data is transferred over TCP/IP. > Before application can use H2 Database in server mode, you need to start the H2 DB within > the same or another machine. > To run H2 Database in `Server Mode` you need the JAR file containing the DB Classes. > You can download it > from [http://www.h2database.com/html/download.html](http://www.h2database.com/html/download.html) > You can then Start the DB in Server mode by executing the `H2 DB Runnable JAR` file: ```shell java -jar h2-.jar -webAllowOthers -tcpAllowOthers ``` > start programmatically ```java import org.h2.tools.Server; public class StartServ { // start the H2 DB TCP Server Server server = Server.createTcpServer(\"-tcpPort\", \"9092\", \"-tcpAllowOthers\").start(); public static void stopServ() { // stop the H2 DB TCP Server server.stop(); } } ``` > In `server mode`, you need to use one of the following `JDBC` `URLs`: > > > `_jdbc:h2:tcp://localhost/~/test_` connect to the ‘test’ database in the user home directory on the server (local computer). > > `_jdbc:h2:tcp://192.168.1.3:9092 //data/test_` connect to the ‘test’ database in the /data directory on the remote server. > **Run H2 server in command line:** ```bash java -cp h2-version.jar org.h2.tools.Server -tcp ``` > This will start H2 server program, listening for TCP connections. To know more options, type the following command: ```bash java -cp h2-version.jar org.h2.tools.Server -help ``` 2. Embedded mode `jdbc:h2:~/test` > H2 db in embedded mode will be faster, but the downside of it is that_no another process can access the Database > In the connection string, the Data will be saved into the ‘test’ folder, under the user’s home directory > To connect to an `H2` embedded database, you need to use one of the following `JDBC` `URLs`: - > `_jdbc:h2:~/test_` the ‘test’ database in the user home directory - > `_jdbc:h2:./test_` the ‘test’ database in the current directory - > `_jdbc:h2:/data/test_` the ‘test’ database in the `/data `directory (`Unix`) - > `_jdbc:h2:D:/data/test_` the ‘test’ database in the `D:/data` directory (`Windows`) 3. Mixed mode `jdbc:h2:/data/test;AUTO_SERVER=TRUE` > When using automatic mixed mode, you can share the `JDBC` `URL` for all applications using the DB. > By default, the server uses any free `TCP` port. > The port can be set manually > using `AUTO_SERVER_PORT`=`9090`. 4. In-Memory Mode > You can use an H2 database in in-memory mode, which means the database is created in memory when the first connection is established, and is removed when all connections are closed. > The database engine runs in the same process of the application. > Using `H2` `in-memory` database is preferred for quick testing in which data is not needed to be stored permanently on disk. > To connect to an `H2` `in-memory `database, you need to use `JDBC` `URLs` - > > multiple connections in one process `jdbc:h2:mem:test` - > > unnamed private; one connection `jdbc:h2:mem:` ## execute sql scripts ```shell jdbc:h2:tcp://localhost/mem:elytron_jdbc_test;DB_CLOSE_DELAY=-1;DB_CLOSE_DELAY=-1;INIT=RUNSCRIPT FROM 'classpath:import.sql ``` ### shutdown ```shell jdbc:h2:~/test;DB_CLOSE_ON_EXIT=FALSE ``` ### start and stop from maven ```xml org.codehaus.mojo exec-maven-plugin 3.1.0 start pre-integration-test . java com.mastertheboss.StartServer stop post-integration-test . java com.mastertheboss.StopServer . ``` # Queries ## Intersect ```hql select * from LAB_TEST_SERVICES_POJO lts where exists ( select lsm.inttestid from LAB_SPECIMEN_MAPPING lsm where lsm.status = 1 and lts.inttestid = lsm.inttestid ) and exists ( select ltl.inttestid from LAB_TEST_LOCATION ltl where ltl.status = 1 and lts.inttestid = ltl.inttestid ) ``` ## join same object to query against 2 lists ```hql select o from Object as o join o.otherObjects as otherObject where otherObject in :allowedotherobjects and otherObject not in :excludedotherobjects ``` ## determine the length diff of a group concat ```hql (CHAR_LENGTH (GROUP_CONCAT(CONCAT(user.id, manager.id))) - CHAR_LENGTH (REPLACE(GROUP_CONCAT(CONCAT(user.id, manager.id)), ',', '' ))) ``` ## EXAMPLE large query with teary / multi join/ and JSON extractor ```hql select USER.FIRSTNAME, USER.LASTNAME, USER.USERMETADATA, USER.LASTLOGIN, USER.PICTUREURL, MANAGER.ID, MANAGER.EMAIL, MANAGER.FIRSTNAME, MANAGER.LASTNAME, MANAGER.USERMETADATA, MANAGER.LASTLOGIN, MANAGER.PICTUREURL, MANAGER.EXTERNALEMPLOYEECODE, AO.ID, AO.COMPANYINTERVIEWNAME, AO.COMPLETEDDATE, AO.CATALOGDETAIL.ID, SM.ALIAS) from ${User user} left outer join ${UserRelationship ur} with ur.user.id = user.id or ur.manager.id = user.id left outer join ${ur.manager} manager inner join ${AssessmentOrder ao} with ao.id = CAST ((CONCAT(FUNCTION ('JSON_EXTRACT', user.userMetadata, ' $.defaultAssessmentOrderId '))) as java.lang.Long) left outer join ${InterviewModel im} with im.sourceId = ao.catalogDetail.interviewModelId and im.source = (case when ao.catalogDetail.type = ' AO6 ' then ' TBSIX ' when ao.catalogDetail.type = ' A05 ' then ' TBFIVE ' when ao.catalogDetail.type = ' P2P ' then ' TBFIVE ' end) left outer join ${ScoringModel sm} on sm.id = (case when im.source = ' TBFIVE ' then (select s from ScoringModel s where s.interviewModelId = im.id) else (select s from ScoringModel s where s.sourceId = ao.catalogDetail.interviewModelId) end) where user.clientSetupId = ${clientSetupId} and user.id in (${searchStrings?.lastName ? findAllIdsByFirstNameAndLastName(searchStrings.firstName.toString() , searchStrings.lastName.toString())*.getId().join(', ') ``` > calling method ```groovy findAllByFirstNameOrLastNameOrEmail(searchStrings.firstName.toString())*.getId().join('') ``` ```hql select distinct NEW COM.TALENTBANK.CORE.USERMAP(USER.ID, USER.USERNAME, USER.CLIENTSETUPID, USER.EMAIL, USER.FIRSTNAME, USER.LASTNAME, USER.USERMETADATA, USER.LASTLOGIN, USER.PICTUREURL, MANAGER.ID, MANAGER.EMAIL, MANAGER.FIRSTNAME, MANAGER.LASTNAME, MANAGER.USERMETADATA, MANAGER.LASTLOGIN, MANAGER.PICTUREURL, coalesce(MANAGER.EXTERNALEMPLOYEECODE, 0), coalesce(AO.ID, 1), coalesce(AO.COMPANYINTERVIEWNAME, 'p'), coalesce(AO.COMPLETEDDATE, '00/00/00'), coalesce(AO.CATALOGDETAIL.ID, 1), coalesce(SM.ALIAS, 'p')) from ${USER USER} left outer join \"${USERRELATIONSHIP UR}\" WITH ur.user.id = user.id or ur.manager.id = user.id left outer join ur.manager manager left outer join \"${AssessmentOrder ao} \" with ao.id = CAST ((CONCAT( '', FUNCTION ('JSON_EXTRACT', user.userMetadata, '$.defaultAssessmentOrderId'), '')) as java.lang.Long) left outer join ${InterviewModel im} with im.sourceId = ao.catalogDetail.interviewModelId and im.source = (case when ao.catalogDetail.type = 'AO6' then 'TBSIX' when ao.catalogDetail.type = 'A05' then 'TBFIVE' when ao.catalogDetail.type = 'P2P' then 'TBFIVE' end) left outer join ${ScoringModel sm} on sm.id = (case when im.source = 'TBFIVE' then (select s from ScoringModel s where s.interviewModelId = im.id) else (select s from ScoringModel s where s.sourceId = ao.catalogDetail.interviewModelId) end) where user.clientSetupId = \"${clientSetupId} \" ``` ## EXAMPLE calling method in an HQL statement ```hql select distinct new COM.TALENTBANK.CORE.DTO.USERTEAM.TEAMSEARCHDTOMAP(USER.ID, USER.USERNAME, USER.CLIENTSETUPID, USER.EMAIL, USER.FIRSTNAME, USER.LASTNAME, USER.USERMETADATA, USER.LASTLOGIN, USER.PICTUREURL, MANAGER.ID, MANAGER.EMAIL, MANAGER.FIRSTNAME, MANAGER.LASTNAME, MANAGER.USERMETADATA, MANAGER.LASTLOGIN, MANAGER.PICTUREURL, MANAGER.EXTERNALEMPLOYEECODE) from USER USER left outer join UserRelationship ur with ur.user.id = user.id or ur.manager.id = user.id left outer join user manager on manager.id = ur.manager.id where user.clientSetupId = 2000 and user.id in (${ findAllByFirstNameOrLastNameOrEmail(searchStrings.firstName)*.getId().join(' , ')}) ``` ## EXAMPLE case in a where statement ```hql select distinct new Map( USER.ID as user, MANAGER.ID as manager ) from USER USER left outer join UserRelationship ur with ur.user.id = user.id or ur.manager.id = user.id left outer join user manager on manager.id = ur.manager.id where user.clientSetupId in (55 , 2000) and (user.firstName like '%'||'${testSearch}'||'%' or user.lastName like '%'||'${testSearch}'||'%' or manager.firstName like case when ${searchManagerName} = true then ('%'||'${testSearch}'||'%') else '' end or manager.lastName like case when ${searchManagerName} = true then ('%'||'${testSearch}'||'%') else '' end ) ``` ## return all if null or empty ```hql select distinct new Map( USER.ID as user, MANAGER.ID as manager ) from USER USER left outer join UserRelationship ur with ur.user.id = user.id or ur.manager.id = user.id left outer join user manager on manager.id = ur.manager.id where user.clientSetupId in (${clientSetUpIdList.join(' , ') ?: ClientSetup.all.id.join(' , ') }) and (user.firstName like ${testSearch.user} or user.lastName like ${testSearch.user} or manager.firstName like ${testSearch.manager} or manager.lastName like ${testSearch.manager} ) ``` ## subquery ```hql SELECT u FROM USER u WHERE exists (SELECT 1 FROM USER user LEFT OUTER JOIN UserRelationship UR WITH UR.USER.ID = USER.ID OR UR.MANAGER.ID = USER.ID left OUTER JOIN User manager WITH MANAGER.ID = UR.MANAGER.ID WHERE user = u AND USER.CLIENTSETUPID = 2000) ``` ## create tuple ```hql SELECT CONCAT('[', USER.ID, ':', IFNULL(MANAGER.ID, 'null'), ']') FROM USER USER LEFT OUTER JOIN UserRelationship ur WITH ur.user.id = USER.id OR ur.manager.id = USER.id LEFT OUTER JOIN USER manager WITH manager.id = ur.manager.id WHERE USER.clientSetupId = 2000 ``` ## creative count ### add/concat chars get length ```hql SELECT LENGTH(CONCAT(FUNCTION('GROUP_CONCAT', ','))) From User user LEFT OUTER JOIN UserRelationship ur with ur.user.id = user.id or ur.manager.id = user.id left OUTER JOIN User manager with manager.id = ur.manager.id where user.clientSetupId = 2000 group by user.id, manager.id ``` ### get groupings where there may be nulls ```hql select NEW Map( max(USER.ID) as userId , (select concat('{', group_concat(concat(coalesce(UR1.ID, 'noRelationship'), ':[{' , USER.ID, ':' , coalesce(MANAGER1.ID, 'null'), '}]' )) , '}') from USER USER join UserRelationship ur1 with ur1.user.id = user.id or ur1.manager.id = user.id join user manager1 with manager1.id = ur1.manager.id) as TUPLES ) from USER USER left outer join UserRelationship ur with ur.user.id = user.id or ur.manager.id = user.id left outer join user manager with manager.id = ur.manager.id where user.clientSetupId = 2000 group by user.id, manager.id ``` ### get list of digits ```hql select max(USER.ID), (select distinct concat(group_concat(1)) from USER u left outer join USERRELATIONSHIP ur with ur.user.id = u.id or ur.manager.id = u.id left outer join user m with m.id = ur.manager.id where u.clientSetupId = 2000 and manager.id = m.id) from USER USER left outer join UserRelationship ur with ur.user.id = user.id or ur.manager.id = user.id left outer join user manager with manager.id = ur.manager.id where user.clientSetupId = 2000 group by user, manager ``` ### get correct char but need to count column #### Not working need to show one number, find way to count column ```hql select (select count(u.id) from USER u left outer join USERRELATIONSHIP ur with ur.user.id = u.id or ur.manager.id = u.id left outer join user m with m.id = ur.manager.id where u.id in ( select distinct CONCAT('' , GROUP_CONCAT(user.id , manager.id) , '') from u subu left outer join UserRelationship subur with subur.user.id = subu.id or subur.manager.id = subu.id left outer join user subm with subm.id = subur.manager.id where user.clientSetupId = 2000 group by CONCAT( user.id , IFNULL(manager.id , 666)) )) from USER USER left outer join UserRelationship ur with ur.user.id = user.id or ur.manager.id = user.id left outer join user manager with manager.id = ur.manager.id where user.clientSetupId = 2000 group by 'all' ``` ```hql select count(*), (select length(concat(group_concat(''))) from USER u left outer join USERRELATIONSHIP rel with rel.user.id = u.id or rel.manager.id = u.id left outer join user m with m.id = rel.manager.id where u.clientSetupId = 2000 and u.id = user.id and (m.id = manager.id or (u.id is not null and m.id is null))) from USER USER left outer join UserRelationship ur with ur.user.id = user.id or ur.manager.id = user.id left outer join user manager with manager.id = ur.manager.id where user.clientSetupId = 2000 group by user, manager ``` ## SELECT DISTINCT mag FROM Magazine mag ```hql JOIN mag.articles art JOIN art.author auth WHERE auth.lastName = 'Grisham' ``` ### may equivalently be expressed as follows, using the IN operator: ```hql SELECT DISTINCT mag FROM Magazine mag, IN(mag.articles) art WHERE art.author.lastName = 'Grisham' ``` ## Using HQL(hibernate query language) in findall ### USING HQL for execute query ```groovy query = \"\"\" select NEW Map(ug.id as id, ug.NAME as NAME, ug.interviewModelId as interviewModelId, ug.visibility as visibility, ug.lastUpdated as lastUpdated, count(ugao.id) as assessmentCount ) from USERGROUP ug left join USERGROUPASSESSMENTORDER ugao on ug.id = ugao.userGroupId where ug.userId = :userId and ug.type = :type group by ug.id order by ug.NAME \"\"\" def groups = UserGroup.executeQuery(query, [userId: principalUser?.id, type: UserGroupType.RESULTGROUP]) ``` ## -HQL created using session- > -Full Example - [Full dynamic HQL, with QueryImpl object ](https://gist.github.com/14paxton/0ed8e82644cd661dc8c9fc0d4b8c2009) ```groovy User.withSession { uSession -> def q = uSession.createQuery($/select distinct new COM.TALENTBANK.CORE.USERMAP(USER.ID, USER.USERNAME, USER.CLIENTSETUPID, USER.EMAIL, USER.FIRSTNAME, USER.LASTNAME, USER.USERMETADATA, USER.LASTLOGIN, USER.PICTUREURL,MANAGER.ID, MANAGER.EMAIL , MANAGER.FIRSTNAME ,MANAGER.LASTNAME ,MANAGER.USERMETADATA, MANAGER.LASTLOGIN ,MANAGER.PICTUREURL ,MANAGER.EXTERNALEMPLOYEECODE) from $ user user left join fetch $UserRelationship ur on ur.user.id = user.id or ur.manager.id = user.idleft join ur.manager manager where user.firstName like CONCAT('%' , $searchString , '%') or user.lastName like CONCAT('%' , $searchString , '%') or user.email like CONCAT('%' , $searchString , '%') or manager.firstName like CONCAT('%' , $searchString , '%') or manager.lastName like CONCAT('%' , $searchString , '%') /$) q.maxResults = 8 q.firstResult = 2 q.list() } ``` ## Groovy SQL ```groovy List fetchUsersByNameOrManagerName(String searchString, params) { if (!params) return null def (firstNameSearch, lastNameSearch, rest) = searchString?.tokenize() // DataSource dataSource = Holders.grailsApplication.mainContext.getBean('dataSource') // Sql groovySql = new Sql(dataSource) String query = \"\"\"select distinct user.id, user.username, user.client_setup_id, user.email, user.first_name, user.last_name, user.user_metadata, user.last_login, user.picture_url, manager.first_name as mgr_first_name, manager.last_name as mgr_last_name from user left join user_relationship as userRelationship on userRelationship.user_id = user.id left join user manager on userRelationship.manager_id = manager.id where ((user.first_name like '%${searchString}%' || user.last_name like '%${searchString}%' || user.email like '%${searchString}%') || (user.first_name like '%${firstNameSearch}%' && user.last_name like '%${lastNameSearch}%')) union select distinct user.id, user.username, user.client_setup_id, user.email, user.first_name, user.last_name, user.user_metadata, user.last_login, user.picture_url, manager.first_name as mgr_first_name, manager.last_name as mgr_last_name from user left join user_relationship as userRelationship on userRelationship.user_id = user.id left join user manager on userRelationship.manager_id = manager.id where ((manager.first_name like '%${searchString}%' || manager.last_name like '%${searchString}%') || (manager.first_name like '%${firstNameSearch}%' && manager.last_name like '%${lastNameSearch}%'))\"\"\" groovySql.rows(query, 0, 15) } ``` ## pagination server side with PagedListHolder Object ```groovy def queryResults = userDataService.searchForUsersWhereNameOrEmailLike(searchString) def pages = new PagedListHolder(queryResults) pages.setPage(params.off) //set current page number pages.setPageSize(params.max) // set the size of page ``` ",
    "url": "/SQLNotes/HQL",
    
    "relUrl": "/SQLNotes/HQL"
  },"93": {
    "doc": "HQLComplexQueries",
    "title": "HQLComplexQueries",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Intersect ```hql SELECT * FROM LAB_TEST_SERVICES_POJO lts WHERE EXISTS (SELECT lsm.inttestid FROM LAB_SPECIMEN_MAPPING lsm WHERE lsm.status = 1 AND lts.inttestid = lsm.inttestid) AND EXISTS (SELECT ltl.inttestid FROM LAB_TEST_LOCATION ltl WHERE ltl.status = 1 AND lts.inttestid = ltl.inttestid) ``` ## join same object to query against 2 lists ```hql select o from Object as o join o.otherObjects as otherObject where otherObject in :allowedotherobjects and otherObject not in :excludedotherobjects ``` ## determine length diff of a group concat ```hql (CHAR_LENGTH (GROUP_CONCAT(CONCAT(user.id, manager.id))) - CHAR_LENGTH (REPLACE(GROUP_CONCAT(CONCAT(user.id, manager.id)), ',', '' ))) ``` # EXAMPLE large query with teary / multi join/ and JSON extractor ```hql SELECT USER.FIRSTNAME, USER.LASTNAME, USER.USERMETADATA, USER.LASTLOGIN, USER.PICTUREURL, MANAGER.ID, MANAGER.EMAIL, MANAGER.FIRSTNAME, MANAGER.LASTNAME, MANAGER.USERMETADATA, MANAGER.LASTLOGIN, MANAGER.PICTUREURL, MANAGER.EXTERNALEMPLOYEECODE, AO.ID, AO.COMPANYINTERVIEWNAME, AO.COMPLETEDDATE, AO.CATALOGDETAIL.ID, SM.ALIAS FROM ${User user} LEFT OUTER JOIN ${UserRelationship ur} WITH ur.user.id = USER.id OR ur.manager.id = USER.id LEFT OUTER JOIN ${ur.manager} manager INNER JOIN ${AssessmentOrder ao} WITH ao.id = CAST ((CONCAT(FUNCTION ('JSON_EXTRACT', USER.userMetadata, ' $.defaultAssessmentOrderId '))) AS java.lang.Long) LEFT OUTER JOIN ${InterviewModel im} WITH im.sourceId = ao.catalogDetail.interviewModelId AND im.source = (CASE WHEN ao.catalogDetail.type = ' AO6 ' THEN ' TBSIX ' WHEN ao.catalogDetail.type = ' A05 ' THEN ' TBFIVE ' WHEN ao.catalogDetail.type = ' P2P ' THEN ' TBFIVE ' END) LEFT OUTER JOIN ${ScoringModel sm} ON sm.id = (CASE WHEN im.source = ' TBFIVE ' THEN (SELECT s FROM ScoringModel s WHERE s.interviewModelId = im.id) ELSE (SELECT s FROM ScoringModel s WHERE s.sourceId = ao.catalogDetail.interviewModelId) END) WHERE USER.clientSetupId = ${clientSetupId} AND USER.id IN (${searchStrings?.lastName ? findAllIdsByFirstNameAndLastName(searchStrings.firstName.toString() , searchStrings.lastName.toString())*.getId().join(', ') ``` > calling method ```groovy findAllByFirstNameOrLastNameOrEmail(searchStrings.firstName.toString())*.getId().join(' ``` # EXAMPLE calling method in HQL statement ```hql SELECT DISTINCT new COM.TALENTBANK.CORE.DTO.USERTEAM.TEAMSEARCHDTOMAP(USER.ID, USER.USERNAME, USER.CLIENTSETUPID, USER.EMAIL, USER.FIRSTNAME, USER.LASTNAME, USER.USERMETADATA, USER.LASTLOGIN, USER.PICTUREURL, MANAGER.ID, MANAGER.EMAIL, MANAGER.FIRSTNAME, MANAGER.LASTNAME, MANAGER.USERMETADATA, MANAGER.LASTLOGIN, MANAGER.PICTUREURL, MANAGER.EXTERNALEMPLOYEECODE) FROM USER USER LEFT OUTER JOIN UserRelationship ur WITH ur.user.id = USER.id OR ur.manager.id = USER.id LEFT OUTER JOIN USER manager ON manager.id = ur.manager.id WHERE USER.clientSetupId = 2000 AND USER.id IN (${ findAllByFirstNameOrLastNameOrEmail(searchStrings.firstName)*.getId().join(' , ')})) ``` # EXAMPLE case in where statement ```hql SELECT DISTINCT new Map( USER.ID AS USER, MANAGER.ID AS manager ) FROM USER USER LEFT OUTER JOIN UserRelationship ur WITH ur.user.id = USER.id OR ur.manager.id = USER.id LEFT OUTER JOIN USER manager ON manager.id = ur.manager.id WHERE USER.clientSetupId IN (55 , 2000) AND (USER.firstName LIKE '%'||'${testSearch}'||'%' OR USER.lastName LIKE '%'||'${testSearch}'||'%' OR manager.firstName LIKE CASE WHEN ${searchManagerName} = TRUE THEN ('%'||'${testSearch}'||'%') ELSE '' END OR manager.lastName LIKE CASE WHEN ${searchManagerName} = TRUE THEN ('%'||'${testSearch}'||'%') ELSE '' END ) ``` # return all if null or empty ```hql SELECT DISTINCT new Map( USER.ID AS USER, MANAGER.ID AS manager ) FROM USER USER LEFT OUTER JOIN UserRelationship ur WITH ur.user.id = USER.id OR ur.manager.id = USER.id LEFT OUTER JOIN USER manager ON manager.id = ur.manager.id WHERE USER.clientSetupId IN (${clientSetUpIdList.join(' , ') ?: ClientSetup.all.id.join(' , ') }) AND (USER.firstName LIKE ${testSearch.user} OR USER.lastName LIKE ${testSearch.user} OR manager.firstName LIKE ${testSearch.manager} OR manager.lastName LIKE ${testSearch.manager} ) ``` # subquery ```hql SELECT u FROM USER u WHERE exists (SELECT 1 FROM USER user LEFT OUTER JOIN UserRelationship UR WITH UR.USER.ID = USER.ID OR UR.MANAGER.ID = USER.ID left OUTER JOIN User manager WITH MANAGER.ID = UR.MANAGER.ID WHERE user = u AND USER.CLIENTSETUPID = 2000) ``` # create tuple ```hql SELECT CONCAT('[', USER.ID, ':', IFNULL(MANAGER.ID, 'null'), ']') FROM USER USER LEFT OUTER JOIN UserRelationship ur WITH ur.user.id = USER.id OR ur.manager.id = USER.id LEFT OUTER JOIN USER manager WITH manager.id = ur.manager.id WHERE USER.clientSetupId = 2000 ``` # creative count ## add/concat chars get length ```hql SELECT LENGTH(CONCAT(FUNCTION('GROUP_CONCAT', ','))) From User user LEFT OUTER JOIN UserRelationship ur with ur.user.id = user.id or ur.manager.id = user.id left OUTER JOIN User manager with manager.id = ur.manager.id where user.clientSetupId = 2000 group by user.id, manager.id ``` ## get groupings where there may be nulls ```hql SELECT NEW Map( MAX(USER.ID) AS userId , (SELECT CONCAT('{', GROUP_CONCAT(CONCAT(COALESCE(UR1.ID, 'noRelationship'), ':[{' , USER.ID, ':' , COALESCE(MANAGER1.ID, 'null'), '}]' )) , '}') FROM USER USER JOIN UserRelationship ur1 WITH ur1.user.id = USER.id OR ur1.manager.id = USER.id JOIN USER manager1 WITH manager1.id = ur1.manager.id) AS TUPLES ) FROM USER USER LEFT OUTER JOIN UserRelationship ur WITH ur.user.id = USER.id OR ur.manager.id = USER.id LEFT OUTER JOIN USER manager WITH manager.id = ur.manager.id WHERE USER.clientSetupId = 2000 GROUP BY USER.id, manager.id ``` ## get list of digits ```hql SELECT Max(USER.ID), (SELECT DISTINCT CONCAT(GROUP_CONCAT(1)) FROM USER u LEFT OUTER JOIN USERRELATIONSHIP ur WITH ur.user.id = u.id OR ur.manager.id = u.id LEFT OUTER JOIN USER M WITH M.id = ur.manager.id WHERE u.clientSetupId = 2000 AND manager.id = m.id ) FROM USER USER LEFT OUTER JOIN UserRelationship ur WITH ur.user.id = USER.id OR ur.manager.id = USER.id LEFT OUTER JOIN USER manager WITH manager.id = ur.manager.id WHERE USER.clientSetupId = 2000 GROUP BY USER, manager ``` ## get correct char but need to count column ### Not working need to show one number, find way to count column ```hql SELECT (SELECT COUNT(u.id) FROM USER u LEFT OUTER JOIN USERRELATIONSHIP ur WITH ur.user.id = u.id OR ur.manager.id = u.id LEFT OUTER JOIN USER M WITH M.id = ur.manager.id WHERE u.id IN ( SELECT DISTINCT CONCAT('' , GROUP_CONCAT(USER.id , manager.id) , '') FROM u subu LEFT OUTER JOIN UserRelationship subur WITH subur.user.id = subu.id OR subur.manager.id = subu.id LEFT OUTER JOIN USER subm WITH subm.id = subur.manager.id WHERE USER.clientSetupId = 2000 GROUP BY CONCAT( USER.id , IFNULL(manager.id , 666)) ) ) FROM USER USER LEFT OUTER JOIN UserRelationship ur WITH ur.user.id = USER.id OR ur.manager.id = USER.id LEFT OUTER JOIN USER manager WITH manager.id = ur.manager.id WHERE USER.clientSetupId = 2000 GROUP BY 'all' ``` ```hql SELECT COUNT(*), (SELECT LENGTH(CONCAT(GROUP_CONCAT(''))) FROM USER u LEFT OUTER JOIN USERRELATIONSHIP rel WITH rel.user.id = u.id OR rel.manager.id = u.id LEFT OUTER JOIN USER M WITH M.id = rel.manager.id WHERE u.clientSetupId = 2000 AND u.id = USER.id AND (m.id = manager.id OR (u.id IS NOT NULL AND m.id IS NULL)) ) FROM USER USER LEFT OUTER JOIN UserRelationship ur WITH ur.user.id = USER.id OR ur.manager.id = USER.id LEFT OUTER JOIN USER manager WITH manager.id = ur.manager.id WHERE USER.clientSetupId = 2000 GROUP BY USER, manager ``` ",
    "url": "/PersonalGrailsNotes/HQLComplexQueries",
    
    "relUrl": "/PersonalGrailsNotes/HQLComplexQueries"
  },"94": {
    "doc": "HQLQueries",
    "title": "HQLQueries",
    "content": "{: .text-delta } 1. TOC {:toc} --- # HQL: Hibernate Query Language ## Select distinct ```hql SELECT DISTINCT mag FROM Magazine mag JOIN mag.articles art JOIN art.author auth WHERE auth.lastName = 'Grisham' ``` ### may equivalently be expressed as follows, using the IN operator: ```hql SELECT DISTINCT mag FROM Magazine mag, IN(mag.articles) art WHERE art.author.lastName = 'Grisham' ``` # Find All ## With Pagination > set up paginate ```groovy def getPaginatedUserGroups(def requestedTypes = [UserGroupType.RESULTGROUP], userId, clientSetupId, paginationParams) { if (!userId || !clientSetupId || !paginationParams) return null def totalUserGroups = Group.countByUserIdAndClientSetupIdAndTypeInList(userId, clientSetupId, requestedTypes, [cache: true]) def orderByMap = [groupName: 'ug.name', assessmentName: 'im.name', lastUpdated: 'ug.lastUpdated'] def orderBy = orderByMap.get(paginationParams?.orderBy) ?: 'ug.name' def orderByDirection = ['asc', 'desc'].contains(paginationParams?.orderDirection) ? paginationParams?.orderDirection : 'asc' def max = paginationParams?.pageSize ?: 5 def offset = ((paginationParams?.page ?: 1) - 1) * max log.debug \"Paged UserGroup List for User ${userId} offset: $offset, max: $max, total: $totalUserGroups\" def groupsList = Group.getGroupsByUser(requestedTypes, userId, clientSetupId, offset, max, orderBy, orderByDirection) [groupsList: groupsList, offset: offset, max: max, total: totalUserGroups] } ``` > query ```groovy static List getGroupsByUser(Long userId, Long clientSetupId, def offset = 0, def max = 0, String orderBy = 'ug.name', String orderByDirection = 'asc') { def query = \"\"\" select new Map(ug.id as id, ug.name as name, ug.interviewModelId as interviewModelId, im.name as assessmentName, im.sourceId as sourceId, im.source as source, im.subType as subType, ug.visibility as visibility , ug.lastUpdated as lastUpdated , COUNT(ugao.id) as assessmentCount, ug.type as type, CAST(case when (select count(*) from UserGroupShare as ugs where ug.id = ugs.userGroupId and ugs.revoked = false) def q = uSession.createQuery($/SELECT DISTINCT new com.talentbank.core.UserMap(user.id, user.username, user.clientSetupId, user.email, user.firstName, user.lastName, user.userMetadata, user.lastLogin, user.pictureUrl,manager.id, manager.email , manager.firstName ,manager.lastName ,manager.userMetadata, manager.lastLogin ,manager.pictureUrl ,manager.externalEmployeeCode) FROM $User user LEFT JOIN FETCH $UserRelationship ur on ur.user.id = user.id or ur.manager.id = user.idleft JOIN ur.manager manager WHERE user.firstName like CONCAT('%', $searchString, '%') or user.lastName like CONCAT('%', $searchString, '%') or user.email like CONCAT('%', $searchString, '%') or manager.firstName like CONCAT('%', $searchString, '%') or manager.lastName like CONCAT('%', $searchString, '%') /$) q.maxResults = 8 q.firstResult = 2 q.list() } ``` ### Full Example - [Full dynamic HQL, with QueryImpl object ](https://gist.github.com/14paxton/0ed8e82644cd661dc8c9fc0d4b8c2009) # Groovy SQL > create groovy sql ```groovy DataSource dataSource = Holders.grailsApplication.mainContext.getBean('dataSource') Sql groovySql = new Sql(dataSource) ``` ```groovy List fetchUsersByNameOrManagerName(String searchString, params) { if (!params) return null def (firstNameSearch, lastNameSearch, rest) = searchString?.tokenize() String query = \"\"\"SELECT DISTINCT user.id, user.username, user.client_setup_id, user.email, user.first_name, user.last_name, user.user_metadata, user.last_login, user.picture_url, manager.first_name AS mgr_first_name, manager.last_name AS mgr_last_name FROM user LEFT JOIN user_relationship as userRelationship on userRelationship.user_id = user.id LEFT JOIN user manager on userRelationship.manager_id = manager.id WHERE ((user.first_name LIKE '%${searchString}%' || user.last_name LIKE '%${searchString}%' || user.email LIKE '%${searchString}%') || (user.first_name LIKE '%${firstNameSearch}%' && user.last_name LIKE '%${lastNameSearch}%')) UNION SELECT DISTINCT user.id, user.username, user.client_setup_id, user.email, user.first_name, user.last_name, user.user_metadata, user.last_login, user.picture_url, manager.first_name AS mgr_first_name, manager.last_name AS mgr_last_name FROM user LEFT JOIN user_relationship as userRelationship on userRelationship.user_id = user.id LEFT JOIN user manager on userRelationship.manager_id = manager.id WHERE ((manager.first_name LIKE '%${searchString}%' || manager.last_name LIKE '%${searchString}%') || (manager.first_name LIKE '%${firstNameSearch}%' && manager.last_name LIKE '%${lastNameSearch}%')) \"\"\" groovySql.rows(query, 0, 15) } ``` ",
    "url": "/PersonalGrailsNotes/HQLQueries",
    
    "relUrl": "/PersonalGrailsNotes/HQLQueries"
  },"95": {
    "doc": "HTML&CSS",
    "title": "HTML&CSS",
    "content": "{: .text-delta } 1. TOC {:toc} --- | --- # HTML/CSS ",
    "url": "/HTML&CSS/",
    
    "relUrl": "/HTML&CSS/"
  },"96": {
    "doc": "HTML",
    "title": "HTML DOM Events",
    "content": "The onload Event . ``` > or use an element and js ```javascript div.onload = Promise.resolve(addPadding(div, keyAsHeader ? 60 : 71, 0)); ``` ### [mouseover](https://developer.mozilla.org/en-US/docs/Web/API/Element/mouseover_event) > use js to create an element and add function to element event/attribute ```javascript div.onmouseover = (e) => (e.target.style.transform = \"scale(2)\"); div.onmouseout = (e) => (e.target.style.transform = \"scale(1)\"); ``` > pure js ```javascript addEventListener(\"mouseover\", (event) => {}); onmouseover = (event) => {}; ``` # UI Elements Buttons. | 7 Basic Rules for Button Design by @101babich . | Button Design . | Cheatsheet for buttons by @tessgadd . | . Text fields. | UI cheat sheet: text fields (Awesome article!) . | Text fields &amp; Forms design — UI components series . | The Anatomy of Input Field . | . Checkboxes &amp; Toggles. | Checkbox vs Toggle Switch by @uxplanet . | Toggle-Switch Guidelines by @NNgroup . | Toggle design patterns from @just_in_mind . | 38 Checkbox Designs . | . Radio Buttons. | Selection controls — UI component series (AWESOME) . | Radio Buttons UX Design . | Radio button design: easy selection and decision-making . | . Tables. | Design better data tables by @CoyleAndrew . | The Ultimate Guide to Designing Data Tables . | Designing better data tables for enterprise UX . | . Datepickers. (It's a pain) . | How to Design a Perfect Date Picker Control? . | Date Picker Design Best Practices . | A hunt for the perfect date picker UI . | . Sliders. | UNBELIEVABLE article @smashingmag is a golden resource really. | Slider design UI patterns and examples from @just_in_mind . | Slider Design: Rules of Thumb from NNGroup . | . Tabs. | Module Tabs in Web Design: Best Practices and Solutions . | 12 Tabs Design guidelines . | . Dropdowns . | UI cheat sheet: dropdown field (Like this one) . | Dropdowns: Design Guidelines . | Drop down list design: the complete guide . | . Pagination . | Paging, Scrolling, and Infinite Scroll by @uxmatters . | UX: Infinite Scrolling vs. Pagination by @101babich . | Users' Pagination Preferences and \"View All\" . | . Search inputs . | Best UX practices for search inputs . | Design a Perfect Search Box . | Site Search Suggestions by @nngroup . | . Breadcrumbs. | Breadcrumbs: 11 Design Guidelines for Desktop and Mobile . | Are breadcrumbs still fresh for UX? . | Breadcrumb examples for inspiration . | . Carousels. | Carousel/slider design best practices (with examples) by @webflow . | Carousel Usability: Designing an Effective UI for Websites with Content Overload . | Designing a User-Friendly Homepage Carousel . | . Modals. | Best Practices for Designing UI Overlays by @oliverlindberg . | Big, bold UX—using modal windows for in-app user engagement from @appcues . | Modal &amp; Nonmodal Dialogs: When (&amp; When Not) to Use Them . | Modal dialogs . | . Cards. | Card UI design: fundamentals and examples . | Simple Design Tips for Crafting Better UI Cards . | Designing cards . | . Tooltips. | Tooltip Guidelines . | Designing Better Tooltips For Mobile User Interfaces . | Tooltips: your secret weapon for improving feature discovery by @sofiaqt . | . Navigation. | Navigation design: Almost everything you need to know . | UX Design for Navigation Menu from @Prototypr . | The Fastest Navigation Layout for a Three-Level Menu from @uxmovement . | . Loaders. | Progress Indicators Make a Slow System Less Insufferable . | Stop Using A Loading Spinner, There’s Something Better . | Best Practices For Animated Progress Indicators . | . Forms. | Design Better Forms by @CoyleAndrew (Really good read!) . | Form Design: 13 Empirically Backed Best Practices by @iamalexbirkett . | The UX behind designing better forms by @charmiekapoor . | . ",
    "url": "/HTML&CSS/HTML",
    
    "relUrl": "/HTML&CSS/HTML"
  },"97": {
    "doc": "HTML",
    "title": "HTML",
    "content": "{: .text-delta } 1. TOC {:toc} --- # TidBits ## embed, inject, or load an HTML file into HTML document using object tag ```html ``` ```html ``` ```html ``` ### load html into page ```javascript const response = await fetch(\"/path/to/template.html\"); const body = await response.text(); document.querySelector(\"#some.selector\").innerHTML = body; ``` - [JS Code Reference](https://www.paxtonb.com/JavaScript/Clever-Algos#load-html-and-css-file-into-html-doc) - [Read HTML Doc with scripst and css into HTML page](https://gist.github.com/14paxton/a5a6b17131a2791b757973f866e3eb98) ### HTML Include > HTML ```html ``` > using XMLHttpRequest ```html ``` # Attributes ## hide element attribute the hidden rule is a User Agent style, which means it's less specific than a moderate sneeze [ref]. This means that your favourite display style will override it ```html . ``` ```html Tweet ``` > in the case of form data, an input type = \"hidden\" ```html ``` ## Capture attribute to open your device camera > Just as the input tag has attributes for email, text and password, there is also an attribute to open the camera of mobile devices to capture > images. > This is done with the capture attribute which can take two values: - `user` for the front camera. - `environment` for the back camera. ```html ``` ## Automatic website refresh > You can set your website to refresh after a given amount of time from the head tag! ```html . ``` ## Activate spellcheck > You can use the HTML spellcheck attribute and set it to true to activate it. Specify the language to be used the lang attribute. ```html ``` ## Specify a file type to be uploaded > You can specify the file types users are permitted to upload in the input tag using the accepted attribute. ```html ``` ## Creating a poster (thumbnail) for your videos > With the poster attribute, you can create an image which is displayed while the video is downloaded, or until the user hits the play button. > If this is not included, the first frame of the video will be used instead ```html ``` ## Automatically download on link Click > If you want a particular resource to be downloaded when a link to the target resource is clicked, add the download attribute ```html ``` ## [JS Events As Attributes](https://developer.mozilla.org/en-US/docs/Web/Events) > inline event in html tag ```html //content ``` > or ```html //content ``` > or ```html T E S T ``` ### [On Load (onload) / Window Load Event](https://developer.mozilla.org/en-US/docs/Web/API/Window/load_event) ```html ",
    "url": "/HTML&CSS/HTML",
    
    "relUrl": "/HTML&CSS/HTML"
  },"98": {
    "doc": "HTTP",
    "title": "HTTP",
    "content": "{: .text-delta } 1. TOC {:toc} --- # [Fetch](https://developer.mozilla.org/en-US/docs/Web/API/fetch) Unlike XMLHttpRequest that is a callback-based API, Fetch is promise-based and provides a better alternative that can be easily used in service workers. Fetch also integrates advanced HTTP concepts such as CORS and other extensions to HTTP. ```javascript // Example POST method implementation: async function postData(url = \"\", data = {}) { // Default options are marked with * const response = await fetch(url, { method: \"POST\", // *GET, POST, PUT, DELETE, etc. mode: \"cors\", // no-cors, *cors, same-origin cache: \"no-cache\", // *default, no-cache, reload, force-cache, only-if-cached credentials: \"same-origin\", // include, *same-origin, omit headers: { \"Content-Type\": \"application/json\", // 'Content-Type': 'application/x-www-form-urlencoded', }, redirect: \"follow\", // manual, *follow, error referrerPolicy: \"no-referrer\", // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url body: JSON.stringify(data), // body data type must match \"Content-Type\" header }); return response.json(); // parses JSON response into native JavaScript objects } postData(\"https://example.com/answer\", {answer: 42}).then((data) => { console.log(data); // JSON data parsed by `data.json()` call }); ``` ## Body > Both requests and responses may contain body data. A body is an instance of any of the following types: - `ArrayBuffer` - `TypedArray (Uint8Array and friends)` - `DataView` - `Blob` - `File` - `String, or a string literal` - `URLSearchParams` - `FormData` > The Request and Response interfaces share the following methods to extract a body. These all return a promise that is eventually resolved with the > actual content. - `Request.arrayBuffer() / Response.arrayBuffer()` - `Request.blob() / Response.blob()` - `Request.formData() / Response.formData()` - `Request.json() / Response.json()` - `Request.text() / Response.text()` # XMLHTTPRequest ```javascript function reqListener() { console.log(this.responseText); } const req = new XMLHttpRequest(); req.addEventListener(\"load\", reqListener); req.open(\"GET\", \"https://www.example.org/example.txt\"); req.send(); ``` ```javascript const xhttpr = new XMLHttpRequest(); xhttpr.open('GET', 'Api_address', true); xhttpr.send(); xhttpr.onload = () => { if (xhttpr.status === 200) { const response = JSON.parse(xhttpr.response); // Process the response data here } else { // Handle error } }; ``` ## Types of requests > A request made via `XMLHttpRequest` can fetch the data in one of two ways, `asynchronously` or `synchronously` > The type of request is dictated by the optional async argument (the third argument) that is > set on the `XMLHttpRequest.open()` method. > If this argument is true or not specified, the `XMLHttpRequest` is processed `asynchronously`, otherwise the process is handled `synchronously`. > A detailed discussion and demonstrations of these two types of requests can be found on the `synchronous` and `asynchronous` requests page. > You can't use `synchronous requests `outside `web workers` as it freezes the > main interface. The constructor XMLHttpRequest isn't limited to only XML documents. It starts with \"XML\" because when it was created the main format that was originally used for asynchronous data exchange was XML. # Axios ```javascript import axios from 'axios'; axios.get('APIURL') .then(response => { const responsedata = response.data; // Access // Process the response data here }) .catch(error => { // Handle any errors ) }; ``` # JQuery Ajax ```javascript $.ajax({ url: 'APIURL' method: 'GET', success: function (response) { const parsedData = JSON.parse(response); // Process the parsed data here }, error: function (xhr, status, error) { // Handle any errors }); ``` ",
    "url": "/JavaScript/HTTP",
    
    "relUrl": "/JavaScript/HTTP"
  },"99": {
    "doc": "HTTP",
    "title": "HTTP",
    "content": "{: .text-delta } 1. TOC {:toc} --- # [HTTPClient](https://learn.microsoft.com/en-us/dotnet/api/system.net.http.httpclient?view=net-8.0) ```csharp var client = new HttpClient(); var request = new HttpRequestMessage(HttpMethod.Get, \"localhost:8080\"); request.Headers.Add(\"Authorization\", \"Basic YnJhbmRvbmpwQHZlcmlkaWFuY3Uub3JnOmU4N2EyOGJlZjM4MTRkNjBhMDljNDNkYjgwNTQ1MzMy\"); var content = new StringContent(\"{\\r\\n \\\"detectIntentResponseId\\\": \\\"3e510315-157d-4453-85c0-45c07173d226\\\",\\r\\n \\\"pageInfo\\\": {\\r\\n \\\"currentPage\\\": \\\"projects/vcu-virtual-assistant-bot/locations/global/agents/8ec51540-2933-43d6-aad5-355545059bfe/flows/00000000-0000-0000-0000-000000000000/pages/START_PAGE\\\",\\r\\n \\\"displayName\\\": \\\"Start Page\\\"\\r\\n },\\r\\n \\\"sessionInfo\\\": {\\r\\n \\\"session\\\": \\\"projects/vcu-virtual-assistant-bot/locations/global/agents/8ec51540-2933-43d6-aad5-355545059bfe/sessions/629d48-27e-702-88f-fb482bc14\\\",\\r\\n \\\"parameters\\\": {\\r\\n \\\"name\\\": \\\"maynard\\\"\\r\\n }\\r\\n },\\r\\n \\\"fulfillmentInfo\\\": {\\r\\n \\\"tag\\\": \\\"customfields\\\"\\r\\n },\\r\\n \\\"messages\\\": [\\r\\n {\\r\\n \\\"text\\\": {\\r\\n \\\"text\\\": [\\r\\n \\\"-- debug --\\\\nvisitor \\\\u003d $session.params.visitor\\\"\\r\\n ],\\r\\n \\\"allowPlaybackInterruption\\\": true,\\r\\n \\\"redactedText\\\": [\\r\\n \\\"-- debug --\\\\nvisitor \\\\u003d $session.params.visitor\\\"\\r\\n ]\\r\\n },\\r\\n \\\"responseType\\\": \\\"HANDLER_PROMPT\\\",\\r\\n \\\"source\\\": \\\"VIRTUAL_AGENT\\\"\\r\\n }\\r\\n ],\\r\\n \\\"triggerEvent\\\": \\\"initiate-bot-event\\\",\\r\\n \\\"languageCode\\\": \\\"en\\\"\\r\\n}\", null, \"application/json\"); request.Content = content; var response = await client.SendAsync(request); response.EnsureSuccessStatusCode(); Console.WriteLine(await response.Content.ReadAsStringAsync()); ``` ## create basic auth ```csharp var mergedCredentials = string.Format(\"{0}:{1}\", _comm100ApiUsername, _comm100ApiKey); var encodedCredentials = Convert.ToBase64String(byteCredentials); var byteCredentials = Encoding.UTF8.GetBytes(mergedCredentials); client.DefaultRequestHeaders.Add(\"Authorization\", \"Basic \" + encodedCredentials); ``` # [RestSharp](https://restsharp.dev/intro.html#introduction) ```csharp var options = new RestClientOptions(\"null\") { MaxTimeout = -1, }; var client = new RestClient(options); var request = new RestRequest(\"localhost:8080\", Method.Get); request.AddHeader(\"Content-Type\", \"application/json\"); request.AddHeader(\"Authorization\", \"Basic YnJhbmRvbmpwQHZlcmlkaWFuY3Uub3JnOmU4N2EyOGJlZjM4MTRkNjBhMDljNDNkYjgwNTQ1MzMy\"); var body = \"json\"; request.AddStringBody(body, DataFormat.Json); RestResponse response = await client.ExecuteAsync(request); Console.WriteLine(response.Content); ``` > or ```csharp RestClientOptions options = new RestClientOptions(_stringUrl){ Authenticator = new HttpBasicAuthenticator(username, apiKey), MaxTimeout = -1 }; RestClient client = new RestClient(options); RestRequest restRequest = new RestRequest(/the/endpoint); restRequest.AddParameter(\"siteId\", paramValue); RestResponse response = await client.ExecuteAsync(restRequest); List visitorList = JsonSerializer.Deserialize>(response.Content ?? string.Empty); List filteredList = visitorList.FindAll(match: visitor => visitor.GetProperty(\"name\").GetString() == nameParameterValue.StringValue); ``` ",
    "url": "/DotNetNotes/HTTP",
    
    "relUrl": "/DotNetNotes/HTTP"
  },"100": {
    "doc": "HTTP",
    "title": "HTTP",
    "content": "{: .text-delta } 1. TOC {:toc} --- | --- # [API Qick Referencs ](https://www.paxtonb.com/GitHubPages/InterviewQ&A#http_verbs) # URL Lifecycle ![img.png](../assets/images/HTTPUrlLifeCycle.png) # Status Codes ![httpStatusCodes.png](../assets/images/httpStatusCodes.png) --- # HTTP Request Methods ## Most Common | Method | Action | . | GET | Retrieve information from the server. Should not modify the data on the server. It can be cached, bookmarked, and may remain in the browser history. | . | HEAD | Similar to GET, except it transfers the status line and headers only. Should not modify the data on the server. It cannot be bookmarked and does not remain in the browser history. | . | POST | Send data to the server, including images, JSON strings, file downloads, etc. It cannot be cached, bookmarked, and not stored in the browser history. | . | PUT | Replace or update an existing resource on the server. May change server status. It cannot be cached, bookmarked, and not stored in browser history. | . | PATCH | Partially modify the specified resource on the server. It is faster and requires less resources than the PUT method. It cannot be cached, bookmarked, and not stored in browser history. | . | DELETE | Delete a resource from the server. May change server status. It cannot be cached, bookmarked, and not stored in browser history. | . | OPTIONS | Used by browsers for CORS operations. Describes the communication options available for the requested resource. Does not change data on the server. It cannot be cached, bookmarked, and not stored in browser history. | . | CONNECT | Establishes two-way communication with the server by creating an HTTP tunnel through a proxy server. | . | TRACE | It is designed for diagnostic purposes. When used, the web server sends back to the client the exact request that was received. | . --- ## ALL Verbs | value | description | documentation | specification | spec-name |-------------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|---------------------------------------------------------------------------------------|------------------------------------------------------------------------|------------------------------------------------| ACL | The ACL method modifies the access control list (which can be read via the DAV:acl property) of a resource. Specifically, the ACL method only permits modification to ACEs that are not inherited, and are not protected. | https://datatracker.ietf.org/doc/html/rfc3744#section-8.1 | http://webconcepts.info/specs/IETF/RFC/3744 | RFC 3744 | BASELINE-CONTROL | A collection can be placed under baseline control with a BASELINE-CONTROL request. When a collection is placed under baseline control, the DAV:version-controlled-configuration property of the collection is set to identify a new version-controlled configuration. This version-controlled configuration can be checked out and then checked in to create a new baseline for that collection. | https://datatracker.ietf.org/doc/html/rfc3253#section-12.6 | http://webconcepts.info/specs/IETF/RFC/3253 | RFC 3253 | BIND | The BIND method modifies the collection identified by the Request-URI, by adding a new binding from the segment specified in the BIND body to the resource identified in the BIND body. | https://datatracker.ietf.org/doc/html/rfc5842#section-4 | http://webconcepts.info/specs/IETF/RFC/5842 | RFC 5842 | CHECKIN | A CHECKIN request can be applied to a checked-out version-controlled resource to produce a new version whose content and dead properties are copied from the checked-out resource. | https://datatracker.ietf.org/doc/html/rfc3253#section-4.4 | http://webconcepts.info/specs/IETF/RFC/3253 | RFC 3253 | CHECKOUT | A CHECKOUT request can be applied to a checked-in version-controlled resource to allow modifications to the content and dead properties of that version-controlled resource. | https://datatracker.ietf.org/doc/html/rfc3253#section-4.3 | http://webconcepts.info/specs/IETF/RFC/3253 | RFC 3253 | CONNECT | The CONNECT method requests that the recipient establish a tunnel to the destination origin server identified by the request-target and, if successful, thereafter restrict its behavior to blind forwarding of packets, in both directions, until the tunnel is closed. Tunnels are commonly used to create an end-to-end virtual connection, through one or more proxies, which can then be secured using TLS (Transport Layer Security). | https://datatracker.ietf.org/doc/html/rfc7231#section-4.3.6 | http://webconcepts.info/specs/IETF/RFC/7231 | RFC 7231 | COPY | The COPY method creates a duplicate of the source resource identified by the Request-URI, in the destination resource identified by the URI in the Destination header. The Destination header MUST be present. The exact behavior of the COPY method depends on the type of the source resource. | https://datatracker.ietf.org/doc/html/rfc4918#section-9.8 | http://webconcepts.info/specs/IETF/RFC/4918 | RFC 4918 | DELETE | The DELETE method requests that the origin server remove the association between the target resource and its current functionality. In effect, this method is similar to the rm command in UNIX: it expresses a deletion operation on the URI mapping of the origin server rather than an expectation that the previously associated information be deleted. | https://datatracker.ietf.org/doc/html/rfc7231#section-4.3.5 | http://webconcepts.info/specs/IETF/RFC/7231 | RFC 7231 | GET | The GET method requests transfer of a current selected representation for the target resource. GET is the primary mechanism of information retrieval and the focus of almost all performance optimizations. Hence, when people speak of retrieving some identifiable information via HTTP, they are generally referring to making a GET request. | https://datatracker.ietf.org/doc/html/rfc7231#section-4.3.1 | http://webconcepts.info/specs/IETF/RFC/7231 | RFC 7231 | HEAD | The HEAD method is identical to GET except that the server MUST NOT send a message body in the response (i.e., the response terminates at the end of the header section). The server SHOULD send the same header fields in response to a HEAD request as it would have sent if the request had been a GET, except that the payload header fields MAY be omitted. This method can be used for obtaining metadata about the selected representation without transferring the representation data and is often used for testing hypertext links for validity, accessibility, and recent modification. | https://datatracker.ietf.org/doc/html/rfc7231#section-4.3.2 | http://webconcepts.info/specs/IETF/RFC/7231 | RFC 7231 | LABEL | A LABEL request can be applied to a version to modify the labels that select that version. The case of a label name MUST be preserved when it is stored and retrieved. When comparing two label names to decide if they match or not, a server SHOULD use a case-sensitive URL-escaped UTF-8 encoded comparison of the two label names. | https://datatracker.ietf.org/doc/html/rfc3253#section-8.2 | http://webconcepts.info/specs/IETF/RFC/3253 | RFC 3253 | LINK | The LINK method is used to establish one or more relationships between the resource identified by the effective request URI and one or more other resources. | https://datatracker.ietf.org/doc/html/draft-snell-link-method#section-3 | http://webconcepts.info/specs/IETF/I-D/snell-link-method | Internet Draft snell-link-method | LOCK | The LOCK method is used to take out a lock of any access type and to refresh an existing lock. | https://datatracker.ietf.org/doc/html/rfc4918#section-9.10 | http://webconcepts.info/specs/IETF/RFC/4918 | RFC 4918 | MERGE | The MERGE method performs the logical merge of a specified version (the \"merge source\") into a specified version-controlled resource (the \"merge target\"). If the merge source is neither an ancestor nor a descendant of the DAV:checked-in or DAV:checked-out version of the merge target, the MERGE checks out the merge target (if it is not already checked out) and adds the URL of the merge source to the DAV:merge-set of the merge target. | https://datatracker.ietf.org/doc/html/rfc3253#section-11.2 | http://webconcepts.info/specs/IETF/RFC/3253 | RFC 3253 | MKACTIVITY | A MKACTIVITY request creates a new activity resource. A server MAY restrict activity creation to particular collections, but a client can determine the location of these collections from a DAV:activity-collection-set OPTIONS request. | https://datatracker.ietf.org/doc/html/rfc3253#section-13.5 | http://webconcepts.info/specs/IETF/RFC/3253 | RFC 3253 | MKCALENDAR | An HTTP request using the MKCALENDAR method creates a new calendar collection resource. A server MAY restrict calendar collection creation to particular collections. | https://datatracker.ietf.org/doc/html/rfc4791#section-5.3.1 | http://webconcepts.info/specs/IETF/RFC/4791 | RFC 4791 | MKCOL | MKCOL creates a new collection resource at the location specified by the Request-URI. If the Request-URI is already mapped to a resource, then the MKCOL MUST fail. During MKCOL processing, a server MUST make the Request-URI an internal member of its parent collection, unless the Request-URI is \"/\". If no such ancestor exists, the method MUST fail. When the MKCOL operation creates a new collection resource, all ancestors MUST already exist, or the method MUST fail with a 409 (Conflict) status code. | https://datatracker.ietf.org/doc/html/rfc4918#section-9.3 | http://webconcepts.info/specs/IETF/RFC/4918 | RFC 4918 | MKREDIRECTREF | The MKREDIRECTREF method requests the creation of a redirect reference resource. | https://datatracker.ietf.org/doc/html/rfc4437#section-6 | http://webconcepts.info/specs/IETF/RFC/4437 | RFC 4437 | MKWORKSPACE | A MKWORKSPACE request creates a new workspace resource. A server MAY restrict workspace creation to particular collections, but a client can determine the location of these collections from a DAV:workspace-collection-set OPTIONS request. | https://datatracker.ietf.org/doc/html/rfc3253#section-6.3 | http://webconcepts.info/specs/IETF/RFC/3253 | RFC 3253 | MOVE | The MOVE operation on a non-collection resource is the logical equivalent of a copy (COPY), followed by consistency maintenance processing, followed by a delete of the source, where all three actions are performed in a single operation. The consistency maintenance step allows the server to perform updates caused by the move, such as updating all URLs, other than the Request-URI that identifies the source resource, to point to the new destination resource. | https://datatracker.ietf.org/doc/html/rfc4918#section-9.9 | http://webconcepts.info/specs/IETF/RFC/4918 | RFC 4918 | OPTIONS | The OPTIONS method requests information about the communication options available for the target resource, at either the origin server or an intervening intermediary. This method allows a client to determine the options and/or requirements associated with a resource, or the capabilities of a server, without implying a resource action. | https://datatracker.ietf.org/doc/html/rfc7231#section-4.3.7 | http://webconcepts.info/specs/IETF/RFC/7231 | RFC 7231 | ORDERPATCH | The ORDERPATCH method is used to change the ordering semantics of a collection, to change the order of the collection's members in the ordering, or both. | https://datatracker.ietf.org/doc/html/rfc3648#section-7 | http://webconcepts.info/specs/IETF/RFC/3648 | RFC 3648 | PATCH | The PATCH method requests that a set of changes described in the request entity be applied to the resource identified by the Request-URI. The set of changes is represented in a format called a \"patch document\" identified by a media type. If the Request-URI does not point to an existing resource, the server MAY create a new resource, depending on the patch document type (whether it can logically modify a null resource) and permissions, etc. | https://datatracker.ietf.org/doc/html/rfc5789#section-2 | http://webconcepts.info/specs/IETF/RFC/5789 | RFC 5789 | POST | The POST method requests that the target resource process the representation enclosed in the request according to the resource's own specific semantics. | https://datatracker.ietf.org/doc/html/rfc7231#section-4.3.3 | http://webconcepts.info/specs/IETF/RFC/7231 | RFC 7231 | PRI | This method is never used by an actual client. This method will appear to be used when an HTTP/1.1 server or intermediary attempts to parse an HTTP/2 connection preface. | https://datatracker.ietf.org/doc/html/rfc7540#section-3.5 | http://webconcepts.info/specs/IETF/RFC/7540 | RFC 7540 | PROPFIND | The PROPFIND method retrieves properties defined on the resource identified by the Request-URI, if the resource does not have any internal members, or on the resource identified by the Request-URI and potentially its member resources, if the resource is a collection that has internal member URLs. | https://datatracker.ietf.org/doc/html/rfc4918#section-9.1 | http://webconcepts.info/specs/IETF/RFC/4918 | RFC 4918 | PROPPATCH | The PROPPATCH method processes instructions specified in the request body to set and/or remove properties defined on the resource identified by the Request-URI. | https://datatracker.ietf.org/doc/html/rfc4918#section-9.2 | http://webconcepts.info/specs/IETF/RFC/4918 | RFC 4918 | PUT | The PUT method requests that the state of the target resource be created or replaced with the state defined by the representation enclosed in the request message payload. A successful PUT of a given representation would suggest that a subsequent GET on that same target resource will result in an equivalent representation being sent in a 200 (OK) response. However, there is no guarantee that such a state change will be observable, since the target resource might be acted upon by other user agents in parallel, or might be subject to dynamic processing by the origin server, before any subsequent GET is received. A successful response only implies that the user agent's intent was achieved at the time of its processing by the origin server. | https://datatracker.ietf.org/doc/html/rfc7231#section-4.3.4 | http://webconcepts.info/specs/IETF/RFC/7231 | RFC 7231 | QUERY | The QUERY method is used to initiate a server-side query. Unlike the HTTP GET method, which requests that a server return a representation of the resource identified by the target URI, the QUERY method is used to ask the server to perform a query operation (described by the request payload) over some set of data scoped to the effective request URI. The payload returned in response to a QUERY cannot be assumed to be a representation of the resource identified by the effective request URI. | https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-safe-method-w-body#section-2 | http://webconcepts.info/specs/IETF/I-D/ietf-httpbis-safe-method-w-body | Internet Draft ietf-httpbis-safe-method-w-body | REBIND | The REBIND method removes a binding to a resource from a collection, and adds a binding to that resource into the collection identified by the Request-URI. The request body specifies the binding to be added (segment) and the old binding to be removed (href). It is effectively an atomic form of a MOVE request, and MUST be treated the same way as MOVE for the purpose of determining access permissions. | https://datatracker.ietf.org/doc/html/rfc5842#section-6 | http://webconcepts.info/specs/IETF/RFC/5842 | RFC 5842 | REPORT | A REPORT request is an extensible mechanism for obtaining information about a resource. Unlike a resource property, which has a single value, the value of a report can depend on additional information specified in the REPORT request body and in the REPORT request headers. | https://datatracker.ietf.org/doc/html/rfc3253#section-3.6 | http://webconcepts.info/specs/IETF/RFC/3253 | RFC 3253 | SEARCH | The client invokes the SEARCH method to initiate a server-side search. The body of the request defines the query. The server MUST emit an entity matching the WebDAV multistatus format. | https://datatracker.ietf.org/doc/html/rfc5323#section-2 | http://webconcepts.info/specs/IETF/RFC/5323 | RFC 5323 | TRACE | The TRACE method requests a remote, application-level loop-back of the request message. The final recipient of the request SHOULD reflect the message received, excluding some fields described below, back to the client as the message body of a 200 (OK) response with a Content-Type of \"message/http\". The final recipient is either the origin server or the first server to receive a Max-Forwards value of zero (0) in the request. | https://datatracker.ietf.org/doc/html/rfc7231#section-4.3.8 | http://webconcepts.info/specs/IETF/RFC/7231 | RFC 7231 | UNBIND | The UNBIND method modifies the collection identified by the Request-URI by removing the binding identified by the segment specified in the UNBIND body. | https://datatracker.ietf.org/doc/html/rfc5842#section-5 | http://webconcepts.info/specs/IETF/RFC/5842 | RFC 5842 | UNCHECKOUT | An UNCHECKOUT request can be applied to a checked-out version-controlled resource to cancel the CHECKOUT and restore the pre-CHECKOUT state of the version-controlled resource. | https://datatracker.ietf.org/doc/html/rfc3253#section-4.5 | http://webconcepts.info/specs/IETF/RFC/3253 | RFC 3253 | UNLINK | The UNLINK method is used to remove one or more relationships between the resource identified by the effective request URI and other resources. | https://datatracker.ietf.org/doc/html/draft-snell-link-method#section-4 | http://webconcepts.info/specs/IETF/I-D/snell-link-method | Internet Draft snell-link-method | UNLOCK | The UNLOCK method removes the lock identified by the lock token in the Lock-Token request header. The Request-URI MUST identify a resource within the scope of the lock. | https://datatracker.ietf.org/doc/html/rfc4918#section-9.11 | http://webconcepts.info/specs/IETF/RFC/4918 | RFC 4918 | UPDATE | The UPDATE method modifies the content and dead properties of a checked-in version-controlled resource (the \"update target\") to be those of a specified version (the \"update source\") from the version history of that version-controlled resource. | https://datatracker.ietf.org/doc/html/rfc3253#section-7.1 | http://webconcepts.info/specs/IETF/RFC/3253 | RFC 3253 | UPDATEREDIRECTREF | The UPDATEREDIRECTREF method requests the update of a redirect reference resource. | https://datatracker.ietf.org/doc/html/rfc4437#section-7 | http://webconcepts.info/specs/IETF/RFC/4437 | RFC 4437 | VERSION-CONTROL | A VERSION-CONTROL request can be used to create a version-controlled resource at the request-URL. It can be applied to a versionable resource or to a version-controlled resource. | https://datatracker.ietf.org/doc/html/rfc3253#section-3.5 | http://webconcepts.info/specs/IETF/RFC/3253 | RFC 3253 | ",
    "url": "/HTTP",
    
    "relUrl": "/HTTP"
  },"101": {
    "doc": "HTTPExamples",
    "title": "HTTPExamples",
    "content": "{: .text-delta } 1. TOC {:toc} --- # [HTTP Client](https://www.jetbrains.com/help/idea/http-client-in-product-code-editor.html) ## Example Scripts ### POST with body {%raw%} ```shell POST http://ip:port/am/userGroups/v1/group/compare Content-Type: application/json { \"id\" :null , \"name\": \"GETGUD\", \"type\": \"GROUP_COMPARE\", \"groupIds\": [520, 518], \"assessmentOrderIds\": null } ``` ### Log in and save tokens ```shell ### log in with auth0 // @no-redirect // @no-log POST https://core.talentbankonline.com/v2/loginWithAuth0 Content-Type: application/x-www-form-urlencoded { \"username\": \"username\", \"password\": \"password\" } > {% client.global.set(\"access_token\", response.body[\"access_token\"]); client.log(response.body[\"access_token\"]); client.log(client.global.get(\"access_token\")); %} ``` #### Use Tokens ```shell // @no-log POST http://localhost:28080/TBEX/ssi/v1/create Content-Type: application/json Authorization: Bearer {{access_token}} { \"companyCode\": \"BPAXTON\", \"tbeCompanyCode\": null, \"externalClientId\": null, \"tbexPassword\": \"T@@@@@@L\", \"organization\": 1 } ``` {% endraw %} ",
    "url": "/IntelliJNotes/HTTPExamples",
    
    "relUrl": "/IntelliJNotes/HTTPExamples"
  },"102": {
    "doc": "HandleEvents",
    "title": "HandleEvents",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Add event listener to check if table loads 1. add in component you are checking ```jsx useEffect(() => { window.parent.postMessage({ action: \"tGrid-loaded\" }); }, []); ``` 2. and in another component ```jsx useEffect(() => { window.addEventListener(\"message\", handleMessage); return () => { window.removeEventListener(\"message\", handleMessage); }; }, []); ``` 3. Listening for a resizing event ```jsx useEffect(() => { if (tableRef?.current) { if (useObserver) { const resizeObserver = new ResizeObserver(async () => { Promise.resolve(buildPPTObject()); }); if (tableRef?.current) { resizeObserver.observe(tableRef?.current); } return () => { resizeObserver.disconnect(); }; } else { Promise.resolve(buildPPTObject()); } } }, [tableRef?.current]); ``` # window.onkeypress / Keypress ## Barcode Scanner ### Component Example #### Use Invisible TextInput for focus ```jsx import React, {useEffect} from \"react\"; import {StyleSheet, Text, TextInput, View} from \"react-native\"; export default function App() { const invisibleRef = React.useRef(null); useEffect(() => { invisibleRef.current.focus(); }, []); const focusInvisibleInput = (e) => { e.preventDefault(); if (invisibleRef.current) { invisibleRef.current.focus(); } }; return ( console.log(\"hidden\", text)} /> console.log(\"visible\", text)} /> A nice react native app! console.log(\"visible\", text)} /> ); } const styles = StyleSheet.create({ container: { flex: 1, backgroundColor: \"#fff\", alignItems: \"center\", justifyContent: \"center\", }, }); ``` > And after this, you may want to add a generic input handler that times the speed of the input of the text, to figure out if it's a scan, rather than > manual text input. > (If you get 20 characters > within 50ms, you can be pretty sure it's a scan, right?) #### Use Form Input and Catch Submission event, and Retrieve value ```jsx import {useState} from \"react\"; export default function Modal() { const [repairArticles, setRepairArticles] = useState([]); function handleBarcodeInput(e) { e.preventDefault(); const input = e.target.querySelector(\"input\"); const value = input.value; setRepairArticles((prev) => { return (prev = [...prev, value]); }); input.value = \"\"; } return ( handleBarcodeInput(e)}> {repairArticles.map((el, index) => { return {el} . ; })} ); } ``` ### React Hook using Js Function > [Detect when input box filled by keyboard and when by barcode scanner](https://www.paxtonb.com/JavaScript/Events#barcodescanner-class) ```jsx const ScanComponent = (props) => { const [scanned, setScanned] = useState(\"\"); useEffect(() => { const barcode = new BarcodeScaner(); barcode.initialize(); return () => { barcode.close(); }; }, []); useEffect(() => { const scanHandler = (code) => { console.log(code); setScanned(code); }; events.on(\"onbarcodescaned\", scanHandler); return () => { events.off(\"onbarcodescaned\", scanHandler); }; }, [/* here put dependencies for your scanHandler ;) */],); return {scanned}; }; ``` ### Custom Hook ```tsx import {useCallback, useEffect, useState} from \"react\"; const regExpForShiftKey: RegExp = new RegExp(/shift/, \"gi\"); export default function useBarcodeScanner() { const [lastTimeStamp, setLastTimeStamp] = useState(0); const [commonAccessCardBarCode, setCommonAccessCardBarCode] = useState(\"\"); const [scannedText, setScannedText] = useState(\"\"); const [firstCharacterText, setFirstCharacterText] = useState(\"\"); const getDiff = useCallback( (timeStamp: number): number => { return timeStamp - (lastTimeStamp ? lastTimeStamp : 0); }, [lastTimeStamp], ); const saveInTextString = useCallback( (keyEntered: string): void => { if (keyEntered === \"Enter\") { const fullTextString: string = `${firstCharacterText}${scannedText}`.replace(regExpForShiftKey, \"\"); setCommonAccessCardBarCode(fullTextString); } else { setScannedText(`${scannedText}${keyEntered}`); } }, [firstCharacterText, scannedText], ); const setFirstCharOfText = useCallback((keyEntered: string): void => { setScannedText(\"\"); setFirstCharacterText(keyEntered); }, []); const handleKeyDownEvent = useCallback( (event: globalThis.KeyboardEvent): void => { const eventTimeStamp: number = event.timeStamp; const keyEntered: string = event.key; const diff: number = getDiff(eventTimeStamp); setLastTimeStamp(event.timeStamp); if (diff { const e: KeyboardEvent = event as KeyboardEvent; handleKeyDownEvent(e); }, [handleKeyDownEvent], ); useEffect(() => { window.addEventListener(\"keydown\", handleEvent); return (): void => { window.removeEventListener(\"keydown\", handleEvent); }; }, [handleEvent]); return [commonAccessCardBarCode, scannedText]; } ``` ",
    "url": "/ReactNotes/HandleEvents",
    
    "relUrl": "/ReactNotes/HandleEvents"
  },"103": {
    "doc": "Hibernate",
    "title": "Hibernate",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Accessing - > If you use f`ield-based ` access, your JPA implementation uses `reflection` to read or write your entity attributes directly. > It also expects > that you place your mapping annotations on your entity attributes. - > If you use `property-based` access, you need to annotate the getter methods of your entity attributes with the required mapping annotations. > Your `JPA` implementation then calls the getter and setter methods to access your entity attributes. # Collections > The persistent collections injected by `Hibernate` behave like `ArrayList`, `HashSet`, `TreeSet`, `HashMap` or `TreeMap`, depending on the interface > type. - `java.util.List` - `java.util.Set` - `java.util.SortedSet` - `java.util.Map` - `java.util.SortedMap` - `java.util.Collection` ## Mapping to database examples ### [Mapping Annotations](https://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#annotations) > types that I have used for mapping json or hashmap to mysql db - > `VARCHAR(16384) ` > > > must have a max length to survive `MariaDB DDL parser` + `hibernate validator` - > `LONGTEXT` - > `json` - > `longvarchar` - > `tinyblob` - > `longblob` ### map to blob ```java public class MapBlob { @ElementCollection @Column(columnDefinition = \"BLOB NOT NULL\") @MapKeyColumn(columnDefinition = \"BLOB NOT NULL\") private final Map userFiles = new HashMap(); } ``` ### use collection table #### with join ```java public class MapBlob { @ElementCollection @MapKeyColumn(name = \"key\") @Column(name = \"value\") @CollectionTable(name = \"preference\", joinColumns = @JoinColumn(name = \"user_id\")) private Map preferences; } ``` #### with more hibernate annotations ```java public class MapBlob { @CollectionOfElements(targetElement = java.lang.String.class) @JoinTable(name = \"BOOK_CHAPTER\", joinColumns = @JoinColumn(name = \"BOOK_ID\")) @MapKey(columns = @Column(name = \"CHAPTER_KEY\")) @Column(name = \"CHAPTER\") private Map chapters; } ``` #### with mapkeycolumn ##### field access ```java public class MapBlob { @ElementCollection(targetClass = String.class) @CollectionTable(name = \"MAP\") @MapKeyColumn(name = \"key\") @Column(name = \"value\") private Map map; } ``` ##### property access ```java public class MapBlob { @ElementCollection(fetch = FetchType.EAGER) @CollectionTable(name = \"TABLENAME\") @MapKeyColumn(name = \"KEY\") @Column(name = \"VALUE\") public Map getMap() { return _map; } } ``` ### use json type class > in `build.gradle` ```gradle implementation(\"com.vladmihalcea:hibernate-types-52:2.21.1\") ``` ```java @TypeDefs({ @org.hibernate.annotations.TypeDef(name = \"JSON\", typeClass = JsonBlobType.class), @org.hibernate.annotations.TypeDef(name = \"JSONB\", typeClass = JsonBinaryType.class) }) public class Entity { @Type(type = \"json\") @Column(columnDefinition = \"jsonb\") private String preferences; } ``` ### use hibernate types to map as blob and serializable ```java public class MapBlob { @org.hibernate.annotations.Type( type = \"org.hibernate.type.SerializableToBlobType\", parameters = {@Parameter(name = \"classname\", value = \"java.util.HashMap\")} ) public Map getModelData() { return modelData; } } ``` ```java public class MapBlob { @org.hibernate.annotations.Type(type = \"org.hibernate.type.SerializableType\") public Map getModelData() { return modelData; } } ``` ### save as string , map to map ```java public class User extends AbstractEntity { @JsonIgnore //This variable is going to be ignored whenever you send data to a client(ie. web browser) private String preferences; @Transient //This property is going to be ignored whenever you send data to the database @JsonProperty(\"preferences\") //Whenever this property is serialized to the client, it is going to be named \"perferences\" instead \"preferencesObj\" private Preferences preferencesObj; public String getPreferences() { return new ObjectMapper().writeValueAsString(preferencesObj); } public void setPreferences(String preferences) { this.preferences = preferences; this.preferncesObj = new ObjectMapper().readValue(preferences, Preferences.class); } public Prefrences getPreferencesObj() { return preferencesObj; } public void setPreferencesObj(Preferences preferencesObj) { this.preferencesObj = preferencesObj; } } ``` ### use custom map ```java public class Location implements Serializable { private String country; private String city; //Getters and setters omitted for brevity @Override public String toString() { return \"Location{\" + \"country='\" + country + ' ' + \", city='\" + city + ' ' + '}'; } } ``` # Type Comparison | Hibernate Type | Database Type | JDBC Type | Type Registry |-----------------------------------------|----------------------------------------|------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------| org.hibernate.type.StringType | string | VARCHAR | string, java.lang.String | org.hibernate.type.MaterializedClob | string | CLOB | materialized_clob | org.hibernate.type.TextType | string | LONGVARCHAR | text | org.hibernate.type.CharacterType | char, java.lang.Character | CHAR | char, java.lang.Character | org.hibernate.type.BooleanType | boolean | BIT | boolean, java.lang.Boolean | org.hibernate.type.NumericBooleanType | boolean | INTEGER, 0 is false, 1 is true | numeric_boolean | org.hibernate.type.YesNoType | boolean | CHAR, ‘N’/’n’ is false, ‘Y’/’y’ is true. The uppercase value is written to the database. | yes_no | org.hibernate.type.TrueFalseType | boolean | CHAR, ‘F’/’f’ is false, ‘T’/’t’ is true. The uppercase value is written to the database. | true_false | org.hibernate.type.ByteType | byte, java.lang.Byte | TINYINT | byte, java.lang.Byte | org.hibernate.type.ShortType | short, java.lang.Short | SMALLINT | short, java.lang.Short | org.hibernate.type.IntegerTypes | int, java.lang.Integer | INTEGER | int, java.lang.Integer | org.hibernate.type.LongType | long, java.lang.Long | BIGINT | long, java.lang.Long | org.hibernate.type.FloatType | float, java.lang.Float | FLOAT | float, java.lang.Float | org.hibernate.type.DoubleType | double, java.lang.Double | DOUBLE | double, java.lang.Double | org.hibernate.type.BigIntegerType | java.math.BigInteger | NUMERIC | big_integer | org.hibernate.type.BigDecimalType | java.math.BigDecimal | NUMERIC | big_decimal, java.math.bigDecimal | org.hibernate.type.TimestampType | java.sql.Timestamp | TIMESTAMP | timestamp, java.sql.Timestamp | org.hibernate.type.TimeType | java.sql.Time | TIME | time, java.sql.Time | org.hibernate.type.DateType | java.sql.Date | DATE | date, java.sql.Date | org.hibernate.type.CalendarType | java.util.Calendar | TIMESTAMP | calendar, java.util.Calendar | org.hibernate.type.CalendarDateType | java.util.Calendar | DATE | calendar_date | org.hibernate.type.CurrencyType | java.util.Currency | VARCHAR | currency, java.util.Currency | org.hibernate.type.LocaleType | java.util.Locale | VARCHAR | locale, java.utility.locale | org.hibernate.type.TimeZoneType | java.util.TimeZone | VARCHAR (Using the TimeZone ID) | timezone, java.util.TimeZone | org.hibernate.type.UrlType | java.net.URL | VARCHAR | url, java.net.URL | org.hibernate.type.ClassType | java.lang.Class | VARCHAR (Using the class name) | class, java.lang.Class | org.hibernate.type.BlobType | java.sql.Blob | BLOB | blog, java.sql.Blob | org.hibernate.type.ClobType | java.sql.Clob | CLOB | clob, java.sql.Clob | org.hibernate.type.BinaryType | primitive byte[] | VARBINARY | binary, byte[] | org.hibernate.type.MaterializedBlobType | primitive byte[] | BLOB | materized_blob | org.hibernate.type.ImageType | primitive byte[] | LONGVARBINARY | image | org.hibernate.type.BinaryType | java.lang.Byte[] | VARBINARY | wrapper-binary | org.hibernate.type.CharArrayType | char[] | VARCHAR | characters, char[] | org.hibernate.type.CharacterArrayType | java.lang.Character[] | VARCHAR | wrapper-characters, Character[], java.lang.Character[] | org.hibernate.type.UUIDBinaryType | java.util.UUID | BINARY | uuid-binary, java.util.UUID | org.hibernate.type.UUIDCharType | java.util.UUID | CHAR, VARCHAR | uuid-char | org.hibernate.type.PostgresUUIDType | java.util.UUID | PostgreSQL UUID | pg-uuid | org.hibernate.type.SerializableType | Implementors of java.lang.Serializable | VARBINARY | Unlike the other value types, multiple instances of this type are registered. It is registered once under java.io.Serializable and registered under the specific java.io.Serializable implementation class names | ",
    "url": "/JavaNotes/Hibernate",
    
    "relUrl": "/JavaNotes/Hibernate"
  },"104": {
    "doc": "Hibernate",
    "title": "Hibernate",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Grails Notes ## Access to session and hibernate- ### getting session- ```groovy def sessionFactory ``` ```groovy def session = sessionFactory?.getCurrentSession() ``` ```groovy RequestContextHolder.currentRequestAttributes().getSession() ``` ## -get hibernate datastore in session- ### -Get hibernatedatasource- [hibernate datastore ex.](https://guides.grails.org/grails-dynamic-multiple-datasources/guide/index.html) ```java public class HibernateExample { @Autowired HibernateDatastore hibernateDatastore; @Autowired DatabaseProvisioningService databaseProvisioningService; @Listener(User) void onUserPostInsertEvent(PostInsertEvent event) { String username = event.getEntityAccess().getPropertyValue(\"username\"); DatabaseConfiguration databaseConfiguration = databaseProvisioningService.findDatabaseConfigurationByUsername(username); hibernateDatastore.getConnectionSources().addConnectionSource(databaseConfiguration.dataSourceName, databaseConfiguration.configuration); } } ``` ### -get table columns- ```groovy hibernateDatastore.getSessionFactory().getClassMetadata(GroupCompare).getProperties().sort() ``` ```groovy ctx.sessionFactory.getClassMetadata(Team).attributes.collect { it.name } ``` ### -get data bindings/properties/class/domain table/declared fields- ```groovy def mapping = org.grails.orm.hibernate.cfg.GrailsDomainBinder.getMapping(UserGroup) ``` ```groovy def mapping = org.grails.orm.hibernate.cfg.GrailsDomainBinder.getMapping(UserGroup) ``` ```groovy org.grails.orm.hibernate.cfg.GrailsDomainBinder.getMapping(groupCompare.class).class.declaedFields ``` ### Get A Service 1. ```java public class HibernateExample { @Autowired HibernateDatastore hibernateDatastore; UserDataService userDataService; UserService(HibernateDatastore hibernateDatastore) { this.userDataService = hibernateDatastore.getService(UserDataService); } } ``` 2. ```java (YourService)Holders.grailsApplication.mainContext[\"yourService\"] ``` 3. ```java applicationContext.\"${yourServiceName}\".serviceMethod() ``` 4. ```java ctx.getBean(\"userGroupService\") ``` 5. ```java Holders.applicationContext.getBean(\"myService\") ``` ```groovy class HibernateExample { ApplicationContext ctx = (ApplicationContext) ServletContextHolder .getServletContext() .getAttribute(GrailsApplicationAttributes .APPLICATION_CONTEXT) def statisticsService = (StatisticsService).ctx.getBean(\"statisticsService \") } ``` ",
    "url": "/SpringNotes/Hibernate",
    
    "relUrl": "/SpringNotes/Hibernate"
  },"105": {
    "doc": "HomeBrew",
    "title": "HomeBrew",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Ruby ruby is keg-only, which means it was not symlinked into ``` /opt/homebrew ``` because macOS already provides this software and installing another version in parallel can cause all kinds of trouble. If you need to have ruby first in your PATH, run: ```ruby echo 'export PATH=\"/opt/homebrew/opt/ruby/bin:$PATH\"' >> ~/.zshrc ``` For compilers to find ruby you may need to set: ```shell export LDFLAGS=\"-L/opt/homebrew/opt/ruby/lib\" export CPPFLAGS=\"-I/opt/homebrew/opt/ruby/include\" ``` ",
    "url": "/MacNotes/HomeBrew",
    
    "relUrl": "/MacNotes/HomeBrew"
  },"106": {
    "doc": "HttpRepl",
    "title": "HttpRepl",
    "content": "{: .text-delta } 1. TOC {:toc} # [HttpRepl](https://learn.microsoft.com/en-us/aspnet/core/web-api/http-repl/?view=aspnetcore-7.0&tabs=windows) # Setup ```shell ::install dotnet tool install -g Microsoft.dotnet-httprepl; ::set path to tools export PATH=\"$PATH:/Users/bp/.dotnet/tools\"; ::test web api httprepl http://localhost:5001 ``` # Run ```shell dotnet run --urls=https://localhost:5101 ``` # HttpRepl ```shell dotnet tool install -g Microsoft.dotnet-httprepl; ``` ## Set text editor for POST ```shell pref set editor.command.default \"/Applications/Visual Studio Code.app/Contents/Resources/app/bin/code\" ``` > set default args ```shell pref set editor.command.default.arguments \"--disable-extensions --new-window\" ``` ## list and select controllers ```shell ls ``` ```shell cd [controller] ``` ## POST ```shell post -h Content-Type=application/json ``` ## GET ```shell get Order ``` > return ```json [ { \"date\": \"2024-05-14\", \"summary\": \"order3\" }, { \"date\": \"2024-05-15\", \"summary\": \"order5\" }, { \"date\": \"2024-05-16\", \"summary\": \"order4\" }, { \"date\": \"2024-05-17\", \"summary\": \"order4\" }, { \"date\": \"2024-05-18\", \"summary\": \"order5\" } ] ``` ",
    "url": "/DotNetNotes/HttpRepl",
    
    "relUrl": "/DotNetNotes/HttpRepl"
  },"107": {
    "doc": "Images",
    "title": "What I have used to get data uri to work with using as background css",
    "content": "first use at TPlus . style = \" background: url(); background-size: cover; background-repeat: no-repeat; background-position: center; height: 100%; width: 90%;\" Option 2 . style=\" background: url() no-repeat; display: 100% auto; background-size: 100%; background-position: center; width: 100%; height: 100%; margin:0 auto;\" Option 3 . style=\" background: url() no-repeat; background-position: top; background-size: contain; width: auto; height: auto; margin: auto;\" Simple Option . style=\" background: url() no-repeat; background-position: center; background-size: 100% auto; \" ### Preload Image with CSS and HTML ```css .masthead { height: 100vh; background-image: url(\"[masthead.jpg|]\"); background-size: cover; } ``` ```html | Preloaded Image | ``` ## image ```html ``` ```html ``` ## iframe ```html ``` ## object ```html fallback ``` # Resources - [CSSTricks](https://css-tricks.com/using-svg/) ## Encoder/Converter ### [URL Encoder for SVG](https://yoksel.github.io/url-encoder/) ### [Data URI Generator](https://dopiaza.org/tools/datauri/index.php) ### [Image To Data Uri](https://websemantics.uk/tools/image-to-data-uri-converter/) ### [PNG to SVG](https://png2svg.com/) ",
    "url": "/HTML&CSS/Images",
    
    "relUrl": "/HTML&CSS/Images"
  },"108": {
    "doc": "Images",
    "title": "Images",
    "content": "{: .text-delta } 1. TOC {:toc} --- # [SVG](https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/SVG_Image_Tag) ```xml SVG ``` ## CSS ```html Kiwi Corp ``` ```css .logo { display: block; text-indent: -9999px; width: 100px; height: 82px; background: url(kiwi.svg); background-size: 100px 82px; } ``` > or ```css .main-header { background: url(logo.svg) no-repeat top left; background-size: contain; } .no-svg .main-header { background-image: url(logo.png); } ``` > or ```css .illustration { background-image: url(\"image.svg\"); } ``` And just like raster graphics, you can base64 encode them right into the stylesheet to help reduce HTTP requests: ```css .illustration { background-image: url(\"data:image/svg+xml;base64,[data]\"); } ``` To aid readability, you may even attempt such audacity as this: ```css .illustration { background-image: url(\"data:image/svg+xml;charset=utf-8,\"); } ``` ## html ### svg element ```html ``` ### image element ```html ``` ### body element ```css body { background: url(fallback.png); background-image: url(image.svg), none; } ``` ## inline ```html ``` ### iframe element ```html ``` ### object element ```html ``` This is the oldest method we have. And of course, data URIs are possible here too: ```html ``` If the browser doesn’t recognise the object element’s MIME type, it won’t download the SVG file, but the “fallback” image inside is always downloaded. Again, we’re not doing things quite right. There is a better solution and those crafty devils at ClearLeft are sporting it in their logo markup. The answer? Simply use CSS to apply the fallback image: ```html logo description ``` ```css #logo div { width: 300px; height: 50px; background-image: url(\"logo.png\"); } ``` The object element effectively replaces its default content with the SVG data. Only if the browser doesn’t support SVG, does the element inside get styled. This, to my knowledge, is the best way to use SVG without any overhead. # [ Data URI](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URLs) > The data URI format is pretty simple and is spelled out in RFC 2397 (which actually is short enough that you can read it all). The basic format is > as follows: `data:[][;charset=][;base64],` > In this format, `data: ` is the protocol of the URI, indicating that this is a data URI. > The second part, the `MIME type`, indicates the type of data being represented. > For PNG images, for > example, this would be `image/png`. > When not specified, the `MIME` type defaults to `text/plain`. > The character set can, most often, safely be omitted and isn’t used at all for images. > The > next section indicates the encoding used. > Contrary to popular belief, you do not have to use `base 64 encoding`. > If the content isn’t base 64 encoded, then the data is encoded using standard > URL-encoding (URL-safe `ASCII` characters represented as themselves, all others represented as a hex encoding in the format `%xx`). > The encoded data may contain white space, which is not > considered significant. ## Formats ``` data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL... ``` Base 64 encoding is a system of encoding whereby data is converted into bits and then grouped numerically into a set of base 64 digits. Base 64 digits include A through Z, both uppercase and lowercase, numbers, and plus (+) and slash (/). The equals sign (=) is used to indicate padding has occurred. All you really need to understand is that base 64 encoding makes the encoded data much smaller. **Note: **Base 64-encoding actually makes images larger. If you’re using HTTP compression, however, you likely won’t notice a difference because base 64-encoded data compresses extremely well. If for some reason you can’t use HTTP compression, you may want to check how many bytes you’re sending over the wire to determine if the tradeoff is worth it. --- ``` data:image/svg+xml;charset=UTF-8, ... ``` --- ``` data:image/svg+xml;charset=UTF-8,%3Csvg xmlns='http://...' ``` > example : > `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cpath d='M224%20387.814V512L32 320l192-192v126.912C447.375 260.152 437.794 103.016 380.93 0 521.287 151.707 491.48 394.785 224 387.814z'/%3E%3C/svg%3E` --- ``` data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A//... ``` > example : > `data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20512%20512%22%3E%3Cpath%20d%3D%22M224%20387.814V512L32%20320l192-192v126.912C447.375%20260.152%20437.794%20103.016%20380.93%200%20521.287%20151.707%20491.48%20394.785%20224%20387.814z%22%2F%3E%3C%2Fsvg%3E` ## css ```css .logo { background: url(\"data:image/svg+xml;base64,[data]\"); } ``` ```css li { background: url(data:image/gif;base64,R0lGODlhEAAQAMQAAORHHOVSKudfOulrSOp3WOyDZu6QdvCchPGolfO0o/XBs/fNwfjZ0frl3/zy7////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAkAABAALAAAAAAQABAAAAVVICSOZGlCQAosJ6mu7fiyZeKqNKToQGDsM8hBADgUXoGAiqhSvp5QAnQKGIgUhwFUYLCVDFCrKUE1lBavAViFIDlTImbKC5Gm2hB0SlBCBMQiB0UjIQA7) no-repeat left center; padding: 5px 0 5px 25px; } ``` > or this uses a fallback url ```css html { background-image: url(data:image/jpg;base64,/9j/4RkARXhpZgAATU0AKgAAAAgAB6f/9k=), url(/TBEX/resource/src/815-teams-north-gate-path.jpg); background-size: cover; background-repeat: no-repeat; background-position: center; background-attachment: fixed; height: 100%; } ``` ",
    "url": "/HTML&CSS/Images",
    
    "relUrl": "/HTML&CSS/Images"
  },"109": {
    "doc": "Install",
    "title": "Install",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Windows10 ",
    "url": "/DockerNotes/Install",
    
    "relUrl": "/DockerNotes/Install"
  },"110": {
    "doc": "IntelliJNotes",
    "title": "IntelliJNotes",
    "content": "# [REPO](https://github.com/14paxton/IntelliJNotes) ",
    "url": "/IntelliJNotes/",
    
    "relUrl": "/IntelliJNotes/"
  },"111": {
    "doc": "InterviewQ&A",
    "title": "InterviewQ&A",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Code To Know --- ## FrontEnd_CSS --- ## Git --- ## HTTP_Verbs --- ## JAVA --- ## JS_20InterviewQuestions --- ## JS_Cheatsheet --- ## JS_InterviewQuestions --- ## Java_200InterviewQuestions --- ## Java_CoreAndA --- ## Java_CoreConcepts --- ## Java_Hibernate --- ## Java_Interview_QnA --- ## Java_SpringBoot_InterviewQuestions --- ## Java_SpringBoot_Questions --- ## Management_Agile_Methods --- ## MicroSerevice_Database_Patterns --- ## React‐Questions --- ## SQL_Concepts ",
    "url": "/GitHubPages/InterviewQ&A",
    
    "relUrl": "/GitHubPages/InterviewQ&A"
  },"112": {
    "doc": "JQ",
    "title": "JQ",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Get My Sync Folder ```shell (.roots.bookmark_bar.children[] | select(.name == \"ComputerShit\")).children[] | select(.name == \"Sync\") ``` # Resources - [DevDocs](https://devdocs.io/jq/) - [Examples](https://sher-chowdhury.medium.com/working-with-json-using-jq-ce06bae5545a) ",
    "url": "/Linux/JQ",
    
    "relUrl": "/Linux/JQ"
  },"113": {
    "doc": "JUnit",
    "title": "JUnit",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Maven --- ## [configure](https://maven.apache.org/surefire/maven-surefire-plugin/examples/junit-platform.html) --- ## [StatelessTestsetInfoReporter](https://maven.apache.org/surefire/surefire-extensions-api/apidocs/org/apache/maven/surefire/extensions/StatelessTestsetInfoReporter.html) ```xml org.apache.maven.plugins maven-surefire-plugin 3.0.0-M4 true false 3.0 true true true true . ``` ",
    "url": "/TestingFrameworks/JUnit",
    
    "relUrl": "/TestingFrameworks/JUnit"
  },"114": {
    "doc": "Jackson",
    "title": "Jackson",
    "content": "{: .text-delta } 1. TOC {:toc} --- # [Jackson](https://github.com/FasterXML/jackson-docs) # Text Manipulation ## toString and toMap ```java public class JacksonToStuff { @JsonValue @Override public Map toMap() { Map raw = new HashMap(); raw.put(\"yourField\", this.yourField.toPlainString()); /* more fields */ return raw; } @JsonValue @Override public String toString() { // add JSON processing exception handling, dropped for readability return new ObjectMapper().writeValueAsString(this.toMap()); } } ``` ### Pass a string as JSON ```java public class Data { private Map record; public Map getRecord() { return record; } public void setRecord(Map record) { this.record = record; } @Override public String toString() { return \"Data{\" + \"record=\" + record + '}'; } } ``` ## JSON string to JsonNode ```java public class StringToNode { Map agencyMap = Map.of( \"name\", \"Agencia Prueba\", \"phone1\", \"1198788373\", \"address\", \"Larrea 45 e/ calligaris y paris\", \"number\", 267, \"enable\", true, \"location\", Map.of(\"id\", 54), \"responsible\", Set.of(Map.of(\"id\", 405)), \"sellers\", List.of(Map.of(\"id\", 605)) ); ObjectNode agencyNode = new ObjectMapper().valueToTree(agencyMap); } ``` # Common Config Settings ```yml jackson: property-naming-strategy: LOWER_CAMEL_CASE locale: en_US date-format: yyyy-MM-dd'T'HH:mm:ss.SSS mapper: ACCEPT_CASE_INSENSITIVE_ENUMS: true serialization: INDENT_OUTPUT: false WRITE_DATE_TIMESTAMPS_AS_NANOSECONDS: false WRITE_DATES_AS_TIMESTAMPS: false deserialization: FAIL_ON_UNKNOWN_PROPERTIES: false READ_DATE_TIMESTAMPS_AS_NANOSECONDS: false serialization-inclusion: non_null ``` # References ### [jackson feature docs](https://github.com/FasterXML/jackson-databind/wiki/JacksonFeatures) #### [micronaut jackson config docs](https://docs.micronaut.io/latest/guide/#_jackson_configuration) ## Examples - [Annotations](https://www.baeldung.com/jackson-advanced-annotations) - [More Annotations](https://www.baeldung.com/jackson-annotations#bd-3-jsonanysetter) ",
    "url": "/Micronotes/Jackson",
    
    "relUrl": "/Micronotes/Jackson"
  },"115": {
    "doc": "Java",
    "title": "Java",
    "content": "___ ## [Repo](https://github.com/14paxton/JavaNotes) --- # Design Patterns ![JavaDesignPaterns.png](..%2Fassets%2Fimages%2FJavaDesignPaterns.png) ",
    "url": "/JavaNotes/Java",
    
    "relUrl": "/JavaNotes/Java"
  },"116": {
    "doc": "JavaOnMac",
    "title": "JavaOnMac",
    "content": "{: .text-delta } 1. TOC {:toc} --- # check if java is arm64 ```shell cat `which java` | file - ``` > output ``` /dev/stdin: Mach-O 64-bit executable arm64 ``` - or ``` /dev/stdin: Mach-O 64-bit executable x86_64 ``` On Mac OS X 10.5 or later, we can use: /usr/libexec/java_home to return the location of the default JDK : /Library/Java/JavaVirtualMachines/jdk-16.jdk/Contents/Home # find all installed JDKs. ```shell /usr/libexec/java_home -V ``` ```shell Matching Java Virtual Machines (4): 16 (x86_64) \"Oracle Corporation\" - \"OpenJDK 16-ea\" /Library/Java/JavaVirtualMachines/jdk-16.jdk/Contents/Home 15.0.1 (x86_64) \"UNDEFINED\" - \"OpenJDK 15.0.1\" /usr/local/Cellar/openjdk/15.0.1/libexec/openjdk.jdk/Contents/Home 14.0.2 (x86_64) \"AdoptOpenJDK\" - \"AdoptOpenJDK 14\" /Library/Java/JavaVirtualMachines/adoptopenjdk-14.jdk/Contents/Home 1.8.0_275 (x86_64) \"UNDEFINED\" - \"OpenJDK 8\" /usr/local/Cellar/openjdk@8/1.8.0+275/libexec/openjdk.jdk/Contents/Home /Library/Java/JavaVirtualMachines/jdk-16.jdk/Contents/Home ``` # run a specified JDK command. ``` /usr/libexec/java_home -v1.8 ``` ``` /usr/local/Cellar/openjdk@8/1.8.0+275/libexec/openjdk.jdk/Contents/Home ``` # set the JAVA_HOME environment variable - On macOS 10.15 Catalina and later, the zsh is the default Terminal shell, and we can in either `~/.zshenv` or `~/.zshrc` 1. Confirm you have JDK by typing ```shell which java ``` output -> `/usr/bin/java` 2. Check you have the needed version of Java, by typing `java -version` `JAVA_HOME` is essentially the full path of the directory that contains a sub-directory named `bin` which in turn contains the java. For Mac OSX it is `/Library/Java/Home` 3. Set JAVA_HOME ` export JAVA_HOME=/Library/Java/Home` 4. `echo $JAVA_HOME` on Terminal to confirm the path - Note that this sets JAVA_HOME only for this session. If you want it to persist, you will have to add the command to your `~/.profile file` 1. `vim .profile` 2. add this to the end of the .profile file: `JAVA_HOME=/Library/Java/Home` `export JAVA_HOME;` 3. `nano ~/.zshenv` 4. Add the following content `export JAVA_HOME=$(/usr/libexec/java_home)` 5. Source the file and print the $JAVA_HOME `source ~/.zshenv` `echo $JAVA_HOME` output -> `/Library/Java/JavaVirtualMachines/jdk-16.jdk/Contents/Home` # Slow Java app 1. you need to find the hostname of your Mac. You do this from System Preferences. Click the Sharing icon in System Preferences. 2. You will see a box that shows the Computer Name, under that will be the hostname ending in `.local` That's what you will need, so take note of it. In my case it was `Enzyme.local` 3. The next step is to update your `/etc/hosts` file. This must be done as root, so at the Terminal, type in ```shell sudo vi /etc/hosts ``` This will ask for your password... Add the hostname you noted from earlier at the end of lines that start with `127.0.0.1` and `::1`. In the end this is what my `/etc/hosts` file looked like: ```text 127.0.0.1 TPLNK-BPAXTON3.local 255.255.255.255 broadcasthost ::1 TPLNK-BPAXTON3.local` ``` ",
    "url": "/MacNotes/JavaOnMac",
    
    "relUrl": "/MacNotes/JavaOnMac"
  },"117": {
    "doc": "JavaScript",
    "title": "JavaScript",
    "content": "# [REPO](https://github.com/14paxton/javascript) # [Primitive Types and Data Structures](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures) | Type | typeof return value | Object wrapper |:---------:|:-------------------:|:--------------:| Null | \"object\" | N/A | Undefined | \"undefined\" | N/A | Boolean | \"boolean\" | Boolean | Number | \"number\" | Number | BigInt | \"bigint\" | BigInt | String | \"string\" | String | Symbol | \"symbol\" | Symbol | # Cheat Sheet ![javascriptCheatSheet.png](..%2Fassets%2Fimages%2FjavascriptCheatSheet.png) ![javascriptCheatSheet2.png](..%2Fassets%2Fimages%2FjavascriptCheatSheet2.png) ![javascriptCheatSheet3.png](..%2Fassets%2Fimages%2FjavascriptCheatSheet3.png) ![javascriptCheatSheet4.png](..%2Fassets%2Fimages%2FjavascriptCheatSheet4.png) # Key Value Events / Keyboard Events Name and Code | Key Name | event.which | event.key | event.code | Notes | . | backspace | 8 | Backspace | Backspace | | . | tab | 9 | Tab | Tab | | . | enter | 13 | Enter | Enter | | . | shift(left) | 16 | Shift | ShiftLeft | event.shiftKey is true | . | shift(right) | 16 | Shift | ShiftRight | event.shiftKey is true | . | ctrl(left) | 17 | Control | ControlLeft | event.ctrlKey is true | . | ctrl(right) | 17 | Control | ControlRight | event.ctrlKey is true | . | alt(left) | 18 | Alt | AltLeft | event.altKey is true | . | alt(right) | 18 | Alt | AltRight | event.altKey is true | . | pause/break | 19 | Pause | Pause | | . | caps lock | 20 | CapsLock | CapsLock | | . | escape | 27 | Escape | Escape | | . | space | 32 | | Space | The event.key value is a single space. | . | page up | 33 | PageUp | PageUp | | . | page down | 34 | PageDown | PageDown | | . | end | 35 | End | End | | . | home | 36 | Home | Home | | . | left arrow | 37 | ArrowLeft | ArrowLeft | | . | up arrow | 38 | ArrowUp | ArrowUp | | . | right arrow | 39 | ArrowRight | ArrowRight | | . | down arrow | 40 | ArrowDown | ArrowDown | | . | print screen | 44 | PrintScreen | PrintScreen | | . | insert | 45 | Insert | Insert | | . | delete | 46 | Delete | Delete | | . | 0 | 48 | 0 | Digit0 | | . | 1 | 49 | 1 | Digit1 | | . | 2 | 50 | 2 | Digit2 | | . | 3 | 51 | 3 | Digit3 | | . | 4 | 52 | 4 | Digit4 | | . | 5 | 53 | 5 | Digit5 | | . | 6 | 54 | 6 | Digit6 | | . | 7 | 55 | 7 | Digit7 | | . | 8 | 56 | 8 | Digit8 | | . | 9 | 57 | 9 | Digit9 | | . | a | 65 | a | KeyA | | . | b | 66 | b | KeyB | | . | c | 67 | c | KeyC | | . | d | 68 | d | KeyD | | . | e | 69 | e | KeyE | | . | f | 70 | f | KeyF | | . | g | 71 | g | KeyG | | . | h | 72 | h | KeyH | | . | i | 73 | i | KeyI | | . | j | 74 | j | KeyJ | | . | k | 75 | k | KeyK | | . | l | 76 | l | KeyL | | . | m | 77 | m | KeyM | | . | n | 78 | n | KeyN | | . | o | 79 | o | KeyO | | . | p | 80 | p | KeyP | | . | q | 81 | q | KeyQ | | . | r | 82 | r | KeyR | | . | s | 83 | s | KeyS | | . | t | 84 | t | KeyT | | . | u | 85 | u | KeyU | | . | v | 86 | v | KeyV | | . | w | 87 | w | KeyW | | . | x | 88 | x | KeyX | | . | y | 89 | y | KeyY | | . | z | 90 | z | KeyZ | | . | left window key | 91 | Meta | MetaLeft | event.metaKey is true | . | right window key | 92 | Meta | MetaRight | event.metaKey is true | . | select key (Context Menu) | 93 | ContextMenu | ContextMenu | | . | numpad 0 | 96 | 0 | Numpad0 | | . | numpad 1 | 97 | 1 | Numpad1 | | . | numpad 2 | 98 | 2 | Numpad2 | | . | numpad 3 | 99 | 3 | Numpad3 | | . | numpad 4 | 100 | 4 | Numpad4 | | . | numpad 5 | 101 | 5 | Numpad5 | | . | numpad 6 | 102 | 6 | Numpad6 | | . | numpad 7 | 103 | 7 | Numpad7 | | . | numpad 8 | 104 | 8 | Numpad8 | | . | numpad 9 | 105 | 9 | Numpad9 | | . | multiply | 106 | * | NumpadMultiply | | . | add | 107 | + | NumpadAdd | | . | subtract | 109 | - | NumpadSubtract | | . | decimal point | 110 | . | NumpadDecimal | | . | divide | 111 | / | NumpadDivide | | . | f1 | 112 | F1 | F1 | | . | f2 | 113 | F2 | F2 | | . | f3 | 114 | F3 | F3 | | . | f4 | 115 | F4 | F4 | | . | f5 | 116 | F5 | F5 | | . | f6 | 117 | F6 | F6 | | . | f7 | 118 | F7 | F7 | | . | f8 | 119 | F8 | F8 | | . | f9 | 120 | F9 | F9 | | . | f10 | 121 | F10 | F10 | | . | f11 | 122 | F11 | F11 | | . | f12 | 123 | F12 | F12 | | . | num lock | 144 | NumLock | NumLock | | . | scroll lock | 145 | ScrollLock | ScrollLock | | . | audio volume mute | 173 | AudioVolumeMute | | ⚠️ The event.which value is 181 in Firefox. Also FF provides the code value as, VolumeMute | . | audio volume down | 174 | AudioVolumeDown | | ⚠️ The event.which value is 182 in Firefox. Also FF provides the code value as, VolumeDown | . | audio volume up | 175 | AudioVolumeUp | | ⚠️ The event.which value is 183 in Firefox. Also FF provides the code value as, VolumeUp | . | media player | 181 | LaunchMediaPlayer | | ⚠️ The ️event.which value is 0(no value) in Firefox. Also FF provides the code value as, MediaSelect | . | launch application 1 | 182 | LaunchApplication1 | | ⚠️ The ️event.which value is 0(no value) in Firefox. Also FF provides the code value as, LaunchApp1 | . | launch application 2 | 183 | LaunchApplication2 | | ⚠️ The ️event.which value is 0(no value) in Firefox. Also FF provides the code value as, LaunchApp2 | . | semi-colon | 186 | ; | Semicolon | ⚠️ The event.which value is 59 in Firefox | . | equal sign | 187 | = | Equal | ⚠️ The event.which value is 61 in Firefox | . | comma | 188 | , | Comma | | . | dash | 189 | - | Minus | ⚠️ The event.which value is 173 in Firefox | . | period | 190 | . | Period | | . | forward slash | 191 | / | Slash | | . | Backquote/Grave accent | 192 | ` | Backquote | | . | open bracket | 219 | [ | BracketLeft | | . | back slash | 220 | \\ | Backslash | | . | close bracket | 221 | ] | BracketRight | | . | single quote | 222 | ' | Quote | | . ",
    "url": "/JavaScript/",
    
    "relUrl": "/JavaScript/"
  },"118": {
    "doc": "Javascript",
    "title": "Javascript",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Jest ## config in package.json > this is transformIgnorePatterns for jest, defaultPhrases used for dateRangePicker needed to be ignored for jest and adding a workaround for using a > webworker ```json { \"jest\": { \"transformIgnorePatterns\": [ \"/node_modules/defaultPhrases.js\" ], \"transform\": { \"^.+\\\\.worker.[t|j]sx?$\": \"workerloader-jest-transformer\" } } } ``` ## Modify existing object in test ```javascript const modifiedProps = JSON.parse(JSON.stringify(defaultProps)); ``` ## fire button example ```javascript import React from \"react\"; import {render, fireEvent} from \"react-testing-library\"; import Counter from \"../lessons/02-testing-hooks\"; test(\"counter increments the count\", () => { const {container} = render(); const button = container.firstChild; expect(button.textContent).toBe(\"0\"); fireEvent.click(button); expect(button.textContent).toBe(\"1\"); }); ``` ## use mount to fully render, > can only set props on root, use dive to access child components > To test a component (with Jest) that containsand withRouter you need to import Router in you test ```javascript import {BrowserRouter as Router} from \"react-router-dom\"; it(\"containts stuff\", () => { const wrapper = mount( {\" \"} {\" \"} ,); console.log(wrapper.find(\"FooterContainer\").html()); expect(wrapper .find('a[href=\"https://talentmine.talentplus.com/s/contactsupport\"]') .text(),).toBe(\"Contact Support \"); }); ``` --- ## Use the object property selector to find nodes > by passing in an object that matches the property of a node as a selectoin ```javascript expect(wrapper.find({alt: \"logo\"}).text()).toBe(\"Welcome to React\"); ``` - > [Shallow Wrapper](https://enzymejs.github.io/enzyme/docs/api/ShallowWrapper/setProps.html) ```javascript it(\"test with enzyme\", () => { const container = shallow(,); container.setProps({ owner: { id: 123, accountInfo: {clientSetupId: 1}, userInfo: { firstName: \"John\", lastName: \"Wayne\", preferredName: \"TheDuke\", }, }, }); console.log(container .find({ \"data-qa\": \"goals-creation-title-name\", }) .at(0) .html(),); console.log(container .find({ \"data-qa\": \"goals-creation-title-name\", }) .html(),); console.log(container .find({ \"data-qa\": \"goals-creation-title-name\", }) .text(),); console.log(container.debug()); console.log(container.find(\"[variant='h5']\").html()); expect(container .find({ \"data-qa\": \"goals-creation-title-name\", }) .exists(),).toBe(true); expect(container .find({ \"data-qa\": \"goals-creation-title-name\", }) .text(),).toBe(\"Creating Goal for TheDuke Wayne \"); }); ``` --- # REACT TESTING LIB ## MUTATION OBSERVER ```js global.MutationObserver = class { constructor(callback) {} disconnect() {} observe(element, initObject) {} } ``` > or ```javascript global.MutationObserver = MutationObserver; HTMLCanvasElement; HTMLCanvasElement.prototype.getContext = jest.fn(); ``` ## use test-id in material-ui text-field ```javascript import \"@testing-library/jest-dom\"; import React from \"react\"; import {createMount} from \"@material-ui/core/test-utils\"; import Button from \"@material-ui/core/Button\"; import Typography from \"@material-ui/core/Typography\"; import EditProfileForm from \"./editForm\"; import { render as testRender, fireEvent, screen, getByText, } from \"@testing-library/react\"; const props = { handleChange: jest.fn(), onSubmit: jest.fn(), bio: \"test\", gravatar: \"https://i.pravatar.cc/150?img=3\", handleBio: jest.fn(), handleGravatar: jest.fn(), }; describe(\"\", () => { let wrapper; let mount; beforeEach(() => { mount = createMount(); wrapper = mount(); }); // must be called first it(\"calls handleBio on bio TextField change\", () => { const input = screen.getByTestId(\"bio\"); fireEvent.change(input, {target: {value: \"new value\"}}); expect(props.handleBio).toHaveBeenCalledTimes(1); }); it(\"should render \", () => { expect(wrapper).toHaveLength(1); }); it(\"should check header title \", () => { expect(wrapper.find(Typography).at(0)).toHaveLength(1); expect(wrapper.find(Typography).at(0).text()).toContain(\"Edit Profile\"); }); it(\"should test bio prop\", () => { expect(wrapper.props().bio).toContain(\"test\"); }); it(\"should test gravtar prop\", () => { const link = \"https://i.pravatar.cc/150?img=3\"; expect(wrapper.props().gravatar).toContain(link); }); it(\"should test handleChange props\", () => { const title = \"Test\"; expect(wrapper.props().handleChange({ target: { value: title, }, }),); expect(props.handleChange).toHaveBeenCalled(); }); it(\"should test onSubmit prop\", () => { // console.log(wrapper.find(TextField).debug()); const submit = jest.fn(); wrapper.simulate(\"submit\", {submit}); expect(props.onSubmit).toBeCalled(); }); it(\"should test button click\", () => { const button = wrapper.find(Button); button.simulate(\"click\"); expect(props.onSubmit).toBeCalled(); }); }); ``` - > ### And then passing data - testid as an input prop on text field like this ```jsx ``` ## Use queryBy to test if something should be null ```jsx it(\"ellipsis should not appear for shared result viewer role\", async () => { render( {\" \"} {\" \"} {\" \"} {\" \"} ,); const ellipsisColumn = await waitFor(() => screen.queryByTestId(\"ellipses-action-buttons-members-table\"),); expect(ellipsisColumn).toBeNull(); }); ``` ## Firing events ```jsx import userEvent from \"@testing-library/user-event\"; fireEvent.change(input, { target: { value: \"GroupA\", }, }); userEvent.type(input, \"GroupA\"); ``` ## Getting component ```jsx const {getByTestId, queryByTestId} = render(,); ``` - > ### Testing component ```jsx expect(input).toHaveValue(\"GROUP\"); ``` ## Get by TagName / Element Type / NodeName ```javascript screen.getByText((_content, element) => element?.tagName.toLowerCase() === 'svg'); ``` ## Check TagName / Element Type / NodeName ```javascript it('should render as div when the \"as\" attribute is passed with a value of \"div\"', () => { render() expect(screen.getByTestId('test-button').nodeName.toLowerCase()).toBe('div') }) ``` ## React-Hook-Forms ### FormProvider Wrapper ```tsx import {render, renderHook} from '@testing-library/react'; import {ReactElement, ReactNode} from 'react'; import {FormProvider, useForm} from 'react-hook-form'; interface IWrapperProps { children?: ReactNode; props?: object; } const renderReactHookForm = (ui: ReactElement, {defaultValues = {}} = {}) => { const {result} = renderHook(() => { return useForm(defaultValues); }); const Wrapper = ({children}: IWrapperProps) => { return ({children}); }; return { ...render(ui, {wrapper: Wrapper}) }; }; export default renderReactHookForm; ``` ## Workarounds ### tooltip calling document.createRange - > otherwise will get error: `Uncaught [TypeError: document.createRange is not a function]` ```jsx global.document.createRange = () => ({ setStart: () => {}, setEnd: () => {}, commonAncestorContainer: { nodeName: \"BODY\", ownerDocument: document, }, }); ``` # Enzyme - [selector](https://enzymejs.github.io/enzyme/docs/api/selector.html) - [selector](https://enzymejs.github.io/enzyme/docs/api/ReactWrapper/find.html) ```jsx expect(wrapper.find(\".App-intro\").exists()).toBe(true); expect(wrapper.find(\"ul\").children().length).toBe(3); expect(wrapper.find(\"ul\").hasClass(\"tyler\")).toBe(true); expect(wrapper.find(\"h1\").text()).toBe(\"Welcome to React\"); expect(wrapper.find('[href=\"tyler\"]').text()).toBe(\"WelcometoReact\"); expect(wrapper.find('[href=\"tyler ~.clark\"]').text()).toBe(\"Welcome to React\"); expect(wrapper.find('[text=\"Sometitle\"]').text()).toBe(\"Welcome to React\"); ``` ",
    "url": "/TestingFrameworks/JavascriptTesting",
    
    "relUrl": "/TestingFrameworks/JavascriptTesting"
  },"119": {
    "doc": "Jekyll",
    "title": "Jekyll",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Resources ## [Setup](https://docs.github.com/en/pages/setting-up-a-github-pages-site-with-jekyll/about-github-pages-and-jekyll) ## [Configuration](https://jekyllrb.com/docs/configuration/) ## [GitHubActions](https://jekyllrb.com/docs/continuous-integration/github-actions/) ## [Jekyll Docker Image](https://github.com/envygeeks/jekyll-docker/blob/master/README.md) ## [FrontMatter Defaults](https://jekyllrb.com/docs/configuration/front-matter-defaults/) ## [Markdown Processor](https://jekyllrb.com/docs/configuration/markdown/) ## [Kramdown](https://kramdown.gettalong.org/installation.html) ## [QuickRef](https://kramdown.gettalong.org/quickref.html) ## [Kramdown markdown cheat sheet](https://aoterodelaroza.github.io/devnotes/kramdown-cheatsheet/) ## [Rouge - Jekyll's Default Highlighter](https://rouge.jneen.net/) ## [GitHub](https://github.com/rouge-ruby/rouge) ## [Jekyll Docs For Code snippet highlighting](https://jekyllrb.com/docs/liquid/tags/#code-snippet-highlighting) ## [GFM(GitHub Flavored Markdown)](https://github.github.com/gfm/#what-is-github-flavored-markdown-) ## [Jekyll GitHub metadata Configuration](https://github.com/jekyll/github-metadata/blob/main/docs/configuration.md) --- # [Roge Syntax Highlighter used by Jekyll](https://github.com/rouge-ruby/rouge) ## [Docs](https://rouge-ruby.github.io/docs/) ## [List Of Supported Languages and Lexers ](https://github.com/rouge-ruby/rouge/wiki/List-of-supported-languages-and-lexers) ## [Rouge Language Lexers GitHub Repo](https://github.com/rouge-ruby/rouge/tree/master/lib/rouge/lexers) ### [Rouge Syntax Highlighting Languages](https://rouge-ruby.github.io/docs/file.Languages.html) # Jekyll Commands > # [CLI](https://jekyllrb.com/docs/usage/) Jekyll is a simple, blog-aware, static site generator. ## Resources - [Jekyll official site](https://jekyllrb.com/) - [Build A Blog With Jekyll And GitHub Pages](https://www.smashingmagazine.com/2014/08/build-blog-jekyll-github-pages/) - [Jekyll Build CLI Options](https://jekyllrb.com/docs/configuration/options/#build-command-options) ## Requirements --- Install [Ruby](https://www.ruby-lang.org/en/downloads/) on your machine. ## Installing Jekyll `$ gem install jekyll` ## Quickstart: ```bash $ jekyll new my-site $ cd my-site $ jekyll build $ jekyll serve # => Browse your site @ http://localhost:4000 ``` ## [Setting up your GitHub Pages site locally with Jekyll](https://help.github.com/articles/setting-up-your-github-pages-site-locally-with-jekyll/) Install [Bundler](http://bundler.io/): `$ gem install bundler` Specify your dependencies in a Gemfile in your project's root: ```ruby source 'https://rubygems.org' gem 'github-pages' ``` Install all of the required gems from your specified sources: `$ bundle install` **Other Bundler commands** `$ bundle install --without [ [ Build site using default `_config.yml` file: `$ bundle exec jekyll clean` or `$ rm -rf _site`- Deletes Jekyll generated old `./_site` cache folder `$ bundle exec jekyll build` - Build site will be generated into `./_site` `$ JEKYLL_ENV=production bundle exec jekyll build` - Build site as production, default is development `$ bundle exec jekyll build --watch` - Build site into `./_site` and for watch changes `$ bundle exec jekyll serve` - Serve site at `http://localhost:4000` > Override config (`_config_dev.yml`) for local development test: `$ bundle exec jekyll build --config _config.yml,_config_dev.yml` - Build site `$ bundle exec jekyll build --config _config.yml,_config_dev.yml --watch` - Build site and watch changes `$ bundle exec jekyll serve --config _config.yml,_config_dev.yml` - Serve site at `http://localhost:4000` `$ JEKYLL_GITHUB_TOKEN=abc123def456 [bundle exec] jekyll serve` - Serve site authenticating GitHub for [github-metadata](https://github.com/jekyll/github-metadata) # [YML Config](https://jekyllrb.com/docs/configuration/default/) ## Where things are ```yaml source: . destination: ./_site collections_dir: . plugins_dir: _plugins # takes an array of strings and loads plugins in that order layouts_dir: _layouts data_dir: _data includes_dir: _includes sass: sass_dir: _sass collections: posts: output: true ``` ## Handling Reading ```yaml safe: false include: [ \".htaccess\" ] exclude: [ \"Gemfile\", \"Gemfile.lock\", \"node_modules\", \"vendor/bundle/\", \"vendor/cache/\", \"vendor/gems/\", \"vendor/ruby/\", ] keep_files: [ \".git\", \".svn\" ] encoding: \"utf-8\" markdown_ext: \"markdown,mkdown,mkdn,mkd,md\" strict_front_matter: false ``` ## Filtering Content ```yaml show_drafts: null limit_posts: 0 future: false unpublished: false ``` ## Plugins ```yaml whitelist: [ ] plugins: [ ] ``` ## Conversion ```yaml markdown: kramdown highlighter: rouge lsi: false excerpt_separator: \"\\n\\n\" incremental: false ``` ## Serving ```yaml detach: false port: 4000 host: 127.0.0.1 baseurl: \"\" # does not include hostname show_dir_listing: false ``` ## Outputting ```yaml permalink: date paginate_path: /page:num timezone: null quiet: false verbose: false defaults: [ ] liquid: error_mode: warn strict_filters: false strict_variables: false ``` ## Markdown Processors > [Options](https://kramdown.gettalong.org/options.html) ```yaml kramdown: auto_ids: true entity_output: as_char toc_levels: [ 1, 2, 3, 4, 5, 6 ] smart_quotes: lsquo,rsquo,ldquo,rdquo input: GFM hard_wrap: false footnote_nr: 1 show_warnings: false ``` --- # [Metadata](https://jekyll.github.io/github-metadata/site.github/) ```json { \"versions\": { \"jekyll\": \"\", \"kramdown\": \"\", \"liquid\": \"\", \"maruku\": \"\", \"rdiscount\": \"\", \"redcarpet\": \"\", \"RedCloth\": \"\", \"jemoji\": \"\", \"jekyll-mentions\": \"\", \"jekyll-redirect-from\": \"\", \"jekyll-sitemap\": \"\", \"github-pages\": \"\", \"ruby\": \"\" }, \"hostname\": \"github.com\", \"pages_hostname\": \"github.io\", \"api_url\": \"https://api.github.com\", \"help_url\": \"https://help.github.com\", \"environment\": \"dotcom\", \"pages_env\": \"dotcom\", \"public_repositories\": [ \" Repository Objects\" ], \"organization_members\": [ \"User Objects\" ], \"build_revision\": \"cbd866ebf142088896cbe71422b949de7f864bce\", \"project_title\": \"metadata-example\", \"project_tagline\": \"A GitHub Pages site to showcase repository metadata\", \"owner_name\": \"github\", \"owner_url\": \"https://github.com/github\", \"owner_gravatar_url\": \"https://github.com/github.png\", \"repository_url\": \"https://github.com/github/metadata-example\", \"repository_nwo\": \"github/metadata-example\", \"repository_name\": \"metadata-example\", \"zip_url\": \"https://github.com/github/metadata-example/zipball/gh-pages\", \"tar_url\": \"https://github.com/github/metadata-example/tarball/gh-pages\", \"clone_url\": \"https://github.com/github/metadata-example.git\", \"releases_url\": \"https://github.com/github/metadata-example/releases\", \"issues_url\": \"https://github.com/github/metadata-example/issues\", \"wiki_url\": \"https://github.com/github/metadata-example/wiki\", \"language\": null, \"is_user_page\": false, \"is_project_page\": true, \"show_downloads\": true, \"url\": \"http://username.github.io/metadata-example || (or the CNAME)\", \"baseurl\": \"/metadata-example\", \"contributors\": [ \"User Objects\" ], \"releases\": [ \"Release Objects\" ], \"latest_release\": [ \"Release Object\" ], \"private\": false, \"archived\": false, \"disabled\": false, \"license\": { \"key\": \"mit\", \"name\": \"MIT License\", \"spdx_id\": \"MIT\", \"url\": \"https://api.github.com/licenses/mit\" }, \"source\": { \"branch\": \"gh-pages\", \"path\": \"/\" } } ``` ",
    "url": "/GitHub/Jekyll",
    
    "relUrl": "/GitHub/Jekyll"
  },"120": {
    "doc": "Kubernetes",
    "title": "Kubernetes",
    "content": "___ --- # Architecture ![kubernetes.gif](../assets/images/kubernetes.gif) ",
    "url": "/Kubernetes",
    
    "relUrl": "/Kubernetes"
  },"121": {
    "doc": "LINQ",
    "title": "LINQ",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Quick Snips ## use in foreach ```c# foreach (DetectIntentResponse jsonPayload in from row in rawData select JsonConvert.DeserializeObject(row.JsonPayload, enumConverter) into json2 let parserSettings = JsonParser.Settings.Default.WithIgnoreUnknownFields(true) let jParser = new JsonParser(parserSettings) select jParser.Parse(json2.GetString())) { [code] } ``` ## modify list ```csharp var c = loggingServiceV2Client.ListLogEntriesAsync(resourceNames: query.ResourceNames, filter: query.Filter, orderBy: query.OrderBy) .ToListAsync() .Result .AsParallel() .Select(selector: RawData.CreateInstance) .ToList() .GetRange(index: 1, count: 10); ``` ```cs List c = loggingServiceV2Client.ListLogEntries(resourceNames: query.ResourceNames, filter: query.Filter, orderBy: query.OrderBy) .AsParallel() .Select(selector: RawData.CreateInstance) .ToList(); ``` ```csharp var c = loggingServiceV2Client .ListLogEntries(resourceNames: query.ResourceNames, filter: query.Filter, orderBy: query.OrderBy) .AsParallel() .Select(selector: entry => RawData.CreateInstance(timestamp: entry.ReceiveTimestamp, severity: entry.Severity, type: entry?.Resource?.Type, logName: entry.LogName, textPayload: entry?.TextPayload, protoPayload: entry?.ProtoPayload, jsonPayload: entry?.JsonPayload)) .ToList(); ``` --- # Examples ```csharp static void Main(string[] args){ IEnumerable data = Enumerable.Range(1, 50); IEnumerable method = // IEnumerable data.Where(x => x % 2 == 0).Select(x => x.ToString()); IEnumerable query = // IEnumerable from d in data where d % 2 == 0 select d.ToString(); Debugger.Break(); var projection = from d in data select new { Even = d % 2 == 0, Odd = !(d % 2 == 0), Value = d }; string[] letters = { \"A\", \"C\", \"B\", \"E\", \"Q\" }; Debugger.Break(); IOrderedEnumerable sortAsc = from d in data orderby d select d; IOrderedEnumerable sortDesc = data.OrderByDescending(x => x); Debugger.Break(); // candy string[] values = { \"A\", \"B\", \"A\", \"C\", \"A\", \"D\" }; IEnumerable distinct = values.Distinct(); string first = values.First(); string firstOr = values.FirstOrDefault(); string last = values.Last(); IEnumerable page = values.Skip(2).Take(2); Debugger.Break(); // aggregates IEnumerable numbers = Enumerable.Range(1, 50); bool any = numbers.Any(x => x % 2 == 0); int count = numbers.Count(x => x % 2 == 0); int sum = numbers.Sum(); int max = numbers.Max(); int min = numbers.Min(); double avg = numbers.Average(); Debugger.Break(); Dictionary dictionary = new Dictionary { { \"1\", \"B\" }, { \"2\", \"A\" }, { \"3\", \"B\" }, { \"4\", \"A\" } }; var group = // IEnumerable> from d1 in dictionary group d1 by d1.Value into g select new { g.Key, Members = g }; Debugger.Break(); Dictionary dictionary1 = new Dictionary { { \"1\", \"B\" }, { \"2\", \"A\" }, { \"3\", \"B\" }, { \"4\", \"A\" } }; Dictionary dictionary2 = new Dictionary { { \"5\", \"B\" }, { \"6\", \"A\" }, { \"7\", \"B\" }, { \"8\", \"A\" } }; var join = from d1 in dictionary1 join d2 in dictionary2 on d1.Value equals d2.Value select new { Key1 = d1.Key, Key2 = d2.Key, d1.Value }; Debugger.Break(); } ``` ",
    "url": "/DotNetNotes/LINQ",
    
    "relUrl": "/DotNetNotes/LINQ"
  },"122": {
    "doc": "LetterOfRecommendation",
    "title": "LetterOfRecommendation",
    "content": "![LetterOfRecommendation.jpg](https://raw.githubusercontent.com/14paxton/14paxton.github.io/master/JobPrep/assets/documents/LetterOfRecommendation.jpg) ",
    "url": "/GitHubPages/LetterOfRecommendation",
    
    "relUrl": "/GitHubPages/LetterOfRecommendation"
  },"123": {
    "doc": "Linux",
    "title": "Linux",
    "content": "{: .text-delta } 1. TOC {:toc} # [REPO](https://github.com/14paxton/Linux) | --- ",
    "url": "/Linux/",
    
    "relUrl": "/Linux/"
  },"124": {
    "doc": "Liquibase",
    "title": "Liquibase",
    "content": "--- {: .text-delta } 1. TOC {:toc} --- --- # Available DataTypes ## CODE USED TO GET TYPES ```groovy @Grab('org.liquibase:liquibase-core:3.5.1') import liquibase.database.core.* import liquibase.datatype.core.* def datatypes = BooleanType, TinyIntType, IntType, MediumIntType, BigIntType, FloatType, DoubleType, DecimalType, NumberType, BlobType, DatabaseFunctionType, UnknownType, DateTimeType, TimeType, TimestampType, DateType, CharType, VarcharType, NCharType, NVarcharType, ClobType, CurrencyType, UUIDType def databases = MySQLDatabase, SQLiteDatabase, H2Database, PostgresDatabase, UnsupportedDatabase, DB2Database, MSSQLDatabase, OracleDatabase, HsqlDatabase, FirebirdDatabase, DerbyDatabase, InformixDatabase, SybaseDatabase, SybaseASADatabase datatypes.each { def datatype = it.newInstance() datatype.finishInitialization(\"\") println datatype.name databases.each { println \"$it.simpleName: ${datatype.toDatabaseDataType(it.newInstance())}\" } println '' } ``` ## BOOLEAN ### `MySQLDatabase` : BIT(1) ### `SQLiteDatabase` : BOOLEAN ### `H2Database` : BOOLEAN ### `PostgresDatabase` : BOOLEAN ### `UnsupportedDatabase` : BOOLEAN ### `DB2Database` : SMALLINT ### `MSSQLDatabase` : bit ### `OracleDatabase` : NUMBER(1) ### `HsqlDatabase` : BOOLEAN ### `FirebirdDatabase` : SMALLINT ### `DerbyDatabase` : SMALLINT ### `InformixDatabase` : BOOLEAN ### `SybaseDatabase` : BIT ### `SybaseASADatabase` : BIT ## TINYINT ### `MySQLDatabase` : TINYINT ### `SQLiteDatabase` : TINYINT ### `H2Database` : TINYINT ### `PostgresDatabase` : SMALLINT ### `UnsupportedDatabase` : TINYINT ### `DB2Database` : SMALLINT ### `MSSQLDatabase` : tinyint ### `OracleDatabase` : NUMBER(3) ### `HsqlDatabase` : TINYINT ### `FirebirdDatabase` : SMALLINT ### `DerbyDatabase` : SMALLINT ### `InformixDatabase` : TINYINT ### `SybaseDatabase` : TINYINT ### `SybaseASADatabase` : TINYINT ## INT ### `MySQLDatabase` : INT ### `SQLiteDatabase` : INTEGER ### `H2Database` : INT ### `PostgresDatabase` : INT ### `UnsupportedDatabase` : INT ### `DB2Database` : INTEGER ### `MSSQLDatabase` : int ### `OracleDatabase` : INTEGER ### `HsqlDatabase` : INT ### `FirebirdDatabase` : INT ### `DerbyDatabase` : INTEGER ### `InformixDatabase` : INT ### `SybaseDatabase` : INT ### `SybaseASADatabase` : INT ## MEDIUMINT ### `MySQLDatabase` : MEDIUMINT ### `SQLiteDatabase` : MEDIUMINT ### `H2Database` : MEDIUMINT ### `PostgresDatabase` : MEDIUMINT ### `UnsupportedDatabase` : MEDIUMINT ### `DB2Database` : MEDIUMINT ### `MSSQLDatabase` : int ### `OracleDatabase` : MEDIUMINT ### `HsqlDatabase` : MEDIUMINT ### `FirebirdDatabase` : MEDIUMINT ### `DerbyDatabase` : MEDIUMINT ### `InformixDatabase` : MEDIUMINT ### `SybaseDatabase` : MEDIUMINT ### `SybaseASADatabase` : MEDIUMINT ## BIGINT ### `MySQLDatabase` : BIGINT ### `SQLiteDatabase` : BIGINT ### `H2Database` : BIGINT ### `PostgresDatabase` : BIGINT ### `UnsupportedDatabase` : BIGINT ### `DB2Database` : BIGINT ### `MSSQLDatabase` : bigint ### `OracleDatabase` : NUMBER(38, 0) ### `HsqlDatabase` : BIGINT ### `FirebirdDatabase` : BIGINT ### `DerbyDatabase` : BIGINT ### `InformixDatabase` : INT8 ### `SybaseDatabase` : BIGINT ### `SybaseASADatabase` : BIGINT ## FLOAT ### `MySQLDatabase` : FLOAT ### `SQLiteDatabase` : FLOAT ### `H2Database` : FLOAT ### `PostgresDatabase` : FLOAT ### `UnsupportedDatabase` : FLOAT ### `DB2Database` : FLOAT ### `MSSQLDatabase` : FLOAT(53) ### `OracleDatabase` : FLOAT ### `HsqlDatabase` : FLOAT ### `FirebirdDatabase` : FLOAT ### `DerbyDatabase` : FLOAT ### `InformixDatabase` : FLOAT ### `SybaseDatabase` : FLOAT ### `SybaseASADatabase` : FLOAT ## DOUBLE ### `MySQLDatabase` : DOUBLE ### `SQLiteDatabase` : DOUBLE ### `H2Database` : DOUBLE ### `PostgresDatabase` : DOUBLE PRECISION ### `UnsupportedDatabase` : DOUBLE ### `DB2Database` : DOUBLE ### `MSSQLDatabase` : FLOAT(53) ### `OracleDatabase` : FLOAT(24) ### `HsqlDatabase` : DOUBLE ### `FirebirdDatabase` : DOUBLE PRECISION ### `DerbyDatabase` : DOUBLE ### `InformixDatabase` : DOUBLE PRECISION ### `SybaseDatabase` : DOUBLE ### `SybaseASADatabase` : DOUBLE ## DECIMAL ### `MySQLDatabase` : DECIMAL ### `SQLiteDatabase` : DECIMAL ### `H2Database` : DECIMAL ### `PostgresDatabase` : DECIMAL ### `UnsupportedDatabase` : DECIMAL ### `DB2Database` : DECIMAL ### `MSSQLDatabase` : DECIMAL(18, 0) ### `OracleDatabase` : DECIMAL ### `HsqlDatabase` : DECIMAL ### `FirebirdDatabase` : DECIMAL ### `DerbyDatabase` : DECIMAL ### `InformixDatabase` : DECIMAL ### `SybaseDatabase` : DECIMAL ### `SybaseASADatabase` : DECIMAL ## NUMBER ### `MySQLDatabase` : numeric ### `SQLiteDatabase` : NUMBER ### `H2Database` : NUMBER ### `PostgresDatabase` : numeric ### `UnsupportedDatabase` : NUMBER ### `DB2Database` : numeric ### `MSSQLDatabase` : numeric(18, 0) ### `OracleDatabase` : NUMBER ### `HsqlDatabase` : numeric ### `FirebirdDatabase` : numeric ### `DerbyDatabase` : numeric ### `InformixDatabase` : numeric ### `SybaseDatabase` : numeric ### `SybaseASADatabase` : numeric ## BLOB ### `MySQLDatabase` : LONGBLOB ### `SQLiteDatabase` : BLOB ### `H2Database` : BLOB ### `PostgresDatabase` : BYTEA ### `UnsupportedDatabase` : BLOB ### `DB2Database` : BLOB ### `MSSQLDatabase` : varbinary(MAX) ### `OracleDatabase` : BLOB ### `HsqlDatabase` : BLOB ### `FirebirdDatabase` : BLOB ### `DerbyDatabase` : BLOB ### `InformixDatabase` : BLOB ### `SybaseDatabase` : IMAGE ### `SybaseASADatabase` : LONG BINARY ## FUNCTION ### `MySQLDatabase` : FUNCTION ### `SQLiteDatabase` : FUNCTION ### `H2Database` : FUNCTION ### `PostgresDatabase` : FUNCTION ### `UnsupportedDatabase` : FUNCTION ### `DB2Database` : FUNCTION ### `MSSQLDatabase` : function ### `OracleDatabase` : FUNCTION ### `HsqlDatabase` : FUNCTION ### `FirebirdDatabase` : FUNCTION ### `DerbyDatabase` : FUNCTION ### `InformixDatabase` : FUNCTION ### `SybaseDatabase` : FUNCTION ### `SybaseASADatabase` : FUNCTION ## UNKNOWN ### `MySQLDatabase` : UNKNOWN ### `SQLiteDatabase` : UNKNOWN ### `H2Database` : UNKNOWN ### `PostgresDatabase` : UNKNOWN ### `UnsupportedDatabase` : UNKNOWN ### `DB2Database` : UNKNOWN ### `MSSQLDatabase` : UNKNOWN ### `OracleDatabase` : UNKNOWN ### `HsqlDatabase` : UNKNOWN ### `FirebirdDatabase` : UNKNOWN ### `DerbyDatabase` : UNKNOWN ### `InformixDatabase` : UNKNOWN ### `SybaseDatabase` : UNKNOWN ### `SybaseASADatabase` : UNKNOWN ## DATETIME ### `MySQLDatabase` : datetime ### `SQLiteDatabase` : TEXT ### `H2Database` : TIMESTAMP ### `PostgresDatabase` : TIMESTAMP WITHOUT TIME ZONE ### `UnsupportedDatabase` : datetime ### `DB2Database` : TIMESTAMP ### `MSSQLDatabase` : datetime ### `OracleDatabase` : TIMESTAMP ### `HsqlDatabase` : TIMESTAMP ### `FirebirdDatabase` : TIMESTAMP ### `DerbyDatabase` : TIMESTAMP ### `InformixDatabase` : DATETIME YEAR TO FRACTION(5) ### `SybaseDatabase` : datetime ### `SybaseASADatabase` : datetime ## TIME ### `MySQLDatabase` : time ### `SQLiteDatabase` : time ### `H2Database` : time ### `PostgresDatabase` : TIME WITHOUT TIME ZONE ### `UnsupportedDatabase` : time ### `DB2Database` : time ### `MSSQLDatabase` : time(7) ### `OracleDatabase` : DATE ### `HsqlDatabase` : time ### `FirebirdDatabase` : time ### `DerbyDatabase` : time ### `InformixDatabase` : INTERVAL HOUR TO FRACTION(5) ### `SybaseDatabase` : time ### `SybaseASADatabase` : time ## TIMESTAMP ### `MySQLDatabase` : timestamp ### `SQLiteDatabase` : TEXT ### `H2Database` : TIMESTAMP ### `PostgresDatabase` : TIMESTAMP WITHOUT TIME ZONE ### `UnsupportedDatabase` : timestamp ### `DB2Database` : timestamp ### `MSSQLDatabase` : datetime ### `OracleDatabase` : TIMESTAMP ### `HsqlDatabase` : TIMESTAMP ### `FirebirdDatabase` : TIMESTAMP ### `DerbyDatabase` : TIMESTAMP ### `InformixDatabase` : DATETIME YEAR TO FRACTION(5) ### `SybaseDatabase` : datetime ### `SybaseASADatabase` : timestamp ## DATE ### `MySQLDatabase` : date ### `SQLiteDatabase` : date ### `H2Database` : date ### `PostgresDatabase` : date ### `UnsupportedDatabase` : date ### `DB2Database` : date ### `MSSQLDatabase` : date ### `OracleDatabase` : date ### `HsqlDatabase` : date ### `FirebirdDatabase` : date ### `DerbyDatabase` : date ### `InformixDatabase` : date ### `SybaseDatabase` : date ### `SybaseASADatabase` : date ## CHAR ### `MySQLDatabase` : CHAR ### `SQLiteDatabase` : CHAR ### `H2Database` : CHAR ### `PostgresDatabase` : CHAR ### `UnsupportedDatabase` : CHAR ### `DB2Database` : CHAR ### `MSSQLDatabase` : char(1) ### `OracleDatabase` : CHAR ### `HsqlDatabase` : CHAR ### `FirebirdDatabase` : CHAR ### `DerbyDatabase` : CHAR ### `InformixDatabase` : CHAR ### `SybaseDatabase` : CHAR ### `SybaseASADatabase` : CHAR ## VARCHAR ### `MySQLDatabase` : VARCHAR ### `SQLiteDatabase` : VARCHAR ### `H2Database` : VARCHAR ### `PostgresDatabase` : VARCHAR ### `UnsupportedDatabase` : VARCHAR ### `DB2Database` : VARCHAR ### `MSSQLDatabase` : varchar(1) ### `OracleDatabase` : VARCHAR2 ### `HsqlDatabase` : VARCHAR ### `FirebirdDatabase` : VARCHAR ### `DerbyDatabase` : VARCHAR ### `InformixDatabase` : VARCHAR ### `SybaseDatabase` : VARCHAR ### `SybaseASADatabase` : VARCHAR ## NCHAR ### `MySQLDatabase` : NCHAR ### `SQLiteDatabase` : NCHAR ### `H2Database` : NCHAR ### `PostgresDatabase` : NCHAR ### `UnsupportedDatabase` : NCHAR ### `DB2Database` : NCHAR ### `MSSQLDatabase` : nchar(1) ### `OracleDatabase` : NCHAR ### `HsqlDatabase` : CHAR ### `FirebirdDatabase` : NCHAR ### `DerbyDatabase` : NCHAR ### `InformixDatabase` : NCHAR ### `SybaseDatabase` : NCHAR ### `SybaseASADatabase` : NCHAR ## NVARCHAR ### `MySQLDatabase` : NVARCHAR ### `SQLiteDatabase` : NVARCHAR ### `H2Database` : NVARCHAR ### `PostgresDatabase` : VARCHAR ### `UnsupportedDatabase` : NVARCHAR ### `DB2Database` : NVARCHAR ### `MSSQLDatabase` : nvarchar(1) ### `OracleDatabase` : NVARCHAR2 ### `HsqlDatabase` : VARCHAR ### `FirebirdDatabase` : NVARCHAR ### `DerbyDatabase` : VARCHAR ### `InformixDatabase` : NVARCHAR ### `SybaseDatabase` : NVARCHAR ### `SybaseASADatabase` : NVARCHAR ## CLOB ### `MySQLDatabase` : LONGTEXT ### `SQLiteDatabase` : TEXT ### `H2Database` : CLOB ### `PostgresDatabase` : TEXT ### `UnsupportedDatabase` : CLOB ### `DB2Database` : CLOB ### `MSSQLDatabase` : varchar(MAX) ### `OracleDatabase` : CLOB ### `HsqlDatabase` : CLOB ### `FirebirdDatabase` : BLOB SUB_TYPE TEXT ### `DerbyDatabase` : CLOB ### `InformixDatabase` : CLOB ### `SybaseDatabase` : TEXT ### `SybaseASADatabase` : LONG VARCHAR ## CURRENCY ### `MySQLDatabase` : DECIMAL ### `SQLiteDatabase` : REAL ### `H2Database` : DECIMAL ### `PostgresDatabase` : DECIMAL ### `UnsupportedDatabase` : DECIMAL ### `DB2Database` : DECIMAL(19, 4) ### `MSSQLDatabase` : money ### `OracleDatabase` : NUMBER(15, 2) ### `HsqlDatabase` : DECIMAL ### `FirebirdDatabase` : DECIMAL(18, 4) ### `DerbyDatabase` : DECIMAL ### `InformixDatabase` : MONEY ### `SybaseDatabase` : MONEY ### `SybaseASADatabase` : MONEY ## UUID ### `MySQLDatabase` : char(36) ### `SQLiteDatabase` : TEXT ### `H2Database` : UUID ### `PostgresDatabase` : UUID ### `UnsupportedDatabase` : char(36) ### `DB2Database` : char(36) ### `MSSQLDatabase` : uniqueidentifier ### `OracleDatabase` : RAW(16) ### `HsqlDatabase` : char(36) ### `FirebirdDatabase` : char(36) ### `DerbyDatabase` : char(36) ### `InformixDatabase` : char(36) ### `SybaseDatabase` : UNIQUEIDENTIFIER ### `SybaseASADatabase` : UNIQUEIDENTIFIER ",
    "url": "/SQLNotes/Liquibase",
    
    "relUrl": "/SQLNotes/Liquibase"
  },"125": {
    "doc": "Logging",
    "title": "Logging",
    "content": "{: .text-delta } 1. TOC {:toc} *** # [Logging](https://cloud.google.com/logging/docs/) > [Logs Explorer](https://console.cloud.google.com/logs/query;query=resource.labels.project_id%3D%22your-project-name%22;timeRange=2023-01-04T14:14:48.965Z%2F2023-02-02T15:14:48.965Z;summaryFields=:false:32:beginning;cursorTimestamp=2023-02-02T15:14:48.964204Z?project=your-project-name) > [Logging Class Docs for List](https://cloud.google.com/dotnet/docs/reference/Google.Cloud.Logging.V2/latest/Google.Cloud.Logging.V2.LoggingServiceV2Client#Google_Cloud_Logging_V2_LoggingServiceV2Client_ListLogEntries_Google_Cloud_Logging_V2_ListLogEntriesRequest_Google_Api_Gax_Grpc_CallSettings_) > [Query Language Doc](https://cloud.google.com/logging/docs/view/logging-query-language) > [C# GitHub Google.Cloud.Logging.V2](https://github.com/googleapis/google-cloud-dotnet/tree/main/apis/Google.Cloud.Logging.V2) > [JSON return LogEntry](https://cloud.google.com/logging/docs/reference/v2/rest/v2/LogEntry) *** ## Querying ### [By Time](https://cloud.google.com/logging/docs/view/logging-query-language#search_by_time) In the interface, you can set specific limits on the date and time of log entries to show. For example, if you add the following conditions to your query, the preview displays exactly the log entries in the indicated 30-minute period and you won't be able to scroll outside of that date range: timestamp >= \"2016-11-29T23:00:00Z\" timestamp \"2016-11-29\" Note: Logging interprets query expressions that use the YYYY-MM-DD format as YYYY-MM-DDT00:00:00Z. *** ## [CLI](https://cloud.google.com/sdk/gcloud/reference/logging) ### [READ LOGS](https://cloud.google.com/sdk/gcloud/reference/logging/read) #### Quick Scripts ```shell gcloud logging read \"resource.type=global AND jsonPayload.queryResult.responseMessages.conversationSuccess.metadata.resolved:*\" --freshness=\"1d\" --resource-names=\"projects/vcu-virtual-assistant-bot\" --limit=1 ``` *** ## STORAGE ### [Routing](https://cloud.google.com/logging/docs/routing/overview#destinations) ### [Data Buckets](https://cloud.google.com/logging/docs/buckets#api) ### [Trigger Functions](https://cloud.google.com/functions/docs/samples/functions-log-stackdriver?hl=en#functions_log_stackdriver-java) *** ## [API](./APIs.md#) ### [Entries List](https://cloud.google.com/logging/docs/reference/v2/rest/v2/entries/list?apix_params=%7B%22resource%22%3A%7B%22resourceNames%22%3A%5B%22projects%2Fyour-project-name%22%5D%2C%22filter%22%3A%22resource.type%3Dglobal%22%2C%22orderBy%22%3A%22timestamp%20desc%22%7D%7D) *** ## [Steps I took for Logging](https://cloud.google.com/logging/docs/write-query-log-entries-gcloud) ### **__1) installed cli via PowerShell__** ```powershell (New-Object Net.WebClient).DownloadFile(\"https://dl.google.com/dl/cloudsdk/channels/rapid/GoogleCloudSDKInstaller.exe\", \"$env:Temp\\GoogleCloudSDKInstaller.exe\") & $env:Temp\\GoogleCloudSDKInstaller.exe ``` ### **__ 2) Set your default project so you don't have to supply the --project flag with each command:__** ```powershell gcloud config set project your-project-name ``` ### **__ 3) FYI__** ``` Cloud SDK requires Python; supported versions are Python 3 (3.5 to 3.9). By default, the Windows version of Cloud SDK comes bundled with Python 3. To use Cloud SDK, your operating system must be able to run a supported version of Python. The installer installs all necessary dependencies, including the needed Python version. While Cloud SDK installs and manages Python 3 by default, you can use an existing Python installation if necessary by unchecking the option to Install Bundled Python. See gcloud topic startup to learn how to use an existing Python installation. ``` - [Available SDKS](https://cloud.google.com/sdk/) ### **__4) in cli get logs __** ```bash gcloud gcloud logging read --freshness=\"50d\" ``` > --freshness=FRESHNESS; default=\"1d\" >> Return entries that are not older than this value. Works only with DESC ordering and filters without a timestamp. See $ gcloud topic datetimes for > > information on duration formats. ### **__ 5) [Can test api calls and parameters with API explorer](https://cloud.google.com/logging/docs/reference/v2/rest/v2/entries/list?apix_params=%7B%22resource%22%3A%7B%22resourceNames%22%3A%5B%22projects%2Fyour-project-name%22%5D%2C%22filter%22%3A%22resource.type%3Dglobal%22%2C%22orderBy%22%3A%22timestamp%20desc%22%7D%7D) __** - [API Permissions List](https://cloud.google.com/logging/docs/access-control#api-permissions) > use request body ```json { \"resourceNames\": [ \"projects/your-project-name\" ], \"filter\": \"resource.type=global\", \"orderBy\": \"timestamp desc\" } ``` #### [Get Logging through API](https://cloud.google.com/logging/docs/api/enable-api#gcloud-cli) - See if Logging API enabled ```bash gcloud services list --project=your-project-name ``` ### **__ 6) [AUTHENTICATED SERVICE ACCOUNT](https://cloud.google.com/sdk/docs/authorizing) __** ```bash gcloud auth login --cred-file=C:\\Users\\bp01232023\\source\\repos\\Wiki\\GoogleDialogFlow.wiki\\FilesOfInterest\\your-project-name-e9d441de07b0.json ``` or ```bash gcloud auth activate-service-account google-cli-service-account@your-project-name.iam.gserviceaccount.com --key-file=C:\\Users\\bp01232023\\source\\repos\\Wiki\\GoogleDialogFlow.wiki\\FilesOfInterest\\your-project-name-e9d441de07b0.json ``` - Enable API ```bash gcloud services enable logging --project=your-project-name ``` - [List Log Entries API C# snippet](https://cloud.google.com/logging/docs/samples/logging-list-log-entries) *** [Many Google Cloud Platform events are logged in Cloud Audit Logs. You can filter these logs and forward them to Pub/Sub topics using sinks. These Pub/Sub topics can then send notifications that trigger Cloud Functions. This allows you to create custom events from any Google Cloud Platform service that produces audit logs.](https://cloud.google.com/functions/docs/calling/logging) > Route logs to new destinations with a Log Router and Sink https://cloud.google.com/logging/docs/routing/overview#destinations Sinks control how Cloud Logging routes logs. Using sinks, you can route some or all of your logs to [supported destinations](https://cloud.google.com/logging/docs/routing/overview#destinations). Some of the reasons that you might want to control how your logs are routed include the following example https://cloud.google.com/functions/docs/samples/functions-log-stackdriver?hl=en#functions_log_stackdriver-java ## Supported destinations - [Guide on how to route logs to supported destinations](https://cloud.google.com/logging/docs/export/configure_export_v2) You can use the Log Router to route certain logs to supported destinations in any Cloud project. Logging supports the following sink destinations: Cloud Logging log buckets: Provides storage in Cloud Logging. A [log bucket](https://cloud.google.com/logging/docs/routing/overview#buckets) can store logs ingested by multiple Google Cloud projects. You specify the data retention period, the data storage location, and the [log-views](https://cloud.google.com/logging/docs/logs-views) on a log bucket. Log views let you control which logs in a log bucket that a user can access. Log buckets are recommended storage when you want to troubleshoot your applications and services, or to analyze your log data. If you need to combine your Cloud Logging data with other data sources, then you can store your logs in log buckets that are upgraded to use Log Analytics, and then link that bucket to BigQuery. For information about viewing logs, see [Query and view logs overview](https://cloud.google.com/logging/docs/log-analytics) and [View logs routed to Cloud Logging buckets](https://cloud.google.com/logging/docs/export/using_exported_logs). Pub/Sub topics: Provides support for third-party integrations, such as [Splunk](https://cloud.google.com/architecture/exporting-stackdriver-logging-for-splunk), with Logging. Log entries are formatted into JSON and then delivered to a Pub/Sub topic. For information about viewing these logs, their organization, and how to configure a third-party integration, see [View logs routed to Pub/Sub](https://cloud.google.com/logging/docs/export/pubsub). BigQuery datasets: Provides storage of log entries in BigQuery datasets. You can use big data analysis capabilities on the stored logs. If you need to combine your Cloud Logging data with other data sources, then you can route your logs to BigQuery. An alternative is to store your logs in log buckets that are upgraded to use Log Analytics and then linked to BigQuery. For information about viewing logs routed to BigQuery, see [View logs routed to BigQuery](https://cloud.google.com/logging/docs/export/bigquery). Cloud Storage buckets: Provides inexpensive, long-term storage of log data in Cloud Storage. Log entries are stored as JSON files. For information about viewing these logs, how they are organized, and how late-arriving logs are handled, see [View logs routed to Cloud Storage](https://cloud.google.com/logging/docs/export/storage). ",
    "url": "/GoogleNotes/Logging",
    
    "relUrl": "/GoogleNotes/Logging"
  },"126": {
    "doc": "LooseNotes",
    "title": "LooseNotes",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Optionals ```java public class OptEx { Optional> aorMap = Optional.ofNullable(this.customAORMap); } ``` # Streams ## Map and Collect ```java public class MapExample { Map newMap = clientEntityMap.entrySet().stream().collect(Collectors.toMap(Map.Entry::getKey, entry -> entry.getValue().stream().map(e -> { String externalCode = e.getDescription(); String externalCode = e.getDescription(); String externalCode = e.getDescription(); return Map.of(\"externalCode\", \"\"); }).collect(Collectors.toList()))); } ``` ## ConcurrentHashMap and LinkedList ```java public class LinkedListEx { Map newMap = this.clientEntityMap.entrySet() .stream() .map(entry -> Map.entry(entry.getKey(), entry.getValue() .stream() .map(ClientEntityDetails::toMap) .collect(Collectors.toCollection(LinkedList::new)))) .collect(Collectors.toConcurrentMap(Map.Entry::getKey, Map.Entry::getValue, (a, b) -> b, ConcurrentHashMap::new)); } ``` ## Map to String ```java public class MapToString { Map mapToString = this.clientEntityMap.entrySet() .stream() .map(entry -> Map.entry(entry.getKey(), entry.getValue() .stream() .map(ClientEntityDetails::toMap) .collect(Collectors.toCollection(LinkedList::new)))) .collect(Collectors.toConcurrentMap(Map.Entry::getKey, Map.Entry::getValue, (a, b) -> b, ConcurrentHashMap::new)); } ``` # Sealed Classes ![img.png](../assets/images/JavaSealedClasses.png) # Pattern Matching ![img.png](../assets/images/JavaPaternMatching.png) ## Scope of Variables ![img.png](../assets/images/JavaPatternMatchingScopeVar.png) # Records ![img.png](../assets/images/JavaRecords.png) # Text Block (String) ![img.png](../assets/images/JavaTextBlock.png) ![img.png](../assets/images/JavaTextBlockHowWeUse.png) # Switch (Case) ![img.png](../assets/images/JavaSwitch.png) ![img.png](../assets/images/JavaSwitchCase.png) # Local Variable Type Interface (Var) ![img_1.png](../assets/images/JavaVarType.png) ## var with lambda ![img.png](../assets/images/JavaVarTypeWithLambda.png) # Private Interface Methods ![img.png](../assets/images/JavaPrivateInterfaceMethods.png) # Try ![img.png](../assets/images/JavaTryWithResources.png) # Diamond Operator ## For Anonymous Inner Class ![img.png](../assets/images/JavaDiamondOperatorForInnerClass.png) ",
    "url": "/JavaNotes/LooseNotes",
    
    "relUrl": "/JavaNotes/LooseNotes"
  },"127": {
    "doc": "MUI",
    "title": "MUI",
    "content": "{: .text-delta } 1. TOC {:toc} --- # passing props to styles - [awesome-features-of-styled-components](https://blog.logrocket.com/8-awesome-features-of-styled-components/) ```jsx const Button = styled.button` padding: 2px 5px; color: ${(props) => props.theme.color}; border-radius: 3px; `; ``` ```jsx const Div = styled.div` padding: 10px; color: ${(props) => props.theme.color}; border: 1px solid ${(props) => props.theme.borderColor}; `; ``` # Style inheritance > We can inherit the styling of a styled component by simply passing it to the styled function. ```jsx import styled from \"styled-components\"; const Div = styled.div` adding: 10px; color: palevioletred; `; component.const; InheritedDiv = styled(Div)` border: 1px solid palevioletred; `; ``` > This InheritedDiv will have the styling of the Div component as well as > its own styling. ``` padding: 10px; color: palevioletred; border: 1px solid palevioletred; ``` # Passing props > Props can be passed to styled components just as they are with regular > React components (class or functional). > This is possible because styled > components are actually React components. ```jsx const Button = styled.button` padding: 2px 5px; color: white; border-radius: 3px; `; const Div = styled.div` padding: 10px; color: palevioletred; border: 1px solid palevioletred; `; ``` > styled-components creates a React component, which renders an HTML tag > corresponding to the property in the styled object. > Button will create and render a button HTML tag, while Div will create > and render a div tag. > They are components, so we can pass props to them. ```jsx Click Me ``` > This will make styled-components pass props containing the color to the > Button component and props containing the borderColor to the Div > component. > We can then get the props in the tagged template literal by > using a function. ```jsx const Button = styled.button` padding: 2px 5px; color: ${(props) => (props.color ? props.color : \"white\")}; border-radius: 3px; `; const Div = styled.div` padding: 10px; color: palevioletred; border: 1px solid ${(props) => props.borderColor ? props.borderColor : \"palevioletred\"}; `; ``` > The functions in the tagged template literals will receive a props args, > which is the props passed to the Components. > This enables us to > reference the color and borderColor we passed to the Button and Div > components, which makes the styling of styled-components dynamic. > styled-components provides theming capabilities and enables you to > support multiple looks and feels. > To do that, we'll use the ThemeProvider component. ```jsx import {ThemeProvider} from \"styled-components\"; // Let's set up a theme object to hold the CSS styling we want to apply to our styled components. const theme = { boderColor: \"green\", color: \"green\", bgColor: \"green\", }; ``` > The theme object holds colors for the border-color, color, and bgColor. > Now, we have two components: Button and Div. > Let's use the theme on > them. ```jsx const Button = styled.button` padding: 2px 5px; color: ${(props) => props.theme.color}; border-radius: 3px; `; const Div = styled.div` padding: 10px; color: ${(props) => props.theme.color}; border: 1px solid ${(props) => props.theme.borderColor}; `; ``` > As you can see, they are accessing the theme property in their props. > ThemeProvider passes the theme object as a prop to the components. > Finally, we'll render the Div and Button components between the > ThemeProvider tags and pass the theme object to a theme props in the > ThemeProvider. ```jsx Click Me ``` > The theme object will be provided to the children of ThemeProvider in > their props. > So now if we change any property value in the theme object, > ThemeProvider will pass along the changes to the children and Div and > Button will change their styling accordingly. # Global styling > Most of the styling we've done thus far has been specific to the > components. > The styled-components framework also enables you to create > global styles to be applied to all styled components. > First, import createGlobalStyle. ```jsx import {createGlobalStyle} from \"styled-components/macro\"; ``` > Create a globalStyles.js file. ```jsx // globalStyles.js export default createGlobalStyle` html { margin: 0; } body { margin: 0; } `; ``` > Next, import it in the App ```jsx import GlobalStyle from \"./globalStyles\"; function App() { return ( ); } ``` > GlobalStyle is rendered first before the rest of the app tree. > This will > apply the global styling to all components in the app tree. # Switching component types > Styled components are dynamic in nature. > They can change from creating > and rendering one HTML element to another. ```jsx const Button = styled.button` padding: 2px 5px; color: ${(props) => props.theme.color}; border-radius: 3px; `; ``` > The Button component will create and render a button element. > We can > change that when rendering the Button component by passing the as props > to it with whatever HTML tag name we want it to change to. ```jsx Click Me ``` > This will create and render an anchor element. > The as=\"a\" changes it > from rendering a button element to rendering an anchor element. > This can also be done using the withComponent method. ```jsx const Button = styled.button` padding: 2px 5px; color: palevioletred; border-radius: 3px; `; const Link = Button.withComponent(\"a\"); ``` > Link is a styled component that will render an anchor element with > the CSS styling of Button applied to it. # Styling regular components > You can turn regular components into styled components by calling the styled() function with the component, then with the template literals > containing the styling code. ```jsx function Button(props) { return {props.children}; } ``` > Here we have a Button component that renders a button element. > Notice that we set a className attribute to the button element and assigned its value to be from props.className. > This is so the > inherited styling will be applied to the button element. > To turn this component into a styled component, pass it to the styled() function. ```jsx Button = styled(Button)` padding: 2px 5px; border-radius: 3px; border: 1px solid palevioletred; `; ``` > This will style the button element in the Button component with the CSS styling in the template literal. Button will render a button element with > the following CSS code. ``` padding: 2px 5px; border-radius: 3px; border: 1px solid palevioletred; ``` # Specifying attributes > You can add attributes to the HTML elements rendered by the styled > components. ```jsx const Input = styled.input` font-size: 14px; padding: 2px 5px; border: 1px solid green; `; ``` > Input will render an input element. > Input elements have different > types, including: - text - number - password - email > These are specified in the input element by using the type attribute. > To tell styled-components the type of input element you want, use the attrs method. ```jsx const Input = styled.input.attrs({ type: \"text\", })` font-size: 14px; padding: 2px 5px; border: 1px solid green; `; ``` > This will create an input element with type text. We can also add other attributes to styled components. ```jsx const Input = styled.input.attrs({ type: \"text\", placeholder: \"Type anything here...\", })` font-size: 14px; padding: 2px 5px; border: 1px solid green; `; const PasswordInput = styled.input.attrs({ type: \"password\", placeholder: \"Type your password here...\", })` font-size: 14px; padding: 2px 5px; border: 1px solid green; `; ``` # Use with other CSS frameworks > Finally, you can use styled components with any CSS framework. For example, let's create a Button component with Bootstrap styling. ```jsx const PrimaryButton = styled.button.attrs({ className: \"btn btn-prmiary\", })` outline: none; `; ``` > We used the attrs method to add a className attribute to the component > with btn btn-primary value. > This will make Bootstrap apply its styling > to the component. > The same goes for other CSS frameworks. ```jsx const MatButton = styled.button.attrs({ className: \"mat-button\", })` outline: none; `; ``` # Customize form field {%raw%} ```jsx import React from \"react\"; import PropTypes from \"prop-types\"; import classNames from \"classnames\"; import {withStyles} from \"@material-ui/core/styles\"; import MenuItem from \"@material-ui/core/MenuItem\"; import TextField from \"@material-ui/core/TextField\"; const styles = (theme) => ({ container: { display: \"flex\", flexWrap: \"wrap\", }, textField: { marginLeft: theme.spacing.unit, marginRight: theme.spacing.unit, width: 200, }, cssLabel: { color: \"green\", }, cssOutlinedInput: { \"&$cssFocused $notchedOutline\": { borderColor: `${theme.palette.primary.main} !important`, }, }, cssFocused: {}, notchedOutline: { borderWidth: \"1px\", borderColor: \"green !important\", }, }); class ValidField extends React.Component { state = { name: \"InputMode\", }; handleChange = (name) => (event) => { this.setState({ [name]: event.target.value, }); }; render() { const {classes} = this.props; return ( ); } } ValidField.propTypes = { classes: PropTypes.object.isRequired, }; export default withStyles(styles)(ValidField); ``` {% endraw %} ## References - [better-way-to-use-material-system-with-styled-components](https://stackoverflow.com/questions/62471093/better-way-to-use-material-system-with-styled-components) - [how-to-use-custom-props-and-theme-with-material-ui-styled-components-api-typesc](https://stackoverflow.com/questions/64213154/how-to-use-custom-props-and-theme-with-material-ui-styled-components-api-typesc) - [adapting-based-on-props ](https://material-ui.com/styles/basics/#adapting-based-on-props) ",
    "url": "/ReactNotes/MUI",
    
    "relUrl": "/ReactNotes/MUI"
  },"128": {
    "doc": "MacNotes",
    "title": "MacNotes",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Remove a nonremovable MDM profile from macos, without a wipe > Non-removable MDM profiles cannot officially removed without doing a full system wipe. > This is a problem when you restore a system from Time Machine after you enrolled it into the MDM, as the MDM > will break, leaving you unable to re-enroll the machine. 1. Boot the Mac into Recovery Mode (hold down command+R during startup). 2. Go to the Utilities menu and open Terminal and type: csrutil disable. This will disable SIP (System Integrity Protection). 3. Reboot into the OS. 4. Open the integrated terminal and type: ```shell cd /var/db/ConfigurationProfiles rm -rf * mkdir Settings touch Settings/.profilesAreInstalled ``` 5. Reboot. 6. Boot the Mac into Recovery Mode (hold down command+R during startup). 7. Go to the Utilities menu and open Terminal and type: csrutil enable. This will re-enable SIP. 8. Reboot into the OS. > The profile will be now removed and you will be able to re-enroll the Mac to your MDM. # System Preferences ## CLI ### Open Pane In System Preferences - > #### most effective: ```shell open \"x-apple.systempreferences:com.apple.preference.security\" ``` - > #### but this works as well: ```shell open -b com.apple.systempreferences /System/Library/PreferencePanes/Security.prefPane (to find more preference panes, look at /System/Library/PreferencePanes) ``` > The first one, though, offers the ability to open a specific tab on given pane as well. > This, for example, opens `\"System Preferences\" ` `-> ` `Security & Privacy` and then activates the `Privacy` tab: ```shell open \"x-apple.systempreferences:com.apple.preference.security?Privacy\" ``` ",
    "url": "/MacNotes/",
    
    "relUrl": "/MacNotes/"
  },"129": {
    "doc": "Map",
    "title": "Map",
    "content": "{: .text-delta } 1. TOC {:toc} --- # [MDN Docs](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map) > The Map object holds key-value pairs and remembers the original insertion order of the keys. Any value (both objects and primitive values) may be > used as either a key or a value. - > Demo ```javascript const map1 = new Map(); map1.set(\"a\", 1); map1.set(\"b\", 2); map1.set(\"c\", 3); console.log(map1.get(\"a\")); // Expected output: 1 map1.set(\"a\", 97); console.log(map1.get(\"a\")); // Expected output: 97 console.log(map1.size); // Expected output: 3 map1.delete(\"b\"); console.log(map1.size); // Expected output: 2 ``` # New Map ## From Object ```javascript new Map(Object.entries(advancedFields)); ``` ## From Mapped Array ```javascript new Map(data.map((result) => [result.id, `${result.firstName}${result?.middleName && result?.middleName.trim() ? ` ${result?.middleName}` : \"\"} ${result.lastName}`,]),); ``` ## Combine 2 maps ```javascript new Map(choiceArrays.map(...).flat().map(...[key, value])) ``` - > create a map in the format {enumKey: readableString} for choices > this is es5 to work in Edge and IE ```javascript const enumKeyMap = [].concat .apply( [], choiceArrays.map((choiceArray) => choiceArray.choices), ) .reduce((map, obj) => { map[obj.enumKey] = obj.readableString; return map; }, {}); ``` ",
    "url": "/JavaScript/Map",
    
    "relUrl": "/JavaScript/Map"
  },"130": {
    "doc": "MarkDown",
    "title": "MarkDown",
    "content": "{: .text-delta } 1. TOC {:toc} --- # [GitHub Linguist](https://github.com/github-linguist/linguist/blob/master/lib/linguist/languages.yml) > Code block Syntax yml ## Working aliases - ### powershell > `posh` , `powershell`, `bat` - ### batch > `batch`, `bat`, `dosbatch`, `winbatch` - ### bash / shell / .sh > `sh`, `shell`, `zsh` , `bash` - ### XML > `xml` - ### C# > `csharp`, `cs` --- # GitHub Styling Quirks ## visible in GitHub md page ```markdown > **Note** > > This is a note ``` > **Note** > > This is a note ```markdown > **Warning** > > This is a warning ``` > **Warning** > > This is a warning ## visible online ```html I am a success message ``` I am a success message --- ```html I am an error message ``` I am an error message --- ```html I am an info message ``` I am a info message --- ```html I am a warning message ``` I am a warning message ## Adding Image ```markdown ![kubernetes.gif](../../assets/images/kubernetes.gif) ``` ```markdown ![kubernetes.gif](./assets%2Fimages%2Fkubernetes.gif) ``` ```html ``` ```markdown ![kubernetes](https://raw.githubusercontent.com/14paxton/14paxton.github.io/master/assets/images/kubernetes.gif) ``` # [Pandoc](https://pandoc.org/demos.html) ## Add Table of Contents to mark down doc with pandoc 1. set file name ```shell fileMD=CLI_Grailsw.md; ``` 2. run ```shell pandoc -s --toc $fileMD -o output.md; rm -f $fileMD; mv output.md ./$fileMD; ``` ## docx to markdown ```shell pandoc -s example30.docx --wrap=none --reference-links -t markdown -o example35.md ``` > or ```shell pandoc -t markdown_strict \\ --extract-media='./BrandonPaxton' myfilename.docx -o myfilename.md ``` ## scripts ### convert to docx ```shell #!/bin/bash # save input from command line input=$1 # get filename from input filename=$(basename -s .docx $input) # convert word to markdown pandoc -f docx -t markdown \"$input\" -o $filename.md ``` ## files ```shell #!/bin/bash # save current working directory to variable cwd=$(pwd) # find all .docx files in current directory find $cwd -name \"*.docx\" -type f -print0 | while IFS= read -r -d $'\\0' line; do # remove spaces in filename ns_filename=$(echo $line | sed 's/ /_/g') # get filename from input the_filename=$(basename -s .docx $ns_filename) # convert word to markdown # echo \"pandoc -f docx -t markdown \\\"$line\\\" -o $the_filename.md\" pandoc -f docx -t markdown \"$line\" -o $the_filename.md done ``` ### Example Used ```shell #!/bin/bash pandoc -t markdown_strict -s BrandonPaxton.docx --wrap=none --reference-links -t markdown -o BPResume.md; ``` ",
    "url": "/GitHub/MarkDown",
    
    "relUrl": "/GitHub/MarkDown"
  },"131": {
    "doc": "Mat-Table",
    "title": "Mat-Table",
    "content": "{: .text-delta } 1. TOC {:toc} --- # [Table With Async Call](https://github.com/14paxton/TableWithAsyncCall/tree/main) # Use ref to update table info in parent ```jsx const updatePrivateGroupsTable = () => { if (privateGroupTableRef?.current) { privateGroupTableRef.current.onQueryChange(); } }; ``` # table ref ## tableref-onrowselected-to-update-the-ui-via-the-onrowclick-property > Add tableRef to state: ```jsx state = { tableRef: React.createRef(), }; ``` > Then add the tableRef prop to your Material Table ```jsx ``` > Then on the onRowClick prop/function use tableRef to access dataManager and onSelectionChange ```jsx { // Update the clicked rows checked state rowData.tableData.checked = !rowData.tableData.checked; // pass dataManager the current rows checked state and path/ID, the path/ID needs to be an array, ex: [1] this.state.tableRef.current.dataManager.changeRowSelected(rowData.tableData.checked, [rowData.tableData.id],); // call the onSelectionChange and pass it the row selected to ensure it updates your selection properly for any custom onSelectionChange functions. this.state.tableRef.current.onSelectionChange(rowData); }} /> ``` ## prop options to header from a customize component ![image5](https://user-images.githubusercontent.com/26972590/188926053-d48bcf30-3a9a-4d64-8a73-24c569724eeb.png) # Issues ## [Add API for selecting/deselecting rows programmatically](https://github.com/mbrn/material-table/issues/515) ## [\"Select All\" also selects disabled checkboxes](https://github.com/mbrn/material-table/issues/686) ",
    "url": "/ReactNotes/Mat-Table",
    
    "relUrl": "/ReactNotes/Mat-Table"
  },"132": {
    "doc": "Maui",
    "title": "The Setup",
    "content": "There are two clear paths that atleast I see, in terms of the setup and I have a clear preference. But I’ll talk about both of them. Note: I have an Intel based Mac so things might be different compared to an M1 based machine. I’m still trying to upgrade, and when I do, I’ll write another article covering the differences. ",
    "url": "/DotNetNotes/Maui#3550",
    
    "relUrl": "/DotNetNotes/Maui#3550"
  },"133": {
    "doc": "Maui",
    "title": "The Visual Studio way",
    "content": "If you’re coming with a Xamarin/UWP/WPF background, most likely you’d want to use Visual Studio for Mac to get things going. The setup is quite straight forward, you just install VS for Mac and tick the check boxes saying you want .NET and .NET MAUI to be setup. More details here — https://learn.microsoft.com/en-us/dotnet/maui/get-started/installation?tabs=vsmac . ",
    "url": "/DotNetNotes/Maui#27bb",
    
    "relUrl": "/DotNetNotes/Maui#27bb"
  },"134": {
    "doc": "Maui",
    "title": "The non — Visual Studio way",
    "content": "If you’re starting out new or just prefer using Visual Studio Code for your general coding workflow, chances are you’d want to continue using that for developing those cross platform apps. And, yes, you can. I have done both; I enjoy Visual Studio, Visual Studio for Mac, but I also enjoy using Visual Studio Code for coding in JavaScript, TypeScript and any other coding related task, really. I honestly prefer it this way as I learnt a lot, just trying to set it up, but you may be looking for a straight forward setup, I understand. Okay, let’s get to it. ",
    "url": "/DotNetNotes/Maui#9ac9",
    
    "relUrl": "/DotNetNotes/Maui#9ac9"
  },"135": {
    "doc": "Maui",
    "title": "1. Install pre-requisites",
    "content": "If you are someone who wants this level of control, I assume you use a software package manager to install things. I use brew for setting everything up. So install brew. Checkout brew.sh for this. ",
    "url": "/DotNetNotes/Maui#618e",
    
    "relUrl": "/DotNetNotes/Maui#618e"
  },"136": {
    "doc": "Maui",
    "title": "2. Install Visual Studio Code (Duh)",
    "content": "You might have it installed already, if not, this can be done with a cask as well. $ brew install --cask visual-studio-code . ",
    "url": "/DotNetNotes/Maui#f971",
    
    "relUrl": "/DotNetNotes/Maui#f971"
  },"137": {
    "doc": "Maui",
    "title": "3. Install .NET SDK",
    "content": "Even though .NET 6 is in LTS right now, I suggest you install both .NET 7 and .NET 6. This will be helpful for something I’ll discuss later in this article. I use my https://github.com/cli-config/cli-config project to set it up, but feel free to set it up however you wish. dotnet is available as a cask in homebrew but I’ve never set it up that way. ",
    "url": "/DotNetNotes/Maui#ea25",
    
    "relUrl": "/DotNetNotes/Maui#ea25"
  },"138": {
    "doc": "Maui",
    "title": "4. Install the MAUI workload",
    "content": "I learnt about .NET cli workloads from an article I found when I originally started setting up MAUI on my Mac. That article seems to have fallen off of the face of the Earth, can’t find it anymore (will link it if I find it again) . $ dotnet workload install maui . You’ll also need the Project Templates for .NET MAUI, so you can do dotnet new maui. $ dotnet new install Microsoft.Maui.Templates::6.0.312 . At this point, you have most of the things to at least write a .NET MAUI app, albeit you won’t be able to run it. 😂 Create a new .NET MAUI app with the following command - . $ dotnet new maui -n maui-hello-world . Depending on what platform you want to run your app on, you’ll need parts of the following - . ",
    "url": "/DotNetNotes/Maui#9a1f",
    
    "relUrl": "/DotNetNotes/Maui#9a1f"
  },"139": {
    "doc": "Maui",
    "title": "5.1. Targeting iOS/mac?",
    "content": "You’ll need to install XCode. I already had XCode installed, but maybe mac should work without it. Go to the App Store and download the latest version of XCode. You DON’T need an Apple Developer Account. To run your app on mac, use the following command . $ dotnet build -t:Run -f net7.0-maccatalyst . Running the .NET MAUI App on macOS For iOS — iPhones and iPads, you can run the following command to start your app in the iOS simulator. $ dotnet build -t:Run -f net7.0-ios . To choose which simulator to use, run the following command first, to get a list of all emulators. (I got to know this from this Github comment) . $ /Applications/Xcode.app/Contents/Developer/usr/bin/simctl list ...== Devices ==-- iOS 16.4 -- iPhone SE (3rd generation) (44D1D920-D740-456A-B3EC-E1AA49ED726A) (Shutdown) iPhone 14 (03C3959D-1674-4EB3-B28E-1CD5448CC818) (Shutdown)... Once you have the Guid, use it to launch the app in the right simulator. $ dotnet build -t:Run -f net7.0-ios -p:_DeviceName=:v2:udid=03C3959D-1674-4EB3-B28E-1CD5448CC818 . Running the .NET MAUI App on the iOS Simulator ",
    "url": "/DotNetNotes/Maui#b123",
    
    "relUrl": "/DotNetNotes/Maui#b123"
  },"140": {
    "doc": "Maui",
    "title": "5.2. Targeting Windows?",
    "content": "Well… You’ll need to run your app on a Windows Machine, for now. ",
    "url": "/DotNetNotes/Maui#2c3d",
    
    "relUrl": "/DotNetNotes/Maui#2c3d"
  },"141": {
    "doc": "Maui",
    "title": "5.3. Targeting Android?",
    "content": "You’ll need Android tooling. I’m being precise here, you don’t need to install Android Studio. That might be a faster setup, and I encourage you to try it out, but I want to install only the things I need, so here goes. The following steps took me hours to figure out 😿 🙆🏻‍♂️, so hope it saves you some time. | First, I’ll install android-sdk | . $ brew install --cask android-sdk . | Install the SDK tools for the right the android version. For example, in the project I created with dotnet new maui, I see &lt;SupportedOSPlatformVersion Condition=\"$([MSBuild]::GetTargetPlatformIdentifier('$(TargetFramework)')) == 'android'\"&gt;31.0.2&lt;/SupportedOSPlatformVersion&gt; in the .csproj file. So i’m installing android-31 | . $ sdkmanager \"system-images;android-31;google_apis;x86_64\"# Make sure you are using the right sdkmanager$ ls -l `which sdkmanager`lrwxr-xr-x@ 1 mrsauravsahu mrsauravsahu 60 Jun 1 17:14 /usr/local/bin/sdkmanager -&gt; /usr/local/Caskroom/android-sdk/4333796/tools/bin/sdkmanager . | Create an emulator with this Android version | . $ avdmanager create avd -n my_android_31 -k \"system-images;android-31;google_apis;x86_64\" . | Launch the emulator, this has its own quirks. | . You need to pass the full path to the emulator binary. $ /usr/local/share/android-sdk/emulator/emulator -avd my_android_31 -skin 540x1200# the -skin parameter can be used to change screen resolution . Note: Don’t kill this command, it’ll kill the emulator. Running the Android Emulator with emulator command Finally! . Time to run the Android app on this Emulator. $ dotnet build -t:Run -f net7.0-androidMSBuild version 17.6.1+8ffc3fe3d for .NET Determining projects to restore... All projects are up-to-date for restore./Users/mrsauravsahu/.cli-config/current/dotnet/packs/Microsoft.Android.Sdk.Darwin/33.0.46/tools/Xamarin.Android.Tooling.targets(70,5): error XA5300: The Android SDK directory could not be found. Check that the Android SDK Manager in Visual Studio shows a valid installation. To use a custom SDK path for a command line build, set the 'AndroidSdkDirectory' MSBuild property to the custom path. [/Users/mrsauravsahu/Downloads/mrsauravsahu/code/maui-hello-world/maui-hello-world.csproj::TargetFramework=net7.0-android]Build FAILED.... And that failed. So, MSBuild needs to know where the android-sdk is, so we can pass that parameter. $ dotnet build -t:Run -f net7.0-android -p:AndroidSdkDirectory=/usr/local/share/android-sdkMSBuild version 17.6.1+8ffc3fe3d for .NET Determining projects to restore... All projects are up-to-date for restore./Users/mrsauravsahu/.cli-config/current/dotnet/packs/Microsoft.Android.Sdk.Darwin/33.0.46/targets/Microsoft.Android.Sdk.Tooling.targets(20,5): error XA0031: Java SDK 11.0 or above is required when using .NET 6 or higher. Download the latest JDK at: &lt;https://aka.ms/msopenjdk&gt; [/Users/mrsauravsahu/Downloads/mrsauravsahu/code/maui-hello-world/maui-hello-world.csproj::TargetFramework=net7.0-android]Build FAILED....Time Elapsed 00:00:01.55 . And we need the Java JDK installed as well — Java 11 . $ brew install java11 . We also need to resolve to this newer version of java if we have any other version installed. I had java 8 installed. We can do that like this. $ export PATH=\"/usr/local/opt/openjdk@11/bin:$PATH\" . Rerun the build command and your app should now run on the Android Emulator . $ dotnet build -t:Run -f net7.0-android -p:AndroidSdkDirectory=/usr/local/share/android-sd . Running the .NET MAUI App on the Android Emulator ",
    "url": "/DotNetNotes/Maui#95e1",
    
    "relUrl": "/DotNetNotes/Maui#95e1"
  },"142": {
    "doc": "Maui",
    "title": "Enhancing the Dev Workflow",
    "content": "And that’s the setup if you want to do things manually. At this moment, you’ll be wondering, running the app is fine, but in my dev workflow, I can’t be wasting time rebuilding the app every time I change something. Now the reason I suggested installing .NET 7 is because of the coolest MAUI extension I found — https://marketplace.visualstudio.com/items?itemName=nromanov.dotnet-meteor — install this, follow the instructions and you’ll be able to use XAML Hot Reload — so no need to rebuild your app, you’ll be able to see live updates in the emulator. ",
    "url": "/DotNetNotes/Maui#46e9",
    
    "relUrl": "/DotNetNotes/Maui#46e9"
  },"143": {
    "doc": "Maui",
    "title": "Conclusion",
    "content": "This was the first blog on .NET MAUI. I’m exploring cross platform app development so I’ll writing more soon. Comment your suggestions and let me know if anything didn’t work and how you fixed it! . — S . ",
    "url": "/DotNetNotes/Maui#6a1f",
    
    "relUrl": "/DotNetNotes/Maui#6a1f"
  },"144": {
    "doc": "Maui",
    "title": "Maui",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Maui > ```MAUI```, short for Multi platform > Application User Interface, is the evolution and simplification of a multitude of solutions which were previously used to create cross-platform > mobile and desktop applications with .NET > ( few of those being the various targets of Xamarin like Xamarin.Forms, Xamarin.Android, Xamarin.iOS; Windows UWP, Windows Presentation Foundation, > Tizen.NET, etc.) > You’ll find all the details here — [Learn Maui](https://learn.microsoft.com/en-us/dotnet/maui/what-is-maui) > I don’t see a reason to explain everything in this post, but the gist being it’s a more modern and simplified experience > but still familiar to the seasoned C#/Xamarin developers. ",
    "url": "/DotNetNotes/Maui",
    
    "relUrl": "/DotNetNotes/Maui"
  },"145": {
    "doc": "Maven",
    "title": "Maven",
    "content": "{: .text-delta } 1. TOC {:toc} *** # CLI ```shell mvn spring-boot:run -Dspring-boot.run.profiles=local ``` - you can provide commandline argument like this: ```shell mvn spring-boot:run -Dspring-boot.run.arguments=\"--spring.profiles.active=dev\" ``` - You can provide JVM argument like this: ```shell mvn spring-boot:run -Dspring-boot.run.jvmArguments=\"-Dspring.profiles.active=dev\" ``` - java -jar ```shell java -Dspring.profiles.active=dev -jar app.jar (VM param) ``` or ```shell java -jar app.jar --spring.profiles.active=dev (program param) ``` # xml ```xml org.springframework.boot spring-boot-maven-plugin dev . ``` # Skip Tests ## skip compilation ```shell mvn -Dmaven.test.skip package ``` ## skip running ```shell mvn -DskipTests package ``` ## xml ```xml true . ``` ```xml true . org.apache.maven.plugins maven-surefire-plugin 2.22.2 ${tests.skip} . ``` ",
    "url": "/SpringNotes/Maven",
    
    "relUrl": "/SpringNotes/Maven"
  },"146": {
    "doc": "Maven",
    "title": "Maven",
    "content": "{: .text-delta } 1. TOC {:toc} *** # [Settings](https://maven.apache.org/settings.html) > Remember that there are two locations where a settings.xml file may live: - Maven installation directory :```$M2_HOME/conf/settings.xml``` - User-specific settings file : ```~/.m2/settings.xml``` ## Example with Keys ```xml . ``` ## [Custom Repo](https://maven.apache.org/settings.html#Repositories) > [Maven Server Setting](https://maven.apache.org/settings.html#Servers) ```xml local-build nexus-repository-group-local ${username} ${password} . local-build nexus-repository-group-local default https://nexus.apps.dla.mil/repository/devsecops-local/ true never true never . ``` ## Create project-specific Maven settings > After maven 3.3.1, use the project-settings-extension to load the project settings, > and put project-specific mirrors into ${basedir}/.mvn/settings.xml in each project. - ```${basedir}/.mvn/extensions.xml``` ```xml com.github.gzm55.maven project-settings-extension 0.3.5 ``` - ```${basedir}/.mvn/settings.xml``` ```xml id https://url-for-this-project/ central . ``` ### IntelliJ > you can set a different settings file for any project: - Go to ```Settings``` -> `Build, Execution, Deployment` -> `Build tools` -> `Maven` - Set the user settings file to `local-settings.xml` # Add Local Repo ## Settings ```xml ${user.home}/personal-wks/.m2/repository true false ``` ## Jar file > Install the JAR into your local Maven repository (typically .m2 in your home folder) as follows: ```shell mvn install:install-file \\ -Dfile= \\ -DgroupId= \\ -DartifactId= \\ -Dversion= \\ -Dpackaging= \\ -DgeneratePom=true ``` - Where each refers to: ``````: the path to the file to load e.g → ```c:\\kaptcha-2.3.jar``` ``````: the group that the file should be registered under e.g →``` com.google.code``` ``````: the artifact name for the file e.g →``` kaptcha``` ``````: the version of the file e.g →``` 2.3``` ``````: the packaging of the file e.g. → ```jar``` ## pom.xml > Step 1: Configure the maven-install-plugin with the goal install-file in your pom.xml ```xml org.apache.maven.plugins maven-install-plugin install-external-non-maven-jar-MWS-Client-into-local-maven-repo clean . default com.amazonservices.mws mws-client 1.0 ${project.basedir}/lib/MWSClientJavaRuntime-1.0.jar jar . true install-file . ``` > Step 2: Once you have configured the maven-install-plugin as shown above in your pom.xml file, you have to use these jars in your pom.xml as usual: ```xml com.amazonservices.mws mws-client 1.0 ``` ## jar > The really quick and dirty way is to point to a local file, please note \"system\" is deprecated by now: ```xml com.sample samplifact 1.0 system C:\\DEV\\myfunnylib\\yourJar.jar ``` > However, this will only live on your machine (obviously), for sharing it usually makes sense to use a proper m2 archive (nexus/artifactory) or if > you do not have any of these or don't want to set > one > up a local maven structured archive and configure a \"repository\" in your pom: - local: ```xml my-local-repo file://C:/DEV//mymvnrepo ``` - remote: ```xml my-remote-repo http://192.168.0.1/whatever/mavenserver/youwant/repo ``` > for this solution, a relative path is also possible using the basedir variable: ```xml file:${basedir} ``` ",
    "url": "/Build/Maven",
    
    "relUrl": "/Build/Maven"
  },"147": {
    "doc": "MetaProgramming",
    "title": "MetaProgramming",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Objects ## properties to map ```groovy intCmd.class .declaredFields .findAll { !it.synthetic } .collectEntries { [it.name, intCmd.\"$it.name\"] } ``` ### can also use slurper ```groovy class BaseObject { Map asMap() { def jsonSlurper = new groovy.json.JsonSlurperClassic() Map map = jsonSlurper.parseText(this.asJson()) return map } String asJson() { def jsonOutput = new groovy.json.JsonOutput() String json = jsonOutput.toJson(this) return json } } ``` # Object Extensions ## if you don’t know the name of method at runtime ```groovy peter.invokeMethod(\"walk\", 10) ``` # MetaProgramming ## Create Class Prop Dynamically > code example from class constructor ```groovy dynamicProperties.eachWithIndex { String newProp, Integer index -> if (index if (method.name == 'thismethod') method.invoke(arg) } ``` ## check if method exists ```groovy object.respondsTo(methodName) ``` ## invoke method dynamically ```groovy if (methodUsed) returnSet = invokeMethod(methodUsed as String, group) as Set ``` # Class object -- reflection ## dynamically create class ```java public class Example { Class clazz = Class.forName(\"java.util.Date\"); Object date = clazz.newInstance(); } ``` ```java public class Example { Class clazz = Class.forName(\"com.foo.MyClass\"); Constructor constructor = clazz.getConstructor(String.class, Integer.class); Object instance = constructor.newInstance(\"stringparam\", 42); } ``` ```groovy def p3 = Class.forName(\"Person\").newInstance() assert p3 ``` > using groovy classLoader ```groovy def instance = this.class.classLoader.loadClass('Item', true, false)?.newInstance() ``` > **_Code Example_** ```groovy // expected configmap // Map configMap = [rest: RESTClientResultConfig, soap: SOAPClientResultConfig, ftp: FTPClientResultConfig, email: EmailClientResultConfig] Class clazz = configMap.get(name) Object typeConfigProps = wSConfigCommand.getProperty(name) Object newInstance = clazz.newInstance([*: newClientOrderConfig.properties, *: typeConfigProps.properties] as Object) newInstance.wSConfigType = type newInstance.clientSetup = newClientSetup def err = validatingClosure(newInstance) if (err) { returnObj.errors = [(err.name): err] } else { returnObj = [(type.getKey()): newInstance.save(flush: true).id] } ``` > possible errors 1. the JVM can't find or can't load your class 2. the class you're trying to instantiate doesn't have the right sort of constructors 3. the constructor itself threw an exception 4. the constructor you're trying to invoke isn't public 5. a security manager has been installed and is preventing reflection from occurring ",
    "url": "/GroovyNotes/MetaProgramming",
    
    "relUrl": "/GroovyNotes/MetaProgramming"
  },"148": {
    "doc": "MicroStream",
    "title": "MicroStream",
    "content": "{: .text-delta } 1. TOC {:toc} --- - # [Docs](https://micronaut-projects.github.io/micronaut-microstream/latest/guide/) # Project Examples - > [Personal Large Integration SSI ](https://github.com/14paxton/micronaut_microstream) - > [Personal CRUD app](https://github.com/14paxton/micronotes/tree/master/Projects/crud-data-microstream) - > [Sergio Video Walkthrough](https://www.youtube.com/watch?v=5W6oVj0h6rQ&t=602s) - > [Sergio AWS Walkthrough](https://www.youtube.com/watch?v=G5Uy8OODtEg&list=PLFeSAZzYdUofvGVIxNDEQ7lvRjXWdw0rw&index=7) # [Type Handlers](https://docs.microstream.one/manual/storage/addendum/specialized-type-handlers.html) # Tid-Bits ## [Copy Object](https://docs.microstream.one/manual/storage/storing-data/deep-copy.html) ```java public class Copy { ObjectCopier objectCopier = ObjectCopier.New(); Customer customer = root.getCustomer(id); Customer customerCopy = objectCopier.copy(customer); } ``` # Running ```bash ./gradlew run ``` *** Use in build.gradle to run in dev *** ```gradle run { systemProperty('micronaut.environments', 'dev') } ``` # [GUI](https://docs.microstream.one/manual/storage/rest-interface/client-gui.html) > [Micronaut Enable Rest API](https://micronaut-projects.github.io/micronaut-microstream/snapshot/guide/#rest) > add to `build.gradle` ```gradle developmentOnly(\"io.micronaut.microstream:micronaut-microstream-rest\") ``` > add to `application.yml` ```yaml microstream: rest: enabled: true ``` ## Run downloadable jar [Direct Downlond](https://repo1.maven.org/maven2/one/microstream/microstream-storage-restclient-app/08.01.02-MS-GA/microstream-storage-restclient-app-08.01.02-MS-GA.jar) ```shell java -jar microstream-storage-restclient-app-08.01.02-MS-GA.jar --server.port=8888 ``` > Then just open http://localhost:8888 in your browser, select the base URL of the REST service and click connect. # Lombok *** Needs to be above micronaut annotations on classpath *** *** For lombok to recognize micronaut annotations and inject into constructor *** > create `lombok.config` at `root` > insert line: ``` lombok.copyableannotations += io.micronaut.core.annotation.Nullable ``` # GraalVM > - [MicroStream GitHub Source: example-graalvm-native](https://github.com/microstream-one/example-graalvm-native/tree/master/graalvm-native/src/main/resources/META-INF/native-image) ## Configuration > To run with GraalVM add: > > > [reflect-config.json](https://gist.github.com/14paxton/d51cc2f493b8d8f4271c0cf55f2aefab) to `/src/main/resources/META-INF/native-image/[package]` > > so `Graal` recognizes imported classes that need to be reflective ```bash touch /src/main/resources/META-INF/native-image/com/ssi/reflect-config.json ``` ## Create native image ```bash ./gradlew nativeCompile ``` ## Run Native Image in Dev ```bash ./build/native/nativeCompile/graal-vm-ssi -Dmicronaut.environments=dev ``` # Resources ## Micronaut 3.7.2 Documentation ### [User Guide](https://docs.micronaut.io/3.7.2/guide/index.html) ### [API Reference](https://docs.micronaut.io/3.7.2/api/index.html) ### [Configuration Reference](https://docs.micronaut.io/3.7.2/guide/configurationreference.html) ### [Micronaut Guides](https://guides.micronaut.io/index.html) ## Gradle ### [Shadow Gradle Plugin](https://plugins.gradle.org/plugin/com.github.johnrengelman.shadow) ### [Gradle plugin for GraalVM Native Image building : Config Doc](https://graalvm.github.io/native-build-tools/0.9.13/gradle-plugin.html#configuration-options) ### [Gradle Plugin for Micronaut : io.micronaut.graalvm](https://plugins.gradle.org/plugin/io.micronaut.graalvm) ## GraalVM ### [Micronaut Docs: GraalVM ](https://docs.micronaut.io/latest/guide/index.html#graal) ### [GraalVM Docs : Reflection](https://www.graalvm.org/22.2/reference-manual/native-image/metadata/) ### [reflect-config.json Graal SourceCode](https://github.com/oracle/graal/blob/master/docs/reference-manual/native-image/Reflection.md) ## Microstream documentation ### [Micronaut MicroStream documentation](https://micronaut-projects.github.io/micronaut-microstream/latest/guide) ### [https://microstream.one/](https://microstream.one/) ### Microstream-REST documentation #### [Micronaut MicroStream REST documentation](https://micronaut-projects.github.io/micronaut-microstream/latest/guide/#rest) #### [https://docs.microstream.one/manual/storage/rest-interface/index.html](https://docs.microstream.one/manual/storage/rest-interface/index.html) ## HTTP-client documentation ### [Micronaut HTTP Client documentation](https://docs.micronaut.io/latest/guide/index.html#httpClient) ## Security-JWT documentation ### [Micronaut Security JWT documentation](https://micronaut-projects.github.io/micronaut-security/latest/guide/index.html) ## Resources ### Micronaut Documentation - [API Reference](https://docs.micronaut.io/latest/api/index.html) - [Configuration Reference](https://docs.micronaut.io/latest/guide/configurationreference.html) - [Micronaut Guides](https://guides.micronaut.io/index.html) --- - [Shadow Gradle Plugin](https://plugins.gradle.org/plugin/com.github.johnrengelman.shadow) ### GraalVM - [Micronaut Docs: GraalVM ](https://docs.micronaut.io/latest/guide/index.html#graal) - [Gradle plugin for GraalVM Native Image building : Config Doc](https://graalvm.github.io/native-build-tools/0.9.13/gradle-plugin.html#configuration-options) - [Gradle Plugin for Micronaut : io.micronaut.graalvm](https://plugins.gradle.org/plugin/io.micronaut.graalvm) - [GraalVM Docs : Reflection](https://www.graalvm.org/22.2/reference-manual/native-image/metadata/) - [reflect-config.json Graal SourceCode](https://github.com/oracle/graal/blob/master/docs/reference-manual/native-image/Reflection.md) ### Microstream documentation - [Micronaut MicroStream documentation](https://micronaut-projects.github.io/micronaut-microstream/latest/guide) - [https://microstream.one/](https://microstream.one/) #### Microstream-REST documentation - [Micronaut MicroStream REST documentation](https://micronaut-projects.github.io/micronaut-microstream/latest/guide/#rest) - [https://docs.microstream.one/manual/storage/rest-interface/index.html](https://docs.microstream.one/manual/storage/rest-interface/index.html) ### HTTP-client documentation - [Micronaut HTTP Client documentation](https://docs.micronaut.io/latest/guide/index.html#httpClient) ### Security-JWT documentation - [Micronaut Security JWT documentation](https://micronaut-projects.github.io/micronaut-security/latest/guide/index.html) ",
    "url": "/Micronotes/MicroStream",
    
    "relUrl": "/Micronotes/MicroStream"
  },"149": {
    "doc": "Micronotes",
    "title": "Micronotes",
    "content": "# Projects ## [MicroMail](https://github.com/14paxton/MicroMail) > email microservice using sendgrid # [Install](https://micronaut-projects.github.io/micronaut-starter/latest/guide/#installation) ## [Download and Install](https://micronaut.io/download/) # [REPO](https://github.com/14paxton/Micronotes) # Run ```bash gradlew server:run ``` ```bash gradlew client:start ``` ## Create executable jar for multi build ```bash gradlew assembleServerAndClient ``` > Start ```bash java -jar ``` ```bash java -jar server/build/libs/server/[nameOfJar].jar ``` ## create a groovy app ```bash mn create-app example.micronaut.complete --lang=groovy ``` ",
    "url": "/Micronotes/",
    
    "relUrl": "/Micronotes/"
  },"150": {
    "doc": "Microservice.md",
    "title": "Microservice.md",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Tutorials - [C-Sharp Corner](https://www.c-sharpcorner.com/article/microservice-using-asp-net-core/) - [.Net Website Learning Path](https://learn.microsoft.com/en-us/training/paths/create-microservices-with-dotnet/) ",
    "url": "/DotNetNotes/Microservice",
    
    "relUrl": "/DotNetNotes/Microservice"
  },"151": {
    "doc": "Modules",
    "title": "Modules",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Import ```javascript // Classic string literals const module1 = await import(\"./myModule.js\"); // A variable const path = \"./myOtherModule.js\"; const module2 = await import(path); // Function call const getPath = (version) => `./myModule/versions/${version}.js`; const moduleVersion1 = await import(getPath(\"v1.0\")); const moduleVersion2 = await import(getPath(\"v2.0\")); ``` ## Import and run in script tag ```html ``` ## Dynamic Import ```html ``` ## Async Import ```javascript async function loadMyModule() { console.log(\"loadMyModule\"); const {default: runFunc} = await import(moduleSpecifier(file)); await runFunc(); } await loadMyModule(); ``` ## Preload modules --- > You can optimize the delivery of your modules further by using ` | `. > This way, browsers can preload and even preparse and precompile modules and their dependencies. --- ```html | ``` --- > This is especially important for larger dependency trees. > Without `rel=\"modulepreload\"`, > the browser needs to perform multiple `HTTP` requests to figure out the full dependency tree. > However, if you declare the full list of dependent module scripts with `rel=\"modulepreload\"`, > the browser does not have to discover these dependencies progressively. --- ## Use Side Effects ```javascript (async () => { if (somethingIsTrue) { // import module for side effects await import(\"/modules/my-module.js\"); } })(); ``` ## Defaults ```javascript (async () => { if (somethingIsTrue) { const { default: myDefault, foo, bar, } = await import(\"/modules/my-module.js\"); } })(); ``` ## On Demand ```javascript const main = document.querySelector(\"main\"); for (const link of document.querySelectorAll(\"nav > a\")) { link.addEventListener(\"click\", (e) => { e.preventDefault(); import(\"/modules/my-module.js\") .then((module) => { module.loadPageInto(main); }) .catch((err) => { main.textContent = err.message; }); }); } ``` ## Based on Env ```javascript let myModule; if (typeof window === \"undefined\") { myModule = await import(\"module-used-on-server\"); } else { myModule = await import(\"module-used-in-browser\"); } ``` ## With A non Literal ```javascript Promise.all(Array.from({length: 10}).map((_, index) => import(`/modules/module-${index}.js`),),) .then((modules) => modules.forEach((module) => module.load())); ``` ",
    "url": "/JavaScript/Modules",
    
    "relUrl": "/JavaScript/Modules"
  },"152": {
    "doc": "MySQL",
    "title": "MySQL",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Loose Notes ```shell MYSQL mysql -u USERNAME -p ``` ```shell show databases; ``` ## SETTING TIMEZONES - Get timezone ```shell SELECT @@global.time_zone, @@session.time_zone; ``` - Get timestamp ```shell SELECT CURRENT_TIMESTAMP(); ``` - Set timestamp utc ```shell SET @@session.time_zone='+00:00'; ``` > You can set in my.cnf ```shell [mysqld] **other variables** default_time_zone='+00:00' ``` # csv to table ```shell GET PATHS MySQL import LOAD DATA LOCAL INFILE 'C:/Groovy/englishData.csv' INTO TABLE original_data FIELDS TERMINATED BY ',' ENCLOSED BY '\"' LINES TERMINATED BY '\\r\\n' IGNORE 1 LINES ``` # trouble installing ```shell sudo apt-get remove --purge mysql-\\* ``` ```shell sudo apt-get autoremove ``` ```shell sudo apt-get autoclean ``` ```shell sudo apt-get dist-upgrade ``` ```shell sudo apt-get install mysql-server mysql-client ``` > (or maria if still having trouble). ```shell sudo apt-get install mariadb-server ``` - If you have issues uninstalling/installing because MySQL process is live, you can try this first, then above: ```shell sudo kill $(pgrep mysql) ``` # other trouble shooting - A very simple solution which I (the linux noob) had to dig up... is to create the file. ``` nano /etc/mysql/my.cnf.fallback ``` > and fill it with the default content from the mysql-common 5.7.11-0ubuntu6 package. ```text # # The MySQL database server configuration file. # # You can copy this to one of: # - \"/etc/mysql/my.cnf\" to set global options, # - \"~/.my.cnf\" to set user-specific options. # # One can use all long options that the program supports. # Run program with --help to get a list of available options and with # --print-defaults to see which it would actually understand and use. # # For explanations see # http://dev.mysql.com/doc/mysql/en/server-system-variables.html # This will be passed to all mysql clients # It has been reported that passwords should be enclosed with ticks/quotes # escpecially if they contain \"#\" chars... # Remember to edit /etc/mysql/debian.cnf when changing the socket location. # Here is entries for some specific programs # The following values assume you have at least 32M ram !includedir /etc/mysql/conf.d/ # # The MySQL database server configuration file. # # You can copy this to one of: # - \"/etc/mysql/my.cnf\" to set global options, # - \"~/.my.cnf\" to set user-specific options. # # One can use all long options that the program supports. # Run program with --help to get a list of available options and with # --print-defaults to see which it would actually understand and use. # # For explanations see # http://dev.mysql.com/doc/mysql/en/server-system-variables.html # This will be passed to all mysql clients # It has been reported that passwords should be enclosed with ticks/quotes # escpecially if they contain \"#\" chars... # Remember to edit /etc/mysql/debian.cnf when changing the socket location. # Here is entries for some specific programs # The following values assume you have at least 32M ram !includedir /etc/mysql/conf.d/ ``` # Resources - https://www.apt-browse.org/browse/ubuntu/xenial/main/all/mysql-common/5.7.11-0ubuntu6/file/etc/mysql/my.cnf.fallback - https://askubuntu.com/questions/643251/having-trouble-installing-and-removing-mysql-in-ubuntu ",
    "url": "/Linux/MySQL",
    
    "relUrl": "/Linux/MySQL"
  },"153": {
    "doc": "Node",
    "title": "Node",
    "content": " ",
    "url": "/JavaScript/Node/",
    
    "relUrl": "/JavaScript/Node/"
  },"154": {
    "doc": "Number",
    "title": "Number",
    "content": "{: .text-delta } 1. TOC {:toc} --- ## `Number.prototype.toLocaleString()` The [`Number.prototype.toLocaleString()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toLocaleString) method takes two optional parameters of `locales` and `options`. If you don't pass either, you'll get the browser's default locale. We'll focus on the `options` parameter in the following sections. ```javascript const number = 12345.6789; console.log(number.toLocaleString()); // 12,345.679 (defaults to the \"en-US\" locale in my case) console.log(number.toLocaleString(\"de-DE\")); // 12.345,679 ``` ## Currency Format > Formatting numbers is great and all, but what about fancy stuff like money!?! Well, that's were the 2nd optional `options` parameter comes into > play. If you supply a property of `{ style: \"currency\" }` and a valid `currency` ( > an [ISO 4217 currency code](http://www.currency-iso.org/en/home/tables/table-a1.html)) then you'll get a nicely formatted currency with locale > support! > NOTE: There is no default `currency` code, so you'll get an error if you don't provide one. ```javascript const number = 12345.6789; console.log(number.toLocaleString(\"en-US\", { style: \"currency\", currency: \"USD\", }),); // $12,345.68 console.log(number.toLocaleString(\"de-DE\", { style: \"currency\", currency: \"EUR\", }),); // 12.345,68 € console.log(number.toLocaleString(\"ja-JP\", { style: \"currency\", currency: \"JPY\", }),); // ￥12,346 ``` ## Significant Digits > Sometimes you want to control how many digits are significant in a number. You might think of this as Frontend Estimation. You can provide a `minimumSignificantDigits` (defaults to `1`) or a `maximumSignificantDigits` (defaults to `21`). ```javascript const number = 12345.6789; console.log(number.toLocaleString(\"en-US\", { maximumSignificantDigits: 1, }),); // 10,000 console.log(number.toLocaleString(\"fr-FR\", { maximumSignificantDigits: 3, }),); // 12 300 ``` ## Unit Support > Unit support is one of those things that I wouldn't have expected to be a feature, but is pretty cool to have. You can mix and match locales along > with units of measurement. You can find a full list of possible units from > the [ECMAScript specification](https://tc39.es/proposal-unified-intl-numberformat/section6/locales-currencies-tz_proposed_out.html#sec-issanctionedsimpleunitidentifier). > You can also provide a `unitDisplay` of `long`, `short` (default), or `narrow` to control how verbose the unit is displayed. > NOTE: This is one of those features that is not supported by Safari. Also there is no default value for `unit`, so if `style` is set to `unit` then > one must be provided. ```javascript const number = 12345.6789; console.log(number.toLocaleString(\"en-US\", { style: \"unit\", unit: \"mile-per-hour\", }),); // 12,345.679 mph console.log(number.toLocaleString(\"fr-FR\", { style: \"unit\", unit: \"liter\", unitDisplay: \"long\", }),); // 12 345,679 litres ``` ## Compact Notation I found this amusing when I realized this feature existed. Not too long ago I needed something like this to abbreviate large numbers. I ended up finding a snippet of code online to get the job done, but now I know I could have used `{ notation: \"compact\" }!` It also takes an optional `compactDisplay` that can be set to `short` (default) or `long`. > NOTE: This is one of those features that is not supported in Safari. ```javascript const number = 12345.6789; console.log(number.toLocaleString(\"en-US\", { notation: \"compact\", compactDisplay: \"short\", }),); // 12K console.log(number.toLocaleString(\"en-US\", { notation: \"compact\", compactDisplay: \"long\", }),); // 12 thousand ``` ## Percents Having percent support is probably not a surprise to you, but it is handy to have especially since it is locale aware (as all the other options are). It gets a little bit nicer because you can also provide other options such as `minimumFractionDigits` (defaults to 0 or 2 for currency) or `maximumFractionDigits` to control how many fraction digits to use. ```javascript const number = 0.1234; console.log(number.toLocaleString(\"en-US\", { style: \"percent\", minimumFractionDigits: 2, }),); // 12.34% ``` ## Accounting I don't typically show negative currency with parenthesis, but apparently that is a common approach for those that do a lot of accounting. I probably won't use this, but it's good to know that it's an option in case I ever do. > NOTE: This is one of those features that is not supported in Safari. ```javascript const number = -123.456; console.log(number.toLocaleString(\"en-US\", { style: \"currency\", currency: \"USD\", currencySign: \"accounting\", signDisplay: \"always\", }),); // ($123.46) ``` ## `Intl.NumberFormat` So, instead of using [Number.prototype.toLocaleString()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toLocaleString) you could also use the `Intl.NumberFormat` constructor and then call the `format` method to format your numbers. However, that might confusing and may make you question which technique you should use. If you find yourself needing to format many numbers over and over again with the same locale and same options, then using `Intl.NumberFormat` is preferable for performance reasons. > \"When formatting large numbers of numbers, it is better to create > a[NumberFormat](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat)object and use the function provided > by > its[NumberFormat.format](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat/format) > property.\" --[Number.prototype.toLocaleString()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toLocaleString) ```javascript const numberFormat = new Intl.NumberFormat(\"en-US\", { style: \"unit\", unit: \"mile-per-hour\", }); console.log(numberFormat.format(12345.6789)); // 12,345.679 mph console.log(numberFormat.format(2345.67891)); // 2,345.679 mph ``` ",
    "url": "/JavaScript/Number",
    
    "relUrl": "/JavaScript/Number"
  },"155": {
    "doc": "OOP",
    "title": "OOP",
    "content": "| --- # Creating a New Object ## new class / new instance ```java class ClassA { } //new Keyword ClassA b = new ClassA(); // new instance ClassA c = ClassA.class.newInstance(); // new instance in class constructor Constructor d = ClassA.class.getConstructor().newInstance(); ``` ## cloneable ```java public class ClassA implements Cloneable { protected Object clone() throws CloneNotSupportedException { } ClassA obj1 = new ClassA(); ClassA obj2 = obj1.clone(); } ``` ## serializable ```java public class ClassA implements Serializable { } // Serialization ClassA classA; try( ObjectOutputStream out = new ObjectOutputStream( new FileOutputStream(\"classA.obj\"))){ out. writeObject(classA); } // Deserialization ClassA deserialClassA; try( ObjectInputStream in = new ObjectInputStream( new FileInputStream(\"classA.obj\"))){ deserialClassA =(ClassA)in. readObject(); } // deserialClassA Object will be created after deserialization process ``` ",
    "url": "/JavaNotes/OOP",
    
    "relUrl": "/JavaNotes/OOP"
  },"156": {
    "doc": "Object",
    "title": "Object",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Filter and rebuild Object ```javascript Object.fromEntries(Object.entries(props).filter(([k, v]) => !customProps.includes(k)),); ``` # ForEach on Object Keys ```javascript for (let param of Object.keys(params)) { routeUrl = routeUrl.replace(`:${param}`, params[param]); } ``` # ForEach on Entries > destructure tuple for key value ```javascript for (const [key, value] of Object.entries(unionObject)) { if (value .matchName((enumInfo) => enumInfo.value) .replace(/\\s/g, \"\") .toLowerCase() === enumValue.replace(/\\s/g, \"\").toLowerCase()) return key; } ``` # If Object Key Exists ```javascript Object.hasOwn(dimensionsObj, key) ? dimensionsObj[key]?.height : null; ``` # Get Object Key By Value ```javascript export const getKeyByValue = (object, value) => { return Object.keys(object).find((key) => object[key] === value); }; ``` # Create New With Default Props ```javascript const defaultObj = passedDefaultPPTReturnObject ? {...passedDefaultPPTReturnObject} : {}; for (const newProp of newProps) { Object.assign(defaultObj, newProp); } ``` # Flatten Nested Objects ```javascript export const flattenMessages = (nestedMessages, prefix = \"\") => { if (nestedMessages === null || nestedMessages === undefined) { return {}; } return Object.keys(nestedMessages).reduce((messages, key) => { const value = nestedMessages[key]; const prefixedKey = prefix ? `${prefix}.${key}` : key; if (typeof value === \"string\") { Object.assign(messages, {[prefixedKey]: value}); } else { Object.assign(messages, flattenMessages(value, prefixedKey)); } return messages; }, {}); }; ``` ",
    "url": "/JavaScript/Object",
    
    "relUrl": "/JavaScript/Object"
  },"157": {
    "doc": "Obsidian",
    "title": "Obsidian",
    "content": "--- {: .text-delta } 1. TOC {:toc} --- --- # Multiple Cursors > Obsidian lets you edit text in multiple places at the same time using multiple cursors. You can add additional cursors by holding`Alt`(or`Option`on > macOS) and selecting another position in the note. # Templates ## [GitHubPages](https://github.com/ObsidianPublisher/template-gh-pages/blob/main/mkdocs.yml) # [Editing And Formatting](https://help.obsidian.md/Editing+and+formatting/Basic+formatting+syntax) # [METADATA](https://help.obsidian.md/Editing+and+formatting/Metadata#:~:text=YAML%20is%20a%20widely%20used,key%20and%20a%20corresponding%20value.&text=While%20the%20order%20of%20each,more%20than%20one%20tag%20key.) ### FRONTMATTER ```yml --- title: GHP category: GitHubPages/Pages share: true repo: owner: 14paxton repo: 14paxton.github.io branch: master --- ``` # [Plugins](https://help.obsidian.md/Plugins/Core+plugins) ## [Material for MKDocs](https://squidfunk.github.io/mkdocs-material/creating-your-site/#advanced-configuration) ## [GitHub Publish](https://obsidian-publisher.netlify.app/plugin/) - [MkDocsPublisher Documents](https://mkusz.github.io/mkdocs-publisher/) - [REPO ReadMe](https://github.com/ObsidianPublisher/obsidian-github-publisher/blob/master/README.md) ### [upload setting](https://obsidian-publisher.netlify.app/plugin/settings/upload/) ### [FileSettings](https://obsidian-publisher.netlify.app/plugin/settings/per%20files%20settings/) #### YAML ```yaml links: mdlinks: boolean #convert to markdownlinks convert: boolean #transform to simple string with keeping alt text or file name/ title (it removes the [](.md#) or []()) embed: send: boolean #prevent sending embed remove: boolean #remove embed citation completely (replace to empty string the ![](.md#) or ![]()) attachment: send: boolean #prevent sending attachment folder: string #change default folder for attachment dataview: boolean #force/prevent dataview queries conversion hardbreak: boolean #same but for hardbreak repo: branch: string #change default branch repo: string #change default repository owner: string #change a default owner (it's your GitHub Username) autoclean: boolean #disable auto cleaning baselink: string #change base link for copylink settings ``` ```yml links: mdlinks: boolean #convert to markdownlinks convert: boolean #transform to simple string with keeping alt text or file name/ title (it removes the [](.md#) or []()) embed: send: boolean #prevent sending embed remove: boolean #remove embed citation completely (replace to empty string the ![](.md#) or ![]()) attachment: send: boolean #prevent sending attachment folder: string #change default folder for attachment dataview: boolean #force/prevent dataview queries conversion hardbreak: boolean #same but for hardbreak baselink: string #change base link for copylink settings multipleRepo: - repo: branch: string #change default branch repo: string #change default repository owner: string #change a default owner (it's your GitHub Username) autoclean: boolean #enable auto cleaning - repo: branch: string #change default branch repo: string #change default repository owner: string #change a default owner (it's your GitHub Username) autoclean: boolean #enable auto cleaning ``` ### [Folder Config](https://obsidian-publisher.netlify.app/plugin/example/filepath_example/) ### [Frontmatter Keys](https://obsidian-publisher.netlify.app/plugin/settings/per%20files%20settings/#frontmatter-keys-explanation) ### [Commands](https://obsidian-publisher.netlify.app/plugin/commands/) > The plugin adds seven commands, with one also applied on the right-click menu. > There are four types of commands : - > `Upload` - > `Refresh` - > `Purge` - > `Test` and ```Check```` ### Upload > Upload sends the `share: true` file and its embedded contents (or note, based on your settings) to the configured repo. > \"Shared\" meaning here which have the `share: true` frontmatter key It includes: - `Upload single current active note` _(also in the right-click menu)_ : Send only the single current active note. The repo can be changed using the [frontmatter](Per%20files%20settings.md#). - `Upload all notes` : Send all shared notes to the configured repository. - `Upload unpublished notes` : Send only the shared note that is not present on the repository. ### Refresh Refresh scans the repository and updates or send the notes based on some conditions. - `Refresh all published notes` : It only updates the content of the published notes. Here, the commit date and the last edited time (from Obsidian) are compared. - `Refresh published and upload new notes` : It uploads the note not present in the repository and also updates the note edited since the last push. Same as above, dates are compared. > [!tip] The refresh command uses the last edited time and the last commit date to determine if the note has been edited since the last push. > As a data view table/list/task update don't edit the contents of a note, it won't be updated by the refresh command. > You can use the `Upload` command to update it. ### Purge There is only one command here : `Purge depublished and deleted files` > Depublished here means that the `share` key has been removed or set to `false`. This command will clean your configured repository by removing the files you deleted or stopped sharing. ### Test Again, only one command : `Test the connection to the configured repository`. It will check if the repository exists, and also the main branch you set. It also checks whether you forgot (or not) to set a value. #### Check > The commands are `Check the rate limit of the GitHub API` It will show you the number of requests you have left, and the time when the limit will be > reset. > These commands are also run along the verification of the repository value, and check if you will reach the limit using the commands (upload, > refresh and purge), based on the number of files you > > will > send, update or delete. > The rate limit is 5000 requests per hour. > If you reach the limit, you will have to wait for the next hour to be able to push again. > Exceeding the limit will result in a `403` error. > More information about the rate limit can be found [here](https://docs.github.com/en/rest/overview/resources-in-the-rest-api#rate-limiting). ### Copy path > You can choose to add a command to copy the path (from the blog) of the current note. This command is only available if you have enabled the copy > link feature in [Plugin](Plugin.md#). ### `mkdoc.yml` ```yml site_name: Obsidian Mkdocs Publisher site_description: The documentation for Obsidian Mkdocs Publisher site_url: https://obsidian-publisher.netlify.app theme: name: \"material\" highlightjs: true hljs_languages: - yaml - rust logo: assets/meta/SEO.png favicon: assets/meta/SEO.png custom_dir: overrides font: text: Ubuntu code: Ubuntu Mono language: en palette: # Light mode - media: \"(prefers-color-scheme: light)\" scheme: default primary: teal accent: light blue toggle: icon: material/toggle-switch-off-outline name: Switch to dark mode # Dark mode - media: \"(prefers-color-scheme: dark)\" scheme: slate primary: blue accent: indigo toggle: icon: material/toggle-switch name: Switch to light mode features: - navigation.indexes - navigation.top - navigation.sections - navigation.tabs - navigation.tabs.sticky - navigation.expand - search.suggest - search.highlight # Extensions markdown_extensions: - footnotes - nl2br - attr_list - sane_lists - meta - smarty - tables - mdx_breakless_lists - pymdownx.arithmatex: generic: true - pymdownx.details - pymdownx.magiclink - pymdownx.critic - pymdownx.caret - pymdownx.keys - pymdownx.mark - pymdownx.tilde - pymdownx.highlight: use_pygments: true anchor_linenums: true - pymdownx.tasklist: custom_checkbox: true - pymdownx.emoji: emoji_generator: !!python/name:pymdownx.emoji.to_svg - admonition - md_in_html - toc: permalink: true - pymdownx.inlinehilite - pymdownx.snippets - pymdownx.superfences: custom_fences: - name: mermaid class: mermaid format: !!python/name:pymdownx.superfences.fence_code_format plugins: - search - glightbox - ezlinks: wikilinks: true - awesome-pages: collapse_single_pages: true - embed_file: callouts: true custom-attributes: \"assets/css/custom_attributes.css\" language_message: \"ERROR 404 : NOT FOUND\" - callouts - custom-attributes: file: \"assets/css/custom_attributes.css\" - meta-descriptions - exclude: glob: - \"*obsidian*\" - tags: tags_file: tags.md hooks: - overrides/hooks/on_page_markdown.py - overrides/hooks/on_env.py - overrides/hooks/on_files.py extra_javascript: - https://cdn.jsdelivr.net/gh/ObsidianPublisher/assets@main/dist/javascript.js - https://polyfill.io/v3/polyfill.min.js?features=es6 - https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js extra_css: - https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css - https://cdn.jsdelivr.net/gh/ObsidianPublisher/assets@main/dist/styles.css - assets/css/admonition.css - assets/css/custom_attributes.css - assets/css/customization.css extra: comments: false generate_graph: false SEO: \"assets/meta/SEO.png\" attachments: \"assets/img\" no-auto-h1: true blog_list: pagination: false pagination_message: false pagination_translation: \"\" no_page_found: \"\" hooks: strip_comments: true fix_heading: false ``` ",
    "url": "/Obsidian/Obsidian",
    
    "relUrl": "/Obsidian/Obsidian"
  },"158": {
    "doc": "PGP",
    "title": "PGP",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Install ``` $ sudo apt install gnupg [On Debian, Ubuntu and Mint] $ sudo yum install gnupg [On RHEL/CentOS/Fedora and Rocky/AlmaLinux] $ sudo emerge -a app-crypt/gnupg [On Gentoo Linux] $ sudo apk add gnupg [On Alpine Linux] $ sudo pacman -S gnupg [On Arch Linux] $ sudo zypper install gnupg [On OpenSUSE] ``` # Generating New GPG Key Pairs in Linux ```shell gpg --full-generate-key ``` # List GPG Key Pairs in Linux ``` $ gpg --list-public-keys OR $ gpg --list-public-keys --keyid-format=long ``` # list the secret GPG key ``` $ gpg --list-secret-keys OR $ gpg --list-secret-keys --keyid-format=long ``` # Encrypting Files Using GPG in Linux ```shell #gpg -e -r aaronkilik@gmail.com secret.txt ``` ```shell gpg --encrypt --recipient aaronkilik@gmail.com secret.txt ``` # Decrypting Files Using GPG in Linux ```shell gpg -d -o secrets.txt secrets.txt.gpg ``` # Export Public PGP Key ```shell gpg -a --export [pub id] > mypub.asc ``` # Setup GPG on macOS ## Install ------------------- brew install gpg Enter fullscreen mode Exit fullscreen mode ## Create new key --------------------------------- # generate key gpg --full-generate-key # get the public key using key ID gpg --armor --export XXXXXX # set the key ID in git git config --global user.signingkey XXXXXXX # always sign commits git config commit.gpgsign true ## Setup keychain --------------------------------- gpg collects password from cli. This causes issues if using vscode to create a commit. So input can be taken from a popup or keychain. brew install pinentry-mac Enter fullscreen mode Exit fullscreen mode The brew installation will print these caveats: ==> Caveats You can now set this as your pinentry program like ~/.gnupg/gpg-agent.conf pinentry-program /opt/homebrew/bin/pinentry-mac Enter fullscreen mode Exit fullscreen mode So just create a `~/.gnupg/gpg-agent.conf` file if it doesn't exist and put the line `pinentry-program /opt/homebrew/bin/pinentry-mac` in it. Now, to check if it works. 1.`gpg --list-keys` to print the existing keys. 1. `pkill -TERM gpg-agent`. 2. Restart the terminal. 3. `echo test | gpg -e -r | gpg -d` This should open a pin entry popup and make sure \"save in keychain\" option is selected. # Updating expired GPG keys and their backup 🔑🔐💻 I use a GPG key to sign my git commits. An error like this one might be a sign of an expired GPG key. ``` error: gpg failed to sign the data fatal: failed to write commit object ``` ## 1. Check if you have an expired key - On your machine, open up the shell (git bash on Windows) and type ``` gpg --list-secret-keys --keyid-format LONG ``` - This will list out all your secret keys in the following fomat: ``` /home/TheSherlockHomie/.gnupg/pubring.kbx --------------------------------- sec rsa4096/HJ6582DC8B78GTU 2020-12-09 [SC] [expires: 2025-05-01] 15JHUG1D325F458624HF7521B3F5D82DC458H uid [ultimate] TheSherlockHomie (Key to sign git commits) ssb rsa4096/11HGTH5483DD0A 2020-12-09 [E] [expires: 2025-05-01] ``` - If your keys are expired, you'll se `expired` instead of the expiration date. ## 2. Renew the expired key - Now that you know for sure that your commit signing key has expired, let's renew the expiration date: ``` gpg --edit-key KEYID // where KEYID is of the key you want to renew. Here, it is HJ6582DC8B78GTU ``` - Now in the intearctive gpg shell, ``` gpg> expire ``` - When prompted type `1y` or however long you want the key to last for. - Now to renew all our subkeys too. ``` key 1 key 2 //and so on, depending on the subkeys you have ``` - A star will sppear before all selected keys. ``` gpg> expire ``` - Again, set the expiration time for your subkeys. ## 3. Set the trust level - Since the key has changed, we now need to trust it. We might get a warning `There is no assurance this key belongs to the named user` otherwise. ``` gpg> trust ``` - Set the trust level `5` (for ultimate) or whatever is the trust level of the key. ## 4. Save your work ``` gpg> save ``` ## 5. Updating the expired key on Github - For the gpg key you updated, export its public key: ``` $ gpg --armor --export KEYID # Prints the GPG key ID, in ASCII armor format ``` - Copy your GPG key, beginning with `-----BEGIN PGP PUBLIC KEY BLOCK-----` and ending with `-----END PGP PUBLIC KEY BLOCK-----` - Navigate to `Github>Settings>SSH and GPG keys` - Delete the expired key. - Add the new key that you copied. - \"Your previous commits and tags will show as verified, as long as the key meets all other verification requirements.\" - Github ## 6. Backup your key and trust database - There is [more than one way](https://gist.github.com/chrisroos/1205934) to accomplish this. - The method I prefer is: ``` gpg --output backupkeys.pgp --armor --export-secret-keys --export-options export-backup email@gmail.com ``` - This will create a file `backupkeys.pgp` on your present working directory. Make sure to store it safely. - If this key is important to you, you may want to print out the key on paper using [paperkey](https://www.jabberwocky.com/software/paperkey/), and store it in a fireproof/waterproof safe. - Now export the trust database ``` gpg --export-ownertrust > ownertrust-gpg.txt ``` - This will create a file `ownertrust-gpg.txt` on your present working directory. Keep it along with your backup keys. ## 7. Importing the backed-up keys - You might have multiple machines where you need the key, or you might have a setup like me, where I use Ubuntu on WSL and Windows both for development. - Transfer the keys to your machine, open a shell (or Git Bash), and type: ``` gpg --import backupkeys.pgp gpg --import-ownertrust ownertrust-gpg.txt ``` - Now verify that you have the keys ``` gpg --list-secret-keys --keyid-format LONG gpg --list-keys --keyid-format LONG ``` - Which should show your secret and public keys respectively. - If you do not have the owner trust backup file, you'll need to manually set the trust level: ``` gpg --edit-key KEYID gpg> trust ``` - And set the trust level accordingly. ## 8. References - [Github Docs - Updating an expired GPG key](https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/updating-an-expired-gpg-key) - [Github Docs - Checking for existing GPG keys](https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/checking-for-existing-gpg-keys) - [Github Docs - Generating a new GPG key](https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/generating-a-new-gpg-key) - [Github Docs - Adding a new GPG key to your GitHub account](https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/adding-a-new-gpg-key-to-your-github-account) - [krisleech - Renew Expired GPG key (Github Gists)](https://gist.github.com/krisleech/760213ed287ea9da85521c7c9aac1df0s)(And shirohana, with the comment reminding to save your work) - [Thomas Eisenbarth - GPG: Extract private key and import on different machine (on makandracards.com)](https://makandracards.com/makandra-orga/37763-gpg-extract-private-key-and-import-on-different-machine) - [Unix & Linux StackExchange - How to export a GPG private key and public key to a file (answered by RubberStamp and edited by Mitch Talmadge)](https://unix.stackexchange.com/questions/481939/how-to-export-a-gpg-private-key-and-public-key-to-a-file) - [chrisroos - Instructions for exporting/importing (backup/restore) GPG keys (on Github Gists)](https://gist.github.com/chrisroos/1205934) - [Unix & Linux StackExchange - gpg —list-keys command outputs uid [ unknown ] after importing private key onto a clean install (answered by RubberStamp)](https://unix.stackexchange.com/questions/407062/gpg-list-keys-command-outputs-uid-unknown-after-importing-private-key-onto) ",
    "url": "/Linux/PGP",
    
    "relUrl": "/Linux/PGP"
  },"159": {
    "doc": "PackageManagers",
    "title": "PackageManagers",
    "content": "{: .text-delta } 1. TOC {:toc} --- # [WingetCLI](https://github.com/microsoft/winget-cli) - > [WingetRun - Find WinGet Packages](https://winget.run/pkg/RubyInstallerTeam/Ruby.3.1) - > [Winstall - Find WinGet Packages](https://winstall.app/apps/RubyInstallerTeam.RubyWithDevKit.3.1) - > [Customize Settings](https://github.com/microsoft/winget-cli/blob/master/doc/Settings.md) - > [Microsoft Winget Docs](https://learn.microsoft.com/en-us/windows/package-manager/winget/) # [Installing](https://learn.microsoft.com/en-us/windows/iot/iot-enterprise/deployment/install-winget-windows-iot) ## PowerShell ### Get the download URL of the latest winget installer from GitHub: ```powershell $API_URL = \"https://api.github.com/repos/microsoft/winget-cli/releases/latest\" $DOWNLOAD_URL = $( Invoke-RestMethod $API_URL ).assets.browser_download_url | Where-Object { $_.EndsWith(\".msixbundle\") } ``` ### Download the installer: ```powershell Invoke-WebRequest -URI $DOWNLOAD_URL -OutFile winget.msixbundle -UseBasicParsing ``` ### Install winget: ```powershell Add-AppxPackage winget.msixbundle ``` ### Remove the installer: ```powershell Remove-Item winget.msixbundle ``` > If you get an error that the framework \"Microsoft.UI.Xaml.2.7\" could not be found, then you can use the following commands to install it: ```powershell Invoke-WebRequest ` -URI https://www.nuget.org/api/v2/package/Microsoft.UI.Xaml/2.7.3 ` -OutFile xaml.zip -UseBasicParsing New-Item -ItemType Directory -Path xaml Expand-Archive -Path xaml.zip -DestinationPath xaml Add-AppxPackage -Path \"xaml\\tools\\AppX\\x64\\Release\\Microsoft.UI.Xaml.2.7.appx\" Remove-Item xaml.zip Remove-Item xaml -Recurse ``` > If you then get another error that the framework \"Microsoft.VCLibs.140.00.UWPDesktop\" could not be found, then you can additionally use the > following commands to install it: ```powershell Invoke-WebRequest ` -URI https://aka.ms/Microsoft.VCLibs.x64.14.00.Desktop.appx ` -OutFile UWPDesktop.appx -UseBasicParsing Add-AppxPackage UWPDesktop.appx Remove-Item UWPDesktop.appx ``` > Then, repeat the initial commands > Once you have followed the above steps, you can use winget on the command line. For example, to update PowerShell: ```powershell winget install --id Microsoft.Powershell --source winget ``` > Remember to again run this with administrative privileges. If you want to execute it in PowerShell itself, prefix the line with an ampersand `&` ## PowerShell 7+ > A prerelease version of the `Microsoft.WinGet.Client` `PowerShell` module has been published to the PowerShell Gallery and will no longer be > included as a release asset. > To install the > latest version of the `PowerShell` module, run the following command in `PowerShell 7+` ```powershell Install-Module -Name Microsoft.WinGet.Client ``` > The PowerShell module requires `App Installer (winget)` to be installed. The `Repair-WinGetPackageManager cmdlet` (work in progress) is designed to > install or repair `App Installer` ## Quick Scripts ### [Install Command](https://learn.microsoft.com/en-us/windows/package-manager/winget/install) > [Logitech Package Repo](https://github.com/microsoft/winget-pkgs/tree/master/manifests/l/Logitech/UnifyingSoftware) ```powershell winget install --id Logitech.UnifyingSoftware --force --accept-package-agreements --accept-source-agreements -h -l \"C:\\Users\\Brandon003842\\LogiTech\" ``` > install multiple pieces of software ```powershell winget install Microsoft.AzureStorageExplorer; winget install Microsoft.VisualStudioCode; winget install Microsoft.AzureCLI ``` #### Options | **Option** | Description |:-----------------------:|------------------------------------------------------------------------------------------------------------------------------------------| **_-m, --manifest_** | Must be followed by the path to the manifest (YAML) file. You can use the manifest to run the install experience from a local YAML file. | **_--id_** | Limits the install to the ID of the application. | **_--name_** | Limits the search to the name of the application. | **_--moniker_** | Limits the search to the moniker listed for the application. | **_-v, --version_** | Enables you to specify an exact version to install. If not specified, latest will install the highest versioned application. | **_-s, --source_** | Restricts the search to the source name provided. Must be followed by the source name. | **_--scope_** | Allows you to specify if the installer should target user or machine scope. | **_-e, --exact_** | Uses the exact string in the query, including checking for case-sensitivity. It will not use the default behavior of a substring. | **_-i, --interactive_** | Runs the installer in interactive mode. The default experience shows installer progress. | **_-h, --silent_** | Runs the installer in silent mode. This suppresses all UI. The default experience shows installer progress. | **_--locale_** | Specifies which locale to use (BCP47 format). | **_-o, --log_** | Directs the logging to a log file. You must provide a path to a file that you have the write rights to. | **_--override_** | A string that will be passed directly to the installer. | **_-l, --location_** | Location to install to (if supported). | **_--force_** | Overrides the installer hash check. Not recommended. | ### [Upgrade](https://learn.microsoft.com/en-us/windows/package-manager/winget/upgrade) ```powwershell winget upgrade --all --include-unknown ``` ### Uninstall ```powershell winget uninstall Microsoft.AzureStorageExplorer ``` #### Options | **Option** | Description |:---------------------:|--------------------------------------------------------------------------------------------------------------------------------------------| **-m, --manifest** | Must be followed by the path to the manifest (YAML) file. You can use the manifest to run the uninstall experience from a local YAML file. | **--id** | Limits the uninstall to the ID of the application. | **--name** | Limits the search to the name of the application. | **--moniker** | Limits the search to the moniker listed for the application. | **-v, --version** | Enables you to specify an exact version to uninstall. If not specified, latest will uninstall the highest versioned application. | **-s, --source** | Restricts the search to the source name provided. Must be followed by the source name. | **-e, --exact** | Uses the exact string in the query, including checking for case-sensitivity. It will not use the default behavior of a substring. | **-i, --interactive** | Runs the uninstaller in interactive mode. The default experience shows uninstaller progress. | **-h, --silent** | Runs the uninstaller in silent mode. This suppresses all UI. The default experience shows uninstaller progress. | **-o, --log** | Directs the logging to a log file. You must provide a path to a file that you have the write rights to. | _--locale_ | Specifies which locale to use (BCP47 format). | _-o, --log_ | Directs the logging to a log file. You must provide a path to a file that you have the write rights to. | _--override_ | A string that will be passed directly to the installer. | _-l, --location_ | Location to install to (if supported). | _--force_ | Overrides the installer hash check. Not recommended. | ### Find software to install ```powershell winget search ``` ### Browse a Windows Package Manage repository ```powershell manifests / m / Microsoft / PowerShell / 7.1.4.0 ``` # [NuGet](https://learn.microsoft.com/en-us/nuget/) ## Install ### [Using dotnet CLI](https://learn.microsoft.com/en-us/nuget/consume-packages/install-use-packages-dotnet-cli) # Chocolatey > install using nuget ",
    "url": "/Windows_Notes/PackageManagers",
    
    "relUrl": "/Windows_Notes/PackageManagers"
  },"160": {
    "doc": "PastProjects",
    "title": "PastProjects",
    "content": "Table of Contents {: .text-delta } 1. TOC {:toc} *** # Projects ## Front End ### [React Hook Form - ReactHookFormFields/SelectBox.js](https://github.com/14paxton/ReactHookFormDynamicComponents) - **What I did**: - Learned and created a proof of concept using a dynamic library to create forms with React Hook Forms, replacing Formik. - Found unconventional ways to make forms and components work as per end-user requests (e.g., submitting a form via a button in a modal produced by a parent component, using controlled Material UI fields in forms designed for uncontrolled fields). ### [Material Table - assessmentresultstable.js](https://github.com/14paxton/TableWithAsyncCall) - **What I did**: - Created a custom search function component using React Hook Forms. - Developed an async search and load function that prevented the entire table from re-rendering. - **Challenges**: - Displaying Material UI chips with assessment names under the table upon selection. - Implemented a custom \"select all\" function that only selects items on the current page, preserving selections across pages but resetting on further pagination. ### [Dynamic Ellipsis Component - ellipsismodifier.js](https://github.com/14paxton/DynamicEllipsis) - **What it does**: - Adds an ellipsis based on text length or dynamically adds one when text overflows a div. Adjusts ellipsis on page resize. ### [Date Range Picker - presetdaterangepicker.js](https://github.com/14paxton/DateRangePicker) - **What I did**: - Customized an existing React date range picker to work with the advanced search form I created. - **Challenges**: - Found it difficult to match the designer’s expectations, as their example used an old jQuery date picker. ### [Dynamic Tooltip](https://gist.github.com/14paxton/9c745874ec384add89c1908c73832594) - **What it does**: - Displays a tooltip only when text is truncated due to the screen size. ### [HOC for PowerPoint Creation](https://github.com/14paxton/TableToPowerPoint) - **What I did**: - Created a higher-order component to generate a PowerPoint presentation from a table using JavaScript and React. ### [Barcode Scanner for Web App Input](https://gist.github.com/14paxton/09adce350289bdcc1df92ed425c1d548) - **What I did**: - Created a custom React TypeScript hook to listen for barcode input from a hand scanner. - **Challenges**: - Differentiating between keyboard input and barcode scanner input. ## Backend ### [Pulling Images and PDFs from S3 Bucket for Email Attachment](https://gist.github.com/14paxton/1fa8f703b708b9488408c9217a83b3a9) - **What I did**: - Retrieved images from an S3 bucket and attached them to an email sent using Postmark. - **Challenges**: - Needed to access files while the authorization token was still valid, then send them to a JMS queue for email attachment processing. ### [Testing GORM and Hibernate Queries](https://www.paxtonb.com/PersonalGrailsNotes/Testing#mocking-hibernate-used-to-test-methods-using-where-queriers--detached-criteria--criteria-builder) - **What I did**: - Researched Hibernate and GORM documentation and came up with a method to mock Hibernate datastore and PlatformTransactionManager. ### [Configuring a Plugin to Create Multiple Domain Objects](https://www.paxtonb.com/PersonalGrailsNotes/Testing#using-test-data-from-buildtest-plugin) - **What I did**: - Configure a plugin to create multiple fully qualified domain objects simultaneously. ### Integration with Office 365 for Assessment Scheduling - **What I did**: - Integrated scheduled assessments with both interviewers' and interviewees' Outlook calendars. ### [Async Service for Batch Role Changes](https://gist.github.com/14paxton/ef4f6e91fa7fa44015c41f26a1caf3ae) - **What I did**: - Created an async service to process batch role changes for users. - **Role Comparison Example**: - [Comparing role groups](https://gist.github.com/14paxton/b7ff93091f4db71beffb0a37140fa0f2) ### [Optimized Search Functionality](https://gist.github.com/14paxton/b5a8d600dc4066010b4067bd8968f613) - **What I did**: - Limited database calls to optimize search functionality across multiple columns. ### [Elastic Search - Fuzzy Search Capability](https://gist.github.com/14paxton/3a352d2824bde0e97960409056f682cc) - **What I did**: - Implemented fuzzy search capabilities using ElasticSearch. ### [Optimized SQL Queries Using HQL](https://gist.github.com/14paxton/e72c14086f5d9a6a0c58dc8463b93561) - **What I did**: - Using HQL and Gorm I created abstract classes to search multiple columns for data, and bind the return to an object ### Using Micronaut to Create Microservices - [With MySQL](https://github.com/14paxton/micronaut_mysql_hibernate) - [With Microstream](https://github.com/14paxton/micronaut_microstream) --- ## Things I Enjoy ### Finding Quirky, Unorthodox Ways to Use a Language - **Setting custom validity for a form field**: ```javascript e.target.setCustomValidity('invalid'); ``` - **Programmatically setting HTML in a string for React**: ```javascript dangerouslySetInnerHTML ``` ```jsx {__html: '' + result?.themeSummary + '. *Theme Of Significance. '} } childrenDisplayStyle=\"inline\"> ``` - **Custom Enum Checks**: - Instead of using try/catch for key validation, created a utility: ```groovy AssessmentPurpose .getEnumConstants() .find { it.key.equalsIgnoreCase(\"extrn\") }?.value ``` - **Get Enum by Value**: ```groovy FitStatement.getEnumConstants() .find { (it.value == member.result) }?.match ?: member.result ``` - **Pad a string to a certain length with spaces in Java**: ```java String padded=String.format(\"%-20s\",str); ``` --- *** ## Dev Questions 1. What do you use to handle security? 2. Anything for database migrations? 3. What is your preferred environment? 4. What upcoming features or new technology are you excited about implementing? 5. Describe a recent serious outage and how it was resolved. 6. How does your expense policy & process work? 7. How much attrition has the team, and the wider department, had in the last 12-18 months? 8. What budget will I have for continuing professional development? Any restrictions? 9. What is the best and worst thing about working here? 10. Describe a recent interpersonal conflict within the team, and how it was handled. 11. How much time does the team get for a) technical debt reduction and b) research projects per quarter? 12. Describe a recent prioritization conflict (e.g., between the team & PM or different stakeholders). How was it resolved? ",
    "url": "/GitHubPages/PastProjects",
    
    "relUrl": "/GitHubPages/PastProjects"
  },"161": {
    "doc": "PersonalGrailsNotes",
    "title": "PersonalGrailsNotes",
    "content": "# [REPO](https://github.com/14paxton/PersonalGrailsNotes) # Gists ## Batch Save and Delete ### [Batch Save](https://gist.github.com/14paxton/b7f8be4d37b29eb2d25e1a2e993f5bf4) ### [Batch Delete](https://gist.github.com/14paxton/74672cad5253c56c36efc6473078de34) --- ## [Command Object](https://gist.github.com/14paxton/282d48ed20642c697315e15dffb7df2d) ## [Dynamic String building HQL](https://gist.github.com/14paxton/0ed8e82644cd661dc8c9fc0d4b8c2009) ## [HQL Query with json extractor using the Function ability of JPQL to use a mysql function](https://gist.github.com/14paxton/b5a8d600dc4066010b4067bd8968f613) ## [Select multiple columns in where clause for @Query](https://gist.github.com/14paxton/e72c14086f5d9a6a0c58dc8463b93561) ## [String search with regex](https://gist.github.com/14paxton/a5382dd3898484bf560dc29e8463409c) ## [Transaction Rollback](https://gist.github.com/14paxton/a212d86552b05b95ef91ee444197fd4e) ## [User Grails Param map and a closure to build HQL](https://gist.github.com/14paxton/42e595a1bf50e44031b6be6c034003d9) ## [Elastic Search Fuzzy Matching](https://gist.github.com/14paxton/3a352d2824bde0e97960409056f682cc) ## [Criteria Builder Transform Result To Custom Bean](https://gist.github.com/14paxton/f384df3ac36befc64c894eeb28439387) ",
    "url": "/PersonalGrailsNotes/",
    
    "relUrl": "/PersonalGrailsNotes/"
  },"162": {
    "doc": "Powershell",
    "title": "Powershell",
    "content": "{: .text-delta } 1. TOC {:toc} --- - > [Microsoft Docs](https://learn.microsoft.com/en-us/powershell/module/cimcmdlets/?view=powershell-7.3) - > [Releases](https://github.com/PowerShell/PowerShell/releases) # Gists ## [Sync Chrome Bookmarks](https://gist.github.com/14paxton/c10cfd597e7e7b487e27d641cf964c59#powershell) > used to sync bookmarks file to a repo to update on both mac and windows using bash and powershell when account can not sync due to admin > restrictions --- # [Installing](https://learn.microsoft.com/en-us/powershell/scripting/install/installing-powershell-on-windows?view=powershell-5.1) > You can launch PowerShell 7 via the Start Menu or `$env:ProgramFiles\\PowerShell\\\\pwsh.exe` > You can launch PowerShell 5 via the Start Menu or `$env:WINDIR\\System32\\WindowsPowerShell\\v1.0` ## [Install 7.3](https://learn.microsoft.com/en-us/powershell/scripting/install/installing-powershell-on-windows?view=powershell-7.3) PowerShell 7.3 installs to a new directory and runs side-by-side with Windows PowerShell 5.1. PowerShell 7.3 is an in-place upgrade that replaces PowerShell 7.0 and lower. - > Separate installation path and executable name. > Is installed in the `$env:WINDIR\\System32\\WindowsPowerShell\\v1.0` > PowerShell 7 is installed in the `$env:ProgramFiles\\PowerShell\\7` > The new location is added to your `PATH`, which allows you to run both `Windows PowerShell 5.1` and `PowerShell 7`. > In `Windows PowerShell`, the PowerShell executable is > named `powershell.exe`. > In version 6 and newer, the executable is named `pwsh.exe`. > The new name makes it easy to support side-by-side execution of both versions - > Separate PSModulePath. > By default, Windows PowerShell and `PowerShell 7` store modules in different locations. > PowerShell 7 combines those locations in the `$Env:PSModulePath` environment variable. > When you import a module by name, PowerShell checks the location that `$Env:PSModulePath` specifies. > This feature allows PowerShell 7 to load both Core and Desktop modules. - > Separate profiles for each version. > A PowerShell profile is a script that runs when PowerShell starts. > This script customizes the PowerShell environment by adding commands, aliases, functions, > variables, modules, and PowerShell drives. > In `Windows PowerShell 5.1`, the profile's location is `$HOME\\Documents\\WindowsPowerShell`. > In `PowerShell 7`, the profile's location is > `$HOME\\Documents\\PowerShell`. - > Separate event logs. `Windows PowerShell` and `PowerShell 7` log events to separate Windows event logs. - > When you're reviewing a PowerShell session, it's important to determine which version you're using. > To determine the current version, enter `$PSVersionTable` in the PowerShell console, and then > select `Enter`. > PowerShell displays the version numbers for various components, including the main PowerShell version number. --- ### DotNet CLI ```powershell dotnet tool install --global PowerShell ``` ### MSI ```powershell msiexec.exe /package PowerShell-7.3.2-win-x64.msi /quiet ADD_EXPLORER_CONTEXT_MENU_OPENPOWERSHELL=1 ADD_FILE_CONTEXT_MENU_RUNPOWERSHELL=1 ENABLE_PSREMOTING=1 REGISTER_MANIFEST=1 USE_MU=1 ENABLE_MU=1 ADD_PATH=1 ``` ### Winget ```powershell winget install Microsoft.PowerShell ``` --- # Run > - [Run Bypassing Execution Policy](https://www.netspi.com/blog/technical/network-penetration-testing/15-ways-to-bypass-the-powershell-execution-policy/) ## powershell core 7+ ```powershell pwsh testscript_writefile.ps1 ``` ## OS powershell 5 ```powershell powershell testscript_writefile.ps1 ``` --- # Update ## Winget ```powershell winget upgrade Microsoft.PowerShell ``` ## MSI ```powershell msiexec.exe /fmu .\\PowerShell-7.3.0-win-x64.msi USE_MU=1 ENABLE_MU=1 ``` --- # Environment ```powershell $Env: ``` > `Env` is actually a virtual PowerShell drive and environment variables are items on it. > There is a special provider `Get-PSProvider -PSProvider Environment ` > that implements this method of accessing to environment in powershell. ## There are three scopes of what is called Environment Variables: ```powershell [System.EnvironmentVariableTarget]::Machine ``` ```powershell [System.EnvironmentVariableTarget]::User ``` ```powershell [System.EnvironmentVariableTarget]::Process ``` ## To get a list of variables ```powershell [System.Environment]::GetEnvironmentVariables($scope) ``` ```powershell # This will mix all scopes in one output [System.Environment]::GetEnvironmentVariables() ``` ## Set $env variable ```powershell $env:AZURE_RESOURCE_GROUP = 'MyTestResourceGroup' ``` ```powershell [System.Environment]::SetEnvironmentVariable($varName, $varValue, $scope) ``` > If `$scope` is Machine or User, it will try to store data, otherwise it will throw an exception. You can run ```powershell Get-ChildItem -Path 'Env:\\ ``` and this is exactly the same as ```powershell [System.Environment]::GetEnvironmentVariables() ``` without specifying scope. ### Set ENV Persistently ```powershell [System.Environment]::SetEnvironmentVariable('ResourceGroup', 'AZ_Resource_Group') ``` # WSL ## get a list of distros ```powershell wslconfig /l ``` ## run wsl ```powershell wsl ``` # JSON ## [ConvertFrom-Json](https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/convertfrom-json?view=powershell-5.1) ### USING POWERSHELL TO WRITE JSON ```powershell $obj = @{ \"PropertyName\" = \"PropertyValue\" \"ObjectName\" = @{ \"ObjectPropertyName\" = \"ObjectPropertyValue\" } } # Convert object to JSON $json = $obj | ConvertTo-Json # Save JSON to file $json | Set-Content -Path C:\\alkane\\example.json ``` ### USING POWERSHELL TO READ JSON ```powershell # Load JSON file $json = Get-Content -Path C:\\alkane\\example.json -Raw | ConvertFrom-Json # Access JSON properties $json.PropertyName $json.ObjectName.PropertyName ``` ### USING POWERSHELL TO ITERATE THROUGH JSON ```powershell $obj = @{ \"ObjectName1\" = @{ \"Object1PropertyName1\" = \"Object1PropertyValue1\" \"Object1PropertyName2\" = \"Object1PropertyValue2\" } \"ObjectName2\" = @{ \"Object2PropertyName1\" = \"Object2PropertyValue1\" \"Object2PropertyName2\" = \"Object2PropertyValue2\" } } # Convert object to JSON $json = $obj | ConvertTo-Json # Save JSON to file $json | Set-Content -Path C:\\alkane\\example.json ``` # XML ## Write ```powershell # Create new XML document $xml = New-Object -TypeName System.Xml.XmlDocument # Create root node $root = $xml.CreateElement(\"RootNode\") $xml.AppendChild($root) # Create child node with attribute and value $child = $xml.CreateElement(\"ChildNode\") $child.SetAttribute(\"AttributeName\", \"AttributeValue\") $child.InnerText = \"Inner text\" $root.AppendChild($child) # Save XML to file $xml.Save(\"C:\\alkane\\example.xml\") ``` ## Read ```powershell # Load XML file [xml]$xml = Get-Content -Path C:\\alkane\\example.xml # Access XML elements and attributes $xml.RootNode.ChildNode.AttributeName $xml.RootNode.ChildNode.InnerText ``` ## Iterate ```powershell # Create new XML document $xml = New-Object -TypeName System.Xml.XmlDocument # Create root node $root = $xml.CreateElement(\"RootNode\") $xml.AppendChild($root) # Create child node with attribute and value $child = $xml.CreateElement(\"ChildNode\") $child.SetAttribute(\"AttributeName\", \"AttributeValue1\") $child.InnerText = \"Inner text 1\" $root.AppendChild($child) # Create another child node with attribute and value $child = $xml.CreateElement(\"ChildNode\") $child.SetAttribute(\"AttributeName\", \"AttributeValue2\") $child.InnerText = \"Inner text 2\" $root.AppendChild($child) # Save XML to file $xml.Save(\"C:\\alkane\\example.xml\") ``` # Read From txt File ```powershell $content = get-content C:\\alkane.txt -tail 3 foreach ($line in $content) { write-host $line } ``` # Find cmdlets / functions ```powershell #Find cmdlets Get-Command | where-object CommandType -eq \"Cmdlet\" #Find functions Get-Command | where-object CommandType -eq \"Function\" ``` # [Invoke-WebRequest](https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/invoke-webrequest?view=powershell-7.3&viewFallbackFrom=powershell-6) ```powershell Invoke-WebRequest -Uri \"http://www.contoso.com\" -OutFile \"C:\\path\\file\" ``` ## get file http ```powershell wget \"http://www.contoso.com\" -outfile \"file\" ``` ## Download File From Web ```powershell $WebClient = New-Object System.Net.WebClient $WebClient.DownloadFile(\"https://www.contoso.com/file\", \"C:\\path\\file\") ``` # For Each / foreach / ForEach-Object - > [foreach(){}](https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_foreach?view=powershell-7.3) - > [ForEach-Object](https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.core/foreach-object?view=powershell-7.3) ```powershell # Create an array of folders $folders = @('C:\\Folder', 'C:\\Program Files\\Folder2', 'C:\\Folder3') # Perform iteration to create the same file in each folder foreach ($i in $folders) { Add-Content -Path \"$i\\SampleFile.txt\" -Value \"This is the content of the file\" } ``` > or ```powershell $folders = @('C:\\Folder', 'C:\\Program Files\\Folder2', 'C:\\Folder3') $folders | ForEach-Object (Add-Content -Path \"$_\\SampleFile.txt\" -Value \"This is the content of the file\") ``` > or ```powershell $folders = @('C:\\Folder', 'C:\\Program Files\\Folder2', 'C:\\Folder3') $folders.ForEach({ Add-Content -Path \"$_\\SampleFile.txt\" -Value \"This is the content of the file\" }) ``` # Run In Parallel / Async ```powershell powershell.exe Get-ChildItem C:\\Users\\$env:UserName\\source\\repos\\GitHub\\Veridian\\Google\\Default | ForEach-Object -Parallel { Remove-Item \"$_\" -Force -Recurse | Out-Null } powershell.exe Get-ChildItem \"C:\\Users\\$env:UserName\\AppData\\Local\\Google\\Chrome\\User Data\\Default\" | Where-Object Name -NotIn @( 'Cache', 'Code Cache', 'databases', 'Extension State', 'File System', 'IndexedDB', 'WebStorage', 'Sessions', 'Service Worker', 'Web Applications', 'Default') | ForEach-Object -Parallel { Copy-Item \"$_\" -Destination C:\\Users\\$env:UserName\\source\\repos\\GitHub\\Veridian\\Google\\Default -Recurse -Force } ``` # Get-ChildItem cmdlet > you can confirm that the files were created or update inside each of the subfolders ```powershell Get-ChildItem -Recurse -Path C:\\ARCHIVE_VOLUMES -Include backupstate.txt | Select-Object Fullname,CreationTime,LastWriteTime,Length ``` # Map Network Drive / [New-PSDrive](https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.management/new-psdrive?view=powershell-5.1) / [Remove-PSDrive](https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.management/remove-psdrive?view=powershell-5.1) ```powershell New-PSDrive -Persist -Name T -PSProvider FileSystem -Root \\\\ss.test-dev.net\\BPAXTON_TEST -Scope Global Remove-PSDrive -Name T -Force -PSProvider FileSystem -Scope Global ``` ## cmd Net Use ```powershell net use x: \"\\\\ss.test-dev.net\\BPAXTON_TEST\" net use /delete x: ``` # Quick Scripts ## Get Proxy Settings ```powershell netsh winhttp show proxy ``` ```powershell reg query \"HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Internet Settings\" | findstr \"ProxyServer AutoConfigURL\" ``` ```powershell (Get-ItemProperty -Path 'Registry::HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Internet Settings') ``` ```powershell (Get-ItemProperty -Path 'Registry::HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Internet Settings').ProxyEnable ``` ## lock screen ```powershell $xCmdString = { rundll32.exe user32.dll,LockWorkStation } Invoke-Command $xCmdString ``` ## Get version ```powershell $PSVersionTable ``` ## Run As Admin ```powershell if (!([Security.Principal.WindowsPrincipal][Security.Principal.WindowsIdentity]::GetCurrent()).IsInRole([Security.Principal.WindowsBuiltInRole]\"Administrator\")) { Start-Process powershell.exe \"-NoProfile -ExecutionPolicy Bypass -File `\"$PSCommandPath`\" `\"$args`\"\" -Verb RunAs; exit } Start-Process -FilePath 'C:\\Users\\Brandon003842\\Downloads\\ConnectUtility_2.30.9_Logitech.exe' -WorkingDirectory 'C:\\Users\\Brandon003842\\LogiTech' -Verb RunAs ``` ### Get Execution Policy ```powershell Get-ExecutionPolicy ``` If it returns Restricted, then run Set-ExecutionPolicy AllSigned or Set-ExecutionPolicy Bypass -Scope Process > You can configure the following policy settings: - > `AllSigned`: Limits script execution on all signed scripts. > This setting requires that all scripts are signed by a trusted publisher, including scripts that you write on the local computer. > It > prompts you before running scripts from publishers that you haven't yet classified as trusted or untrusted. > However, verifying the signature of a script doesn't eliminate the possibility of that > a script being malicious. > It simply provides an extra check that minimizes this possibility. - > `Default`: Sets the default execution policy, which is Restricted for Windows clients and RemoteSigned for Windows servers. - > `RemoteSigned`: This is the default execution policy for Windows server computers. > Scripts can run, but the policy requires a digital signature from a trusted publisher on scripts and > configuration files that have been downloaded from the internet. > This setting doesn't require digital signatures on scripts that are written on the local computer. - > `Restricted`: This is the default execution policy for Windows client computers. It permits running individual commands, but it doesn't allow scripts. - > `Unrestricted`: This is the default execution policy for non-Windows computers, which you can't change. > It allows unsigned scripts to run. > This policy warns the user before running scripts and > configuration files that aren't from the local intranet zone. - > `Undefined`: Indicates that there isn't an execution policy set in the current scope. > If the execution policy in all scopes is Undefined, the effective execution policy is Restricted for > Windows clients and RemoteSigned for Windows Server. Mine v7 was saved at C:\\Users\\1527151437E\\AppData\\Local\\Microsoft\\WindowsApps\\pwsh.exe . > To change the execution policy in PowerShell, use the following command: ```powershell Set-ExecutionPolicy -ExecutionPolicy ``` ## Rename and Expand .zip ```powershell Rename-Item .\\Ubuntu.appx .\\Ubuntu.zip Expand-Archive .\\Ubuntu.zip .\\Ubuntu ``` ## Execute / Start / Run process / Application ```powershell Start-Process test.exe #or Invoke-Expression -Command \"path...test.exe\" ``` ### Run with no exit ```powershell Start-Process pwsh -ArgumentList '-noexit -noprofile -command \"powershell C:\\Ruby32-x64\\bin\\ridk\"' ``` ## Handle Expected Error ```powershell ps notepad -ErrorAction SilentlyContinue | kill -PassThru ``` - > without aliases ```powershell Get-Process notepad -ErrorAction SilentlyContinue | Stop-Process -PassThru ``` ## Search Piped String ```powershell Select-String -Path \"Users\\*.csv\" -Pattern \"Joe\" ``` ### Creating a File in Each Sub-Folder in a Directory using the ForEach Statement ```powershell # Define the TOP-level folder $TOP_FOLDER = \"C:\\ARCHIVE_VOLUMES\" # Get all sub folders recursively $Child_Folders = Get-ChildItem -Path $TOP_FOLDER -Recurse | Where-Object { $_.PSIsContainer -eq $true } # Create a text file in each sub-folder and add the current date/time as value. foreach ($foldername in $Child_Folders.FullName) { (get-date -Format G) | Out-File -FilePath \"$( $foldername )\\BackupState.txt\" -Force } ``` ## Reading the Contents of each Text File in Sub-Directories ```powershell ## Find all BackupState.txt files in C:\\ARCHIVE_VOLUMES $files = Get-ChildItem -Recurse -Path C:\\ARCHIVE_VOLUMES -Include 'BackupState.txt' | Select-Object DirectoryName,FullName ## Read the contents of each file foreach ($file in $files) { Write-Output (\"$( $file.DirectoryName ) last backup time - \" + (Get-Content $file.FullName)) } ``` ## Getting Services and Starting Them using the ForEach-Object CmdLet ```powershell ## Get a list of automatic services that are stopped. $services = Get-Service | Where-Object { $_.StartType -eq \"Automatic\" -and $_.Status -ne \"Running\" } ## Pass each service object to the pipeline and process them with the Foreach-Object cmdlet $services | ForEach-Object { try { Write-Host \"Attempting to start '$( $_.DisplayName )'\" Start-Service -Name $_.Name -ErrorAction STOP Write-Host \"SUCCESS: '$( $_.DisplayName )' has been started\" } catch { Write-output \"FAILED: $( $_.exception.message )\" } } ``` ## Reading Data from CSV using the ForEach() Method ```powershell # Import list of Firstname and Lastname from CSV file $newUsers = Import-Csv -Path .\\Employees.csv Add-Type -AssemblyName System.Web # Process the list $newUsers.foreach( { # Generate a random password $password = [System.Web.Security.Membership]::GeneratePassword((Get-Random -Minimum 20 -Maximum 32), 3) $secPw = ConvertTo-SecureString -String $password -AsPlainText -Force # Formulate a username $userName = '{0}{1}' -f $_.FirstName.Substring(0, 1), $_.LastName try { # Build new user attributes $newUser = @{ GivenName = \"$( $_.FirsName )\" Surname = \"$( $_.LastName )\" Name = $userName AccountPassword = $secPw } New-ADUser @newUser Write-Output \"User '$( $userName )' has been created.\" } catch { Write-Output $_.Exception.Message } } ) ``` ## Don't Sleep ```powershell param($minutes = 900) $myShell = New-Object -com \"Wscript.Shell\" $start = 0 echo $start for ($i = 0; $i -lt $minutes; $i++) { $start += 1; echo $start; Start-Sleep -Seconds 30 $myShell.sendkeys(\" \") } ``` > or ```powershell Echo \"Keep-alive with Scroll Lock...\" $WShell = New-Object -com \"Wscript.Shell\" $start = 0 while ($true) { $start += 1; echo $start; $WShell.sendkeys(\"{SCROLLLOCK}\") Start-Sleep -Milliseconds 100 $WShell.sendkeys(\"{SCROLLLOCK}\") Start-Sleep -Seconds 100 } ``` ## Answer / Reply to Yes(y) No(n) Prompt ```powershell foreach ($i in $files) { 'y' | powershell -c \"Remove-Item $i -Force -ErrorAction silentlycontinue\" } ``` # Basic Commands | Command name | Alias | Description |-------------------|-------------------------------|-----------------------------------------------------------------------------------------------------------------------| Set-Location | cd, chdir, sl | Sets the current working location to a specified location. | Get-Content | cat, gc, type | Gets the content of the item at the specified location. | Add-Content | ac | Adds content to the specified items, such as adding words to a file. | Set-Content | sc | Writes or replaces the content in an item with new content. | Copy-Item | copy, cp, cpi | Copies an item from one location to another. | Remove-Item | del, erase, rd, ri, rm, rmdir | Deletes the specified items. | Move-Item | mi, move, mv | Moves an item from one location to another. | Set-Item | si | Changes the value of an item to the value specified in the command. | New-Item | ni | Creates a new item. | Start-Job | sajb | Starts a Windows PowerShell background job. | Compare-Object | compare, dif | Compares two sets of objects. | Group-Object | group | Groups objects that contain the same value for specified properties. | Invoke-WebRequest | curl, iwr, wget | Gets content from a web page on the Internet. | Measure-Object | measure | Calculates the numeric properties of objects, and the characters, words, and lines in string objects, such as files … | Resolve-Path | rvpa | Resolves the wildcard characters in a path, and displays the path contents. | Resume-Job | rujb | Restarts a suspended job | Set-Variable | set, sv | Sets the value of a variable. Creates the variable if one with the requested name does not exist. | Show-Command | shcm | Creates Windows PowerShell commands in a graphical command window. | Sort-Object | sort | Sorts objects by property values. | Start-Service | sasv | Starts one or more stopped services. | Start-Process | saps, start | Starts one or more processes on the local computer. | Suspend-Job | sujb | Temporarily stops workflow jobs. | Wait-Job | wjb | Suppresses the command prompt until one or all of the Windows PowerShell background jobs running in the session are … | Where-Object | ?, where | Selects objects from a collection based on their property values. | Write-Output | echo, write | Sends the specified objects to the next command in the pipeline. If the command is the last command in the pipeline,… | --- --- | Command alias | Cmdlet name | Description of command |---------------|--------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------| % | ForEach-Object | Performs an operation against each item in a collection of input objects. | ? | Where-Object | Selects objects from a collection based on their property values. | ac | Add-Content | Appends content, such as words or data, to a file. | asnp | Add-PSSnapIn | Adds one or more Windows PowerShell snap-ins to the current session. | cat | Get-Content | Gets the contents of a file. | cd | Set-Location | Sets the current working location to a specified location. | chdir | Set-Location | Sets the current working location to a specified location. | clc | Clear-Content | Deletes the contents of an item, but does not delete the item. | clear | Clear-Host | Clears the display in the host program. | clhy | Clear-History | Deletes entries from the command history. | cli | Clear-Item | Deletes the contents of an item, but does not delete the item. | clp | Clear-ItemProperty | Deletes the value of a property but does not delete the property. | cls | Clear-Host | Clears the display in the host program. | clv | Clear-Variable | Deletes the value of a variable. | cnsn | Connect-PSSession | Reconnects to disconnected sessions | compare | Compare-Object | Compares two sets of objects. | copy | Copy-Item | Copies an item from one location to another. | cp | Copy-Item | Copies an item from one location to another. | cpi | Copy-Item | Copies an item from one location to another. | cpp | Copy-ItemProperty | Copies a property and value from a specified location to another location. | curl | Invoke-WebRequest | Gets content from a webpage on the Internet. | cvpa | Convert-Path | Converts a path from a Windows PowerShell path to a Windows PowerShell provider path. | dbp | Disable-PSBreakpoint | Disables the breakpoints in the current console. | del | Remove-Item | Deletes files and folders. | diff | Compare-Object | Compares two sets of objects. | dir | Get-ChildItem | Gets the files and folders in a file system drive. | dnsn | Disconnect-PSSession | Disconnects from a session. | ebp | Enable-PSBreakpoint | Enables the breakpoints in the current console. | echo | Write-Output | Sends the specified objects to the next command in the pipeline. If the command is the last command in the pipeline, the objects are displayed in the console. | epal | Export-Alias | Exports information about currently defined aliases to a file. | epcsv | Export-Csv | Converts objects into a series of comma-separated (CSV) strings and saves the strings in a CSV file. | epsn | Export-PSSession | Imports commands from another session and saves them in a Windows PowerShell module. | erase | Remove-Item | Deletes files and folders. | etsn | Enter-PSSession | Starts an interactive session with a remote computer. | exsn | Exit-PSSession | Ends an interactive session with a remote computer. | fc | Format-Custom | Uses a customized view to format the output. | fl | Format-List | Formats the output as a list of properties in which each property appears on a new line. | foreach | ForEach-Object | Performs an operation against each item in a collection of input objects. | ft | Format-Table | Formats the output as a table. | fw | Format-Wide | Formats objects as a wide table that displays only one property of each object. | gal | Get-Alias | Gets the aliases for the current session. | gbp | Get-PSBreakpoint | Gets the breakpoints that are set in the current session. | gc | Get-Content | Gets the contents of a file. | gci | Get-ChildItem | Gets the files and folders in a file system drive. | gcm | Get-Command | Gets all commands. | gcs | Get-PSCallStack | Displays the current call stack. | gdr | Get-PSDrive | Gets drives in the current session. | ghy | Get-History | Gets a list of the commands entered during the current session. | gi | Get-Item | Gets files and folders. | gjb | Get-Job | Gets Windows PowerShell background jobs that are running in the current session. | gl | Get-Location | Gets information about the current working location or a location stack. | gm | Get-Member | Gets the properties and methods of objects. | gmo | Get-Module | Gets the modules that have been imported or that can be imported into the current session. | gp | Get-ItemProperty | Gets the properties of a specified item. | gps | Get-Process | Gets the processes that are running on the local computer or a remote computer. | group | Group-Object | Groups objects that contain the same value for specified properties. | gsn | Get-PSSession | Gets the Windows PowerShell sessions on local and remote computers. | gsnp | Get-PSSnapIn | Gets the Windows PowerShell snap-ins on the computer. | gsv | Get-Service | Gets the services on a local or remote computer. | gu | Get-Unique | Returns unique items from a sorted list. | gv | Get-Variable | Gets the variables in the current console. | gwmi | Get-WmiObject | Gets instances of Windows Management Instrumentation (WMI) classes or information about the available classes. | h | Get-History | Gets a list of the commands entered during the current session. | history | Get-History | Gets a list of the commands entered during the current session. | icm | Invoke-Command | Runs commands on local and remote computers. | iex | Invoke-Expression | Runs commands or expressions on the local computer. | ihy | Invoke-History | Runs commands from the session history. | ii | Invoke-Item | Performs the default action on the specified item. | ipal | Import-Alias | Imports an alias list from a file. | ipcsv | Import-Csv | Creates table-like custom objects from the items in a CSV file. | ipmo | Import-Module | Adds modules to the current session. | ipsn | Import-PSSes sion | Imports commands from another session into the current session. | irm | Invoke-RestMethod | Sends an HTTP or HTTPS request to a RESTful web service. | ise | powershell_ise.exe | Explains how to use the PowerShell_ISE.exe command-line tool. | iwmi | Invoke-WMIMethod | Calls Windows Management Instrumentation (WMI) methods. | iwr | Invoke-WebRequest | Gets content from a web page on the Internet. | kill | Stop-Process | Stops one or more running processes. | lp | Out-Printer | Sends output to a printer. | ls | Get-ChildItem | Gets the files and folders in a file system drive. | man | help | Displays information about Windows PowerShell commands and concepts. | md | mkdir | Creates a new item. | measure | Measure-Object | Calculates the numeric properties of objects, and the characters, words, and lines in string objects, such as files of text. | mi | Move-Item | Moves an item from one location to another. | mount | New-PSDrive | Creates temporary and persistent mapped network drives. | move | Move-Item | Moves an item from one location to another. | mp | Move-ItemProperty | Moves a property from one location to another. | mv | Move-Item | Moves an item from one location to another. | nal | New-Alias | Creates a new alias. | ndr | New-PSDrive | Creates temporary and persistent mapped network drives. | ni | New-Item | Creates a new item. | nmo | New-Module | Creates a new dynamic module that exists only in memory. | npssc | New-PSSessionConfigurationFile | Creates a file that defines a session configuration. | nsn | New-PSSession | Creates a persistent connection to a local or remote computer. | nv | New-Variable | Creates a new variable. | ogv | Out-GridView | Sends output to an interactive table in a separate window. | oh | Out-Host | Sends output to the command line. | popd | Pop-Location | Changes the current location to the location most recently pushed to the stack. You can pop the location from the default stack or from a stack that you create by using the Push-Location cmdlet. | ps | Get-Process | Gets the processes that are running on the local computer or a remote computer. | pushd | Push-Location | Adds the current location to the top of a location stack. | pwd | Get-Location | Gets information about the current working location or a location stack. | r | Invoke-History | Runs commands from the session history. | rbp | Remove-PSBreakpoint | Deletes breakpoints from the current console. | rcjb | Receive-Job | Gets the results of the Windows PowerShell background jobs in the current session. | rcsn | Receive-PSSession | Gets results of commands in disconnected sessions. | rd | Remove-Item | Deletes files and folders. | rdr | Remove-PSDrive | Deletes temporary Windows PowerShell drives and disconnects mapped network drives. | ren | Rename-Item | Renames an item in a Windows PowerShell provider namespace. | ri | Remove-Item | Deletes files and folders. | rjb | Remove-Job | Deletes a Windows PowerShell background job. | rm | Remove-Item | Deletes files and folders. | rmdir | Remove-Item | Deletes files and folders. | rmo | Remove-Module | Removes modules from the current session. | rni | Rename-Item | Renames an item in a Windows PowerShell provider namespace. | rnp | Rename-ItemProperty | Renames a property of an item. | rp | Remove-ItemProperty | Deletes the property and its value from an item. | rsn | Remove-PSSession | Closes one or more Windows PowerShell sessions (PSSessions). | rsnp | Remove-PSSnapin | Removes Windows PowerShell snap-ins from the current session. | rujb | Resume-Job | Restarts a suspended job | rv | Remove-Variable | Deletes a variable and its value. | rvpa | Resolve-Path | Resolves the wildcard characters in a path, and displays the path contents. | rwmi | Remove-WMIObject | Deletes an instance of an existing Windows Management Instrumentation (WMI) class. | sajb | Start-Job | Starts a Windows PowerShell background job. | sal | Set-Alias | Creates or changes an alias (alternate name) for a cmdlet or other command element in the current Windows PowerShell session. | saps | Start-Process | Starts one or more processes on the local computer. | sasv | Start-Service | Starts one or more stopped services. | sbp | Set-PSBreakpoint | Sets a breakpoint on a line, command, or variable. | sc | Set-Content | Replaces the contents of a file with contents that you specify. | select | Select-Object | Selects objects or object properties. | set | Set-Variable | Sets the value of a variable. Creates the variable if one with the requested name does not exist. | shcm | Show-Command | Creates Windows PowerShell commands in a graphical command window. | si | Set-Item | Changes the value of an item to the valu | ",
    "url": "/Windows_Notes/Powershell",
    
    "relUrl": "/Windows_Notes/Powershell"
  },"163": {
    "doc": "PriorityLearning",
    "title": "PriorityLearning",
    "content": "# Possibly Useful Software? - [YouTrack](https://www.jetbrains.com/youtrack/?source=google&medium=cpc&campaign=10594515075&term=youtrack&content=632524409028&gad=1&gclid=CjwKCAjwt52mBhB5EiwA05YKo75QYHNEw1esfAxcWOo7FnSg05MIV35fiBy0nmlDu71xUGFr1b-b-RoCDHwQAvD_BwE) - [Qodana](https://www.jetbrains.com/qodana/) - [TeamCity](https://www.jetbrains.com/teamcity/) - [Space](https://www.jetbrains.com/space/) # Personal Proj - [Micronaut Views With Android](https://guides.micronaut.io/latest/tag-views.html) - [Chat App Hotwire Turbo](https://guides.micronaut.io/latest/tag-hotwire.html) - [WebSocket](https://guides.micronaut.io/latest/micronaut-websocket.html) ",
    "url": "/GitHubPages/PriorityLearning",
    
    "relUrl": "/GitHubPages/PriorityLearning"
  },"164": {
    "doc": "Properties",
    "title": "Properties",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Add active profiles ```yaml --- my.property: fromyamlfile --- spring.profiles: prod spring.profiles.include: - proddb - prodmq ``` ",
    "url": "/SpringNotes/Properties",
    
    "relUrl": "/SpringNotes/Properties"
  },"165": {
    "doc": "Queries",
    "title": "Queries",
    "content": "--- {: .text-delta } 1. TOC {:toc} --- --- # MySQL ## disable a foreign key constraint? > [ Modify Constraint By Adding Delete Cascade ](https://gist.github.com/14paxton/a5c69e1c4fc29bf91c0f7b626b612450) To disable foreign key constraints when you want to truncate a table Use FOREIGN_KEY_CHECKS **_Disable_** ```sql SET FOREIGN_KEY_CHECKS = 0; ``` **_Enable_** ```sql SET FOREIGN_KEY_CHECKS = 1; ``` Or you can use DISABLE KEYS: ```sql ALTER TABLE table_name DISABLE KEYS; ``` ```sql ALTER TABLE table_name ENABLE KEYS; ``` Note that DISABLE KEYS does not work ON InnoDB tables as it works properly for MyISAM > Use ```sql ON DELETE SET NULL ``` > If you don’t want to turn key checking `ON` and `off`, you can permanently modify it to `ON DELETE SET NULL` > Delete the current foreign key first: ```sql ALTER TABLE table_name1 DROP FOREIGN KEY fk_name1; ``` > Then add the foreign key constraints back ```sql ALTER TABLE table_name1 ADD FOREIGN KEY (table2_id) REFERENCES table2 (id) ON DELETE SET NULL; ``` ```sql ALTER TABLE tablename2 ADD FOREIGN KEY (table1_id) REFERENCES table1 (id) ON DELETE SET NULL; ``` # User Queries ## metadata ```sql SELECT user_metadata FROM user WHERE email IN ('apavlik@talentplus.com'); SELECT * FROM USER WHERE id = 60; ``` > extract and unquote ```sql SELECT id, JSON_UNQUOTE(JSON_EXTRACT(JSON_EXTRACT(app_metadata, '$.tb5'), '$.roleGroups[0]', '$.roleGroups[1]')) FROM user; ``` ## Update the Users Client and Roles ### change to uat ## client ```sql UPDATE USER SET client_setup_id = 1015731, user_metadata = '{\"companyCode\":\"TPUAT\",\"clientId\":1015731,\"active\":true,\"dateFormat\":\"MM/DD/YYYY\",\"timeZonePreference\":\"America/Chicago\",\"profileColor\":\"#3D5BA9\",\"given_name\":\"Brandon\",\"family_name\":\"Paxton\",\"name\":\"Brandon Paxton\",\" picture\":\"https://s.gravatar.com/avatar/c0b18fb00c90568b950b4572bc1ae4b0?s=480&r=pg&d=https%3A%2F%2Fcdn.auth0.com%2Favatars%2Fbp.png\",\"emailVerified\":false,\"defaultAssessmentView\":\"RESULTS\",\"defaultListView\":\"CARD\",\"assessmentCreateType\":\"ADVANCED\",\"bio\":\"none\",\"jobTitle\":\"starving artist\",\"preferredName\":\"schmuckels\",\"talentBankEnabled\":true,\"talentBankUser\":true,\"talentMineEnabled\":true,\"talentMineUser\":true,\"defaultAssessmentOrderId\":27489}' WHERE id = 820; ``` ## app ```sql UPDATE USER SET client_setup_id = 1015731, app_metadata = '{\"tb6\":{\"roleGroups\":[\"tb6-clientadmin\"]},\"tbcore\":{\"ordersDateRangePreference\":\"LAST_365_DAYS\",\"defaultAssessmentType\":\"AO6\",\"roleGroups\":[\"tbcore-rg-admin-super\",\"tbcore-rg-interviewer\"],\"defaultDashboardType\":\"ADMIN\",\" shareResultConfig\":null,\"defaultClientSetupId\":1015731}}' WHERE id = 820; ``` ## client ```sql UPDATE USER SET client_setup_id = 2000, user_metadata = '{\"companyCode\":\"TALENTPLUS\",\"clientId\":2000,\"active\":true,\"dateFormat\":\"MM/DD/YYYY\",\"timeZonePreference\":\"America/Chicago\",\"profileColor\":\"#3D5BA9\",\"given_name\":\"Brandon\",\"family_name\":\"Paxton\",\"name\":\"Brandon Paxton\",\" picture\":\"https://s.gravatar.com/avatar/c0b18fb00c90568b950b4572bc1ae4b0?s=480&r=pg&d=https%3A%2F%2Fcdn.auth0.com%2Favatars%2Fbp.png\",\"emailVerified\":true,\"defaultAssessmentView\":\"RESULTS\",\"defaultListView\":\"CARD\",\"assessmentCreateType\":\"ADVANCED\",\"bio\":\"none\",\"jobTitle\":\"starving artist\",\"preferredName\":\"schmuckels\",\"talentBankEnabled\":true,\"talentBankUser\":true,\"talentMineEnabled\":true,\"talentMineUser\":true,\"defaultAssessmentOrderId\":27489}' WHERE id = 820; ``` ## app ```sql UPDATE USER SET client_setup_id = 2000, app_metadata = '{\"tb6\":{\"roleGroups\":[\"tb6-clientadmin\"]},\"tbcore\":{\"ordersDateRangePreference\":\"LAST_365_DAYS\",\"defaultAssessmentType\":\"AO6\",\"roleGroups\":[\"tbcore-rg-admin-super\",\"tbcore-rg-interviewer\"],\"defaultDashboardType\":\"ADMIN\",\" shareResultConfig\":null,\"defaultClientSetupId\":2000}}' WHERE id = 820; ``` ### change to TECHTEST ## client ```sql UPDATE USER SET client_setup_id = 55, user_metadata = '{\"companyCode\":\"TECHTEST\",\"clientId\":55,\"active\":true,\"dateFormat\":\"MM/DD/YYYY\",\"timeZonePreference\":\"America/Chicago\",\"profileColor\":\"#3D5BA9\",\"given_name\":\"Brandon\",\"family_name\":\"Paxton\",\"name\":\"Brandon Paxton\",\" picture\":\"https://s.gravatar.com/avatar/c0b18fb00c90568b950b4572bc1ae4b0?s=480&r=pg&d=https%3A%2F%2Fcdn.auth0.com%2Favatars%2Fbp.png\",\"emailVerified\":false,\"defaultAssessmentView\":\"RESULTS\",\"defaultListView\":\"CARD\",\"assessmentCreateType\":\"ADVANCED\",\"bio\":\"none\",\"jobTitle\":\"starving artist\",\"preferredName\":\"schmuckels\",\"talentBankEnabled\":true,\"talentBankUser\":true,\"talentMineEnabled\":true,\"talentMineUser\":true,\"defaultAssessmentOrderId\":27489}' WHERE id = 820; ``` ## app ```sql UPDATE USER SET client_setup_id = 55, app_metadata = '{\"tb6\":{\"roleGroups\":[\"tb6-clientadmin\"]},\"tbcore\":{\"ordersDateRangePreference\":\"LAST_365_DAYS\",\"defaultAssessmentType\":\"AO6\",\"roleGroups\":[\"tbcore-rg-admin-super\",\"tbcore-rg-interviewer\"],\"defaultDashboardType\":\"ADMIN\",\" shareResultConfig\":null,\"defaultClientSetupId\":55}}' WHERE id = 820; ``` ## update by email ```sql UPDATE user_role_group SET role_group_id = 14 WHERE user_id IN (SELECT id FROM USER WHERE email = 'd1@mailinator.com'); ``` ## delete all by email ```sql DELETE FROM user_role_group WHERE user_id IN (SELECT id FROM USER WHERE email = 'd1@mailinator.com'); ``` ```sql SELECT * FROM user_role_group urg JOIN role_group rg ON rg.id = urg.`role_group_id` JOIN role_group_role rgr ON rgr.`role_group_id` = urg.`role_group_id` JOIN role ON role.`id` = rgr.`role_id` WHERE user_id IN (SELECT id FROM user WHERE email = 'boi@mailinator.com'); ``` ```sql SELECT rg.display_name, rg.name, urg.user_id FROM user_role_group urg JOIN role_group rg ON rg.id = urg.`role_group_id` WHERE user_id IN (SELECT id FROM user WHERE email = 'kfkfkfkfk52154@mailinator.com'); ``` ## display role groups and roles assigned ```sql SELECT rg.id, display_name, authority FROM role_group rg JOIN role_group_role rgr ON role_group_id = rg.id JOIN role ON role_id = role.id WHERE rg.`name` = 'tbcore-rg-manager'; ``` # Assessments ## create assesment orders ```sql CREATE TEMPORARY TABLE temporary_tableBP2 AS SELECT * FROM user_group_assessment_order WHERE id in (SELECT ugao.id FROM user_group_assessment_order ugao JOIN user_group ug ON ugao.user_group_compare = ug.id WHERE user_id = 820); ``` ```sql ALTER TABLE temporary_tableBP2 MODIFY id INT; ``` ```sql UPDATE temporary_tableBP2 SET user_id = 5, id = NULL; ``` ```sql INSERT INTO user_group SELECT * FROM temporary_tableBP2; ``` ```sql DROP TEMPORARY TABLE temporary_tableBP2; ``` ## FIND ASSESSMENTS WITH SAME CLIENT ```sql SELECT id, email FROM user WHERE client_setup_id = 55 ORDER BY date_created DESC; ``` ## FIND ASSESSMENTS WITH SAME INTERVIEW MODEL ```sql SELECT ASSESSMENT_ORDER.ID, im.source_id FROM ASSESSMENT_ORDER JOIN CATALOG_DETAIL cd ON ASSESSMENT_ORDER.CATALOG_DETAIL_ID = cd.id JOIN INTERVIEW_MODEL im ON cd.interview_model_id = im.source_id WHERE ASSESSMENT_ORDER.ID NOT IN (SELECT ao.id FROM USER_GROUP JOIN ASSESSMENT_ORDER ao ON USER_GROUP.CLIENT_SETUP_ID = ao.client_setup_id WHERE USER_ID = 820 AND TYPE != 'MYSAVEDGROUP' AND USER_GROUP.ID = 520 AND USER_GROUP.INTERVIEW_MODEL_ID = 35); ``` ## UserGroupQueries ```sql SELECT ug.id AS id, ug.interview_model_id AS interviewModelId, ugao.id ugaoid, ug.last_updated AS lastUpdated, COUNT(DISTINCT ugao.id) AS assessmentCount, COUNT(ugao.id) AS assessmentCount2, CONVERT(CASE WHEN (SELECT count(*) FROM USER_GROUP_SHARE WHERE ug.id = USER_GROUP_SHARE.USER_GROUP_ID) create user group ```sql CREATE TEMPORARY TABLE temporary_tableBP2 AS SELECT * FROM user_group WHERE user_id LIKE 820; ``` ```sql ALTER TABLE temporary_tableBP2 MODIFY id INT; ``` ```sql UPDATE temporary_tableBP2 SET user_id = 5, id = NULL; ``` ```sql INSERT INTO user_group SELECT * FROM temporary_tableBP2; ``` ```sql DROP TEMPORARY TABLE temporary_tableBP2; ``` ",
    "url": "/SQLNotes/Queries",
    
    "relUrl": "/SQLNotes/Queries"
  },"166": {
    "doc": "QuerySelector",
    "title": "QuerySelector",
    "content": "{: .text-delta } 1. TOC {:toc} --- # [CSS Selectors: Attribute Selectors ](https://www.w3.org/TR/selectors-4/#attribute-selectors) # get child ```javascript let listItems = document.querySelectorAll(\"ul.nav > li\"); ``` # siblings example all `` that follow `` immediately or not ```javascript let links = document.querySelectorAll(\"p ~ a\"); ``` # immediate siblings ```javascript let links = document.querySelectorAll(\"h1 + a\"); ``` # sudo elements ```javascript // second li element in list let listItem = document.querySelectorAll(\"li:nth-child(2)\"); //first line of all divs let links = document.querySelector(\"p::first-line\"); ``` # multiple items ```javascript document.querySelectorAll(\"div, span\"); ``` # html attribute ```javascript document.querySelectorAll('[data-example=\"test\"]'); ``` # css pseudo class ```javascript document.querySelectorAll(\":nth-child(4n)\"); ``` # descendants ```javascript document.querySelectorAll(\"#test li\"); ``` # all table cells not right align ```javascript document.querySelectorAll(\"tbody td:not(.MuiTableCell - alignRight )\"); ``` # every other tr starting with first ```javascript querySelectorAll(\"tr:nth - of - type(2n + 1)\"); ``` # multi select ```javascript querySelectorAll(`tbody td:nth-child(1), tfoot tr:first-child > td`); ``` # input ```javascript ; //Replace $$ with document.querySelectorAll in the examples: const $$ = document.querySelectorAll.bind(document); $$(\"input\"); //Every input $$(\"[id]\"); //Every element with id $$('[id=\"c2\"]'); //Every element with id=\"c2\" $$(\"input,[id]\"); //Every input + every element with id $$(\"input[id]\"); //Every input including id $$('input[id=\"c2\"]'); //Every input including id=\"c2\" $$(\"input#c2\"); //Every input including id=\"c2\" (same as above) $$('input#c2[value=\"DE039230952\"]'); //Every input including id=\"c2\" and value=\"DE039230952\" $$('input#c2[value^=\"DE039\"]'); //Every input including id=\"c2\" and value has content starting with DE039 $$('input#c2[value$=\"0952\"]'); //Every input including id=\"c2\" and value has content ending with 0952 $$('input#c2[value*=\"39230\"]'); //Every input including id=\"c2\" and value has conten //Use the examples above directly, without the need for additional library, //Some additions: $$(\".\"); //The same as $([class]) $$(div > input); //div is parent tag to input document.querySelector(); //equals to $$()[0] or $() ``` ",
    "url": "/JavaScript/QuerySelector",
    
    "relUrl": "/JavaScript/QuerySelector"
  },"167": {
    "doc": "Quick-TidBits",
    "title": "Quick-TidBits",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Restart Docker ```shell sudo su systemctl start docker systemctl enable docker systemctl restart docker ``` > or ```shell sudo dockerd ``` > or ```shell snap stop docker ``` ```shell snap start docker ``` > or ```shell sudo systemctl unmask docker ``` ```shell sudo systemctl start docker ``` # Keep your Docker images small > Don't install unnecessary editors. You can edit the files over SSH from the Docker host to the container. ```shell vim scp://remoteuser@containerip//path/to/document ``` # [Use host ip](https://gist.github.com/14paxton/fc9331557d823620d73d15c453b83bd8) ``` host.docker.internal ``` The gateway is also reachable as gateway.docker.internal > If you are running this stack on Linux, you need to have the `DOCKER_GATEWAY_HOST` environment variable set for the Docker gateway host. > Put this line into > your `.bashrc (.bash_profile or .zshrc)` ```shell export DOCKER_GATEWAY_HOST=172.17.0.1 source https://docs.docker.com/desktop/mac/networking/. extra hosts https://docs.docker.com/compose/compose-file/#extra_hosts ``` ",
    "url": "/DockerNotes/Quick-TidBits",
    
    "relUrl": "/DockerNotes/Quick-TidBits"
  },"168": {
    "doc": "QuickScripts",
    "title": "QuickScripts",
    "content": "{: .text-delta } 1. TOC {:toc} --- # How to install npm packages from your local machine > If you need to manually test a package you are developing and don't want to make a release each time you modify something, you can install it > directly from your local machine. > You can achieve this by using the following commands, depending on the package manager you use: ```bash yarn add [path-to-your-package] ``` ```bash npm install [path-to-your-package] ``` > This will have the following equivalent in package.json: ```json ... \"dependencies\": { \"[package]\": \"file:[relative-path-to-package]\", ... }, ``` # Write to file with JavaScript and Node.js > Sometimes, as a programmer, you might need to write something to a file on the local file system. > And that can be a piece of cake, case in which you'll use your favorite text editor to do it > manually. > However, other times, it needs to be something complex and dynamic and you want your JavaScript to do it for you. > We'll first require the `fs` module from Node.js into our JS file. ```javascript const fs = require(\"fs\"); ``` > Then we'll grab our content: ```javascript const content = \"Hello World!\"; ``` > And finally we'll use the `writeFile` function from the `fs` module to populate our file. > We need to provide the name of our file, the data or content to populate it with, the options ( > optional—for encoding, modes or flags) and a callback (also optional - to show the error message should one arise). ```javascript fs.writeFile(filename, data, [options], [callback]); ``` > Here I've given it the `a+` flag - _\"Open file for reading and appending. The file is created if it does not exist.\"_. The encoding defaults to ' > utf8' if none is given. ```javascript fs.writeFile(\"file.txt\", content, {flag: \"a+\"}, (err) => { if (err) throw err; }); ``` ",
    "url": "/JavaScript/Node/QuickScripts",
    
    "relUrl": "/JavaScript/Node/QuickScripts"
  },"169": {
    "doc": "QuickScripts",
    "title": "QuickScripts",
    "content": "{: .text-delta } 1. TOC {:toc} --- # get env variables ```shell env ``` # get local ip ```shell osascript -e \"IPv4 address of (system info)\" ``` ```shell ifconfig | grep \"inet \" ``` # convert file/image to base64 ```shell base64 -i ./post_u_north_gate.jpg | pbcopy ``` ```shell cat ./post_u_north_gate.jpg | openssl base64 | tr -d '\\n' | pbcopy ``` ```shell ./post_u_north_gate.jpg | openssl base64 | tr -d '\\n' | pbcopy ``` # ENABLE ROOT ```shell dsenableroot ``` ## Disable Root ```shell dsenableroot -d ``` # Copy terminal output directly to clip board ```shell pbcopy Replace the `X` characters with a number that represents the block size for the total capacity of your RAM Disk. Calculate this number by multiplying your desired size of disk in megabytes by 2048. In our example, we’ll create a 4 GB RAM Disk, which requires a number of 8388608 (4096 \\* 2048). Input this number in place of the X characters in the command above: ```shell diskutil erasevolume HFS+ 'RAM Disk' `hdiutil attach -nomount ram://8388608 ``` ## create ramdisk ```shell if [ ! -d /Volumes/JetBrainsKeys/tbcore/intellij ]; then diskutil erasevolume HFS+ JetBrainsKeys `hdiutil attach -nomount ram://6291456`; mkdir -p /Volumes/JetBrainsKeys/intellij; chmod -R 777 /Volumes/JetBrainsKeys; #mkdir -p /Volumes/JetBrainsKeys/tbcore/intellij/caches; #ln -s /Volumes/JetBrainsKeys/intellij/caches/Users/bpaxton/Library/Caches/JetBrains/IntelliJIdea2022.1/caches; fi ``` --- # Launching Apps From Terminal > Terminal command to launch macOS gui apps is appropriately called `open` and here is how it works at its most simple: ```shell open -a ApplicationName ``` > That will open the defined app named “ApplicationName” But open is much more powerful than that. If you just type open at the command prompt, you’ll return the basic help file with details on how to properly use the command with a variety of flags and syntax. While the open command exists in all versions of Mac OS X, the abilities vary somewhat depending on what version of macOS / Mac OS X the Mac is running. Nonetheless, in modern releases this is what you’ll see: - `Usage`: `open [-e] [-t] [-f] [-W] [-R] [-n] [-g] [-h] [-b ] [-a ] [filenames] [--args arguments]` - `Help`: Open opens files from a shell. By default, open each file using the default application for that file. If the file is in the form of a URL, the file will be opened as a URL. - `Options`: `-a ` : Opens with the specified application. `-b ` : Opens with the specified application bundle identifier. `-e ` : Opens with TextEdit. `-t ` : Opens with default text editor. `-f ` : Reads input from standard input and opens with TextEdit. `-F --fresh` : Launches the app fresh, that is, without restoring windows. Saved persistent state is lost, excluding Untitled documents. `-R, --reveal` : Selects in the Finder instead of opening. `-W, --wait-apps ` : Blocks until the used applications are closed (even if they were already running). `--args ` : All remaining arguments are passed in argv to the application's main() function instead of opened. `-n, --new` : Open a new instance of the application even if one is already running. `-j, --hide` : Launches the app hidden. `-g, --background ` : Does not bring the application to the foreground. `-h, --header` : Searches header file locations for headers matching the given filenames, and opens them. In other words, example simple command syntax could look like the following, opening “ApplicationName” with the file located at the path `/file/to/open`: ```shell open -a ApplicationName /file/to/open ``` > You’ll note you don’t need the full path to the application name, but you would need the full path to a file name. > The usage is likely self-explanatory to those who have experience in the command line environment, but for those who are new to the Terminal, don’t > be too confused, it is easy to use, and we’ll > explain. > For example, if you want to edit `/etc/motd ` with `TextWrangler` to change your Message of the Day, but you hate the command line editors `nano` > and `vi`, here is what you’d type: ```shell open -a TextWrangler /etc/motd ``` Also worth noting is that if you are launching an application with spaces in its name, you’ll want to add a backslash after each word, opening Adobe Photoshop CS would look like this: ```shell open -a Adobe\\ Photoshop\\ CS ``` > Launching GUI Apps as root from the Command Line ```shell sudo open -a TextEdit /tmp/magicfile ``` ## Creating Shell Aliases for Frequently Launched GUI Apps 1. First launch the profile or .bash_profile into a text editor: ```shell nano .profile ``` > or ```shell open -e .profile ``` 2. add the following to a new line: ```text alias photoshop=\"open -a Adobe\\ Photoshop\\ CS\" ``` > This creates an alias, so that the `open -a Adobe\\ Photoshop CS` command is now shortened to simply `photoshop`. --- # DEBUGGING - OBSCURE ISSUES ## _[How to fix Mac OSX stuck/hanging on progress bar after login](https://smyl.es/how-to-fix-mac-osx-stuckhanging-on-progress-bar-will-not-boot/)_ # Resources - [ CLI Gist Resource ](https://gist.github.com/bzerangue/dca8fc2d63309ba2bd9f) - [ Making OS installer ](https://dortania.github.io/OpenCore-Install-Guide/installer-guide/mac-install.html#setting-up-opencore-s-efi-environment) - [ Mac Official Doc, Make bootable installer ](https://support.apple.com/en-us/HT201372) ",
    "url": "/MacNotes/QuickScripts",
    
    "relUrl": "/MacNotes/QuickScripts"
  },"170": {
    "doc": "QuickScripts",
    "title": "QuickScripts",
    "content": "{: .text-delta } 1. TOC {:toc} --- # GISTs ## [Keyboard input/ barcode scanner react typescript hook](https://gist.github.com/14paxton/09adce350289bdcc1df92ed425c1d548) # How to dynamically infer TypeScript single object types from tRPC query outputs > This is how you can dynamically infer a single object type from a tRPC Query returning an array of elements of that specific type: ```typescript export const exampleRouter = router({ exampleQuery: exampleQueryImplementation, }); // extracting a single object type from an array of that type export type ArrayElement = ArrayType extends (infer ElementType)[] ? ElementType : never; // the output types of a specific router, indexable by query identifiers type RouterOutput = inferRouterOutputs; // return type of a single query export type QueryOutputArray = RouterOutput[\"exampleQuery\"]; // the type of each element from the returned array export type QueryOutputObject = ArrayElement; ``` # Improving mapping performance with web workers > We can use web workers to execute the computationally intensive mapping operation in a separate thread. This can be done by following these steps: 1. Create a new TS file for the worker ```typescript // worker.ts // define the input and output types type WorkerInput = { data: T; mapFn: (x: T) => U }; type WorkerOutput = { data: U[] }; // function for the actual work on the data function doWork(input: WorkerInput): Promise> { // Apply the mapping function to the input data. const mappedData = input.data.map(input.mapFn); // Return the mapped data as a promise. return Promise.resolve({ data: mappedData }); } ``` 2. Use the worker in the main.ts file ```typescript // main.ts const worker = new Worker(\"worker.ts\"); // Define the mapping function. const mapFn = (x: number) => x * x; // Send data and the mapping function to the worker for processing. worker.postMessage({ data: [1, 2, 3], mapFn }); // Listen for the message with the result from the worker worker.addEventListener(\"message\", (event) => { console.log(`Received message from worker: ${event.data}`); }); ``` # How to type-safely interact with Firestore documents ## The problem > When using Typescript and Firestore, we usually have to do a lot of manual casting when working with documents. One such example would be getting > the data of a document: ```typescript const thread = threadDocument.data(); // this will be of type any ``` > Should we want to interact with the data in a type-safe manner, we'll have to cast it, which can quickly become tedious. ```typescript const thread = threadDocument.data(); ``` > Additionally, when we write data to Firestore, there are no restrictions on how the data should look. ## The solution > This is when _Firestore Data Converters_ can come in handy. > All we have to do is implement two methods - one where we constrain the data that gets written and one where we cast the data coming from > Firestore: ```typescript const converter = { toFirestore: (dataToBeWritten: ThreadData) => data, fromFirestore: (document: QueryDocumentSnapshot) => document.data(), }; ``` > To take this one step further, we can store the \"converted\" collection reference so we won't have to apply the converters each time we query the > collection: ```typescript const threadCollection = db.collection(\"threads\").withConverter(converter); ``` > Now we can safely interact with the collection without having to cast the data: ```typescript const threadDocument = await threadCollection.doc(id).get(); const thread = threadDocument.data(); // this will be of type ThreadData ``` # How to obtain reactivity in custom hooks while interacting with the local storage > This is how we can obtain reactivity in our custom React.js hooks while working with the local storage, using the Pub/Sub (Observer) design > pattern (with TypeScript support). > The goal is to implement a \"useLocalStorage\" custom hook, which will abstract away the complexity of reading from and writing to the local storage. > As we know, each custom hook instantiates its own > state. > That is a problem in our case because when one instance of the hook updates the local storage, the state copies held by all the other hook instances > will be out of sync and will never be > updated. > We can solve this issue using the following idea: we can mimic a centralized shared state between our custom hook instances by delegating the > responsibility of holding these in sync with the local > storage to a custom \"manager,\" the Observer object. > Our custom hook will work based on these ideas: 1. Custom Hook instances will subscribe their inner state updater functions to this manager 2. Custom Hook instances will publish the new state to the manager when updating a key of the local storage 3. The manager will trigger all subscriber functions and thus update the inner states of the custom hook instances. > The observer object: ```typescript export type Listener = (event: EventType) => void; export type ObserverReturnType = { subscribe: (entryKey: KeyType, listener: Listener) => () => void; publish: (entryKey: KeyType, event: EventType) => void; }; export default function createObserver(): ObserverReturnType { const listeners: Record[]> = {} as Record[] >; return { subscribe: (entryKey: KeyType, listener: Listener) => { if (!listeners[entryKey]) listeners[entryKey] = []; listeners[entryKey].push(listener); return () => { listeners[entryKey].splice(listeners[entryKey].indexOf(listener), 1); }; }, publish: (entryKey: KeyType, event: EventType) => { if (!listeners[entryKey]) listeners[entryKey] = []; listeners[entryKey].forEach((listener: Listener) => listener(event), ); }, }; } export const LocalStorageObserver = createObserver(); export const {subscribe, publish} = LocalStorageObserver; ``` > The useLocalStorage custom hook (window checks are optional, depending on which environment this JavaScript will run on): ```typescript export function useLocalStorage(key: LOCAL_STORAGE_KEYS, initialValue: T) { const [storedValue, setStoredValue] = useState(() => { if (typeof window === \"undefined\") { return initialValue; } try { const item = window.localStorage.getItem(key); return item ? JSON.parse(item) : initialValue; } catch (error) { return initialValue; } }); LocalStorageObserver.subscribe(key, setStoredValue); const setValue = (value: T) => { try { const valueToStore = value instanceof Function ? value(storedValue) : value; setStoredValue(valueToStore); LocalStorageObserver.publish(key, valueToStore); if (typeof window !== \"undefined\") { window.localStorage.setItem(key, JSON.stringify(valueToStore)); } } catch (error) { console.error(error); } }; return [storedValue, setValue]; } ``` # Axios Request and Response Interceptors > Axios interceptors come in handy when we need to track, register, or work with: 1. Requests before leaving 2. Responses before arriving 3. Both 1 and 2 > Thanks to interceptors, we can pass our own handlers/callbacks for the following cases: 1. Before launching a request 2. Catching an error at HTTP request launch 3. Arrival of a response 4. Catching an error at response arrival > This is an example of how we can use them: ```typescript // handlers for the request launch and for catching request launch error axios.interceptors.request.use( (config) => { console.log('We are now preparing to launch the request!') return config; }, (error) => Promise.reject(error), ); // handlers for response interceptor and error response interceptor axios.interceptors.response.use( (response) => { console.log('We received the response!'); return response; }, (error) => { if (error.response.status === 403) return Promise.reject(error); } }, ``` > Each Axios Instance can have its custom configuration and request and response interceptors. > This can be very useful when the architecture of our application enforces/allows each of our services to > use their own Axios Instance. > This way, each service can have an Axios Instance with custom configuration and custom request/response interceptors. > This is what an Axios Instance factory utility function could look like in TypeScript: ```typescript export const createAxiosWithInterceptors = ( requestConfig: AxiosRequestConfig = {}, requestInterceptorHandlers: Partial = DefaultRequestInterceptor, responseInterceptorHandlers: Partial = DefaultResponseInterceptor, ) => { const axiosInstance = axios.create(requestConfig); axiosInstance.interceptors.request.use( requestInterceptorHandlers.requestConfigHandler, requestInterceptorHandlers.requestErrorHandler, ); axiosInstance.interceptors.response.use( responseInterceptorHandlers.responseHandler, responseInterceptorHandlers.responseErrorHandler, ); return axiosInstance; }; ``` > where we can define our types and default interceptors as follows: ```typescript type RequestConfigHandler = (config: AxiosRequestConfig) => AxiosRequestConfig; type RequestErrorHandler = (error: AxiosError) => Promise; type RequestInterceptorHandlers = { requestConfigHandler: RequestConfigHandler; requestErrorHandler: RequestErrorHandler; }; type ResponseHandler = (response: AxiosResponse) => AxiosResponse; type ResponseErrorHandler = (error: AxiosError) => Promise; type ResponseInterceptorHandlers = { responseHandler: ResponseHandler; responseErrorHandler: ResponseErrorHandler; }; const DefaultResponseInterceptor = { responseHandler: (response: AxiosResponse) => response, responseErrorHandler: (error: AxiosError) => Promise.reject(error), }; const DefaultRequestInterceptor = { requestConfigHandler: (config: AxiosRequestConfig) => config, requestErrorHandler: (error: AxiosError) => Promise.reject(error), }; ``` > In each of our services we can then use our factory method as follows: ```typescript // axios instance with custom request config received through constructor, custom request interceptor and default response interceptor protected ; http: AxiosInstance = createAxiosWithInterceptors(this.requestConfig, { requestConfigHandler: (config) => { console.log(); return config; }, }); ``` # How to declare path aliases in Typescript > Defining path aliases using webpack can save you a lot of headache when it comes to imports, but you must also let Typescript know about them. > Following my [previous post](https://graffino.com/til/FRXaL59FzW-folder-aliases-using-webpack) on declaring path aliases using webpack, you can > configure your **`tsconfig.json`** file to in order to > be able to use those aliases in Typescript like so: ```json { ... \"paths\": { \"@/*\": [ \"./src/*\" ], \"images/*\": [ \"./assets/images/*\" ] }, \"include\": [ ... ] } ``` > Of course, all paths for defined aliases must be reachable by Typescript. > You can check [this post](https://graffino.com/til/hEvDjQa4au-how-to-import-images-in-typescript) out if you are not sure > how to do that. > Otherwise, we are going to get this error: ```shell Cannot find module 'images/[your module]' or its corresponding type declarations. ``` # How to import images in Typescript > Normally, when Typescript cannot find something, we get this error: ```shell Cannot find module [your module] or its corresponding type declarations ts(2307) ``` > Now let's see how we can fix this, with a simple example. > Given the following folder structure: ``` │── src │ ├── resources │ │ ├── ts │ │ │ ├── **/*.ts │ │ ├── images │ │ │ ├── logo.svg ├── ... ├── tsconfig.json ``` > To be able to achieve something like this: ```typescript import Logo from \"[path]/images/logo.svg\"; ``` > without any `**` Typescript errors\\*\\*, we need to follow these steps: ### 1. Make sure that the `images` folder is \"reachable\" by Typescript. > Adding this inside **`tsconfig.json`** will do the trick: ```json { \"include\": [ ... \"resources/**/*.ts\" ] } ``` > A configuration like this one **will not do**: ```json { \"include\": [ \"resources/ts/**/*.ts\" ] } ``` > Because **images/** is not included in **ts/** and we don't have any other folders declared, so Typescript can't \"reach\" it. ### 2. Let Typescript know about the `.svg` type in that folder. > In the root of the images folder create a file called **`index.d.ts`**: ``` ├── resources │ ├── ts │ │ ├── **/*.ts │ ├── images │ │ ├── logo.svg │ │ ├── index.d.ts ``` > With the following contents: ```typescript declare module \"*.svg\" { const value: any; export = value; } ``` ",
    "url": "/JavaScript/TypeScript/QuickScripts",
    
    "relUrl": "/JavaScript/TypeScript/QuickScripts"
  },"171": {
    "doc": "QuickScripts",
    "title": "QuickScripts",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Gists ## [Sync Chrome Bookmarks ](https://gist.github.com/14paxton/c10cfd597e7e7b487e27d641cf964c59) > used to sync a bookmark file to a repo to update on both Mac and windows using bash and PowerShell when an account cannot sync due to admin > restrictions # [Tar File](https://www.cyberciti.biz/faq/how-to-tar-a-file-in-linux-using-command-line/) Recognized Suffixes - .gz : gzip - .tgz : gzip - .taz : gzip - .z : compress - .taZ : compress - .bz2 : bzip2 - .tz2 : bzip2 - .tbz2 : bzip2 - .tbz : bzip2 - .lz : lzip - .lzma : lzma - .tlz : lzma - .lzo : lzop - .xz : xz - .zst : zstd - .tzst : zstd - > Compress an entire directory `/home/vivek/data/` ```bash tar -czvf file.tar.gz /home/vivek/data/ ``` - > To compress multiple directories and files, execute: ```bash tar -czvf file.tar.gz /home/vivek/data/ /home/vivek/pics/ /home/vivek/.accounting.db ``` > One can use `bzip2` compression instead of `gzip` by passing the `-j` option to the `tar` command: ```bash tar -cjvf file.tar.bz2 /home/vivek/data/ ``` ## Options ### Create a new archive `- c ` ### Verbose output `- v ` ### Use archive file `- f ` ### Filter the archive through `gzipfile.tar.gz` `- z ` ### Filter the archive through `bzip2` `- j ` ## Un Tar ```bash tar xvf tar xzvf tar xjvf ``` # ZIP folder and add a password ```bash zip -er last_resort.zip attachments; ``` # Find ## find and remove files ```bash for st in $(mdfind -name ultdata); do rm -rf \"$st\"; done ``` ## Find and Delete Empty Directories The -type d option searches for directories, -empty selects empty ones and -exec rmdir {} executes the rmdir command to delete them. ```shell $ find . -type d -empty -exec rmdir -v {} + ``` # find and kill by pid ```bash pkill -f '.*GradleDaemon.*' ``` # kill by port ```bash npx kill-port 18090 ``` # Add Table of Contents to mark down doc with pandoc 1. set file name ```bash fileMD=CLI_Grailsw.md; ``` 2. run ```bash pandoc -s --toc $fileMD -o output.md; rm -f $fileMD; mv output.md ./$fileMD; ``` ## [UseCase Examples](https://gist.github.com/14paxton/0af2e0618a579d1cdc64d2b183af08e6) # CAT ## Show Line Endings ```shell cat -e file.txt ``` ## Display Line Numbers ```shell cat -n file.txt ``` > This command is equivalent to the ‘nl file’ command. ```shell nl file.txt ``` ## Display Tab Characters ```shell cat -T file.txt ``` ## Reverse a File using tac ```shell tac file.txt file2.txt ``` ## Remove Blank Lines ```shell cat -s file.txt ``` ## Create Here Document > A here document (here doc) is a way to interactively input multiple lines of text into a command or program. > In the case of the cat command, you can use a here doc to provide the content that cat > should display. > Here’s an example using a here doc with the cat command: ```shell cat type text > more text > and more text > more more more text > EOF ``` > In this example, the encountered. > The cat command will display the > content of the here doc, which in this case consists of three lines. # Mac ## get local ip ```zsh osascript -e \"IPv4 address of (system info)\" ``` ```zsh ifconfig | grep \"inet \" ``` ## convert file/image to base64 ```zsh base64 -i ./post_u_north_gate.jpg | pbcopy ``` ```zsh cat ./post_u_north_gate.jpg | openssl base64 | tr -d '\\n' | pbcopy ``` ```zsh ./post_u_north_gate.jpg | openssl base64 | tr -d '\\n' | pbcopy ``` ",
    "url": "/Linux/QuickScripts",
    
    "relUrl": "/Linux/QuickScripts"
  },"172": {
    "doc": "QuickScripts",
    "title": "QuickScripts",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Remove all commit history 1) Checkout/create orphan branch (this branch won't show in git branch command): ```shell git checkout --orphan latest_branch ``` 2) Add all the files to the newly created branch: ```shell git add -A ``` 3) Commit the changes: ```shell git commit -am \"commit message\" ``` 4) Delete main (default) branch (this step is permanent): ```shell git branch -D main ``` 5) Rename the current branch to main: ```shell git branch -m main ``` 6) Finally, all changes are completed on your local repository, and force update your remote repository: ```shell git push -f origin main ``` # SSL certificate problem > unable to get local issuer certificate ```shell git config --global http.sslbackend schannel ``` # in a conflicted state, and you want to just accept all of theirs ```shell git checkout --theirs . git add . ``` > If you want to do the opposite: ```shell git checkout --ours . git add . ``` # That limits the delta cache size to one byte (effectively disabling it) instead of the default of 0, which means unlimited ```shell git config pack.deltaCacheSize 1 ``` # removed all of my dangling blobs and dangling commits > removes all references of unreachable commits in reflog. ```shell git reflog expire --expire-unreachable=now --all ``` > removes the commits themselves. ```shell git gc --prune=now ``` ```shell git reflog expire --expire-unreachable=now --all git gc --prune=now ``` - or `git gc --aggressive` with a later git version - or `git repack -a -f -d --window=250 --depth=250` # get all deletes and changes ```shell git log --shortstat --author \"bpaxton\" --since \"35 days ago\" --until \"today\" | egrep \"file[s]* changed\" | sed 's/changed, \\([0-9]\\+ deletions\\)/changed, 0 insertions(+), \\1/g' | awk '{files+=$1; inserted+=$4; deleted+=$6} END {print \"files changed\", files,\"total: \" inserted - deleted , \"lines inserted:\", inserted, \"lines deleted:\", deleted}' ``` # get changed lines ```shell git log --shortstat --author \"username\" --since \"5 days ago\" --until \"today\" \\ | egrep \"file[s]* changed\" \\ | sed 's/changed, \\([0-9]\\+ deletions\\)/changed, 0 insertions(+), \\1/g' \\ | awk '{files+=$1; inserted+=$4; deleted+=$6} END {print \"files changed\", files, \"lines inserted:\", inserted, \"lines deleted:\", deleted}' ``` # clone set commit ```shell git clone git@github.com:14paxton/ScriptsAndSuch.git .; git remote set-url origin git@github.com:14paxton/ScriptsAndSuch.git; git fetch; #git checkout master; #git merge origin/master; git add -A --ignore-errors; git commit -am \"script backup $(date +'%s')\"; git push; ``` --- ",
    "url": "/Git/QuickScripts",
    
    "relUrl": "/Git/QuickScripts"
  },"173": {
    "doc": "RandomNuggetsOfKnowledge",
    "title": "RandomNuggetsOfKnowledge",
    "content": "--- # SMS - > [Verizon SMS API](https://thingspace.verizon.com/documentation/apis/sms.html) ## sms with email Most major carriers offer an email to text service. The program can use email to send an SMS message. For example: ### C# ```csharp var message = new MailMessage(); message.From = new MailAddress(\"sender@foo.bar.com\"); message.To.Add(new MailAddress(\"5551234567@txt.att.net\"));//See carrier destinations below //message.To.Add(new MailAddress(\"5551234568@txt.att.net\")); //message.CC.Add(new MailAddress(\"carboncopy@foo.bar.com\")); message.Subject = \"This is my subject\"; message.Body = \"This is the content\"; var client = new SmtpClient(); client.Send(message); ``` ## [Carrier destinations](https://en.wikipedia.org/wiki/SMS_gateway) Compose a new email and use the recipient's 10-digit wireless phone number, followed by: . [cell phone number]@[carrier's gateway domain] . For example, 5551234567@txt.att.net . > > For example, 5551234567@txt.att.net. - `ATT`: [phonenumber]@`txt.att.net.` - `Verizon`: Similarly, [phonenumber]@`vtext.com` - `Sprint`: [phonenumber]@`messaging.sprintpcs.com` - `TMobile`: [phonenumber]@`tmomail.net` - `Virgin Mobile`: [phonenumber]@`vmobl.com` - `Nextel`: [phonenumber]@`messaging.nextel.com` - `Boost`: [phonenumber]@`myboostmobile.com` - `Alltel`: [phonenumber]@`message.alltel.com` - `EE`: [phonenumber]@`mms.ee.co.uk` (might support send without reply-to) | Mobile carrier | SMS gateway domain | MMS gateway domain |------------------------------------------------------------------------------|---------------------------|-------------------------| [Alltel](https://en.wikipedia.org/wiki/Alltel) | sms.alltelwireless.com | mms.alltelwireless.com | [AT&T](https://en.wikipedia.org/wiki/AT%26T_Mobility) | txt.att.net | mms.att.net | [Boost Mobile]() | sms.myboostmobile.com | myboostmobile.com | [Consumer Cellular](https://en.wikipedia.org/wiki/Consumer_Cellular) | mailmymobile.net | mailmymobile.net | [Cricket Wireless](https://en.wikipedia.org/wiki/Cricket_Wireless) | mms.cricketwireless.com | mms.cricketwireless.com | [Google Fi Wireless](https://en.wikipedia.org/wiki/Google_Fi_Wireless) | msg.fi.google.com | msg.fi.google.com | [MetroPCS](https://en.wikipedia.org/wiki/MetroPCS) | mymetropcs.com | mymetropcs.com | [Republic Wireless](https://en.wikipedia.org/wiki/Republic_Wireless) | text.republicwireless.com | na | [Sprint](https://en.wikipedia.org/wiki/Sprint_Corporation) | messaging.sprintpcs.com | pm.sprint.com | [VerizonWireless]() | vtext.com | vzwpix.com | ",
    "url": "/RandomNuggetsOfKnowledge",
    
    "relUrl": "/RandomNuggetsOfKnowledge"
  },"174": {
    "doc": "React-Router",
    "title": "React-Router",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Testing Library Render Without Router Helper Function - > [javascript](https://testing-library.com/docs/example-react-router) ```jsx // https://testing-library.com/docs/example-react-router import React from \"react\"; import {Router} from \"react-router-dom\"; import {render} from \"@testing-library/react\"; import {createMemoryHistory} from \"history\"; // test utils file function renderWithRouter(ui, { route = \"/\", history = createMemoryHistory({initialEntries: [route]}) } = {}) { return { ...render({ui}), history }; } ``` - > typescript ```tsx // setupTests.tsx import {render} from '@testing-library/react'; import {createMemoryHistory, MemoryHistory} from 'history'; import React from 'react'; import {Router} from 'react-router-dom'; interface RenderWithRouterProps { route?: string; history?: MemoryHistory; } export const renderWithRouter = ( ui: React.ReactNode, {route = '/', history = createMemoryHistory({initialEntries: [route]})}: RenderWithRouterProps = {} ) => { return { ...render({ui}), history }; }; ``` # An example React component which uses React Router's match object to grab a url parameter ```jsx import React from \"react\"; import {withRouter} from \"react-router\"; import ScreenHeader from \"../../components/UI/ScreenHeader\"; import Error from \"../../components/UI/Error\"; import Loading from \"../../components/UI/Loading\"; import {useQuery} from \"@apollo/react-hooks\"; import {GET_PROJECT} from \"../../components/Project/project.query\"; const ScreensProject = ({match}) => { const {id} = match.params; const {loading, error, data} = useQuery(GET_PROJECT, { variables: {projectId: id} }); if (loading) return ; if (error) return ; return ( {data.project && ( ... )} ); }; export default withRouter(ScreensProject); ``` ",
    "url": "/ReactNotes/React-Router",
    
    "relUrl": "/ReactNotes/React-Router"
  },"175": {
    "doc": "ReactHookForm",
    "title": "ReactHookForm",
    "content": "{% raw %} {: .text-delta } 1. TOC {:toc} --- # [React Hook Forms Components](https://github.com/14paxton/ReactHookFormDynamicComponents) --- # Standard Form Setup ```jsx import React from \"react\"; import {useForm} from \"react-hook-form\"; export default function App() { const {register, handleSubmit, watch, errors} = useForm(); const onSubmit = data => console.log(data); return ( ); } ``` # Higher Order Component Helper ```jsx /** * Higher order helper function which wraps a component w/ React Hook Form * @param {React Component} WrappedComponent to pass into * @param {*} restProps any other remaining props * @returns {React Component} */ export function withReactHookForm(WrappedComponent, restProps) { const HOC = () => { const methods = useForm(); return ( ); }; return HOC; } ``` # Form Context / useFormContext ```jsx // Updated Form import React from \"react\"; import {FormProvider, useForm} from \"react-hook-form\"; export default function App() { const methods = useForm(); const onSubmit = data => console.log(data); return ( ); } ``` > This approach flows with React Context/Provider patterns, and any child component in the ancestry tree can grab React Hook Form Context if it needs > it. > Mid-level components which don’t care about > register or error are set free and liberated from baggage props. ```jsx import React from \"react\"; import {useFormContext} from \"react-hook-form\"; const UIFormInput = ({name, required, ...passedInProps}) => { // All these values are from the component's parent const {control, errors, register} = useFormContext(); return ( {errors[name] && ( {label || name} field is required . ) } ) ; } ``` # Fields Array/ useFieldArray ```jsx import React from \"react\"; import PropTypes from \"prop-types\"; import {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"; import {useFieldArray, useFormContext} from \"react-hook-form\"; import UIFormSelect from \"./Select\"; import {isUrlValid} from \"../../../services/helpers\"; import {Button} from \"@nulib/admin-react-components\"; const UIFormRelatedURL = ({ codeLists = [], label, name, required, ...passedInProps }) => { const {control, errors, register} = useFormContext(); const {fields, append, remove} = useFieldArray({ control, name, // Metadata item form name keyName: \"useFieldArrayId\", }); return ( . {fields.map((item, index) => { // Metadata item name combined with it's index in the array of multiple entries const itemName = `${name}[${index}]`; return ( | {`${label} #${index + 1}`} {/* Existing values are NOT editable, so we save form data needed in the POST update, in hidden fields here */} {!item.new && ( {item.url} {item.label && `, ${item.label.label}`} . )} {/* New form entries */} {item.new && ( URL isUrlValid(value) || \"Please enter a valid URL\", })} defaultValue=\"\" data-testid={`related-url-url-input`} /> {errors[name] && errors[name][index].url && ( {errors[name][index].url.message} . )} )} remove(index)} data-testid={`button-related-url-remove`} > Remove | ); })} . { append({new: true, url: \"\", label: \"\"}); }} data-testid=\"button-add-field-array-row\" > Add {fields.length > 0 && \"another\"} ); }; UIFormRelatedURL.propTypes = { codeLists: PropTypes.array, label: PropTypes.string.isRequired, name: PropTypes.string.isRequired, roleDropdownOptions: PropTypes.array, }; export default UIFormRelatedURL; ``` # fire submit from parent ```javascript const submitMyForm = (data) => { formRef.current.dispatchEvent(new Event(\"submit\", { cancelable: true, bubbles: true, }),); }; ``` # using a controller component with select and autocomplete ```jsx value.length ( onChange(data)} getOptionLabel={(option) => `${userOptions[option].firstName} ${userOptions[option].lastName}`} filterSelectedOptions renderTags={(value, getTagProps) => value.map((option, index) => ())} renderInput={(params) => ()} {...props} />)} /> ``` ```jsx ( onChange(data.props.value)} helperText=\"Please select your currency\" {...props} > {currencies.map((option) => ( {option.label} ))} )} /> ``` {% endraw %} # Testing ## Test and Render React Hook Form ```javascript import React from \"react\"; import {screen} from \"@testing-library/react\"; import {renderWithReactHookForm} from \"./services/testing-helpers\"; import UIFormRelatedURL from \"./RelatedURL\"; const props = { name: \"relatedUrl\", label: \"Related URL\", }; describe(\"standard component behavior\", () => { beforeEach(() => { renderWithReactHookForm(, { // Add some default values to our form state, using Reach Hook Form's \"defaultValues\" param defaultValues: { relatedUrl: [{ url: \"http://www.northwestern.edu\", label: { id: \"HATHI_TRUST_DIGITAL_LIBRARY\", label: \"Hathi Trust Digital Library\", scheme: \"RELATED_URL\", }, },], }, }); }); it(\"renders component and an add button\", () => { expect(screen.getByTestId(\"related-url-wrapper\")); expect(screen.getByTestId(\"button-add-field-array-row\")); }); it(\"renders existing related url values\", () => { expect(screen.getAllByTestId(\"related-url-existing-value\")).toHaveLength(1); expect(screen.getByText(\"http://www.northwestern.edu, Hathi Trust Digital Library\")); }); it(\"renders form elements when adding a new related url value\", () => { const addButton = screen.getByTestId(\"button-add-field-array-row\"); fireEvent.click(addButton); fireEvent.click(addButton); expect(screen.getAllByTestId(\"related-url-form-item\")).toHaveLength(2); ... }); }); ``` ## helper function - > we wrap the component we’re testing with React Hook Form’s and can initialize the form with some default values. ### renderWithReactHookForm / render with a React hook form ```javascript /** * Testing Library utility function to wrap tested component in React Hook Form * @param {ReactElement} ui A React component * @param objectParameters * @param {Object} objectParameters.defaultValues Initial form values to pass into * React Hook Form, which you can then assert against */ export function renderWithReactHookForm(ui, {defaultValues = {}} = {}) { let reactHookFormMethods = {}; const Wrapper = ({children}) => { const methods = useForm({defaultValues}); return {children}; }; return { ...render(ui, {wrapper: Wrapper}) }; } ``` ### Render with React Hook Form Extended --- ```jsx import React from \"react\"; import {render} from \"@testing-library/react\"; import {FormProvider, useForm} from \"react-hook-form\"; /** * Testing Library utility function to wrap tested component in React Hook Form * @param {ReactElement} ui A React component * @param objectParameters * @param {Object} objectParameters.defaultValues Initial form values to pass into * React Hook Form, which you can then assert against * @param {Array} objectParameters.toPassBack React Hook Form method names which we'd * like to pass back and use in tests. A primary use case is sending back 'setError', * so we can manually setErrors on React Hook Form components and test error handling */ export function renderWithReactHookForm(ui, {defaultValues = {}, toPassBack = []} = {}) { let reactHookFormMethods = {}; const Wrapper = ({children}) => { const methods = useForm({defaultValues}); for (let reactHookFormItem of toPassBack) { reactHookFormMethods[reactHookFormItem] = methods[reactHookFormItem]; } return {children}; }; return { ...render(ui, {wrapper: Wrapper}), reactHookFormMethods, }; } ``` - > #### example renderWithReactHookFormExtended.test.js / test that a React Hook Form element displays error messages, without submitting the form ```javascript import React from \"react\"; import {waitFor} from \"@testing-library/react\"; import UIFormRelatedURL from \"./RelatedURL\"; import {relatedUrlSchemeMock} from \"../../Work/controlledVocabulary.gql.mock\"; import {renderWithReactHookForm} from \"../../../services/testing-helpers\"; import userEvent from \"@testing-library/user-event\"; const props = { codeLists: relatedUrlSchemeMock, name: \"relatedUrl\", label: \"Related URL\", }; describe(\"Test component, error handling\", () => { // Here's an example of how to test that a React Hook Form element // displays error messages, without submitting the form. it(\"renders appropriate error messages with invalid url or select values\", async () => { const { findByText, getByTestId, reactHookFormMethods, } = renderWithReactHookForm(, { toPassBack: [\"setError\"], }); userEvent.click(getByTestId(\"button-add-field-array-row\")); await waitFor(() => { // Here we manually manipulate the form, setting an error the same way React Hook Form does reactHookFormMethods.setError(\"relatedUrl[0].url\", { type: \"validate\", message: \"Please enter a valid url\", }); }); expect(await findByText(\"Please enter a valid url\")); }); }); ``` - > And what the input being tested may look like. ```jsx isUrlValid(value) || \"Please enter a valid URL\", })} defaultValue=\"\" data-testid={`related-url-url-input`} /> ``` - > #### used in app ```javascript describe(\"BasicSearch\", () => { beforeEach(() => { renderWithReactHookForm(, { defaultValues: { firstName: \"Vic\", lastName: \"Vinegar\", }, }); }); it(\"BasicSearch should render withouth crashing\", async () => { expect(screen.getByTestId(\"group-first-name-search-input\")); }); it(\"first and last name inputs should have value\", async () => { expect(screen.getByTestId(\"group-first-name-search-input\").value).toEqual(\"Vic\",); expect(screen.getByTestId(\"group-last-name-search-input\").value).toEqual(\"Vinegar\",); }); }); ``` ## Test Metadata ```javascript import React from \"react\"; import {screen} from \"@testing-library/react\"; import { renderWithRouterApollo, withReactHookForm, } from \"../../../services/testing-helpers\"; import ControlledMetadata from \"./ControlledMetadata\"; describe(\"Some component\", () => { beforeEach(() => { // Wrap with React Hook Form's Provider const Wrapped = withReactHookForm(ControlledMetadata); // Wrap with any other Providers you may be using, like ApolloProvider, React Router, etc. return renderWithRouterApollo(, { mocks: [], }); }); // Your tested component will be wrapped with React Hook Form's provider (and others) it(\"renders controlled metadata component\", async () => { expect(await screen.findByTestId(\"controlled-metadata\")); }); ... }); ``` ",
    "url": "/ReactNotes/ReactHookForm",
    
    "relUrl": "/ReactNotes/ReactHookForm"
  },"176": {
    "doc": "ReactNotes",
    "title": "ReactNotes",
    "content": "--- ## [Repo](https://github.com/14paxton/ReactNotes) # Adding to actual DOM [ReactDOM](https://reactjs.org/blog/2015/10/01/react-render-and-top-level-api.html) ``` React Suspense React 16.6 added a component that lets you \"wait\" for some code to load and declaratively specify a loading state (like a spinner) while we're waiting: ``` # Portals ``` React Portals provide a first-class way to render children into a DOM node that exists outside the DOM hierarchy of the parent component. ``` ",
    "url": "/JavaScript/ReactNotes",
    
    "relUrl": "/JavaScript/ReactNotes"
  },"177": {
    "doc": "RegEx",
    "title": "RegEx",
    "content": "{: .text-delta } 1. TOC {:toc} *** # RegEX =~ will look for partial match ==~ look for an exact match ## Use with replace and findall \"LBlsBF4wUp\".replaceAll(/[\\d\\sa-zA-Z.!?\\\\-\\\\']/) ## Create String and compare ![](https://github.com/14paxton/GroovyNotes/blob/main/Where.png) ## -closure for where- ![](https://github.com/14paxton/GroovyNotes/blob/main/%40Where.png) ## Use groups ```groovy def replacedTxt = txt.replaceAll(/.*(\\d{2}-\\d{2}-\\d{4}).*(Gr.*)./) { all, date, lang -> def dateObj = Date.parse('dd-MM-yyyy', date) \"The text '$all' was created with $lang on a ${dateObj.format('EEEE')}.\" } ``` ",
    "url": "/GroovyNotes/RegEx",
    
    "relUrl": "/GroovyNotes/RegEx"
  },"178": {
    "doc": "RegEx",
    "title": "RegEx",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Regex simplicity vs normal > There are some cases when making use of regular expressions (regex) can exempt a lot of fuss from a programmers head. > For example, let's compare the complexity between traditional logic and regex, > in a function that excludes the vowels from a given string: - > ## Traditional way: ```javascript function removeVowel(str) { let strList = str.split(\"\"); for (let i = 0; i ## Regex Way: ```javascript function removeVowel(str) { return str.replace(/[aeiou]/gi, \"\"); } ``` # Flags > - `g` is used for global search which means the search will not return after the first match. > - `i` is used for case-insensitive search meaning that a match can occur regardless of the casing. > - `m` is used for multiline search. > - `u` is used for Unicode search. # Shortcodes for Metacharacters: > - `\\d` matches any decimal digit and is shorthand for [0-9]. > - `\\w` matches any alphanumeric character which could be a letter, a digit, or an underscore. \\w is shorthand for [A-Za-z0-9_]. > - `\\s` matches any white space character. > - `\\D` matches any non-digit and is the same as [^0-9.] > - `\\W` matches any non-word (that is non-alphanumeric) character and is shorthand for [^A-Za-z0-9_]. > - `\\S` matches a non-white space character. > - `. ` matches any character. # Negated Character Class > If you add a caret symbol inside a character class like this `[^...]`, it will match any character that is not listed inside the square brackets. ```javascript const regexPattern = /[^bc]at/; console.log(regexPattern.test(\"bat\")); // Output: false console.log(regexPattern.test(\"cat\")); // Output: false console.log(regexPattern.test(\"mat\")); // Output: true ``` # RegExp ## TESTS IT EXISTS ```javascript regEx.test(string); ``` ## Exec ```javascript const regexAlreadyCloned = /clone/i; regexAlreadyCloned.exec(key); ``` ## Test ```javascript const regex = new RegExp(/ROLE_PERMISSION_.*/); return currentUser?.authorities?.filter((role) => !regex.test(role)); ``` # String ## RETURN MATCHES > return all matches when using `g` global flag ```javascript string.match(regEx); ``` ## Replace ```javascript const begginingWhiteSpace = new RegExp(/^((\\r\\n)+|\\r+|\\n+|\\t+|\\s+)*/, \"m\"); const controlCharacterRegExp = new RegExp(/(\\r\\n)+|\\r+|\\n+|\\t+/, \"g\"); return stringToParse .replace(begginingWhiteSpace, \"\") .replace(controlCharacterRegExp, \" , \"); ``` ## ReplaceAll ### Leave only Alpha Chars and remove space ```javascript const removeSpecialChar = /[^a-zA-Z\\d ]/g; const replaceSpace = /\\s/g; const onlyAlpha = (fileName ? fileName : title).replaceAll(removeSpecialChar, \"\",); const strippedFName = onlyAlpha.replaceAll(replaceSpace, \"_\"); ``` # Validate your password with regex ## Example password validation regex - the rules below can be concatenated ``` ^(?=.*?[^a-zA-ZÄÖÜäöüß0-9])(?=.*?[0-9])(?=.*?[a-zäöüß])(?=.*?[A-ZÄÖÜ])(?!.*\\d{2,}).{8,}$ ``` ### Special character matching - Matches (operator is `?=`) any string that has at least a special character e.g.: `sadsds@asdasd` ``` (?=.*?[^a-zA-ZÄÖÜäöüß0-9]) ``` ### Number matching - Matches (operator is `?=`) any string that has at least a number: e.g.: `s1adsdsasdasd` ``` (?=.*?[0-9]) ``` ### Small letter matching - Matches (operator is `?=`) any string that has at least a small letter: e.g.: `SADSa` ``` (?=.*?[a-zäöüß]) ``` ### Big letter matching - Matches (operator is `?=`) any string that has at least a big letter: e.g.: `SADSa` ``` (?=.*?[A-ZÄÖÜ]) ``` ### Consecutive numbers matching - Doesn't match (operator is `?!`) strings that have consecutive numbers in them: e.g.: asdasd42dada ``` (?!.*\\d{2,}) ``` ### Sequential numbers matching (cannot be used at the same time with previous rule) - Doesn't match (operator is `?!`) strings that have sequential numbers in them: e.g.: 12asdasd42dada - It will allow numbers that are separated by other letters e.g.: adasd1asd2asd3 - It will allow consecutive numbers e.g.: ahadADS22dhsg44 ``` (?!.*((12)|(23)|(34)|(45)|(56)|(67)|(78)|(90)|(01))) ``` ### Length of string matching (should be placed last) - This will match any string that is less than 8 characters ``` .{8,} ``` ",
    "url": "/JavaScript/RegEx",
    
    "relUrl": "/JavaScript/RegEx"
  },"179": {
    "doc": "Resources",
    "title": "Resources",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Getting Resources - ```java ClassLoader classLoader = getClass().getClassLoader(); URL resource = classLoader.getResource(path); ``` - ```java Optional url = resourceResolver.getResource(\"classpath:\" + path); ``` # Set Resources ## Gradle ```groovy shadowJar { // Ensure resources are included mergeServiceFiles() include 'EmailTemplate/**' } sourceSets { main { resources { srcDirs = ['src/main/resources'] include '**/*.properties', '**/*.yml' // Add any specific file patterns if needed } } } graalvmNative { toolchainDetection = false binaries { resources.autodetect() } } } ``` ",
    "url": "/Micronotes/Resources",
    
    "relUrl": "/Micronotes/Resources"
  },"180": {
    "doc": "Run",
    "title": "Run",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Remote Desktop - open remote desktop ```mstsc.exe``` - list monitors ``` mstsc /l to LIST ``` - use multiple monitors ``` /multimon ``` # Control Panel - change timeout - You can enter the below commands to do so, the equivalent of setting them to never: ```powercfg /change standby-timeout-ac 0``` ``` powercfg /change standby-timeout-dc 0``` ``` powercfg /change monitor-timeout-ac 0``` ``` powercfg /change monitor-timeout-dc 0``` `` powercfg /change hibernate-timeout-ac 0 ``` ``` powercfg /change hibernate-timeout-dc 0 ``` > AC and DC determine \\'on battery\\' and \\'plugged in\\', while 0 disables > these options. *** ## getting to control panel display setting, ### Microsoft.Personalization\\\\pageWallpaper ```shell:::{ED834ED6-4B5A-4bfe-8F11-A626DCB6A921}``` ",
    "url": "/Windows_Notes/Run",
    
    "relUrl": "/Windows_Notes/Run"
  },"181": {
    "doc": "RunningApp",
    "title": "RunningApp",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Run server client concurrently ```bash ./gradlew server:bootRun ./gradlew client:start ./gradlew bootRun -parallel ``` # adding plugins in multi project build [My Example](https://github.com/14paxton/Grails4App/blob/task2-create-react-app/app-web/settings.gradle) 1. add to settings.gradle ```groovy include 'client', 'server' rootProject.name = 'app-web' include ':mod-domain', \":mod-mobile\" project(':mod-domain').projectDir = new File(settingsDir, '../mod-domain') project(':mod-mobile').projectDir = new File(settingsDir, '../mod-mobile') ``` 2. add to build.gradle ```groovy grails { plugins { compile project(\":mod-domain\") compile project(\":mod-mobile\") } } compile project(':mod-domain') ``` # Custom JVM args > set jvm args in build.gradle bootRun{} ```groovy jvmArgs = [\"-server\", \"-XX:ReservedCodeCacheSize=2g\", \"-XX:NewRatio=3\", \"-XX:ActiveProcessorCount=12\", \"-Xss16m\", \"-XX:+UseConcMarkSweepGC\", \"-XX:+CMSParallelRemarkEnabled\", \"-XX:ConcGCThreads=4\", \"-XX:+AlwaysPreTouch\", \"-XX:+TieredCompilation\", \"-XX:+UseCompressedOops\", \"-Xdebug\", \"-Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=5005\", \"-Xmx8g\", ] ``` # Run with env variabls ```shell grailsw dev -Dgrails.AWS_REGION=us-west-2 -Dgrails.AWS_PROFILE=dev run-app --stacktrace -verbose ``` ",
    "url": "/PersonalGrailsNotes/RunningApp",
    
    "relUrl": "/PersonalGrailsNotes/RunningApp"
  },"182": {
    "doc": "SDKMan",
    "title": "SDKMan",
    "content": "{: .text-delta } 1. TOC {:toc} --- # [Using SDKMan](https://sdkman.io/usage) # Install sdkman ```bash curl -s https://get.sdkman.io | bash source \"$HOME/.sdkman/bin/sdkman-init.sh\" ``` # list candidates ```shell sdk list ``` # list versions ```shell sdk list [program] ``` # will use for cmd shell only ```shell sdk use [program] [version number] ``` # will switch default ```shell sdk default [program][version number] ``` # list all candidates ```bash ls -l ~/.sdkman/candidates/java ``` # [available canidates](https://api.sdkman.io/2/candidates/java/Darwin/versions/list?installed=) # [Environment Switching](https://sdkman.io/usage) > use a .sdkmanrc file at root of project - Use sdkman to run `sdk env` to initialize with correct JDK version - Enable `auto-env` through the `sdkman_auto_env` config - [See https://sdkman.io/usage#config](https://sdkman.io/usage#config) - Add `sdkman_auto_env=true` to `~/.sdkman/etc/config` > my use case, contents of my .sdkmanrc file for GraalVM java project ```text # Enable auto-env through the sdkman_auto_env config # Add key=value pairs of SDKs to use below java=22.1.0.r17-grl #java=17041-LibArch64 ``` ",
    "url": "/Linux/SDKMan",
    
    "relUrl": "/Linux/SDKMan"
  },"183": {
    "doc": "SQLCheatSheet",
    "title": "SQLCheatSheet",
    "content": "![CheatSheet.jpeg](..%2Fassets%2Fimages%2FCheatSheet.jpeg) ",
    "url": "/SQLNotes/SQLCheatSheet",
    
    "relUrl": "/SQLNotes/SQLCheatSheet"
  },"184": {
    "doc": "SQLNotes",
    "title": "SQLNotes",
    "content": "___ ## [Repo](https://github.com/14paxton/SQLNotes) --- ",
    "url": "/SQLNotes/",
    
    "relUrl": "/SQLNotes/"
  },"185": {
    "doc": "Scripting",
    "title": "Scripting",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Variables ## Special Variables ### The name of the Bash script. > `$0` ### The first 9 arguments to the Bash script. (As mentioned above.) > `$1` - `$9` ### How many arguments were passed to the Bash script. > `$#` ### All the arguments supplied to the Bash script. > `$@` ### The exit status of the most recently run process. > `$?` ### The process ID of the current script. > `$$` ### The username of the user running the script. > `$USER` ### The hostname of the machine the script is running on. > `$HOSTNAME` ### The number of seconds since the script was started. > `$SECONDS` ### Returns a different random number each time is it referred to. > `$RANDOM` ### Returns the current line number in the Bash script. > `$LINENO` ## Use ### The first, second, etc command line arguments to the script. > `$1, $2, ...` ### To set a value for a variable. Remember, no spaces on either side of = > `variable=value` ### Double will do variable substitution, single will not. > `Quotes \" '` ### Save the output of a command into a variable > `variable=$( command )` ### Make the variable var1 available to child processes. > `export var1` # Std In and Out ## use a string put int script that needs a user response ```shell export GH_TOKEN=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; act=$(gh auth status -t >>(tee -a) 2>&1 | sed -n 's/.*Token: //p'); if [ \"$act\" == *\"$GH_TOKEN\"* ](%22$act%22%20==%20*%22$GH_TOKEN%22*.md#) then echo $GH_TOKEN | gh auth login --with-token; ``` ## use output from a script to set a variable > `tee` can be used to create a file from output `here i take the out put pipe that and error output` ```shell 2 >&1 ``` > File descriptor 1 `is the standard output (stdout)` > File descriptor 2 `is the standard error (stderr)` > `2>` redirects stderr to an (unspecified) file. > `&1` redirects `stderr` to `stdout` ",
    "url": "/Linux/Scripting",
    
    "relUrl": "/Linux/Scripting"
  },"186": {
    "doc": "Security",
    "title": "Security",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Grails ## Security Roles ### Properties ```properties application.groovy=[pattern: '/adminDashboard/**', access: ['ROLE_ADMIN']] ``` ### controller above methods ```groovy @Secured(['ROLE_USER', 'ROLE_ADMIN']) ``` ```groovy @Secured(\"hasRole('ROLE_PERMISSION_ACCESS_ASSESSMENTS')\") ``` ```groovy @Secured(\"(hasRole('ROLE_ORDER_SHOW') or hasRole('ROLE_RESULT_SHOW') ) and hasRole('ROLE_PERMISSION_ACCESS_ASSESSMENTS')\") ``` ```groovy @Secured(\"hasAnyRole('ROLE_ORDER_SHOW', 'ROLE_RESULT_SHOW') and hasRole('ROLE_PERMISSION_ACCESS_ASSESSMENTS')\") ``` ```groovy @Secured(value = ['permitAll'], httpMethod = 'POST') ``` ```groovy @Secured(value = ['IS_AUTHENTICATED_ANONYMOUSLY'], httpMethod = 'POST') ``` ### controller body ```groovy SpringSecurityUtils.ifAllGranted('ROLE_ADMIN') SpringSecurityUtils.ifNotGranted() SpringSecurityUtils.ifAnyGranted() ``` ### views/gsp ```html ``` ### Check user security roles ```groovy def user = springSecurityService?.authentication?.details //Check security context def authentication = SecurityContextHolder.getContext().getAuthentication() //Checking variables in security notation in controller @Secured(closure = { def status = ctx.templateService.getTemplate(request.getParameter('id')).status.name() (hasRole(\"ROLE_ADMIN_TP\") && status != 'UNPUBLISH' || 'DRAFT') }) ``` ",
    "url": "/SpringNotes/Security",
    
    "relUrl": "/SpringNotes/Security"
  },"187": {
    "doc": "Security",
    "title": "Security",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Security Roles ## Properties ```properties application.groovy=[pattern: '/adminDashboard/**', access: ['ROLE_ADMIN']] ``` ## controller above methods ```groovy @Secured(['ROLE_USER', 'ROLE_ADMIN']) ``` ```groovy @Secured(\"hasRole('ROLE_PERMISSION_ACCESS_ASSESSMENTS')\") ``` ```groovy @Secured(\"(hasRole('ROLE_ORDER_SHOW') or hasRole('ROLE_RESULT_SHOW') ) and hasRole('ROLE_PERMISSION_ACCESS_ASSESSMENTS')\") ``` ```groovy @Secured(\"hasAnyRole('ROLE_ORDER_SHOW', 'ROLE_RESULT_SHOW') and hasRole('ROLE_PERMISSION_ACCESS_ASSESSMENTS')\") ``` ```groovy @Secured(value = ['permitAll'], httpMethod = 'POST') ``` ```groovy @Secured(value = ['IS_AUTHENTICATED_ANONYMOUSLY'], httpMethod = 'POST') ``` ## controller body ```groovy SpringSecurityUtils.ifAllGranted('ROLE_ADMIN') SpringSecurityUtils.ifNotGranted() SpringSecurityUtils.ifAnyGranted() ``` ## views/gsp ```html ``` ## Check user security roles ```groovy def user = springSecurityService?.authentication?.details //Check security context def authentication = SecurityContextHolder.getContext().getAuthentication() //Checking variables in security notation in controller @Secured(closure = { def status = ctx.templateService.getTemplate(request.getParameter('id')).status.name() (hasRole(\"ROLE_ADMIN_TP\") && status != 'UNPUBLISH' || 'DRAFT') }) ``` ",
    "url": "/PersonalGrailsNotes/Security",
    
    "relUrl": "/PersonalGrailsNotes/Security"
  },"188": {
    "doc": "ServiceAccounts",
    "title": "ServiceAccounts",
    "content": "{: .text-delta } 1. TOC {:toc} *** # [Service Accounts](https://cloud.google.com/sdk/gcloud/reference/iam/service-accounts/set-iam-policy) ## [Activate Service Account](https://cloud.google.com/sdk/gcloud/reference/auth/activate-service-account) ## [Create And Manage](https://cloud.google.com/iam/docs/creating-managing-service-accounts) ### Permissions > You need the Cloud IAM permission serviceusage.services.enable to enable services. Depending on what features your require, such as listing > services, you need serviceusage.services.list. - Typically you add the role ``` roles/serviceusage.serviceUsageAdmin ``` which includes the following permissions: ``` serviceusage.services.get serviceusage.services.list serviceusage.services.enable serviceusage.services.disable ``` *** ## [Identity and Access Management IAM](https://cloud.google.com/iam/docs/roles-overview) *** ",
    "url": "/GoogleNotes/ServiceAccounts",
    
    "relUrl": "/GoogleNotes/ServiceAccounts"
  },"189": {
    "doc": "Services",
    "title": "Services",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Transactions > An instance of `TransactionStatus` is available by default in Grails transactional service methods. > the keys in the Map must correspond to properties > of [org.springframework.transaction.support.DefaultTransactionDefinition](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/transaction/support/DefaultTransactionDefinition.html) ```groovy Account.withTransaction([propagationBehavior: TransactionDefinition.PROPAGATION_REQUIRES_NEW, isolationLevel: TransactionDefinition.ISOLATION_REPEATABLE_READ]) { //code } ``` ## Personal Use Case - [Using TransactionStatus in a Service](https://gist.github.com/14paxton/a212d86552b05b95ef91ee444197fd4e) ## Resources ### Articles - [Transaction Management](https://docs.spring.io/spring-framework/docs/current/reference/html/data-access.html#transaction) ### Grails Docs - [withTransaction]() - [Transactions Rollback and the Session](https://docs.grails.org/latest/guide/services.html#transactionsRollbackAndTheSession) - [GORM Programmatic Transactions](http://gorm.grails.org/6.0.x/hibernate/manual/index.html#programmaticTransactions) ### Spring - [Transaction Definition Java Doc Spring Doc](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/transaction/TransactionDefinition.html) ### Java Docs - [Spring Interface TransactionStatus](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/transaction/TransactionStatus.html) - [Spring Interface SavepointManager](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/transaction/SavepointManager.html) ",
    "url": "/PersonalGrailsNotes/Services",
    
    "relUrl": "/PersonalGrailsNotes/Services"
  },"190": {
    "doc": "ShortCuts",
    "title": "ShortCuts",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Chrome ## Tab & Window | Action | Shortcut | . | Open a new window | ⌘ + n | . | Open a new window in Incognito mode | ⌘ + Shift + n | . | Open a new tab, and jump to it | ⌘ + t | . | Reopen previously closed tabs in the order they were closed | ⌘ + Shift + t | . | Jump to the next open tab | ⌘ + Option + Right arrow | . | Jump to the previous open tab | ⌘ + Option + Left arrow | . | Jump to a specific tab | ⌘ + 1 through ⌘ + 8 | . | Jump to the last tab | ⌘ + 9 | . | Open the previous page in your browsing history for the current tab | ⌘ + [ or ⌘ + Left arrow | . | Open the next page in your browsing history for the current tab | ⌘ + ] or ⌘ + Right arrow | . | Close the current tab or pop-up | ⌘ + w | . | Close the current window | ⌘ + Shift + w | . | Minimize the window | ⌘ + m | . | Hide Google Chrome | ⌘ + h | . | Quit Google Chrome | ⌘ + q | . | Move tabs right or left . | Ctrl + Shift + PgUp or Ctrl + Shift + PgDn | . ## Chrome Features | Action | Shortcut | . | Show or hide the Bookmarks Bar | ⌘ + Shift + b | . | Open the Bookmark Manager | ⌘ + Option + b | . | Open the Settings page in a new tab | ⌘ + , | . | Open the History page in a new tab | ⌘ + y | . | Open the Downloads page in a new tab | ⌘ + Shift + j | . | Open the Find Bar to search the current page | ⌘ + f | . | Jump to the next match to your Find Bar search | ⌘ + g | . | Jump to the previous match to your Find Bar search | ⌘ + Shift + g | . | When Find Bar is open, search for selected text | ⌘ + e | . | Open Developer Tools | ⌘ + Option + i | . | Open the Clear Browsing Data options | ⌘ + Shift + Delete | . | Log in as a different user, browse as a Guest, or access payment and password info | ⌘ + Shift + m | . | Jump to the main menu bar | Control + F2 | . | Cycle focus to unfocused dialog (if showing) and all toolbars | ⌘ + Option + Up arrow or Down arrow | . | Open a feedback form | ⌘ + Option + Shift + i | . | Turn on caret browsing | F7 | . | Focus on inactive dialogs | ⌘ + Option + Shift + a | . ## Address Bar Use the following shortcuts in the address bar: . | Action | Shortcut | . | Search with your default search engine | Type a search term + Return | . | Search using a different search engine | Type a search engine name and press&nbsp;Tab | . | Add www. and .com to a site name, and open it in the current tab | Type a site name&nbsp;+&nbsp;Ctrl + Return | . | Add www. and .com to a site name, and open it in a new window | Type a site name +&nbsp;Ctrl + Shift + Return | . | Open the website in a new background tab | Type a web address +&nbsp;⌘ + Return | . | Jump to the address bar | ⌘ + l | . | Remove predictions from your address bar | Down arrow to highlight + Shift + fn + Delete . Forward Delete or fn-Delete on a laptop . | . | Move cursor to the address bar | Ctrl + F5 | . ## Webpage | Action | Shortcut | . | Compose a new email message with a link to the current page | ⌘ + Shift + i | . | Open options to print the current page | ⌘ + p | . | Open options to save the current page | ⌘ + s | . | Open the Page Setup dialog | ⌘ + Option + p | . | Reload your current page, ignoring cached content | ⌘ + Shift + r | . | Stop the page loading | Esc | . | Browse clickable items moving forward | Tab | . | Browse clickable items moving backward | Shift + Tab | . | Open a file from your computer in Google Chrome | ⌘ + o + Select a file | . | Display non-editable HTML source code for the current page | ⌘ + Option + u | . | Open the JavaScript Console | ⌘ + Option + j | . | Save your current webpage as a bookmark | ⌘ + d | . | Save all open tabs as bookmarks in a new folder | ⌘ + Shift + d | . | Turn full-screen mode on or off | ⌘ + Ctrl + f | . | Make everything on the page bigger | ⌘ and + | . | Make everything on the page smaller | ⌘ and - | . | Return everything on the page to the default size | ⌘ + 0 | . | Scroll down a webpage, a screen at a time | Space | . | Scroll up a webpage, a screen at a time | Shift + Space | . | Search the web | ⌘ + Option + f | . | Move your cursor to the beginning of the previous word in a text field | Option + Left arrow | . | Move your cursor to the back of the next word in a text field | Option + Right arrow | . | Delete the previous word in a text field | Option + Delete | . | Open your home page in the current tab | ⌘ + Shift + h | . ## Mouse The following shortcuts require you to use your mouse: . | Action | Shortcut | . | Open a link in a current tab (mouse only) | Drag a link to a tab | . | Open a link in new background tab | ⌘ +&nbsp;Click a link | . | Open a link, and jump to it | ⌘ + Shift +&nbsp;Click a link | . | Open a link, and jump to it (mouse only) | Drag a link to a blank area of the tab strip | . | Open a link in a new window | Shift +&nbsp;Click a link | . | Open a tab in a new window (mouse only) | Drag the tab out of the tab strip | . | Move a tab to a current window (mouse only) | Drag the tab into an existing window | . | Return a tab to its original position | Press Esc while dragging | . | Save the current webpage as a bookmark | Drag the web address to the Bookmarks Bar | . | Download the target of a link | Option +&nbsp;Click a link | . | Display your browsing history | Right-click Back&nbsp;&nbsp;or click &amp; hold Back&nbsp;&nbsp; Right-click&nbsp;Next&nbsp;&nbsp;or click &amp; hold Next&nbsp; . | . | Increase the window to full height | Double-click a blank area of the tab strip | . ",
    "url": "/MacNotes/ShortCuts",
    
    "relUrl": "/MacNotes/ShortCuts"
  },"191": {
    "doc": "Shortcuts",
    "title": "Shortcuts",
    "content": "{: .text-delta } 1. TOC {:toc} --- # [Widows Shortcuts Doc](https://support.microsoft.com/en-us/windows/keyboard-shortcuts-in-windows-dcc61a57-8ff0-cffe-9796-cb9706c75eec) # Keys—Operation > `Win + Left` - Position a window on the left half of the screen > `Win + Right` - Position a window on the right half of the screen > `Win + Up` - Maximize a window > `Win + Down` - Restore a window, Minimize a window > `Win + Shift + Up` - Snap a window to maximum height > `Win + Left / Right` then `Win + Up / Down` - Position a window to one of the four possible quadrants > `Win + Shift + Left / Right` - Shift a window to the next / previous display > `Win + M` Minimize all windows > `Win + Home` Minimize all but active window > `Win + D` Toggle Desktop View # Mac to Win ## Keypad | **Operation** | **Mac** | **Windows** |:---------------------------------------------------------:|:-----------------------------:|:-----------------------------:| **_Copy_** | Command+C | Ctrl+C | **_Cut_** | Command+X | Ctrl+X | **_Paste_** | Command+V | Ctrl+V | **_Undo_** | Command+Z | Ctrl+Z | **_Save_** | Command+S | Ctrl+S | **_Open_** | Command+O | Ctrl+O | **_Lock computer_** | Command+Control+Q | WindowsKey+L | **_Show desktop_** | Command+F3 | WindowsKey+D | **_Open file browser_** | Command+N | WindowsKey+E | **_Minimize windows_** | Command+M | WindowsKey+M | **_Search_** | Command+Space | WindowsKey | **_Close active window_** | Command+W | Control+W | **_Switch current task_** | Command+Tab | Alt+Tab | **_Maximize a window to full screen_** | Control+Command+F | WindowsKey+Up | **_Save screen (Screenshot)_** | Command+Shift+3 | WindowsKey+Shift+S | **_Save window_** | Command+Shift+4 | WindowsKey+Shift+S | **_View item information or properties_** | Command+I | Alt+Enter | **_Select all items_** | Command+A | Ctrl+A | **_Select more than one item in a list (noncontiguous)_** | Command, then click each item | Control, then click each item | **_Type special characters_** | Option+ character key | Alt+ character key | ## TrackPad | **Operation** | **Mac** | **Windows** |:------------------------------------------:|:---------------------------:|:--------------------------------:| **_Scroll_** | Two finger vertical swipe | Two finger vertical swipe | **_Zoom_** | Two finger pinch in and out | Two finger pinch in and out | **_Swipe back and forward between views_** | Two finger sideways swipe | Two finger sideways swipe | **_Switch virtual workspaces_** | Four fingers sideways swipe | Four fingers sideways swipe | **_Display currently open apps_** | Four fingers upward swipe | Three fingers upward swipe | **_Switch between apps_** | N/A | Slow three finger sideways swipe | **_Go to desktop_** | Spread out four fingers | Three finger swipe downwards | **_Open Cortana / Action center_** | Two finger slide from right | Three finger tap | **_Open extra information_** | Three finger tap | N/A | **_Show launchpad / start an app_** | Pinch with four fingers | Tap with four fingers | ",
    "url": "/Windows_Notes/Shortcuts",
    
    "relUrl": "/Windows_Notes/Shortcuts"
  },"192": {
    "doc": "Spaces",
    "title": "Spaces",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Creating An Environment ## Example Used With Java7 and Grails2 1. added repo 2. created application then connected it to repo 3. add ssh 4. spin up 5. add jdk tar gz to packages in space 1. use generated curl to upload ```bash sudo curl -i -H \"Authorization: Bearer {token} -F author=\"{author}\" -F description=\"jdk7Gzip\" -F file=@\"/Users/bpaxton/Downloads/depend.tar.gz\" https://files.pkg.jetbrains.space/talentplus/p/tb-6/files/ ``` 2. open in ide from a project in spaces, then save jdk to environment/client once opened 3. add java file can check java ` update-alternatives --config java` 4. use existing container copy files ```shell /usr/lib/jvm/java-7.0.232/bin# curl -f -L -H \"Authorization: Bearer {token} -o /usr/lib/jvm/java-7.0.232.zip \"https://files.pkg.jetbrains.space/talentplus/p/tb-6/files/7.0.232-zulu.zip\"; ``` ```shell unzip java-7.0.232.zip; ``` ```shell mv 7.0.232-zulu/ ./java-7.0.232; ``` ```shell rm 7.0.232-zulu; ``` 5. alt add java file user docker imaage ```shell docker pull williamyeh/java7 docker run -it williamyeh/java7 bash docker cp 123f5c6f5e1f:/usr/lib/jvm/java-7-oracle /usr/lib/jvm ``` 6. install yum ```dockerfile -RUN yum -y install java-1.7.0-openjdk -RUN yum -y install tar -ENV JAVA_HOME /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.231-2.6.19.1.amzn2.0.1.x86_64/jre -ENV JAVA_VERSION 7u231 ``` 7. Example for Java 7 using Ubuntu 14.04 1. Install a Docker - Docker CE free version is fine. See, for example, https://docs.docker.com/install/linux/docker-ce/ubuntu/ or use the docker.io package in recent Ubuntu versions shipped. 2. In an empty folder, create a file Dockerfile: ```dockerfile FROM ubuntu:trusty RUN apt-get update \\ && apt-get install -y \\ openjdk-7-jdk \\ && rm -rf /var/lib/apt/lists/* ENTRYPOINT [\"/usr/bin/java\"] #Add more packages in that command if you need that. ``` 3. In that folder, run: ```shell docker build -t gertvdijk/java7 . ``` 4. Run a command inside a single-use-container using that Java 7 image: ```shell docker run --rm -it gertvdijk/java7 -version ``` ```shell Output: java version \"1.7.0_181\" OpenJDK Runtime Environment (IcedTea 2.6.14. (7u181-2.6.14-0ubuntu0.1) OpenJDK 64-Bit Server VM (build 24.181-b01, mixed mode) ``` 5. Optionally, create a wrapper for convenience. - Create a file /usr/local/bin/java7-in-docker with contents: ```dockerfile #!/usr/bin/env sh -e DOCKER_IMAGE=gertvdijk/java7 PWD=\"$(pwd)\" exec docker run \\ --rm -it \\ -v ${PWD}:${PWD} \\ -v \"/etc/passwd:/etc/passwd:ro\" \\ -v \"/etc/group:/etc/group:ro\" \\ --user \"$(id -u):$(id -g)\" \\ --workdir \"${PWD}\" \\ \"${DOCKER_IMAGE}\" \\ $@ ``` - This will make the current working directory available inside the container—not your whole filesystem, and it will impersonate your local user account in the container namespace. - Mark it as executable: ```shell sudo chmod +x /usr/local/bin/java7-in-docker ``` - Run your Java 7 transparently, like this: ```shell java7-in-docker -jar relative/path/to/some.jar ``` ",
    "url": "/IntelliJNotes/Spaces",
    
    "relUrl": "/IntelliJNotes/Spaces"
  },"193": {
    "doc": "Spock",
    "title": "Spock",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Config ## Gradle ### [setup for both spock and junit](https://github.com/14paxton/TestingFrameworks/tree/master/Spock/RunSpockJUnitConcurrently) ## Use db in memory to run tests ```groovy @shared Sql sql = Sql.newInstance(“ jdbc: h2 : mem: ”, “ org.h2.Driver ”) ``` ## Maven ### CLI #### Run all the unit test classes. ```shell mvn test ``` #### Run a single test class. ```shell mvn -Dtest=TestApp1 test ``` #### Run multiple test classes. ```shell mvn -Dtest=TestApp1,TestApp2 test ``` #### Run a single test method from a test class. ```shell mvn -Dtest=TestApp1#methodname test ``` #### Run all test methods that match pattern 'testHello*' from a test class. ```shell mvn -Dtest=TestApp1#testHello* test ``` #### Run all test methods match pattern 'testHello*' and 'testMagic*' from a test class. ```shell mvn -Dtest=TestApp1#testHello*+testMagic* test ``` --- - Don’t run tests: > Note: the test classes in the project will be compiled! ```shell mvn clean package -DskipTests ``` - Don’t compile and don’t run the tests: > maven.test.skip is honored by the Surefire, Failsafe and the Compiler Plugin ```shell maven clean package -Dmaven.test.skip=true ``` #### Run a single test: > Sometimes you would like to execute a single test instead of all your tests. ```shell mvn test -Dtest=\"NameOfYourTest\" Run build offline ``` Both -o and --offline are equivalent. Your local Maven repository will is used to resolve dependencies. No connection to the internet is made to download dependencies. Your build will fail in case dependencies are not found in your local repository! ```shell mvn clean package -o ``` ### Dependencies #### Search for dependencies in your project > List all the dependencies ```shell mvn dependency:list ``` #### Check whether or not you have specific dependencies in your project ```shell mvn dependency:list | grep log4j ``` #### Get a single dependency ```shell mvn dependency:get -Dartifact=org.springframework:spring-core:5.3.15 ``` ### Local repository The default location of your local repo is `~/.m2` #### Install a (3rd party) jar file into your local Maven repository > since it doesn’t exist in any public repository like [Maven Central](http://search.maven.org/). ```shell mvn install:install-file -Dfile= -DgroupId= -DartifactId= -Dversion= -Dpackaging= -DgeneratePom=true ``` ##### Where: ``` ``` : the path to the file to load ``` ``` : the group that the file should be registered under ``` ``` : the artifact name for the file ``` ``` : the version of the file `````` : the packaging of the file, e.g., jar > Example: ```shell mvn install:install-file -Dfile=lang-groovy-5.2.2.jar \\ -DgroupId=org.elasticsearch.module \\ -DartifactId=lang-groovy \\ -Dversion=5.2.2 \\ -Dpackaging=jar \\ -DgeneratePom=true ``` --- ### Pom for running both spock and junit - [Code For Reference ](https://github.com/SanderSmee/spock-jupiter/blob/master/pom.xml) XML Pom ```xml verify org.apache.maven.plugins maven-compiler-plugin 3.10.1 . org.codehaus.gmavenplus gmavenplus-plugin 3.0.0 compile compileTests true . org.apache.maven.plugins maven-surefire-plugin 3.0.0-M7 org.junit.jupiter junit-jupiter-engine 5.9.3 org.junit.vintage junit-vintage-engine 5.9.3 true %regex[.*] . maven-failsafe-plugin 3.0.0-M7 . org.springframework.boot spring-boot-maven-plugin . gitlab-maven https://gitlab.guardianportal.us/api/v4/groups/5/-/packages/maven org.spockframework spock-bom 2.1-groovy-3.0 pom import org.junit junit-bom 5.9.3 pom import org.spockframework spock-core test org.apache.groovy groovy 4.0.6 org.apache.groovy groovy-sql 4.0.13 net.bytebuddy byte-buddy 1.12.17 test org.objenesis objenesis 3.3 test org.junit.jupiter junit-jupiter 5.9.3 test org.junit.jupiter junit-jupiter-api 5.9.3 test org.junit.jupiter junit-jupiter-engine 5.9.3 test org.junit.platform junit-platform-launcher 1.9.3 test org.junit.platform junit-platform-engine ``` --- # Testing ## Test Controller ```groovy import grails.testing.web.controllers.ControllerUnitTest import spock.lang.Specification class StudentControllerSpec extends Specification implements ControllerUnitTest { def 'Test the index action returns the correct model'() { given: List sampleStudents = [new Student(name: 'Nirav', grade: 100), new Student(name: 'Jeff', grade: 95), new Student(name: 'Sergio', grade: 90),] controller.studentService = Stub(StudentService) { list(_) >> sampleStudents count() >> sampleStudents.size() } when: 'The index action is executed' controller.index() then: 'The model is correct' model.studentList model.studentList.size() == sampleStudents.size() model.studentList.find { it.name == 'Nirav' && it.grade == 100 } model.studentList.find { it.name == 'Jeff' && it.grade == 95 } model.studentList.find { it.name == 'Sergio' && it.grade == 90 } model.studentCount == sampleStudents.size() } } ``` ```groovy class StudentControllerSpec extends Specification implements ControllerUnitTest { def 'If you save without supplying name and grade(both required) you remain in the create form'() { when: request.contentType = FORM_CONTENT_TYPE request.method = 'POST' controller.save() then: model.student view == 'create' } } ``` ```groovy import grails.testing.web.controllers.ControllerUnitTest import spock.lang.Specification class StudentControllerSpec extends Specification implements ControllerUnitTest { def 'if the users supplies both name and grade, save is successful '() { given: String name = 'Nirav' BigDecimal grade = 100 Long id = 1L controller.studentService = Stub(StudentService) { save(_, _) >> new Student(name: name, grade: grade, id: id) read(_) >> new Student(name: name, grade: grade, id: id) } when: request.method = 'POST' request.contentType = FORM_CONTENT_TYPE params['name'] = name params['grade'] = grade controller.save() then: 'a message indicating that the user has been saved is placed' flash.message and: 'the user is redirected to show the student' response.redirectedUrl.startsWith('/student/show') and: 'a found response code is used' response.status == 302 } } ``` ```groovy import grails.testing.web.controllers.ControllerUnitTest import spock.lang.Specification class StudentControllerSpec extends Specification implements ControllerUnitTest { void 'JSON payload is bound to the command object. If the student is saved, a 201 is returned'() { given: String name = 'Nirav' BigDecimal grade = 100 Long id = 1L controller.studentService = Stub(StudentService) { save(_, _) >> new Student(name: name, grade: grade, id: id) } when: 'json request is sent with domain conversion' request.method = 'POST' request.json = '{\"name\":\"' + name + '\",\"grade\":' + grade + '}' controller.save() then: 'CREATED status code is set' response.status == 201 } } ``` ```groovy import static javax.servlet.http.HttpServletResponse.SC_METHOD_NOT_ALLOWED import static javax.servlet.http.HttpServletResponse.SC_OK import grails.testing.web.controllers.ControllerUnitTest import spock.lang.Specification import spock.lang.Unroll @SuppressWarnings(['JUnitPublicNonTestMethod', 'JUnitPublicProperty']) class StudentControllerAllowedMethodsSpec extends Specification implements ControllerUnitTest { @Unroll def \"StudentController.save does not accept #method requests\"(String method) { when: request.method = method controller.save() then: response.status == SC_METHOD_NOT_ALLOWED where: method functional test - build.gradle ```groovy dependencies { ... testImplementation \"io.micronaut:micronaut-http-client\" } ``` ```groovy import grails.testing.mixin.integration.Integration import grails.testing.spock.OnceBefore import io.micronaut.core.type.Argument import io.micronaut.http.HttpRequest import io.micronaut.http.HttpResponse import io.micronaut.http.HttpStatus import io.micronaut.http.client.HttpClient import spock.lang.Shared import spock.lang.Specification @SuppressWarnings(['JUnitPublicNonTestMethod', 'JUnitPublicProperty']) @Integration class StudentControllerIntSpec extends Specification { @Shared HttpClient client StudentService studentService @OnceBefore void init() { String baseUrl = \"http://localhost:$serverPort\" this.client = HttpClient.create(baseUrl.toURL()) } def 'test json in URI to return students'() { given: List ids = [] Student.withNewTransaction { ids > resp = client.toBlocking().exchange(request, Argument.of(List, Map)) then: resp.status == HttpStatus.OK resp.body() resp.body().size() == 3 resp.body().find { it.grade == 100 && it.name == 'Nirav' } resp.body().find { it.grade == 95 && it.name == 'Jeff' } resp.body().find { it.grade == 90 && it.name == 'Sergio' } cleanup: Student.withNewTransaction { ids.each { id -> studentService.delete(id) } } } } ``` ## Testing Secured app ```groovy import grails.testing.mixin.integration.Integration import io.micronaut.core.type.Argument import io.micronaut.http.HttpRequest import io.micronaut.http.HttpResponse import io.micronaut.http.HttpStatus import io.micronaut.http.client.HttpClient import io.micronaut.http.client.exceptions.HttpClientException import spock.lang.AutoCleanup import spock.lang.Shared import spock.lang.Specification import grails.testing.spock.OnceBefore @SuppressWarnings(['MethodName', 'DuplicateNumberLiteral', 'Instanceof']) @Integration class ApiAnnouncementControllerSpec extends Specification { @Shared @AutoCleanup HttpClient client @OnceBefore void init() { client = HttpClient.create(new URL(\"http://localhost:$serverPort\")) } def 'test /api/announcements url is secured'() { when: HttpRequest request = HttpRequest.GET('/api/announcements') client.toBlocking().exchange(request, Argument.of(List, AnnouncementView), Argument.of(CustomError)) then: HttpClientException e = thrown(HttpClientException) e.response.status == HttpStatus.UNAUTHORIZED when: Optional jsonError = e.response.getBody(CustomError) then: jsonError.isPresent() jsonError.get().status == 401 jsonError.get().error == 'Unauthorized' jsonError.get().message == null jsonError.get().path == '/api/announcements' } def \"test a user with the role ROLE_BOSS is able to access /api/announcements url\"() { when: 'login with the sherlock' UserCredentials credentials = new UserCredentials(username: 'sherlock', password: 'elementary') HttpRequest request = HttpRequest.POST('/api/login', credentials) HttpResponse resp = client.toBlocking().exchange(request, BearerToken) then: resp.status.code == 200 resp.body().roles.find { it == 'ROLE_BOSS' } when: String accessToken = resp.body().accessToken then: accessToken when: HttpResponse rsp = client.toBlocking().exchange(HttpRequest.GET('/api/announcements') .header('Authorization', \"Bearer ${accessToken}\"), Argument.of(List, AnnouncementView)) then: rsp.status.code == 200 rsp.body() != null ((List) rsp.body()).size() == 1 ((List) rsp.body()).get(0) instanceof AnnouncementView ((AnnouncementView) ((List) rsp.body()).get(0)).message == 'The Hound of the Baskervilles' } def \"test a user with the role ROLE_EMPLOYEE is NOT able to access /api/announcements url\"() { when: 'login with the watson' UserCredentials creds = new UserCredentials(username: 'watson', password: '221Bbakerstreet') HttpRequest request = HttpRequest.POST('/api/login', creds) HttpResponse resp = client.toBlocking().exchange(request, BearerToken) then: resp.status.code == 200 !resp.body().roles.find { it == 'ROLE_BOSS' } resp.body().roles.find { it == 'ROLE_EMPLOYEE' } when: String accessToken = resp.body().accessToken then: accessToken when: resp = client.toBlocking().exchange(HttpRequest.GET('/api/announcements') .header('Authorization', \"Bearer ${accessToken}\")) then: def e = thrown(HttpClientException) e.response.status == HttpStatus.FORBIDDEN } } ``` ### with GEB ```groovy import geb.Page class LoginPage extends Page { static url = '/login/auth' static at = { title == 'Login' } static content = { loginButton { $('#submit', 0) } usernameInputField { $('#username', 0) } passwordInputField { $('#password', 0) } } void login(String username, String password) { usernameInputField > currentWeather ``` ## Mocking Service used in a service you are testing(put at beginning of the test class) ```groovy Closure doWithSpring() { { -> assessmentOrderService AssessmentOrderService } } AssessmentOrderService assessmentOrderService ``` ## Mocking Method in service you are testing ```groovy @Shared GroupCompareJoinUserGroupService groupCompareJoinUserGroupService setupSpec() { mockDomain GroupCompareJoinUserGroup } def \"some test\"() { service.groupCompareJoinUserGroupService = Mock(GroupCompareJoinUserGroupService) service.groupCompareJoinUserGroupService.fetchAssociatedAssessments(_ as GroupCompare, true) >> { groupCompare, removeRelationships -> groupCompareJoinUserGroupService.fetchAssociatedAssessments(groupCompare, true) } } ``` ## Testing a webpage with spock and geb ```groovy import geb.Page import geb.module.TextInput class SignUpPage extends Page { static url = '/signup' static content = { firstNameInput { $(name: \"firstName\").module(TextInput) } lastNameInput { $(name: \"lastName\").module(TextInput) } emailInput { $(name: \"email\").module(TextInput) } submitButton { $('#submit') } } void submit(String firstName, String lastName, String email) { firstNameInput.text = firstName lastNameInput.text = lastName emailInput.text = email submitButton.click() } } ``` ```groovy import geb.spock.GebSpec import grails.gorm.transactions.Rollback import grails.testing.mixin.integration.Integration @Integration class RegisterControllerSpec extends GebSpec { NotificationService notificationService UserService userService @Rollback def \"If you signup a User, an Event triggers which causes a Notification to be saved\"() { when: 'you signup with a non existing user' SignUpPage page = to SignUpPage page.submit('Sergio', 'del Amo', 'delamos@email.com') then: 'the user gets created and a notification is saved due to the event being triggered' userService.count() == old(userService.count()) + 1 notificationService.count() == old(notificationService.count()) + 1 when: 'you try to signup with a user which is already in the database' page = to SignUpPage page.submit('Sergio', 'del Amo', 'delamos@email.com') then: 'The user is not saved and no event gets triggered' noExceptionThrown() userService.count() == old(userService.count()) notificationService.count() == old(notificationService.count()) cleanup: userService.deleteByEmail('delamos@email.com') notificationService.deleteByEmail('delamos@email.com') } } ``` ## Mocking method in domain ```groovy [service / controller / domain].metaclass.’ static ’.[method] = { [arguments] -> [what to return ] } ``` ## Checking validity of constraints ```groovy !newScheduledInterview2.validate(['scheduledBy', 'scheduledDate']) !newScheduledInterview2.save(flush: true) newScheduledInterview2.errors['scheduledDate']?.code == 'unique' ``` ## check if method was called for another service ```groovy def called = false service.notifierService = Mock(NotifierService) service.notifierService.sendPostMarkEmail(_ as PostMarkEmail, _) >> { it -> called = true } ``` ## check if method was called for same service ```groovy service.metaClass.sendReminderEmail = { assessmentOrderId, templateId, sender, newTemplateBody, jobId -> calls++ } ``` ## create an exception ```groovy //create expando def testDelete = new Expando() // add exception to method call def exception = { new Exception(\"TEST\") } testDelete.delete = { throw exception } // add class as return for a method service.metaClass.[method_to_throw_exception] = { testDelete } //example in CalenderServiceSpec.groovy / “test delete exception” //or service.metaClass.[yourMethod] >> { throw exception } ``` ## catch exception ```groovy def response = thrown(GraphServiceException) ``` ## modify config during/for test ```groovy Holders.grailsApplication.config.outlook.clientId = \"GUUNAR5\" ``` ## create a custom manager for a test ```groovy def managerMap = [:] RoleGroup.findAll().each { def myUser = User.build(clientSetupId: 1, email: \"${it.name}@mailinator.com\", username: \"${it.name}@mailinator.com\") UserRoleGroup.build(user: myUser, roleGroup: it) def tokenAuthentication = new TokenAuthentication(decodedJwt(myUser), myUser) tokenAuthentication.details = myUser authMap[(it.name)] = tokenAuthentication managerMap[(myUser.id)] = it.name ==~ /testManager.*/ ? [1, 2, 3] : [] } service.userService = Mock(UserService) service.userService.fetchDirectReportIds(_) >> { it -> managerMap.get(it[0]) } ``` ## Mocking hibernate used to test methods using where queriers / detached criteria / criteria builder ```groovy @Shared InterviewModelService interviewModelService @Shared HibernateDatastore hibernateDatastore @Shared PlatformTransactionManager transactionManager Map configuration = [ 'hibernate.hbm2ddl.auto' : 'create-drop', 'dataSource.url' : 'jdbc:h2:mem:myDB', 'hibernate.cache.region.factory_class': 'org.hibernate.cache.ehcache.EhCacheRegionFactory' ] hibernateDatastore = new HibernateDatastore(configuration, CatalogDetail) transactionManager = hibernateDatastore.getTransactionManager() catalogDetailService = hibernateDatastore.getService(CatalogDetailService) //Set tests to rollback @Rollback void \"test criteria builder for getting interview models should return all\"() { //test } ``` ## Mock return value for service method used in the service you are testing ```groovy service.springSecurityService = [authentication: [details: currentUser]] ``` ## Mock a static method call from a domain ```groovy ClientSetup.metaClass.static.fetchSecurityGroupLabelsByClientSetupId = { Long id, String en -> [secGroupNameLabel: 'secGroupNameLabel', secGroupCodeLabel: 'secGroupCodeLabel'] } ``` ### Grails3 [Controller](https://gist.github.com/14paxton/0d64ab846b4691d8d6f1ccd5ccc63b58) ### Grails4 #### Ex. Integrations test for controller ```groovy package musicandcars import grails.testing.mixin.integration.Integration import grails.testing.spock.OnceBefore import io.micronaut.core.type.Argument import io.micronaut.http.HttpRequest import io.micronaut.http.HttpResponse import io.micronaut.http.HttpStatus import io.micronaut.http.MediaType import io.micronaut.http.client.HttpClient import spock.lang.Shared import spock.lang.Specification import spock.lang.Stepwise @Integration @Stepwise class CarFunctionalSpec extends Specification { @Shared HttpClient client @OnceBefore void init() { String baseUrl = \"http://localhost:$serverPort\" this.client = HttpClient.create(baseUrl.toURL()) } void \"test that no cars exist\"() { when: HttpResponse> resp = client.toBlocking().exchange(HttpRequest.GET(\"/automobiles\"), Argument.of(List, Map)) then: resp.status == HttpStatus.OK resp.body().size() == 0 resp.contentType.get().extension == MediaType.EXTENSION_JSON } } ``` --- # BuildTest plugin ## Snippet from spock test > Pluggin for using test data builder - [BuildTestData](http://plugins.grails.org/plugin/longwa/build-test-data) ```groovy import grails.buildtestdata.mixin.Build ``` use- implements BuildDomanTest\\ instead of DomainUnitTest \\ ```groovy @Build([Job, Tag, Type, Publisher]) class StatisticsServiceSpec extends Specification implements AutowiredTest, DataTest, BuildDataTest, ServiceUnitTest, GrailsWebUnitTest { def setupSpec() { mockDomain Job mockDomain Tag mockDomain Type mockDomain Publisher } def setup() { } def cleanup() { } void \"get top publishers when we don't have nothing in our system\"() { given: \"when we don't have any job published\" when: \"we get top publishers\" def publishers = service.getTopPublishers() then: \"we will see 0 publishers\" publishers.size() == 0 } void \"get top publishers when we have multiple jobs published by the same publisher\"() { given: \"when we have one 2 jobs published by the same publisher\" def tag = Tag.build() def type = Type.build() def publisher = Publisher.build() Job.build(publisher: publisher, type: type, tags: [tag]) Job.build(publisher: publisher, type: type, tags: [tag]) when: \"we get top publishers\" def publishers = service.getTopPublishers() def pair = publishers.find { key, value -> key.name.equals(http: //publisher.name ) } then : \"we will see 2 publishers\" publishers.size() == 1 pair?.value == 2 } } ``` - config file test/resources/TestDataConfig ```java import com.talentbank.core.ClientSetup import java.util.concurrent.ThreadLocalRandom //config file for test data plugin testDataConfig { sampleData { unitAdditionalBuild =['com.talentbank.core.assessmentOrder.AssessmentOrder':[com.talentbank.core.ClientSetup]] 'com.talentbank.core.ClientSetup' { //work around for unique constraints def i = 55 clientId = {->ThreadLocalRandom.current().nextLong(100000)} companyCode = {->\"company${i}\"} clientName = {->\"clientName${i++}\"} } 'com.talentbank.core.User' { def i = 55 username = {->\"email${i++}@mailinator.com\"} email = {->\"email${i}@mailinator.com\"} } 'com.talentbank.core.assessmentOrder.AssessmentOrder' { clientSetup = {->ClientSetup.build()} } } } ``` ## Different ways to build ```groovy def intviewModel = TestData.build(InterviewModel) def y = InterviewModel.build(source: Source.TBSIX) def z = build(InterviewModel, source: Source.TBSIX) ``` ",
    "url": "/TestingFrameworks/Spock",
    
    "relUrl": "/TestingFrameworks/Spock"
  },"194": {
    "doc": "SpringNotes",
    "title": "SpringNotes",
    "content": "# [REPO](https://github.com/14paxton/SpringNotes) --- ",
    "url": "/SpringNotes/",
    
    "relUrl": "/SpringNotes/"
  },"195": {
    "doc": "State",
    "title": "State",
    "content": "{: .text-delta } 1. TOC {:toc} *** # WebSockets WebSockets use a protocol that starts with ws:/ / (unencrypted) or wss:// (encrypted) instead of http:// or https:// ## Creating a WebSocket Connection > To establish a WebSocket connection in JavaScript, create a new WebSocket object, passing the WebSocket server URL as a parameter. ```javascript const socket = new WebSocket('ws://example.com/socket'); ``` ## WebSocket Events > WebSocket objects emit various events to handle different stages of the connection. - `open` : Triggered when the connection is successfully established ```javascript socket.addEventListener('open', (event) => { // Connection is open. }); socket.addEventListener('message', (event) => { const message = event.data; // Handle incoming message. }); ``` - `error`: Triggered when an error occurs ```javascript socket.addEventListener('error', (event) => { console.error('WebSocket error:', event); }); ``` - `close`: Fired when the connection is closed ```javascript socket.addEventListener('close', (event) => { if (event.wasClean) { console.log('Connection closed cleanly, code=${event.code), reason=$(event.reason}'); } else { console.error('Connection abruptly closed'); } }); ``` ## Sending Data > To send data to the server, use the send method of the WebSocket object. Data can be a string, Array Buffer, or Blob. ```javascript socket.send('Hello, server!'); ``` ## Closing the Connection > To close the WebSocket connection, call the close method on the WebSocket object. ```javascript socket.close(); ``` ",
    "url": "/JavaScript/State",
    
    "relUrl": "/JavaScript/State"
  },"196": {
    "doc": "Storage",
    "title": "Storage",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Storage ## API ### [.NET Cloud Storage V1 api](https://cloud.google.com/dotnet/docs/reference/Google.Cloud.Storage.V1/latest) #### [Client Library Install](https://cloud.google.com/storage/docs/reference/libraries#client-libraries-install-csharp) ",
    "url": "/GoogleNotes/Storage",
    
    "relUrl": "/GoogleNotes/Storage"
  },"197": {
    "doc": "String",
    "title": "String",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Formatting > add white space ```java public class White { string space = System.out.printf(\"%-15s\", str); } ``` > Use the StringUtils class, it also includes null check ```java StringUtils.leftPad(String str, int size); ``` ```java StringUtils.rightPad(String str, int size); ``` ## [Format Codes](https://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html#detail) > if you want to pad a string to a certain length with spaces, use something like this: ```java String padded = String.format(\"%-20s\", str); ``` In a formatter, \" % \" introduces a format sequence. The \" - \" means that the string will be left-justified (spaces will be added at the end of the string). The \" 20\" means the resulting string will be 20 characters long. The \" s\" is the character string format code, and ends the format sequence. ",
    "url": "/JavaNotes/String",
    
    "relUrl": "/JavaNotes/String"
  },"198": {
    "doc": "String",
    "title": "String",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Text Manipulation ## keep space ```jsx {` -Choose one or more of these options CLIENT_ADMIN / RESULT_VIEWER / INTERVIEWER / REQUESTOR / SCHEDULER / CLIENT_ADMIN / RESEARCH / COACH / ORDER_MANAGER / TADMIN `} ``` ## add formatting to component ```jsx const createThemeToolTip = (themeSummary, significance) => { return significance ? ( {\" \"} {themeSummary}. ) : (themeSummary); }; ``` ## dynamic internationalized component - [Internationalized text component](https://gist.github.com/14paxton/bd94c13e40f4faa41d65442d015b2a1f) ## Dynamic tooltip - [Complex UseCase](https://gist.github.com/14paxton/9c745874ec384add89c1908c73832594) - [Simple UseCase](https://github.com/14paxton/ToolTipTextComponent) ",
    "url": "/ReactNotes/String",
    
    "relUrl": "/ReactNotes/String"
  },"199": {
    "doc": "String",
    "title": "String",
    "content": "{: .text-delta } 1. TOC {:toc} *** crea@groovy.transform.ToString Used for classes to establish to string # Strings ‘’’ … ‘’’ three single quotes creates a multiline string obj Str -= “rainy” will remove rainy from the string Use stripIndent() or stripMargin() remove indents stripMargin(‘char’) indicates what lines, or | by default ```groovy \"\"\"Scheduled Interview Summary . |Company: @@company@@\"\"\".stripMargin() ``` ```groovy \"abc\".tr('abc', '321') ``` ## Replace characters in string Java char saved as int per ascii ```groovy Def x = 'a' (int) x - 96 = 1 ``` ## Splitting strings The split() method returns a string [] instance and the tokenize() method returns a list instance tokenize() ,which returns a list, will ignore empty string (when a delimiter appears twice in succession) where as split() keeps such string. ## Slice word[0..3] Will get letters at index 0 through 3 word[1,6,0] get letters index 1,6, and 0 ",
    "url": "/GroovyNotes/String",
    
    "relUrl": "/GroovyNotes/String"
  },"200": {
    "doc": "SystemDesign&Architecture",
    "title": "SystemDesign&Architecture",
    "content": "# Software Development Process ![SoftwareDevProcess.gif](../assets/images/SoftwareDevProcess.gif) # API Architectures ## Common Patterns ![apiArchitecture.gif](..%2Fassets%2Fimages%2FapiArchitecture.gif) ## SecureAPIDesign ![SecureAPIDesign.png](..%2Fassets%2Fimages%2FSecureAPIDesign.png) # System Design Template ![systemDesignTemplate.png](..%2Fassets%2Fimages%2FsystemDesignTemplate.png) # Microservice ![img.png](../assets/images/SystemDesignMicroservice.png) ",
    "url": "/SystemDesign&Architecture/",
    
    "relUrl": "/SystemDesign&Architecture/"
  },"201": {
    "doc": "Terminal",
    "title": "Terminal",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Resources - > [Windows Docs](https://learn.microsoft.com/en-us/windows/terminal/) # Install ## Winget - via powershell ```bash winget install --id Microsoft.WindowsTerminal -e ``` ## Download .zip package - > [Releases](https://github.com/microsoft/terminal/releases) ",
    "url": "/Windows_Notes/Terminal",
    
    "relUrl": "/Windows_Notes/Terminal"
  },"202": {
    "doc": "Terminal-Commands",
    "title": "Terminal-Commands",
    "content": "--- {: .text-delta } 1. TOC {:toc} --- --- # MYSQL ```shell mysql -u USERNAME -p ``` ```shell show databases; ``` ## SETTING TIMEZONES ### Get timezone ```bash SELECT @@global.time_zone, @@session.time_zone; ``` ### Get timestamp ```bash SELECT CURRENT_TIMESTAMP(); ``` ### Set timestamp utc ```bash SET @@session.time_zone = '+00:00'; ``` You can set in my.cnf ## other variables ```bash default_time_zone='+00:00' ``` > GET PATHS ```bash SHOW VARIABLES WHERE Variable_Name LIKE \"%dir\"; ``` ## Import ```bash LOAD DATA LOCAL INFILE 'C:/Groovy/englishData.csv' INTO TABLE original_data FIELDS TERMINATED BY ',' ENCLOSED BY '\"' LINES TERMINATED BY '\\r\\n' ``` ## Show db users ```bash SELECT user, authentication_string, plugin, host FROM mysql.user; ``` ",
    "url": "/SQLNotes/TerminalCommands",
    
    "relUrl": "/SQLNotes/TerminalCommands"
  },"203": {
    "doc": "Testing",
    "title": "Testing",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Config in test ## Modify config ```groovy Holders.grailsApplication.config.outlook.clientId = \"GUUNAR5\" ``` ## Get at application ```groovy grails.util.Holders.grailsApplication.domainClasses.find { it.shortName == 'User' } ``` ## Use db in memory to run tests ```groovy @shared Sql sql = Sql.newInstance(\"jdbc: h2 : mem: \", \"org.h2.Driver\") ``` ## Mocking service and then method call, setting dummy data for the return(put in test method) ```groovy controller.openweathermapService = Mock(OpenweathermapService) controller.openweathermapService.currentWeatherByGeoID(_) >> currentWeather ``` ## Mocking Service used in a service you are testing(put at beginning of the test class) ```groovy Closure doWithSpring() { { -> assessmentOrderService AssessmentOrderService } } AssessmentOrderService assessmentOrderService ``` ## Mocking Method in service you are testing ```groovy @Shared GroupCompareJoinUserGroupService groupCompareJoinUserGroupService setupSpec() { mockDomain GroupCompareJoinUserGroup } def \"some test\"() { service.groupCompareJoinUserGroupService = Mock(GroupCompareJoinUserGroupService) service.groupCompareJoinUserGroupService.fetchAssociatedAssessments(_ as GroupCompare, true) >> { groupCompare, removeRelationships -> groupCompareJoinUserGroupService.fetchAssociatedAssessments(groupCompare, true) } } ``` ## Mocking method in domain ```groovy [service / controller / domain].metaclass.'static'.[method] = { [arguments] -> [returnValue] } ``` ## Using Test Data from BuildTest plugin ### Snippet from spock test > Pluggin for using test data builder > [BuildTestData](http://plugins.grails.org/plugin/longwa/build-test-data) > import grails.buildtestdata.mixin.Build > use- implements BuildDomanTest\\ instead of DomainUnitTest \\ ```groovy @Build([Job, Tag, Type, Publisher]) class StatisticsServiceSpec extends Specification implements AutowiredTest, DataTest, BuildDataTest, ServiceUnitTest, GrailsWebUnitTest { def setupSpec() { mockDomain Job mockDomain Tag mockDomain Type mockDomain Publisher } def setup() { } def cleanup() { } void \"get top publishers when we don't have nothing in our system\"() { given: \"when we don't have any job published\" when: \"we get top publishers\" def publishers = service.getTopPublishers() then: \"we will see 0 publishers\" publishers.size() == 0 } void \"get top publishers when we have multiple jobs published by the same publisher\"() { given: \"when we have one 2 jobs published by the same publisher\" def tag = Tag.build() def type = Type.build() def publisher = Publisher.build() Job.build(publisher: publisher, type: type, tags: [tag]) Job.build(publisher: publisher, type: type, tags: [tag]) when: \"we get top publishers\" def publishers = service.getTopPublishers() def pair = publishers.find { key, value -> key.name.equals('http://publisher.name') } then: \"we will see 2 publishers\" publishers.size() == 1 pair?.value == 2 } } ``` - config file test/resources/TestDataConfig ```groovy import com.talentbank.core.ClientSetup import java.util.concurrent.ThreadLocalRandom //config file for test data plugin testDataConfig { sampleData { unitAdditionalBuild = ['com.talentbank.core.assessmentOrder.AssessmentOrder': [com.talentbank.core.ClientSetup]] 'com.talentbank.core.ClientSetup' { //work around for unique constraints def i = 55 clientId = { -> ThreadLocalRandom.current().nextLong(100000) } companyCode = { -> \"company${i}\" } clientName = { -> \"clientName${i++}\" } } 'com.talentbank.core.User' { def i = 55 username = { -> \"email${i++}@mailinator.com\" } email = { -> \"email${i}@mailinator.com\" } } 'com.talentbank.core.assessmentOrder.AssessmentOrder' { clientSetup = { -> ClientSetup.build() } } } } ``` #### Different ways to build ```groovy def intviewModel = TestData.build(InterviewModel) def y = InterviewModel.build(source: Source.TBSIX) def z = build(InterviewModel, source: Source.TBSIX) ``` # Configurations ## Checking validity of constraints ```groovy !newScheduledInterview2.validate(['scheduledBy', 'scheduledDate']) !newScheduledInterview2.save(flush: true) newScheduledInterview2.errors['scheduledDate']?.code == 'unique' ``` ## check if method was called for another service ```groovy def called = false service.notifierService = Mock(NotifierService) service.notifierService.sendPostMarkEmail(_ as PostMarkEmail, _) >> { it -> called = true } ``` ## check if method was called for same service ```groovy service.metaClass.sendReminderEmail = { assessmentOrderId, templateId, sender, newTemplateBody, jobId -> calls++ } ``` ## create an exception ```groovy //create expando def testDelete = new Expando() // add exception to method call def exception = { new Exception(\"TEST\") } testDelete.delete = { throw exception } // add class as return for a method service.metaClass.method_to_throw_exception = { testDelete } //example in CalenderServiceSpec.groovy / “test delete exception” //or service.metaClass.yourMethod >> { throw exception } ``` ## catch exception ```groovy def response = thrown(GraphServiceException) ``` ## modify config during/for test ```groovy Holders.grailsApplication.config.outlook.clientId = \"GUUNAR5\" ``` ## create a custom manager for a test ```groovy def managerMap = [:] RoleGroup.findAll().each { def myUser = User.build(clientSetupId: 1, email: \"${it.name}@mailinator.com\", username: \"${it.name}@mailinator.com\") UserRoleGroup.build(user: myUser, roleGroup: it) def tokenAuthentication = new TokenAuthentication(decodedJwt(myUser), myUser) tokenAuthentication.details = myUser authMap[(it.name)] = tokenAuthentication managerMap[(myUser.id)] = it.name ==~ /testManager.*/ ? [1, 2, 3] : [] } service.userService = Mock(UserService) service.userService.fetchDirectReportIds(_) >> { it -> managerMap.get(it[0]) } ``` ## Mocking hibernate used to test methods using where queriers / detached criteria / criteria builder ```groovy @Shared InterviewModelService interviewModelService @Shared HibernateDatastore hibernateDatastore @Shared PlatformTransactionManager transactionManager Map configuration = [ 'hibernate.hbm2ddl.auto' : 'create-drop', 'dataSource.url' : 'jdbc:h2:mem:myDB', 'hibernate.cache.region.factory_class': 'org.hibernate.cache.ehcache.EhCacheRegionFactory' ] hibernateDatastore = new HibernateDatastore(configuration, CatalogDetail) transactionManager = hibernateDatastore.getTransactionManager() catalogDetailService = hibernateDatastore.getService(CatalogDetailService) //Set tests to rollback @Rollback void \"test criteria builder for getting interview models should return all\"() { //test } ``` ## Mock return value for service method used in the service you are testing ```groovy service.springSecurityService = [authentication: [details: currentUser]] ``` ## Mock a static method call from a domain ```groovy ClientSetup.metaClass.static.fetchSecurityGroupLabelsByClientSetupId = { Long id, String en -> [secGroupNameLabel: 'secGroupNameLabel', secGroupCodeLabel: 'secGroupCodeLabel'] } ``` # Test Snippets ## Test Rest ### Grails3 [Controller](https://gist.github.com/14paxton/0d64ab846b4691d8d6f1ccd5ccc63b58) ### Grails4 #### Ex. Integrations test for controller ```groovy package musicandcars import grails.testing.mixin.integration.Integration import grails.testing.spock.OnceBefore import io.micronaut.core.type.Argument import io.micronaut.http.HttpRequest import io.micronaut.http.HttpResponse import io.micronaut.http.HttpStatus import io.micronaut.http.MediaType import io.micronaut.http.client.HttpClient import spock.lang.Shared import spock.lang.Specification import spock.lang.Stepwise @Integration @Stepwise class CarFunctionalSpec extends Specification { @Shared HttpClient client @OnceBefore void init() { String baseUrl = \"http://localhost:$serverPort\" this.client = HttpClient.create(baseUrl.toURL()) } void \"test that no cars exist\"() { when: HttpResponse> resp = client.toBlocking().exchange(HttpRequest.GET(\"/automobiles\"), Argument.of(List, Map)) then: resp.status == HttpStatus.OK resp.body().size() == 0 resp.contentType.get().extension == MediaType.EXTENSION_JSON } } ``` ",
    "url": "/PersonalGrailsNotes/Testing",
    
    "relUrl": "/PersonalGrailsNotes/Testing"
  },"204": {
    "doc": "Testing",
    "title": "Testing",
    "content": "{: .text-delta } 1. TOC {:toc} --- # [Spock](https://micronaut-projects.github.io/micronaut-test/latest/guide/index.html#spock) ## [Example Microstream test suite ](https://github.com/14paxton/SpockMicronautMicrostream/tree/main/test/groovy/com/ssi/integration) --- # JUnit --- ## HTTPS --- Basic HTTPS test for Controller ```java package example.micronaut; import com.micronaut.controller.command.UserCommand; import io.micronaut.http.HttpRequest; import io.micronaut.http.HttpStatus; import io.micronaut.http.client.HttpClient; import io.micronaut.http.client.annotation.Client; import io.micronaut.http.client.exceptions.HttpClientResponseException; import io.micronaut.test.extensions.junit5.annotation.MicronautTest; import jakarta.inject.Inject; import org.junit.jupiter.api.Test; import static org.junit.jupiter.api.Assertions.assertEquals; import static org.junit.jupiter.api.Assertions.assertThrows; @MicronautTest // class UserValidationControllerTest { @Inject @Client(\"/\") HttpClient httpClient; // @Test void fruitIsValidated() { HttpClientResponseException exception = assertThrows( HttpClientResponseException.class, () -> httpClient.toBlocking().exchange(HttpRequest.POST(\"/user\", new UserCommand(\"\", \"\", \"\"))) ); assertEquals(HttpStatus.BAD_REQUEST, exception.getStatus()); } } ``` --- ## AWS --- ### Lambda --- - > #### Testing FunctionRequestHandler JUnit Test for Lambda Function Request Handling ```java package example.micronaut; import com.amazonaws.services.lambda.runtime.events.APIGatewayProxyRequestEvent; import com.amazonaws.services.lambda.runtime.events.APIGatewayProxyResponseEvent; import jakarta.inject.Inject; import org.junit.jupiter.api.AfterAll; import org.junit.jupiter.api.Assertions; import org.junit.jupiter.api.BeforeAll; import org.junit.jupiter.api.Test; import java.util.Map; public class FunctionRequestHandlerTest { @Inject private static FunctionRequestHandler handler; @BeforeAll public static void setupServer() { handler = new FunctionRequestHandler(); } @AfterAll public static void stopServer() { if (handler != null) { handler.getApplicationContext().close(); } } @Test public void testHandler() { Map immutableMap = Map.of(\"email\", \"z3r0c00lcrashoverride@gmail.com\"); APIGatewayProxyRequestEvent request = new APIGatewayProxyRequestEvent(); request.setHttpMethod(\"GET\"); request.setPath(\"/\"); request.setQueryStringParameters(immutableMap); APIGatewayProxyResponseEvent response = handler.execute(request); Assertions.assertEquals(202, response.getStatusCode().intValue()); } @Test public void testBlankInput() { APIGatewayProxyRequestEvent request = new APIGatewayProxyRequestEvent(); request.setHttpMethod(\"GET\"); request.setPath(\"/\"); APIGatewayProxyResponseEvent response = handler.execute(request); Assertions.assertEquals(202, response.getStatusCode().intValue()); } } ``` - > #### Testing a controller JUnit Test For Lambda Controller ```java package example.micronaut; import com.amazonaws.services.lambda.runtime.events.APIGatewayProxyRequestEvent; import com.amazonaws.services.lambda.runtime.events.APIGatewayProxyResponseEvent; import io.micronaut.core.type.Argument; import io.micronaut.function.aws.proxy.MockLambdaContext; import io.micronaut.function.aws.proxy.payload1.ApiGatewayProxyRequestEventFunction; import io.micronaut.http.HttpMethod; import io.micronaut.http.HttpStatus; import io.micronaut.serde.ObjectMapper; import io.micronaut.test.extensions.junit5.annotation.MicronautTest; import jakarta.inject.Inject; import org.junit.jupiter.api.AfterAll; import org.junit.jupiter.api.BeforeAll; import org.junit.jupiter.api.Test; import java.io.IOException; import java.util.Collections; import java.util.List; import java.util.Map; import static org.junit.jupiter.api.Assertions.assertEquals; /** * Integration tests for the HomeController class, using Micronaut framework and AWS Lambda. * Tests various endpoints and methods to ensure correct functionality. */ @MicronautTest class HomeControllerTest { private static ApiGatewayProxyRequestEventFunction handler; @Inject ObjectMapper objectMapper; @BeforeAll static void setupSpec() { handler = new ApiGatewayProxyRequestEventFunction(); } @AfterAll static void cleanupSpec() { handler.getApplicationContext().close(); } @Test void testMultiSend() throws IOException { APIGatewayProxyRequestEvent request = new APIGatewayProxyRequestEvent(); request.setPath(\"/test\"); request.setHttpMethod(HttpMethod.GET.toString()); request.setBody(\"{}\"); APIGatewayProxyResponseEvent response = handler.handleRequest(request, new MockLambdaContext()); Map responseMap = objectMapper.readValue(response.getBody(), Argument.mapOf(String.class, Object.class)); Object responseObject = responseMap.get(\"body\"); Map sendgridMap = objectMapper.readValue(responseObject.toString(), Argument.mapOf(String.class, Object.class)); Map sentEmail = (Map) sendgridMap.get(\"sentEmail\"); List toList = (List) sentEmail.get(\"to\"); List bccList = (List) sentEmail.get(\"bcc\"); assertEquals(HttpStatus.OK.getCode(), response.getStatusCode()); assertEquals(1, toList.size()); assertEquals(2, bccList.size()); } @Test void testSingleSendWithBody() throws IOException { APIGatewayProxyRequestEvent request = new APIGatewayProxyRequestEvent(); Map immutableMap = Collections.singletonMap(\"email\", \"email@email.com\"); request.setPath(\"/test\"); request.setBody(objectMapper.writeValueAsString(immutableMap)); request.setHttpMethod(HttpMethod.GET.toString()); APIGatewayProxyResponseEvent response = handler.handleRequest(request, new MockLambdaContext()); assertEquals(HttpStatus.OK.getCode(), response.getStatusCode()); } @Test void testSingleSendWithPathParam() { APIGatewayProxyRequestEvent request = new APIGatewayProxyRequestEvent(); request.setPath(\"/test/email@email.com\"); request.setHttpMethod(HttpMethod.GET.toString()); APIGatewayProxyResponseEvent response = handler.handleRequest(request, new MockLambdaContext()); assertEquals(HttpStatus.OK.getCode(), response.getStatusCode()); } @Test void testHerpesEmail() { APIGatewayProxyRequestEvent request = new APIGatewayProxyRequestEvent(); request.setPath(\"/controller/action\"); request.setHttpMethod(HttpMethod.GET.toString()); APIGatewayProxyResponseEvent response = handler.handleRequest(request, new MockLambdaContext()); assertEquals(HttpStatus.OK.getCode(), response.getStatusCode()); } } ``` --- # Spock --- ## Micronaut Controller Micronaut Integration Test Controller ````groovy import com.ssi.Enums.AssessmentReportUrlType import com.ssi.request.WSConfigCommand import com.ssi.result.ClientResultCommand import io.micronaut.context.ApplicationContext import io.micronaut.http.HttpResponse import io.micronaut.http.HttpStatus import io.micronaut.runtime.server.EmbeddedServer import io.micronaut.test.extensions.spock.annotation.MicronautTest import spock.lang.Shared import java.util.stream.Collectors import java.util.stream.Stream import java.util.stream.StreamSupport @MicronautTest(environments = [\"test\"], packages = \"com.ssi.*\", propertySources = \"classpath:application-test.yml\") class IntegrationControllerSpec extends BaseTestSpec { @Shared WSConfigCommand wsCMD = new WSConfigCommand(null, null, null, null, null, null, null, null, null, null, null, null, null, \"test me\") @Shared ClientResultCommand resultCMD = new ClientResultCommand(null, null, null, null, AssessmentReportUrlType.REQ_CORE_AUTH, null, null, true, null, true, null, null, \"test me result\") @Shared Map> clientEntityMap = [\"GNDR_MAP\" : new LinkedList([new ClientEntityDetails(\"gender stuff\", \"crankin\", \"DECLINE\")]), \"ETHNIC_MAP\": new LinkedList([new ClientEntityDetails(\"phone stuff\", \"crankin\", \"OTHER\")])] as Map> void \"test controller integration actions\"() { given: IntegrationCommand intCMD = new IntegrationCommand(\"intCMD\", null, null, null, \"strong_password\", wsCMD, resultCMD, clientEntityMap) String company2Name = \"company2Name\" String company2Password = \"Yellow_and_curved\" Map properties = new HashMap(getProperties()) EmbeddedServer embeddedServer = ApplicationContext.run(EmbeddedServer, properties) IntegrationClient integrationClient = embeddedServer.getApplicationContext().getBean(IntegrationClient) when: IntegrationCommand newIntCMD = new IntegrationCommand(company2Name, null, null, \"company_2\", null, wsCMD, resultCMD, clientEntityMap) HttpResponse response = integrationClient.create(newIntCMD) then: HttpStatus.CREATED == response.getStatus() response.getBody().isPresent() when: Integration company2 = response.getBody().get() List integrationList = integrationList(integrationClient) then: 1 == integrationList.size() company2.getId() == integrationList.get(0).getId() integrationList.get(0).getTbeCompanyCode() when: Optional company2Optional = integrationClient.update(intCMD) then: !company2Optional.isPresent() when: response = integrationClient.create(intCMD) then: HttpStatus.CREATED == response.getStatus() integrationStream(integrationClient) .anyMatch(f -> \"company2Name\" == f.getCompanyCode()) when: company2Optional = integrationClient.update(new IntegrationCommand(company2Name, null, null, null, company2Password, wsCMD, resultCMD, clientEntityMap)) then: company2Optional.isPresent() Stream.of(\"Yellow_and_curved\", \"strong_password\").collect(Collectors.toSet()) == integrationStream(integrationClient) .map(Integration::getTbexPassword) .collect(Collectors.toSet()) when: embeddedServer.close() embeddedServer = ApplicationContext.run(EmbeddedServer, properties) integrationClient = embeddedServer.getApplicationContext().getBean(IntegrationClient) then: 2 == numberOfIntegrations(integrationClient) when: integrationClient.delete(intCMD) integrationClient.delete(new IntegrationCommand(company2Name, company2Password, null, null, null, wsCMD, resultCMD, clientEntityMap)) embeddedServer.close() embeddedServer = ApplicationContext.run(EmbeddedServer, properties) integrationClient = embeddedServer.getApplicationContext().getBean(IntegrationClient) then: 0 == numberOfIntegrations(integrationClient) cleanup: embeddedServer.close() } private int numberOfIntegrations(IntegrationClient integrationClient) { return integrationList(integrationClient).size() } private List integrationList(IntegrationClient integrationClient) { return integrationStream(integrationClient) .collect(Collectors.toList()) } private Stream integrationStream(IntegrationClient integrationClient) { Iterable integrations = integrationClient.list() return StreamSupport.stream(integrations.spliterator(), false) } } ```` ",
    "url": "/Micronotes/Testing",
    
    "relUrl": "/Micronotes/Testing"
  },"205": {
    "doc": "TestingFrameworks",
    "title": "TestingFrameworks",
    "content": "# [REPO](https://github.com/14paxton/TestingFrameworks) ",
    "url": "/TestingFrameworks/",
    
    "relUrl": "/TestingFrameworks/"
  },"206": {
    "doc": "Text_Manipulation",
    "title": "Text_Manipulation",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Server Side ## GRAILS TYPE Converters > Convert and check type in controller > [TypeCheck](http://docs.grails.org/latest/guide/theWebLayer.html#typeConverters) ```groovy param.short(var) param.byte(var) param.long(var) param.double(var) param.boolean(var) ``` ## JSON ### JSON Parser Example > This is your JSON object that should be passed in to the method ```groovy def json = '''{ \"markings\": { \"headMarkings\": \"Brindle\", \"leftForeMarkings\": \"\", \"rightForeMarkings\": \"sock\", \"leftHindMarkings\": \"sock\", \"rightHindMarkings\": \"\", \"otherMarkings\": \"\" } }''' def jsonObj = grails.converters.JSON.parse(json) ``` ```groovy print jsonObj //optput [markings:[rightForeMarkings:sock, otherMarkings:, leftForeMarkings:, leftHindMarkings:sock, rightHindMarkings:, headMarkings:Brindle]] def jsonStr = jsonObj.toString() //This is the string which should be persisted in db assert jsonStr == '{\"markings\":{\"rightForeMarkings\":\"sock\",\"otherMarkings\":\"\",\"leftForeMarkings\":\"\",\"leftHindMarkings\":\"sock\",\"rightHindMarkings\":\"\",\"headMarkings\":\"Brindle\"}}' //Get back json obj from json str def getBackJsobObj = grails.converters.JSON.parse(jsonStr) assert getBackJsobObj.markings.leftHindMarkings == 'sock' ``` # Frontend manipulation ## Using messageSource [i18n Docs](https://docs.grails.org/4.0.1/guide/i18n.html) ```groovy messageSource.getMessage('batch.user.registration.confirmation.message', [jobId as String].toArray(), LocaleContextHolder.locale) ``` ## Render grails tags to return in controller ```groovy render g.select(from: languages, optionKey: \"key\", optionValue: \"value\", name: \"languageChoice\", class: \"form-control\", value: assessmentLanguage) ``` ## save grails tag in variable and render on page ```groovy \"${yourTag.encodeAsRaw()}\" ``` > or ```groovy \"${raw(user.description)}\" ``` ## JSON ### Javascript manipulation ```html catalogsByType = ${resultCatalogs.catalogsByType as grails.converters.JSON}; ``` ",
    "url": "/PersonalGrailsNotes/Text_Manipulation",
    
    "relUrl": "/PersonalGrailsNotes/Text_Manipulation"
  },"207": {
    "doc": "Threading",
    "title": "Threading",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Create Thread ```cs Thread newThread = new Thread(MyThreadMethod); newThread.Start(); ``` # Thread Pooling ```cs ThreadPool.QueueUserWorkItem(MyThreadMethod); ``` # Synchronization ```cs private static object LockObject ncw object(); lock (lockobject) { // Ihread-safe code } ``` # Async and Await ```csharp public async Task MyAsyncMethod() { // Asynchronous code return await SomeAsyncOperation(); } ``` # Parallel ```csharp Parallel. For(0, 10, 1 MyParallel Method(i)); ``` # Thread Safety Limited Resource Pool ```csharp // Creain Semaphore whith allow 5 sreads to enter sy private static Semaphore semaphore = new Semaphore(5, 5); ThreadPool.QueueUserWorkItem(_ => { semaphore.WaitOne(); //Critical section: Only five thruads can chocote this block simultaneously semaphore.Release(); } ``` ",
    "url": "/DotNetNotes/CSharp/Threading",
    
    "relUrl": "/DotNetNotes/CSharp/Threading"
  },"208": {
    "doc": "Threads",
    "title": "Threads",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Platform Thread ```java Thread platformThread = Thread.ofPlatform().start(() -> { // Code to run in the platform thread }); ``` # Virtual Thread ```java Thread virtualThread = Thread.ofVirtual().start(() -> { // Code to run in the virtual thread }); ``` # Structured Concurrency ```java Thread virtualThread = Thread.ofVirtual().start(() -> { // Code to run in the virtual thread }); ``` # Thread Builder ```java Thread thread = Thread.ofPlatform() .name(\"MyCustom Thread\") .daemon(true) .start(() -> { // Code to run in the thread }); ``` # Waiting for threads ```java // Create virtual threads (or use ThreadcofPlatform() for platform threads) Thread thread1 = Thread.ofVirtual().start(() -> { //Task 1 code }); Thread thread2 = Thread.ofVirtual().start(() -> { //Task 2 code }); ``` ```java // Wait for both threads to finish using join() try{ thread1.join(); thread2. join(); }catch( Exception e){ println(\"Thread Interrupted\"); } ``` ```java //Proceed with code that depends on both threads being finished println(\"Both threads have finished.\"); ``` # Advanced features • Thread.onSpinWait: Hints the JVM to use a spin-wait loop for active waiting. • Virtual Thread.interrupted: Checks for virtual thread interruption. ## Important Considerations • Virtual threads are experimental in Java 21. • Choose thread types based on your application's needs and resource constraints. • Handle thread synchronization and coordination carefully to prevent race conditions and deadlocks. • Consider using structured concurrency for clearer and more manageable code. ",
    "url": "/JavaNotes/Threads",
    
    "relUrl": "/JavaNotes/Threads"
  },"209": {
    "doc": "TidBits",
    "title": "TidBits",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Spring find annotated classes ============================= How to find annotated classes using**Spring Framework**and read metadata from them? Sometimes you may want to attach metadata to your classes using custom annotations. Here’s an example how you can leverage**Spring**’s classpath scanning mechanism to do that. ## [The Spring Bean problem](https://farenda.com/spring-find-annotated-classes/#the-spring-bean-problem) If you use Spring annotations like**@Component**,**@Repository**or**@Service**, then Spring will find such classes, but will make them Spring beans. ## [Classpath Scanner customization](https://farenda.com/spring-find-annotated-classes/#classpath-scanner-customization) Good news is that Spring classpath scanning mechanism is configurable and available in any Spring application. To use custom annotations we have to create an instance of ClassPathScanningCandidateComponentProvider and set appropriate filter - here it is**AnnotationTypeFilter**. It returns* *BeanDefinitions**that contains names of found class from which we can get detailed information. The following example will clarify that. ## [Own annotations](https://farenda.com/spring-find-annotated-classes/#own-annotations) We create our custom annotation that allows us to attach some metatdata: ```java import java.lang.annotation.ElementType; import java.lang.annotation.Retention; import java.lang.annotation.RetentionPolicy; import java.lang.annotation.Target; // Make the annotation available at runtime: @Retention(RetentionPolicy.RUNTIME) // Allow to use only on types: @Target(ElementType.TYPE) public @interface Findable { /** * User friendly name of annotated class. */ String name(); } ``` --- ## Adding metadata to own classes ### Sample classes annotated with the custom annotation: ```java @Findable(name = \"Find me\") public class FirstAnnotatedClass { } ``` ```java @Findable(name = \"Find me too\") public class SecondAnnotatedClass { } ``` ### Spring dependency The classpath scanner is provided by spring-context project. Here’s the relevant Maven dependency: ```xml org.springframework spring-context 4.2.0.RELEASE ``` ### The Scanner The Java code below is using ClassPathScanningCandidateComponentProvider to scan classes in com.farenda.java.lang package. ```java import org.springframework.beans.factory.config.BeanDefinition; import org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider; import org.springframework.core.type.filter.AnnotationTypeFilter; public class SpringClassScanner { public static void main(String[] args) throws Exception { System.out.println(\"Finding annotated classes using Spring:\"); new SpringClassScanner().findAnnotatedClasses(\"com.farenda.java.lang\"); } public void findAnnotatedClasses(String scanPackage) { ClassPathScanningCandidateComponentProvider provider = createComponentScanner(); for (BeanDefinition beanDef : provider.findCandidateComponents(scanPackage)) { printMetadata(beanDef); } } private ClassPathScanningCandidateComponentProvider createComponentScanner() { // Don't pull default filters (@Component, etc.): ClassPathScanningCandidateComponentProvider provider = new ClassPathScanningCandidateComponentProvider(false); provider.addIncludeFilter(new AnnotationTypeFilter(Findable.class)); return provider; } private void printMetadata(BeanDefinition beanDef) { try { Class cl = Class.forName(beanDef.getBeanClassName()); Findable findable = cl.getAnnotation(Findable.class); System.out.printf(\"Found class: %s, with meta name: %s%n\", cl.getSimpleName(), findable.name()); } catch (Exception e) { System.err.println(\"Got exception: \" + e.getMessage()); } } } ``` The code is straightforward. The hardest thing is to type and read very long names of Spring classes. ;-) And here’s the output of running the code: ``` Finding annotated classes using Spring: Found class: SecondAnnotatedClass, with meta name: Find me too Found class: FirstAnnotatedClass, with meta name: Find me ``` > Summary > This sort of scanning is very good fit for applications that already use Spring Framework. > However, in the future, we’ll see how to solve the same problem, but without Spring. --- # How to exclude classes/packages from Component Scan in Spring Framework > The task is a bit tricky, especially when regexp is involved. Say that we've got the following two classes ```java import org.springframework.stereotype.Service; @Service public class ExcludedService { public ExcludedService() { System.out.println(\"Instantiating \" + getClass().getSimpleName()); } } ``` ```java import org.springframework.stereotype.Service; @Service public class IncludedService { public IncludedService() { System.out.println(\"Instantiating \" + getClass().getSimpleName()); } } ``` We want to scan the whole package and include every component except ExcludedService. In our case, included beans should contain only IncludedService. ComponentScan exclude—using annotations To exclude some beans we can use excludeFilters on the @ComponentScan annotation like this: ```java import org.springframework.boot.SpringApplication; import org.springframework.boot.autoconfigure.EnableAutoConfiguration; import org.springframework.context.ApplicationContext; import org.springframework.context.annotation.*; import org.springframework.context.annotation.ComponentScan.Filter; import java.util.Arrays; @ComponentScan(basePackages = \"com.farenda.java.spring.excludescan\", excludeFilters = @Filter(type = FilterType.REGEX, pattern = \"com\\\\.farenda\\\\.java\\\\.spring\\\\.excludescan\\\\.Excluded.*\")) @EnableAutoConfiguration public class ExcludingFromComponentScanExample { public static void main(String[] args) throws Exception { ApplicationContext context = SpringApplication.run(ExcludingFromComponentScanExample.class, args); String[] beans = context.getBeanDefinitionNames(); // sort names only to make output more readable: Arrays.sort(beans); System.out.println(\"Defined beans: \"); for (String bean : beans) { System.out.println(bean); } } } ``` We apply REGEX FilterType that allows us nicely exclude single classes and whole packages. When we run the application you can see that only includedService is among beans in ApplicationContext built > from ComponentScan: ```shell :: Spring Boot :: (v1.2.3.RELEASE) 2015-12-20 13:08:37.601 INFO 4077 --- [ main] .f.j.s.ExcludingFromComponentScanExample 2015-12-20 13:08:37.660 INFO 4077 --- [ main] s.c.a.AnnotationConfigApplicationContext Instantiating IncludedService ... 2015-12-20 13:08:39.292 INFO 4077 --- [ main] .f.j.s.ExcludingFromComponentScanExample : Started ExcludingFromComponentScanExample in 2.204 seconds (JVM running for 2.841) Defined beans: excludingFromComponentScanExample includedService mbeanExporter mbeanServer objectNamingStrategy org.springframework.boot.autoconfigure.AutoConfigurationPackages org.springframework.boot.autoconfigure.PropertyPlaceholderAutoConfiguration org.springframework.boot.autoconfigure.condition.BeanTypeRegistry org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor org.springframework.context.annotation.internalAutowiredAnnotationProcessor org.springframework.context.annotation.internalCommonAnnotationProcessor org.springframework.context.annotation.internalConfigurationAnnotationProcessor org.springframework.context.annotation.internalRequiredAnnotationProcessor propertySourcesPlaceholderConfigurer 2015-12-20 13:08:39.295 INFO 4077 --- [ Thread-1] s.c.a.AnnotationConfigApplicationContext : Closing org.springframework.context.annotation.AnnotationConfigApplicationContext@7a187f14: startup date [Sun Dec 20 13:08:37 CET 2015]; root of context hierarchy 2015-12-20 13:08:39.298 INFO 4077 --- [ Thread-1] o.s.j.e.a.AnnotationMBeanExporter : Unregistering JMX-exposed beans on shutdown Process finished with exit code 0 The same filtering mechanism can be used with includeFilters attribute, to select classes/packages that should be included in Spring ApplicationContext. ComponentScan exclude - XML version If you happen to still work with XML Spring Configuration, then the same thing can be done in the following way: ``` --- # Spring Constructor Injection ```java public interface BookRepository { String titleById(int id); } ``` # Spring Constructor Injection This is one of the simplest and cleanest types of Dependency Injection in the Spring Framework. In this post we show how to use it with help of Spring annotations. Spring bean to inject as dependency Let’s specify an interface for dependency: ```java public interface BookRepository { String titleById(int id); } ``` And the actual Spring Bean implementation that will be injected: ```java import org.springframework.stereotype.Repository; import java.util.HashMap; import java.util.Map; @Repository public class InMemoryBookRepository implements BookRepository { // It's our local database ;-) private final Map books = new HashMap(); { books.put(1, \"Effective Java, 2nd edition\"); books.put(2, \"Java Concurrency in Practice\"); books.put(3, \"Spring in Action\"); } @Override public String titleById(int id) { return books.get(id); } } ``` # Spring component with dependency injected by constructor Here we define another Spring Bean, but this time we are going to inject BookRepository through constructor, using `@Autowired` annotation: ```java import org.springframework.beans.factory.annotation.Autowired; import org.springframework.stereotype.Component; @Component public class Library { private final BookRepository bookRepository; @Autowired public Library(BookRepository bookRepository) { this.bookRepository = bookRepository; } public String findBook(int id) { return bookRepository.titleById(id); } } ``` Spring resolves dependencies using argument’s type. If it finds a bean matching the type, then the bean is instantiated and injected. Else exception is thrown. Example App using Spring Boot Here’s the simplest Spring Boot application to run the above code: ```java import org.springframework.boot.SpringApplication; import org.springframework.context.ApplicationContext; import org.springframework.context.annotation.ComponentScan; import org.springframework.context.annotation.Configuration; @Configuration @ComponentScan // scan this package for Spring beans public class ConstructorInjection { public static void main(String[] args) { ApplicationContext context = SpringApplication.run(ConstructorInjection.class, args); // Get bean from the Spring Application Context: Library library = context.getBean(Library.class); System.out.println(\"Title 1: \" + library.findBook(1)); System.out.println(\"Title 2: \" + library.findBook(2)); } } ``` The above code produces the following output: ```shell Title 1: Effective Java, 2nd edition Title 2: Java Concurrency in Practice ``` --- # Spring Field Injection This is the form of Dependency Injection that requires almost no boilerplate code, contrary to setter or constructor injections. we’ll specify an interface for the dependency: ```java public interface BookRepository { String titleById(int id); } ``` And the actual Spring Bean implementation that will be injected: ```java import org.springframework.stereotype.Repository; import java.util.HashMap; import java.util.Map; @Repository public class InMemoryBookRepository implements BookRepository { // It's our local database ;-) private final Map books = new HashMap(); { books.put(1, \"Effective Java, 3rd edition\"); books.put(2, \"Java Concurrency in Practice\"); books.put(3, \"Spring in Action\"); } @Override public String titleById(int id) { return books.get(id); } } ``` # Spring component with dependency injected using field injection Here we define another Spring Bean, but we are going to inject /BookRepository/ using field injection. To do that we have to annotate appropriate fields using @Autowired (or @Inject or @Resource) annotation: ```java import org.springframework.beans.factory.annotation.Autowired; import org.springframework.stereotype.Component; @Component public class Library { @Autowired private BookRepository bookRepository; public String findBook(int id) { return bookRepository.titleById(id); } } ``` It works without any setter, because underneath Spring is using reflection to inject dependencies. # Constructor or field injection Although [constructor injection](https://farenda.com/spring/spring-constructor-injection) allows to create beans as immutable objects (fields can be marked using final modifier) and makes dependencies explicit it requires to write some boilerplate code. Because of that, in practice, field injection is used. Example App using Spring Boot Here’s the simplest Spring Boot application to run the above code: ```java import org.springframework.boot.SpringApplication; import org.springframework.context.ApplicationContext; import org.springframework.context.annotation.ComponentScan; import org.springframework.context.annotation.Configuration; @Configuration @ComponentScan public class FieldInjection { public static void main(String[] args) { ApplicationContext context = SpringApplication.run(FieldInjection.class, args); Library library = context.getBean(Library.class); System.out.println(\"Title 1: \" + library.findBook(1)); System.out.println(\"Title 2: \" + library.findBook(2)); } } ``` The above code produces the following output: ``` Title 1: Effective Java, 3rd edition Title 2: Java Concurrency in Practice ``` --- # Circular Reference - BeanCurrentlyInCreationException BeanCurrentlyInCreationException is thrown by Spring Framework when it meets circular reference while setting up application context. Here we show what is it and how to fix it! Beans with circular reference Bean A with constructor injected Bean B Library is a Spring Bean that is using another bean - BookRepository - as a dependency [injected through constructor](https://farenda.com/spring/spring-constructor-injection): ```java import org.springframework.beans.factory.annotation.Autowired; import org.springframework.stereotype.Component; @Component public class Library { private final BookRepository bookRepository; @Autowired public Library(BookRepository bookRepository) { this.bookRepository = bookRepository; } public String findBook(int id) { return bookRepository.titleById(id); } public String name() { return \"Public library #1\"; } } ``` Bean B with constructor injected Bean A - circular reference BookRepository, for some reason, want’s to have Library injected, also through constructor: ```java import org.springframework.beans.factory.annotation.Autowired; import org.springframework.stereotype.Repository; import java.util.HashMap; import java.util.Map; @Repository public class BookRepository { private final Library library; @Autowired public BookRepository(Library library) { this.library = library; } // It's our local database ;-) private final Map books = new HashMap(); { books.put(1, \"Effective Java, 2nd edition\"); books.put(2, \"Java Concurrency in Practice\"); books.put(3, \"Spring in Action\"); } public String titleById(int id) { System.out.println(\"In a library: \" + library.name()); return books.get(id); } } ``` The application runner The simplest [Spring Boot](http://farenda.com/java/spring-boot-hello-world) app to run the code: ```java import org.springframework.boot.SpringApplication; import org.springframework.context.ApplicationContext; import org.springframework.context.annotation.ComponentScan; import org.springframework.context.annotation.Configuration; @Configuration @ComponentScan public class InjectionConflict { public static void main(String[] args) { ApplicationContext context = SpringApplication.run(InjectionConflict.class, args); Library library = context.getBean(Library.class); System.out.println(\"Title 2: \" + library.findBook(2)); } } ``` When we run the above code the application will fail during startup with UnsatisfiedDependencyException exception, which is caused by BeanCurrentlyInCreationException: ```shell 2016-08-09 23:29:01.530 INFO 11796 --- [ main] c.f.s.t.i.conflict.InjectionConflict : Starting InjectionConflict on namek with PID 11796 ( /home/przemek/Dropbox/projekty/farenda/java/spring-tutorial/build/classes/main started by przemek in /home/przemek/Dropbox/projekty/farenda/java/spring-tutorial) 2016-08-09 23:29:01.535 INFO 11796 --- [ main] c.f.s.t.i.conflict.InjectionConflict : No active profile set, falling back to default profiles: default 2016-08-09 23:29:01.612 INFO 11796 --- [ main] s.c.a.AnnotationConfigApplicationContext : Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@2eda0940: startup date [Tue Aug 09 23:29:01 CEST 2016]; root of context hierarchy 2016-08-09 23:29:02.147 WARN 11796 --- [ main] s.c.a.AnnotationConfigApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'bookRepository' defined in file [/home/przemek/Dropbox/projekty/farenda/java/spring-tutorial/build/classes/main/com/farenda/spring/tutorial/injection/conflict/BookRepository.class]: Unsatisfied dependency expressed through constructor argument with index 0 of type [com.farenda.spring.tutorial.injection.conflict.Library]: Error creating bean with name 'library' defined in file [/home/przemek/Dropbox/projekty/farenda/java/spring-tutorial/build/classes/main/com/farenda/spring/tutorial/injection/conflict/Library.class]: Unsatisfied dependency expressed through constructor argument with index 0 of type [com.farenda.spring.tutorial.injection.conflict.BookRepository]: Error creating bean with name 'bookRepository': Requested bean is currently in creation: Is there an unresolvable circular reference?; nested exception is org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'bookRepository': Requested bean is currently in creation: Is there an unresolvable circular reference?; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'library' defined in file [/home/przemek/Dropbox/projekty/farenda/java/spring-tutorial/build/classes/main/com/farenda/spring/tutorial/injection/conflict/Library.class]: Unsatisfied dependency expressed through constructor argument with index 0 of type [com.farenda.spring.tutorial.injection.conflict.BookRepository]: Error creating bean with name 'bookRepository': Requested bean is currently in creation: Is there an unresolvable circular reference?; nested exception is org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'bookRepository': Requested bean is currently in creation: Is there an unresolvable circular reference? 2016-08-09 23:29:02.166 ERROR 11796 --- [ main] o.s.boot.SpringApplication : Application startup failed org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'bookRepository' defined in file [/home/przemek/Dropbox/projekty/farenda/java/spring-tutorial/build/classes/main/com/farenda/spring/tutorial/injection/conflict/BookRepository.class]: Unsatisfied dependency expressed through constructor argument with index 0 of type [com.farenda.spring.tutorial.injection.conflict.Library]: Error creating bean with name 'library' defined in file [/home/przemek/Dropbox/projekty/farenda/java/spring-tutorial/build/classes/main/com/farenda/spring/tutorial/injection/conflict/Library.class]: Unsatisfied dependency expressed through constructor argument with index 0 of type [com.farenda.spring.tutorial.injection.conflict.BookRepository]: Error creating bean with name 'bookRepository': Requested bean is currently in creation: Is there an unresolvable circular reference?; nested exception is org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'bookRepository': Requested bean is currently in creation: Is there an unresolvable circular reference?; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'library' defined in file [/home/przemek/Dropbox/projekty/farenda/java/spring-tutorial/build/classes/main/com/farenda/spring/tutorial/injection/conflict/Library.class]: Unsatisfied dependency expressed through constructor argument with index 0 of type [com.farenda.spring.tutorial.injection.conflict.BookRepository]: Error creating bean with name 'bookRepository': Requested bean is currently in creation: Is there an unresolvable circular reference?; nested exception is org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'bookRepository': Requested bean is currently in creation: Is there an unresolvable circular reference? at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:749) ~[spring-beans-4.2.6.RELEASE.jar:4.2.6.RELEASE] at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:185) ~[spring-beans-4.2.6.RELEASE.jar:4.2.6.RELEASE] ``` The reason is that Spring Framework first tries to instantiate all the beans and then inject them. When constructor dependency is used, Spring Framework cannot instantiate mutually dependent beans. To fix that the beans participating in circular reference have to use field/setter injection. Field/setter injection to break constructor circular references To fix that let’s use [field injection](https://farenda.com/spring/spring-field-injection) in the beans: ```java @Repository public class BookRepository { @Autowired private Library library; // @Autowired // public BookRepository(Library library) { // this.library = library; // } //... } public class Library { @Autowired private BookRepository bookRepository; // public Library(BookRepository bookRepository) { // this.bookRepository = bookRepository; // } //... } ``` Now Spring Framewokr can instantiate BookRepository, inject it through the constructor into the Library, and then inject it back to the BookRepository: ```shell 2016-08-09 23:55:54.594 INFO 12472 --- [ main] c.f.s.t.i.conflict.InjectionConflict : Started InjectionConflict in 1.553 seconds (JVM running for 2.679) In a library: Public library #1 Title 2: Java Concurrency in Practice 2016-08-09 23:55:54.605 INFO 12472 --- [ Thread-1] s.c.a.AnnotationConfigApplicationContext : Closing org.springframework.context.annotation.AnnotationConfigApplicationContext@2eda0940: startup date [Tue Aug 09 23:55:54 CEST 2016]; root of context hierarchy ``` ",
    "url": "/SpringNotes/TidBits",
    
    "relUrl": "/SpringNotes/TidBits"
  },"210": {
    "doc": "Transactions",
    "title": "Transactions",
    "content": "{: .text-delta } 1. TOC {:toc} --- # TransactionStatus > An instance of `TransactionStatus` is available by default in Grails transactional service methods. > the keys in the Map must correspond to properties > of org.springframework.transaction.support.DefaultTransactionDefinition ```java public class AccountExample { Account.withTransaction([propagationBehavior:TransactionDefinition.PROPAGATION_REQUIRES_NEW,isolationLevel:TransactionDefinition.ISOLATION_REPEATABLE_READ]) { // do work } } ``` ## Personal Use Case - [Using TransactionStatus in a Service](https://gist.github.com/14paxton/a212d86552b05b95ef91ee444197fd4e) ## Resources ### Articles - [Transaction Management](https://docs.spring.io/spring-framework/docs/current/reference/html/data-access.html#transaction) ### Grails Docs - [Transactions Rollback and the Session](https://docs.grails.org/latest/guide/services.html#transactionsRollbackAndTheSession) - [GORM Programmatic Transactions](http://gorm.grails.org/6.0.x/hibernate/manual/index.html#programmaticTransactions) ### Java Docs - [Spring Interface TransactionStatus](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/transaction/TransactionStatus.html) - [Spring Interface SavepointManager](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/transaction/SavepointManager.html) ",
    "url": "/SpringNotes/Transactions",
    
    "relUrl": "/SpringNotes/Transactions"
  },"211": {
    "doc": "TypeScript",
    "title": "TypeScript",
    "content": "| --- ",
    "url": "/JavaScript/TypeScript/",
    
    "relUrl": "/JavaScript/TypeScript/"
  },"212": {
    "doc": "Types",
    "title": "Types",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Function > Typescript from v1.4 has the type keyword which declares a type alias (analogous to a typedef in C/C++). - > You can declare your callback type thus: ```typescript type CallbackFunction = () => void; ``` - > declares a function that takes no arguments and returns nothing. A function that takes zero or more arguments of any type and returns nothing would be: ```typescript type CallbackFunctionVariadic = (...args: any[]) => void; ``` ```typescript let callback: CallbackFunctionVariadic = function (...args: any[]) { // do some stuff }; ``` - > If you want a function that takes an arbitrary number of arguments and returns anything (including void): ```typescript type CallbackFunctionVariadicAnyReturn = (...args: any[]) => any; ``` - > You can specify some mandatory arguments and then a set of additional arguments (say a string, a number and then a set of extra args) thus: ```typescript type CallbackFunctionSomeVariadic = ( arg1: string, arg2: number, ...args: any[] ) => void; ``` > This can be useful for things like EventEmitter handlers. > Functions can be typed as strongly as you like in this fashion, although you can get carried away and run into combinatoric problems if you try to > nail everything down with a type alias. ",
    "url": "/JavaScript/TypeScript/Types",
    
    "relUrl": "/JavaScript/TypeScript/Types"
  },"213": {
    "doc": "UsefulCommands",
    "title": "UsefulCommands",
    "content": "{: .text-delta } 1. TOC {:toc} --- # stop all containers: ```bash docker kill $(docker ps -q) ``` # remove all containers ```bash docker rm $(docker ps -a -q) ``` # remove all docker images ```bash docker rmi $(docker images -q) ``` # get container ip ```shell sudo docker container inspect container_name_or_ID ``` > Don't know the container's name or ID? Use the command ```shell sudo docker ps ``` ",
    "url": "/DockerNotes/UsefulCommands",
    
    "relUrl": "/DockerNotes/UsefulCommands"
  },"214": {
    "doc": "UsefulSnippets",
    "title": "UsefulSnippets",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Generate a random string ```javascript const randomString = () => Math.random().toString(36).slice(2); ``` # Generate a random string of a given length ```javascript const randomString = (length = 10) => { let result = \"\"; while (result.length navigator.clipboard.writeText(text); copyToClipboard(\"Hello World\"); ``` # Clear all cookies ```javascript const clearcookies = document.cookie .split(\";\") .forEach((cookie) => (document.cookie = cookie.replace(/=.*/, `=;expires=$(new Date(0). toUTCString()} ;path=/`,)),); ``` # Get the selected text ```javascript const getSelectedText = () => window.getSelection().toString(); getSelectedText(); ``` # Scroll to the top of the page ```javascript const goToTop = () => window.scrollTo(0, 0); goToTop(); ``` # Check whether the user has scrolled to the bottom of a page ```javascript const scrolledToBottom = () => document.documentElement.clientHeight + window.scrollY >= document.documentElement.scrollHeight ``` # Find out whether the current tab is active ```javascript const isTabInView = () => !document.hidden ``` # Redirect the user to a URL ```javascript const redirect = url => location.href = url redirect(\"https://www.google.com/\") ``` # Open the browser print box ```javascript const showPrintDialog = () window.print() ``` # Generate a random boolean value ```javascript // Returns a random boolean value (true or false) const randomBoolean = () => Math.random() >= 0.5; randomBoolean(); ``` # Generate a random number between two values ![](..%2Fassets%2Fimages%2Fimage12.jpeg) # Check if a given number is an integer ![](..%2Fassets%2Fimages%2Fimage13.jpeg) # Remove duplicate values in an array ![](..%2Fassets%2Fimages%2Fimage14.jpeg) # [Get the unique values in an array] ![](..%2Fassets%2Fimages%2Fimage15.jpeg) # [Check if a variable is an array](https://muhammadovi.com/20-javascript-one-liners-that-will-help-you-code-like-a-pro/#2---check-if-the-date-is-weekend) ![](..%2Fassets%2Fimages%2Fimage16.jpeg) # [Check if the date is Weekend](https://muhammadovi.com/20-javascript-one-liners-that-will-help-you-code-like-a-pro/#02---check-if-the-date-is-weekend) ![](..%2Fassets%2Fimages%2Fimage17.jpeg) # Calculate number of days between two dates ![](..%2Fassets%2Fimages%2Fimage18.jpeg) # Capitalize a String ![](..%2Fassets%2Fimages%2Fimage19.jpeg) # Get the day of the year from a date ![](..%2Fassets%2Fimages%2Fimage20.jpeg) # Check if a string is a palindrome ![](..%2Fassets%2Fimages%2Fimage21.jpeg) # Get the first n elements of an array ![](..%2Fassets%2Fimages%2Fimage22.jpeg) # Get the last n elements of an array ![](..%2Fassets%2Fimages%2Fimage23.jpeg) # Remove all vowels from a string ![](..%2Fassets%2Fimages%2Fimage24.jpeg) # Check if a string contains a substring ![](..%2Fassets%2Fimages%2Fimage25.jpeg) # Get the current time in hh:mm:ss format ![](..%2Fassets%2Fimages%2Fimage26.jpeg) # Check if an object is empty ![](..%2Fassets%2Fimages%2Fimage27.jpeg) # not empty ![](..%2Fassets%2Fimages%2Fimage28.jpeg) ![](..%2Fassets%2Fimages%2Fimage29.jpeg) # Get the current date and time ![](..%2Fassets%2Fimages%2Fimage30.jpeg) # Reverse a String ![](..%2Fassets%2Fimages%2Fimage31.jpeg) # Sort Arrays ![](..%2Fassets%2Fimages%2Fimage32.jpeg) # Extract the Domain name from an email ![](..%2Fassets%2Fimages%2Fimage33.jpeg) # Flatten an Nested Array ![](..%2Fassets%2Fimages%2Fimage34.jpeg) # Generates a Random Color in Hexadecimal Format ![](..%2Fassets%2Fimages%2Fimage35.jpeg) # Checks if a given value is a valid Hexadecimal Color Code ![](..%2Fassets%2Fimages%2Fimage36.jpeg) # Get the current time in a specific timezone ![](..%2Fassets%2Fimages%2Fimage37.jpeg) # Convert a String to kebab-case ![](..%2Fassets%2Fimages%2Fimage38.jpeg) # Shuffle an Array ![](..%2Fassets%2Fimages%2Fimage39.jpeg) # Shuffle an array using the Fisher-Yates (Knuth) Shuffle algorithm ![](..%2Fassets%2Fimages%2Fimage40.jpeg) # Convert RGB color code to valid Hexadecimal color code ![](..%2Fassets%2Fimages%2Fimage41.jpeg) # Truncate a number to a fixed decimal point ![](..%2Fassets%2Fimages%2Fimage42.jpeg) # Remove falsy values from Array ![](..%2Fassets%2Fimages%2Fimage43.jpeg) # A function that toggles a boolean value ![](..%2Fassets%2Fimages%2Fimage44.jpeg) # A concise way to swap the values of two variables using array ![](..%2Fassets%2Fimages%2Fimage45.jpeg) # The concat() method returns a new array containing elements from both arr1 and arr2. ![](..%2Fassets%2Fimages%2Fimage46.jpeg) # The spread operator is concise and visually clear. It takes the elements from both arrays and creates a new array. ![](..%2Fassets%2Fimages%2Fimage47.jpeg) # This approach modifies arr1 in place by using push() along with apply() to add elements from arr2. ![](..%2Fassets%2Fimages%2Fimage48.jpeg) # The spread operator is used to expand the elements of arr2 into individual arguments for the push() method. ![](..%2Fassets%2Fimages%2Fimage49.jpeg) # The spread operator is used to expand the elements of arr2 as arguments to the concat() method. ![](..%2Fassets%2Fimages%2Fimage50.jpeg) # JavaScript primitives Truncate string at the end ![](..%2Fassets%2Fimages%2Fimage51.jpeg) # The function will truncate the input string to the specified length and add an ellipsis (\\...) at the end if the string is longer than the specified length. ![](..%2Fassets%2Fimages%2Fimage52.jpeg) # The function is to truncate the input string while keeping the specified number of characters from the start and end, and adding an ellipsis (\\...) in the middle. ![](..%2Fassets%2Fimages%2Fimage52.jpeg) # Get the value of a browser cookie by its name ![](..%2Fassets%2Fimages%2Fimage53.jpeg) # from a JavaScript Date object. ![](..%2Fassets%2Fimages%2Fimage54.jpeg) # Check if a number is even or odd ![](..%2Fassets%2Fimages%2Fimage55.jpeg) # Converts the first character of a given string to lowercase ![](..%2Fassets%2Fimages%2Fimage56.jpeg) # Repeats a given string a specific number of times ![](..%2Fassets%2Fimages%2Fimage57.jpeg) # Check if the code is running in Node.js ![](..%2Fassets%2Fimages%2Fimage58.jpeg) # Check if the code is running in the browser ![](..%2Fassets%2Fimages%2Fimage59.jpeg) # Get all siblings of a given element ![](..%2Fassets%2Fimages%2Fimage60.jpeg) # Go back to the previous page using the history object ![](..%2Fassets%2Fimages%2Fimage61.jpeg) # Function to get the largest element in an array ![](..%2Fassets%2Fimages%2Fimage62.jpeg) # Function to get the smallest element in an array ![](..%2Fassets%2Fimages%2Fimage63.jpeg) # Function to toggle the visibility of an HTML element ![](..%2Fassets%2Fimages%2Fimage64.jpeg) # Function to remove HTML tags from a given String ![](..%2Fassets%2Fimages%2Fimage65.jpeg) # Define a function to check if a given value is a DOM Element ![](..%2Fassets%2Fimages%2Fimage66.jpeg) # Define a function to check if a given string is a valid URL ![](..%2Fassets%2Fimages%2Fimage67.jpeg) # Check if a string starts with a given prefix ![](..%2Fassets%2Fimages%2Fimage68.jpeg) # Check if a string ends with a given suffix ![](..%2Fassets%2Fimages%2Fimage69.jpeg) # Check if a value is an object ![](..%2Fassets%2Fimages%2Fimage70.jpeg) # Check if a value is a function ![](..%2Fassets%2Fimages%2Fimage71.png) # Check if a value is a Promise ![](..%2Fassets%2Fimages%2Fimage72.jpeg) # Check if an HTML element is entirely within the viewport ![](..%2Fassets%2Fimages%2Fimage73.jpeg) ",
    "url": "/JavaScript/UsefulSnippets",
    
    "relUrl": "/JavaScript/UsefulSnippets"
  },"215": {
    "doc": "UsersAndGroups",
    "title": "UsersAndGroups",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Users ## Get User List ```shell dscl . list /Users | grep -v \"^_\" ``` ## List existing group - > IDs in numerical order ```shell dscl . -list /Groups PrimaryGroupID | awk '{print $2}' | sort -n ``` - > List sorted by group name: ```shell dscl . list /Groups PrimaryGroupID ``` - > List sorted by group gid ```shell dscl . list /Groups PrimaryGroupID | tr -s ' ' | sort -n -t ' ' -k2,2 ``` - > List groups with members ```shell dscl . list /Groups GroupMembership ``` Note: neither dscacheutil nor dscl list members of the group staff other than root. Use dsmemberutil to confirm a member belongs to the group staff. > Example a user with uid 501: ```shell dsmemberutil checkmembership -u 501 -g 20 ``` ### Create the new group 'newgroup' and assign it an ID One thing you have to take care when choosing a group id is that the id is not already used by another group. In order to list the existing group ids in numerical order, you can do: dscl . -list /groups PrimaryGroupID | awk '{print $2}' | sort -n . ```shell sudo dscl . -create /Groups/newgroup sudo dscl . -create /Groups/newgroup PrimaryGroupID 1000 ``` #### View the new group ```shell dscl . -read /Groups/newgroup ``` > output ``` AppleMetaNodeLocation: /Local/Default GeneratedUID: 423AF02C-F053-41E0-ABCD-33127EF9A9CA PrimaryGroupID: 1000 RecordName: newgroup RecordType: dsRecTypeStandard:Groups ``` OS X conventionally uses different ID ranges for different types of accounts. Here's the current layout as I understand it: up to 100: Reserved for static system-defined (built in) groups 101 - 199: Used by the OS for dynamically created groups (e.g., share point access groups) 200—?: More static system groups (apparently 100 wasn't enough) 400 - 500: More dynamic system groups 501 and up: Local admin-created groups 1024 and up: Domain-based admin-created groups ## Add user to group ```shell sudo dseditgroup -o edit -a john -t user admin sudo dseditgroup -o edit -a john -t user wheel ``` ## Create new user ```shell sudo dscl . -create /Users/newuser sudo dscl . -create /Users/newuser UserShell /bin/bash sudo dscl . -create /Users/newuser RealName \"New User\" sudo dscl . -create /Users/newuser UniqueID \"1000\" sudo dscl . -create /Users/newuser PrimaryGroupID 1000 ``` ```shell sudo dscl . -create /Users/username NFSHomeDirectory /Local/Users/username ``` ```shell sudo dscl . -passwd /Users/username password ``` ```shell sudo dscl . -append /Groups/admin GroupMembership username ``` ### View the new user ```shell dscl . -read /Users/newuser ``` > output ``` AppleMetaNodeLocation: /Local/Default GeneratedUID: 47D6D841-C7F1-4962-9F7E-167E8BFC3A91 PrimaryGroupID: 1000 RealName: Application RecordName: newuser RecordType: dsRecTypeStandard:Users UniqueID: 1000 UserShell: /usr/bash ``` ## Change Password ```shell sudo dscl . -passwd /Users/username password ``` ## Root ### Enable Root User #### Use Directory Utility > Use Spotlight to find and open Directory Utility, or follow these steps: 1. From the menu bar in the Finder, choose Go > Go to Folder. 2. Type or paste /System/Library/CoreServices/Applications/, then press Return. 3. Open Directory Utility from the window that opens. ##### To enable or disable the root user > In the Directory Utility window, click the lock icon, then enter an administrator name and password. - To enable the root user, choose Edit > Enable Root User from the menu bar. Then enter the password that you want to use. You can then log in as the root user. - To disable the root user, choose Edit > Disable Root User. ##### To change the root password > In the Directory Utility window, click the lock icon, then enter an administrator name and password. From the menu bar, choose Edit > Change Root > Password. ##### Log in as the root user > When the root user is enabled, you have its privileges only while logged in as the root user. 1. Choose an Apple menu  > Log Out to log out of your current user account. 2. At the login window, log in with the username “root” and the password you created for the root user. - If the login window is a list of users, click Other, then log in. ### add user to SUDO ```shell su AdminUser authentication, and then: ``` > Now, as Adminuser, use the visudo command to edit the sudoers file: ```shell sudo visudo # Add the following line to the sudoers file: username ALL = (ALL) ALL ``` > If you want to be able to use sudo without typing a password: ```shell username ALL = (ALL) NOPASSWD:ALL ``` ",
    "url": "/MacNotes/UsersAndGroups",
    
    "relUrl": "/MacNotes/UsersAndGroups"
  },"216": {
    "doc": "Utilities",
    "title": "Utilities",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Software Update ## How do I apply all recommended updates? > All updates that are recommended for your system: ```shell sudo softwareupdate -r ``` ## Updating Mac using the Terminal app > To install all updates that are applicable to your system, enter: ```shell sudo softwareupdate -i -a ``` ## Install all but make sure you ignore ‘JavaForOSX’ updates: ```shell sudo softwareupdate --ignore JavaForOSX ``` ## To clear the list, ignored updates, enter: ```shell sudo softwareupdate --reset-ignored ``` ## Update/Install OS ### This gives you a list of available releases you can choose from. Once downloaded it will be saved in your Applications folder ```shell softwareupdate --list-full-installers;echo;echo \"Please enter version number you wish to download:\";read;$(if [ -n \"$REPLY\" ]; then; echo \"softwareupdate --fetch-full-installer --full-installer-version \"$REPLY; fi); ``` #### Munki's InstallInstallMacOS utility > Once finished, you'll find in your ~/macOS-Installer/ ```shell mkdir -p ~/macOS-installer && cd ~/macOS-installer && curl https://raw.githubusercontent.com/munki/macadmin-scripts/main/installinstallmacos.py > installinstallmacos.py && sudo python installinstallmacos.py ``` ### [create installer](https://dortania.github.io/OpenCore-Install-Guide/installer-guide/mac-install.html#setting-up-opencore-s-efi-environment) #### run `createinstallmedia` command provided by Apple (opens a new window). Note that the command is made for USB's formatted with the name MyVolume: ```shell sudo /Applications/Install\\ macOS\\ Big\\ Sur.app/Contents/Resources/createinstallmedia --volume /Volumes/MyVolume ``` > Note for users on Apple Silicon installing macOS older than Big Sur > If the `createinstallmedia` fails with `zsh: killed ` or `Killed: 9` then it's most likely an issue with the installer's code signature. > To fix this, you can run the following command: ```shell cd /Applications/Install\\ macOS\\ Big\\ Sur.app/Contents/Resources/ codesign -s - -f --deep /Applications/Install\\ macOS\\ Big\\ Sur.app ``` > You will need the command line tools for Xcode installed: ```shell xcode-select --install ``` # [dscl](https://ss64.com/osx/dscl.html) ## unhide a user account ```shell sudo dscl . create /Users/hiddenuser IsHidden 0 ``` # [chflags](https://ss64.com/osx/chflags.html) ## Hide Home folder ```shell sudo chflags hidden /Users/username ``` # [DISKUTIL ](https://ss64.com/osx/diskutil.html) ## find disk ```shell diskutil list ``` ## unmount ```shell diskutil unmountDisk /dev/disk# ``` ## force unmount ```shell diskutil unmountDisk /force /dev/disk# ``` ## Format drive/Volume ```shell diskutil eraseDisk ``` `Usage: diskutil eraseDisk format name [APM[Format]|MBR[Format]|GPT[Format]]MountPoint|DiskIdentifier|DeviceNode` > Completely erase an existing whole disk. > All volumes on this disk will be destroyed. > Ownership of the affected disk is required. > Format is the specific file system name you want to erase it as (HFS+, etc.). > Name is the (new) volume name (subject to file system naming restrictions), > or can be specified as `%noformat%` to skip initialization (newfs). > You cannot erase the boot disk. ```shell diskutil eraseDisk JHFS+ UntitledUFS disk3 ``` ```shell diskutil eraseDisk JHFS+ CleanDrive /dev/disk1 ``` > Formats > > `APFS`: Allocates disk space within a container (partition) on demand. > > When a single APFS container has multiple volumes, the container’s free space is shared and is automatically allocated > > to any of the individual volumes as needed. > > If desired, you can specify reserve and quota sizes for each volume. > > Each volume uses only part of the overall container, so the available space is the > > total size of the container, minus the size of all the volumes in the container. > > `APFS`: Uses the APFS format. Choose this option if you don’t need an encrypted or case-sensitive format. > > `APFS (Encrypted)`: Uses the APFS format and encrypts the volume. > > `APFS (Case-sensitive)`: Uses the APFS format and is case-sensitive to file and folder names. For example, folders named “Homework” and “HOMEWORK” > > are two different folders. > > `APFS (Case-sensitive, Encrypted)`: Uses the APFS format, is case-sensitive to file and folder names, and encrypts the volume. > > For example, folders named “Homework” and “HOMEWORK” are two > > different folders. | File System | Abbreviation | --------------------------- | ------------ | --- | ----- | ----- | Mac OS Extended (Journaled) | JHFS+ | Mac OS Extended | HFS+ | MS-DOS fat32 | FAT32 | ExFAT | ExFAT | ## Diskutil SecureErase > Now we need to select the level of secure erase we want. There are five levels of secure erasing you can use labeled from 0-4. > `Level 0 `just erases the drive by writing the number zero across every sector of the drive. > `Level 1` does the same but with random data, thus taking longer. > `Level 2 `erases the drive 7 times with 1’s and 0’s except the last pass where it uses random data. > `Level 3` is a special algorithm that erases the drives with random data as well as data compiled from a special collection of 1’s and 0’s. > `Level 4` is a little different and erases it three times, with random data on the first two passes and one set of zeroes on the last pass. ```shell diskutil secureErase 4 /dev/disk2 ``` # [csrutil](https://ss64.com/osx/csrutil.html) # [pwpolicy](https://www.manpagez.com/man/8/pwpolicy/) - [alt man page](https://www.unix.com/man-page/osx/8/pwpolicy/) - [alt man page - config](https://mosen.github.io/profiledocs/macos/pwpolicy.html#macos-10-10) ## Set Global Policy ```shell pwpolicy -setglobalpolicy minChars=0 ``` ",
    "url": "/MacNotes/Utilities",
    
    "relUrl": "/MacNotes/Utilities"
  },"217": {
    "doc": "VIM_QuickTips",
    "title": "VIM_QuickTips",
    "content": "{: .text-delta } 1. TOC {:toc} --- Vim has two modes. 1. Insert mode (Where you can just type like normal text editor. Press i for insert mode) 2. Command mode (Where you give commands to the editor to get things done . Press ESC for command mode) Most of them below are in command mode x - to delete the unwanted character u - to undo the last the command and U to undo the whole line CTRL-R to redo A - to append text at the end :wq - to save and exit :q! - to trash all changes dw - move the cursor to the beginning of the word to delete that word 2w - to move the cursor two words forward. 3e - to move the cursor to the end of the third word forward. 0 (zero) to move to the start of the line. d2w - which deletes 2 words .. number can be changed for deleting the number of consecutive words like d3w dd to delete the line and 2dd to delete to line .number can be changed for deleting the number of consecutive words The format for a change command is: operator [number] motion -operator - is what to do, such as d for delete - [number] - is an optional count to repeat the motion - motion - moves over the text to operate on, such as w (word), $ (to the end of line), etc. p - puts the previously deleted text after the cursor(Type dd to delete the line and store it in a Vim register. and p to put the line) r - to replace the letter e.g press re to replace the letter with e ce - to change until the end of a word (place the cursor on the u in lubw it will delete ubw ) ce - deletes the word and places you in Insert mode G - to move you to the bottom of the file. gg - to move you to the start of the file. Type the number of the line you were on and then G % to find a matching ),], or } :s/old/new/g to substitute 'new' for 'old' where g is globally / backward search n to find the next occurrence and N to search in opposite direction ? forward search :! to run the shell commands like :!dir, :!ls :w - TEST (where TEST is the filename you chose.) . Save the file v - starts visual mode for selecting the lines and you can perform operation on that like d delete :r - Filename will insert the content into the current file R - to replace more than one character y - operator to copy text using v visual mode and p to paste it yw - (copy)yanks one word o - opens a line below the cursor and start Insert mode. O - opens a line above the cursor. a - inserts text after the cursor. A - inserts text after the end of the line. e - command moves to the end of a word. y - operator yanks (copies) text, p puts (pastes) it. R - enters Replace mode until is pressed. ctrl-w to jump from one window to another ",
    "url": "/Linux/VIM_QuickTips",
    
    "relUrl": "/Linux/VIM_QuickTips"
  },"218": {
    "doc": "VisualStudio",
    "title": "VisualStudio",
    "content": "{: .text-delta } 1. TOC {:toc} --- # [Shortcuts](https://learn.microsoft.com/en-us/visualstudio/ide/finding-and-replacing-text?view=vs-2022#multi-caret-selection) - Ctrl + Alt + click : Add a secondary caret - Ctrl + Alt + double-click : Add a secondary word selection - Ctrl + Alt + click + drag : Add a secondary selection - Shift + Alt + . : Add the next matching text as a selection - Shift + Alt + ; : Add all matching text as selections - Shift + Alt + , : Remove last selected occurrence - Shift + Alt + / : Skip next matching occurrence - Alt + click : Add a box selection - Esc or click : Clear all selections Some of those commands are also available in the `Edit` menu: ![Multiple Carets Menu][2] [1]: https://learn.microsoft.com/en-us/visualstudio/ide/finding-and-replacing-text#multi-caret-selection [2]: https://i.stack.imgur.com/J1WkX.png [3]: https://i.stack.imgur.com/OlNMI.png # Console ## [Nuget](https://learn.microsoft.com/en-us/nuget/reference/ps-reference/ps-ref-get-project) - Port packages from one project to another ```powershell Get-Package -ProjectName 'SourceProject\\LogicalPath\\Source.Project.Name' | ForEach-Object { Install-Package -Id $_.Id -Version $_.Versions -Projectname 'TargetProject\\LogicalPath\\Target.Project.Name' } ``` ```shell Get-Project -All | Add-BindingRedirect # or Get-Project MyProject | Add-BindingRedirect ``` ```shell Update-Package -Reinstall Antlr ``` --- # Extentions ## Useful - [Keep History of file changes](https://marketplace.visualstudio.com/items?itemName=KenCross.VSHistory2022) ## Code Formatters ### Native VS options - [change formatting in vs settings](https://learn.microsoft.com/en-us/visualstudio/ide/reference/options-text-editor-csharp-formatting?view=vs-2022#formatting-general-page) - [use an EditorConfigFile](https://learn.microsoft.com/en-us/visualstudio/ide/create-portable-custom-editor-options?view=vs-2019) ### Plugins - [CSharpier is an opinionated code formatter for c#](https://csharpier.com/docs/About) - [CSharpier VS plugin](https://marketplace.visualstudio.com/items?itemName=csharpier.csharpier-vscode) - [Code Maid](https://marketplace.visualstudio.com/items?itemName=SteveCadwallader.CodeMaid) - [dotnet/format](https://github.com/dotnet/format) ### Linters - [Jet Brains Resharper](https://www.jetbrains.com/resharper/) - [SonarLint docs](https://www.sonarsource.com/products/sonarlint/features/) - [SonarLint Plugin](https://marketplace.visualstudio.com/items?itemName=SonarSource.SonarLintforVisualStudio2022) ",
    "url": "/DotNetNotes/VisualStudio",
    
    "relUrl": "/DotNetNotes/VisualStudio"
  },"219": {
    "doc": "VoiceAgent",
    "title": "VoiceAgent",
    "content": "{: .text-delta } 1. TOC {:toc} *** # [Best Practices](https://cloud.google.com/dialogflow/cx/docs/concept/voice-agent-design) # [Speech Synthesis Markup Language](https://cloud.google.com/text-to-speech/docs/ssml) ",
    "url": "/GoogleNotes/VoiceAgent",
    
    "relUrl": "/GoogleNotes/VoiceAgent"
  },"220": {
    "doc": "WSL",
    "title": "WSL",
    "content": "{: .text-delta } 1. TOC {:toc} --- # [WSL](https://learn.microsoft.com/en-us/windows/wsl/basic-commands) ## [Ubuntu for windows](https://docs.microsoft.com/en-us/windows/wsl/reference) # [Install](https://docs.microsoft.com/en-gb/windows/wsl/install-win10) ## enable > ps script enable and install ```shell Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux Invoke-WebRequest -Uri https://aka.ms/wsl-ubuntu-1604 -OutFile Ubuntu.appx -UseBasicParsing Add-AppxPackage .\\Ubuntu.appx ``` > or > ps steps ```shell # enable dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart # enable virtual machine dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart # use wsl2 wsl --set-default-version 2 ``` > or - use run and enable `windows subsystem for linux` in windows features > hit `win + R` > then input `optionalfeatures.exe` ## install linux distro > available distros - [Debian](https://aka.ms/wsl-debian-gnulinux) - [Ubuntu 18.04](https://aka.ms/wsl-ubuntu-1804) - [Ubuntu 16.04](https://aka.ms/wsl-ubuntu-1604) - [Ubuntu 20.04](https://aka.ms/wslubuntu2004) - [openSUSE](https://aka.ms/wsl-opensuse-42) - [SLES](https://aka.ms/wsl-sles-12) - [Kali](https://aka.ms/wsl-kali-linux) ### Go to a folder where you would like to download the distro ```shell cd ``` ### Download Ubuntu 20.04 ```shell Invoke-WebRequest -Uri https://aka.ms/wslubuntu2004 -OutFile Ubuntu.appx -UseBasicParsing ``` ### install downloaded \\*.appx file ```shell Add-AppxPackage .\\Ubuntu.appx ``` > execute in cmd prompt ```shell PS E:\\distro\\ubunu> ubuntu2004.exe ``` ```shell wsl --list --verbos ``` ```shell wsl --list --all ``` > convert ubuntu on wsl 1 to wsl 2 ```shell wsl --set-version Ubuntu-20.04 2 ``` ### restart ```shell Restart-Service LxssManager ``` > or ```shell wsl --terminate [YourDistroName] wsl --shutdown ``` ## Points of Interest ### Path from windows file system > relative path: `\\wsl$\\Ubuntu\\home\\bpaxton` > Absolute Path: `C:\\Users\\bpaxton\\AppData\\Local\\Packages\\CanonicalGroupLimited.UbuntuonWindows_79rhkp1fndgsc\\LocalState\\rootfs` #### shell exe, (can point ide to this to use ubuntu in terminal) [Use in JetBrains ides](https://www.jetbrains.com/help/idea/how-to-use-wsl-development-environment-in-product.html) `C:\\Users\\bpaxton\\AppData\\Local\\Microsoft\\WindowsApps\\ubuntu.exe` ### distribution Ubuntu `wsl.exe` ",
    "url": "/Windows_Notes/WSL",
    
    "relUrl": "/Windows_Notes/WSL"
  },"221": {
    "doc": "WebAPI",
    "title": "WebAPI",
    "content": "{: .text-delta } 1. TOC {:toc} *** # Speech ```javascript const textToSpeak = \"Hello There\"; const utterance = new SpeechSynthesisUtterance(textToSpeak); window.speechSynthesis.speak(utterance); ``` # Storage ## localStorage ```javascript // Store data localStorage.setItem('key', 'value'); // Retrieve data const storedValue = localStorage.getItem('key'); // Remove data localStorage.removeItem('key'); ``` ## sessionStorage ```javascript // Store data sessionStorage.setItem('key', 'value'); // Retrieve data const storedValue = sessionStorage.getItem('key'); // Remove data sessionStorage.removeItem('key'); ``` # Fetch ```javascript fetch('http://example.com/movies.json') .then(response => response.json()) .then(data => console.log(data)) .catch(error => console.error('error:', error)); ``` # Geolocation > Using Navigator ```javascript navigator.geolocation.getCurrentPosition(position => { console.log(`Latitude: ${position.coords.latitude}, Longitude: ${position.coords.longitude}`); }, error => { console.error(\"Error getting location:\", error - message); }) ``` # Canvas ```javascript const canvas = document.createElement('canvas'); canvas.width = 200; canvas.height = 100; document.body.appendChild(canvas); const ctx = canvas.getContext('2d'); ctx.fillStyle = 'blue'; ctx.fillRect(10, 10, 180, 80); ``` # Audio ```javascript const audioContext = new (window.AudioContext || window.webkitAudioContext)(); const oscillator = audioContext.create0scillator(); oscillator.frequency.setValueAtTime(440, audioContext.currentTime); oscillator.connect(audioContext.destination); oscillator.start(); oscillator.stop(audioContext.currentTime + 1); ``` # Sockets ```javascript const socket = new WebSocket('wss://example.com/socket'); socket.addEventListener('open', () => socket.send('Hello, server!')); socket.addEventListener('message', event => console.log('Received: ', event.data)); socket.addEventListener('close', () => console.log('Connection closed. ')); ``` # IndexedDB > Structured client side data storage ```javascript // Open (or create) the database const dbName = \"InstagramPostsDB\"; const dbVersion = 1; const request = indexedDB.open(dbName, dbVersion); //handles errors that may occur during the database opening process. request.onerror(() => 1); //specifies the actions to be taken when the database structure is being upgraded. request.onupgradeneeded(() = {}); //defines the actions to be taken upon successful opening of the database. request.onsuccess(() = {}); ``` # File > Manipulate files, access metadata. ```html Upload Post ``` # Notification > Display system notifications. ```javascript Notification.requestPermission() .then(permission => { new Notification('Hello, World!'); }); ``` # Workers ```javascript const worker = new Worker('worker.js'); worker = postMessage('Hello from main script!'); ``` # Intersection Observer > Efficiently observes element visibility > changes ```javascript const observer = new IntersectionObserver(entries => entries.forEach(entry => entry.isIntersecting && console.log('Element is in the viewport!')); observer.observe(document.getElementById('yourElementId')); ``` # Mutation Observer > Observe DOM changes > asynchronously. ```javascript const observer = new MutationObserver mutations => mutations.forEach(mutation => console.log('DOM change detected:', mutation) const targetNode = document.getElementById('yourElementId'); const config = {attributes: true, childList: true, subtree: true}; observer.observe(targetNode, config); // Start observing DOM changes. ``` # Pointer Lock > Captures mouse movements precisely > in-browser. ```javascript const element = document.getElementById('yourElementId'); element.requestPointerLock(); ``` # Battery Status > Monitors device battery information > asynchronously. ```javascript navigator.getBattery().then(battery => { console.log('Battery Level:', battery.level * 100 + '%'); console.log('Charging:', battery, charging ? 'Yes' : 'No'); }); ``` # Gamepad > Interacts with game controller devices. ```javascript window.addEventListener(\"gamepadconnected\", (event) => console.log(\"'Gamepad connected:\", event.gamepad.id)); window.addEventListener(\"gamepaddisconnected\", (event) => console.log(\"'Gamepad disconnected:\", event.gamepad.id) ``` # DeviceOrientation ```javascript window.addEventListener(\"deviceorientation\", (event) => { console.log(\"Device Orientation:\", event.alpha, event.beta, event.gamma); }); window.addEventListener(\"devicemotion\", (event) => { console.log(\"Device Motion:\", event.acceleration., event.acceleration.y, event.acceleration.z); }); ``` # Push > enables push notifications in browsers ```javascript // Check for Push API support if ('PushManager' in window) { // Request notification permission Notification.requestPermission() .then(permission => { if (permission === 'granted') { // Subscription logic goes here } }); } ``` # Payment Request > Facilitates streamlined online payment > processing in browsers. ```javascript const supportedInstruments = [{supportedMethods: 'basic-card'}]; const paymentDetails = { total: {label: 'Total', amount: {currency: 'USD', value: '10.00'}} }; const paymentPromise = new PaymentRequest(supportedInstruments, paymentDetails); paymentPromise .show() .then(paymentResponse => paymentResponse.complete('success') ``` ",
    "url": "/JavaScript/WebAPI",
    
    "relUrl": "/JavaScript/WebAPI"
  },"222": {
    "doc": "WebWorker",
    "title": "WebWorker",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Abstracted WebWorker > set content security policy if needed in index.html ```html ``` ## worker builder file ```jsx //worker-builder.js export default class WorkerBuilder extends Worker { constructor(worker) { super(worker); const code = worker.toString(); const blob = new Blob([`(${code})()`]); return new Worker(URL.createObjectURL(blob)); } } ``` ## handle worker messaging file ```jsx //ppt.worker.js // eslint-disable-next-line import/no-anonymous-default-export export default () => { // eslint-disable-next-line no-restricted-globals self.onmessage = (message) => { postMessage(\"rebuild-ppt\"); }; }; ``` ## using working in compoenent ```jsx //use relative path from document baseURL // can be set in jsconfig.js //{ /* \"compilerOptions\": { \"baseUrl\": \"src\" }, \"include\": [\"src\"] } */ import Worker from \"containers/pptx/util/ppt.worker\"; const myWorker = new WorkerBuilder(Worker); export const MyWorkerComponent = () => { useEffect(() => { myWorker.postMessage(\"table-resize\"); }, []); useEffect(() => { if (window.Worker) { myWorker.onmessage = (message) => { //do work }; } }, []); }; ``` # Self Contained WebWorker ```jsx // worker.js // import api from \"./testModule\"; // eslint-disable-next-line no-restricted-globals const workercode = () => { // eslint-disable-next-line no-restricted-globals self.onmessage = function (event) { // self.importScripts(\"./testModule\"); // eslint-disable-line no-restricted-globals // eslint-disable-line no-restricted-globals const {data} = event; if (data === \"table-resize\") { // self.postMessage(api.message()); // eslint-disable-line no-restricted-globals self.postMessage(\"rebuild-ppt\"); // eslint-disable-line no-restricted-globals } }; }; let code = workercode.toString(); code = code.substring(code.indexOf(\"{\") + 1, code.lastIndexOf(\"}\")); const blob = new Blob([code], {type: \"application/javascript\"}); const worker_script = URL.createObjectURL(blob); module.exports = worker_script; ``` ## used in a context ```jsx export function TalentGridPPTXProvider({value, children}) { const {setLoadingExportData, isCached, setIsCached} = value; const myWorker = useMemo(function () { return new Worker(worker_script); }, []); const handleMessage = (event) => { if (event.data.hasOwnProperty(\"show_more\")) { if (!isCached) setLoadingExportData(true); if (myWorker) myWorker.postMessage(\"table-resize\"); } }; useEffect(() => { window.addEventListener(\"message\", handleMessage); return () => { window.removeEventListener(\"message\", handleMessage); //make sure webworker is released when component unmounts console.log(\"terminate worker\"); if (myWorker) myWorker.terminate(); }; }, []); } ``` # resources ## [react web workers walkthrough ](https://javascript.plainenglish.io/web-worker-in-react-9b2efafe309c) ## [web worker with sockec](https://www.freecodecamp.org/news/how-webworkers-work-in-javascript-with-example/) ",
    "url": "/ReactNotes/WebWorker",
    
    "relUrl": "/ReactNotes/WebWorker"
  },"223": {
    "doc": "Window",
    "title": "JavaScript Popup Example 3",
    "content": ". ``` ## example ```javascript //no parameter to the method, no problems still works var firstWindow = window.open(); //gives size to the new window with no url specified var secondWindow = window.open(\"\", \"\", \"width=200,height=100\"); //this specified the name parameter as well var thirdWindow = window.open(\"\", \"NEWWindow\", \"width=200,height=100\"); // All parameter are specified over here var fourthWindow = window.open(\"https://www.wikipedia.org\", \"_blank\", \"toolbar=yes,scrollbars=yes,resizable=yes,top=500,left=500,width=400,height=400\",); // using the document.write method to write to the new window firstWindow.document.write(\"This is 'firstwindow'. I am 200px wide and 100px tall! . \",); ``` --- # creating new window with html document ```javascript function newWindowDimensions(width, height, x_axis, y_axis) { const dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : window.screenX; const dualScreenTop = window.screenTop !== undefined ? window.screenTop : window.screenY; const w = width ? width : DEFAULT_PPT_WIDTH.pixels; const h = height ? height : DEFAULT_PPT_HEIGHT.pixels; function compute(screenPx, elementPx) { return screenPx / 2 - elementPx / 2; } const x = x_axis ? x_axis : Math.round(compute(window.screen.width, w) + dualScreenLeft); const y = y_axis ? y_axis : Math.round(compute(window.screen.height, h) + dualScreenTop); return `width=${w},height=${h},screenX=${x},screenY=${y},status=0,dependent=0,minimizable=0,resizable=0,menubar=0,location=0,toolbar=0,status=0,scrollbars=0,titlebar=0,dialog=0`; } function openWindowBuildPPTX(theDoc) { return new Promise((resolve) => { let srcNode = theDoc.documentElement; const winUrl = URL.createObjectURL(new Blob([srcNode.outerHTML], {type: \"text/html\"}),); // //inject in window and open const windowFeatures = newWindowDimensions(); const pptWindow = window.open(winUrl, \"\", windowFeatures); pptWindow.focus(); URL.revokeObjectURL(winUrl); resolve(pptWindow); }); } ``` ## [Raw JS examples and comments](https://gist.github.com/14paxton/fb7f33fd6f5fa7a15077b6ebf18fca44) # window size ```javascript const width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth; const height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight; ``` # window.resizeTo(width, height) ```javascript let jsWindow = window.open(\"http://localhost/js/about.html\", \"about\", \"height=600,width=800\",); setTimeout(() => { jsWindow.resizeTo(600, 300); }, 3000); ``` # window.move(x, y) ```javascript let jsWindow = window.open(\"http://localhost/js/about.html\", \"about\", \"height=600,width=600\",); setTimeout(() => { jsWindow.moveTo(500, 500); }, 3000); ``` ## Similarly, you can move the current window by a specified amount: ```javascript let jsWindow = window.open(\"http://localhost/js/about.html\", \"about\", \"height=600,width=600\",); setTimeout(() => { jsWindow.moveBy(100, -100); }, 3000); ``` # window.close ```javascript let jsWindow = window.open(\"http://localhost/js/about.html\", \"about\", \"height=600,width=600\",); setTimeout(() => { jsWindow.close(); }, 3000); ``` # window.opener > A newly created window can reference back to the window that opened it via the window.opener property. This allows you to exchange data between the > two windows. # BOM ## popups ```javascript //can be written without window window.alert() alert() confirm() prompt() ``` ```javascript const myPopup = window.open(\"https://example.com\", \"myPopup\", \"width=400, height=300\"); if (myPopup) { // Pop-up was opened successfully const result = myPopup.confirm \"Do you want to submit this form?\" ) ; if (result) { // User clicked OK const input = myPopup.prompt(\"Enter your name:\"); if (input) { // User entered a name myPopup.alert(\"Hello, \" + input + \"!\"); } } else { // User clicked Cancel // Do nothing } } else { // Pop-up was blocked by the browser // Do something else } ``` ## Location > The window web page Location and provides methods object Loaded in represents the browser for the navigating URL of > to other URLS. ```javascript // href (URL) of the current page window.location.href // domain name of the web host window.location.hostname // path and filename of the current page. window.location.pathname // the web protocol used (http: or https:) window.location.protocol // loads a new document window.location.assign() ``` ## Navigator > The window web page Location and provides methods object Loaded in represents the browser for the navigating URL of > to other URLS. ```javascript // This line logs the code name of the browser console.log(\"Browser code name:\", navigator.appCodeName); // logs the name of the browser console.log(\"Browser name:\", navigator.appName); // logs the version of the browser console.log(\"Browser version:\", navigator.appVersion); // logs the platform or operating system where browser is running console.log(\"Platform:\", navigator.platform); // it logs the user agent string for the browser, which detects type //and version of the browsee + the platform and other information console.log(\"User agent:\", navigator.userAgent); ``` ## History > The BOM provides a history object, > which contains methods and properties > related to the user's browsing history. ```javascript console.Log(\"Number of pages in history:\", history.length); // Go back one page history.back(); // Go forward one page history.forward(); // Go back two pages history.go(-2); ``` ## Screen > about The screen object provides the user's screen, such information as its size > and resolution. ```javascript //This line logs the width of the user's screen console.log(\"Screen width:\", screen.width); // This line logs the height of the user's screen console.log(\"Screen height:\", screen.height); // logs the available width of the users screen, after subtracting the space taken up //by the operating system's taskbar or dock console.log(\"Available screen width:\", screen.availWidth); //taken up by the operating system's taskbar or dock // logs the available height of the user's screen in pixels, after subtracting the space console.log(\"Available screen height:\", screen.availHeight); // This line logs the number of bits used to represent each color on the user's screen console.log(\"Color depth:\", screen.colorDepth); ``` ",
    "url": "/JavaScript/Window",
    
    "relUrl": "/JavaScript/Window"
  },"224": {
    "doc": "Window",
    "title": "Window",
    "content": "{: .text-delta } 1. TOC {:toc} --- # BOM > The Browser Object Model (BOM) in > JavaScript includes the properties and > methods for JavaScript to interact with > the web browser. # [window.open MDN](https://developer.mozilla.org/en-US/docs/Web/API/Window/open) > The syntax of the `window.open` method is given below: open (URL, windowName[, windowFeatures]) > `URL` The URL of the page to open in the new window. This argument could be blank. > `windowName` A name to be given to the new window. The name can be used to refer this window again. > `windowFeatures` A string that determines the various window features to be included in the popup window (like status bar, address bar etc) The > following code opens a new browser window with > standard features. ```javascript window.open(\"http://jsc.simfatic-solutions.com\", \"mywindow\"); ``` - Changing the features of the Popup, You can control the features of the popup using the last argument to the window.open method. The following code opens a window with a status bar and no extra features. ```javascript window.open(\"http://jsc.simfatic-solutions.com\", \"mywindow\", \"status=1\"); ``` - The code below opens a window with toolbar and status bar. ```javascript window.open(\"http://jsc.simfatic-solutions.com\", \"mywindow\", \"status=1,toolbar=1\",); ``` The table shows the features and the string tokens you can use: | token | def |-------------|----------------------------------------------------------------------------| status | The status bar at the bottom of the window. | toolbar | The standard browser toolbar, with buttons such as Back and Forward. | location | The Location entry field where you enter the URL. | menubar | The menu bar of the window | directories | The standard browser directory buttons, such as What’s New and What’s Cool | resizable | Allow/Disallow the user to resize the window. | scrollbars | Enable the scrollbars if the document is bigger than the window | height | Specifies the height of the window in pixels. (example: height=‘350’) | width | Specifies the width of the window in pixels. | Examples The following code opens a window with menu bar. The window is re-sizable and is having 350 pixels width and 250 pixels height. ```javascript window.open(\"http://jsc.simfatic-solutions.com\", \"mywindow\", \"menubar=1,resizable=1,width=350,height=250\",); ``` Example 1 A window with location bar, status bar, scroll bar and of size 100 X 100 ```javascript window.open(\"http://jsc.simfatic-solutions.com\", \"mywindow\", \"location=1,status=1,scrollbars=1, width=100,height=100\",); ``` Example 2 Moving the window to a desired location You can use the window.moveTo function to move the popup window to a desired location. The code below shows positioning the popup at a desired location. ```javascript function mypopup() { mywindow = window.open(\"http://jsc.simfatic-solutions.com\", \"mywindow\", \"location=1,status=1,scrollbars=1, width=100,height=100\",); mywindow.moveTo(0, 0); } ``` The code positions the popup on the top left corner of the screen. Putting it all together Now we will combine all these information to create the popup windows of different types. The Code below opens a popup window when you enter the page: ```html JavaScript Popup Example 3 . ",
    "url": "/JavaScript/Window",
    
    "relUrl": "/JavaScript/Window"
  },"225": {
    "doc": "WindowsServer",
    "title": "WindowsServer",
    "content": "{: .text-delta } 1. TOC {:toc} *** # CLI ## [Admin Tools](https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/msiexec#repair-options) ",
    "url": "/Windows_Notes/WindowsServer",
    
    "relUrl": "/Windows_Notes/WindowsServer"
  },"226": {
    "doc": "Windows_Notes",
    "title": "Windows_Notes",
    "content": "# [REPO](https://github.com/14paxton/Windows_Notes) # Gists - [Syncing Chrome Bookmarks and Extentions with scripts and GitHub](https://gist.github.com/14paxton/c10cfd597e7e7b487e27d641cf964c59#pullbookmarksps1) ",
    "url": "/Windows_Notes/",
    
    "relUrl": "/Windows_Notes/"
  },"227": {
    "doc": "WorkingWithFiles",
    "title": "WorkingWithFiles",
    "content": "{: .text-delta } 1. TOC {:toc} --- # download a new file ```javascript const formV = document.querySelector(\"input\"); const btn = document.querySelector(\"button\"); btn.addEventListener(\"click\", (e) => { e.preventDefault(); filefetch(formV.value); }); function filefetch(url) { fetch(url) .then((resp) => resp.blob()) .then((file) => { let tURL = URL.createObjectURL(file); let aTag = document.createElement(\"a\"); aTag.href = tURL; aTag.download = \"file name\"; document.body.appendChild(aTag); aTag.click(); aTag.remove(); URL.revokeObjectURL(tURL); }); } ``` ",
    "url": "/JavaScript/WorkingWithFiles",
    
    "relUrl": "/JavaScript/WorkingWithFiles"
  },"228": {
    "doc": "ZSH",
    "title": "ZSH",
    "content": "{: .text-delta } 1. TOC {:toc} *** Zsh is a UNIX command interpreter (shell) usable as an interactive login shell and as a shell script command processor. Of the standard shells, zsh most closely resembles ksh but includes many enhancements. It does not provide compatibility with POSIX or other shells in its default operating mode. Zsh has command line editing, builtin spelling correction, programmable command completion, shell functions (with autoloading), a history mechanism, and a host of other features # Files to Note ## Order of Operations This is the order in which these files get read. Keep in mind that it reads first from the system-wide file (i.e. /etc/zshenv) then from the file in your home directory (~/.zshenv) as it goes through the following order. > ```.zshenv``` → ```.zprofile``` → ```.zshrc``` → ```.zlogin``` → ```.zlogout``` ## .zprofile > ```.zlogin``` and ```.zprofile``` are basically the same thing—they set the environment for login shells1; > they just get loaded at different times (see below). > ```.zprofile``` is based on the Bash's ```.bash_profile``` > ```.zlogin``` is a derivative of CSH's .login. > Since ```Bash``` was the default shell for everything up to ```Mojave```, stick with ```.zprofile```. ## .zshrc > This sets the environment for interactive shells2. > This gets loaded after .```zprofile```. > It's typically a place where you \"set it and forget it\" type of parameters like ```$PATH```, ```$PROMPT```, > aliases, and > functions you would like to have in both login and interactive shells. ## .zshenv (Optional) > This is read first and read every time. > This is where you set environment variables. > I say this is optional because it is geared more toward advanced users where having > your ```$PATH```, ```$PAGER```, or ```$EDITOR``` > variables may be important for things like scripts that get called by launchd. > Those run under a non-interactive shell 3 so anything in . > or .zshrc won't get loaded. > Personally, I > don't use > this one because I set the PATH variable in my script itself to ensure portability. ## .zlogout (Optional) > But beneficial! This is read when you log out of a session and is great for cleaning things up when you leave (like resetting the Terminal Window > Title) ## Caveats Apple does things a little differently, so it's best to be aware of this. Specifically, Terminal initially opens both a login and interactive shell even though you don't authenticate (enter login credentials). However, any subsequent shells that are opened are only interactive. You can test this out by putting an alias or setting a variable in .zprofile, then opening Terminal and seeing if that variable/alias exists. Then open another shell (type zsh); that variable won't be accessible anymore. SSH sessions are login and interactive so they'll behave just like your initial Terminal session and read both .zprofile and .zshrc ",
    "url": "/MacNotes/ZSH",
    
    "relUrl": "/MacNotes/ZSH"
  },"229": {
    "doc": "cli_gradlew",
    "title": "cli_gradlew",
    "content": "{: .text-delta } 1. TOC {:toc} --- # Debug ```bash ./gradlew runSingle --debug-jvm -PmainClass=Mai ``` ## `build.gradle` ```gradle test { debugOptions { enabled = true port = 4455 server = true suspend = true } } ``` > or ```gradle run{ debugOptions { enabled = true port = 4455 server = true suspend = true } } ``` ## Remote Debugging in Gradle ```gradle tasks.withType(JavaExec) { if (System.getProperty('DEBUG', 'false') == 'true') { jvmArgs '-Xdebug', '-Xrunjdwp:transport=debug_socket,server=y,suspend=y,address=9099' } } ``` > To know what's happening with the arguments, read this about the arguments that you need to send to jvm to make remote debugging possible: > [enable-remote-debugging](https://www.eclipse.org/jetty/documentation/9.3.x/enable-remote-debugging.html) ## Running instructions ### Step1: ```bash gradle -DDEBUG=true run ``` > Now in the console you will see something like this: ```shell Listening for transport debug_socket at address: 9099 ``` ### Step2: > `Configuration` -> `Remote Java Application` - set these fields: 1. project 2. host (here its localhost) 3. port (in this example it will be 9099) ",
    "url": "/Micronotes/cli_gradlew",
    
    "relUrl": "/Micronotes/cli_gradlew"
  },"230": {
    "doc": "MyPersonalDocsAndStuff",
    "title": "MyPersonalDocsAndStuff",
    "content": "# My Personal Documents and Other Stuff - > Resume - > CoverLetter - > [Tod Wyrick Letter Of Recommendation](/GitHubPages/LetterOfRecommendation) --- - [GitHub Repositories](https://github.com/14paxton?tab=repositories) - [GISTs](https://gist.github.com/14paxton) - [LinkedIn](https://www.linkedin.com/in/paxtonbrandon/) [//]: # (site map for mobile) --- ",
    "url": "/index",
    
    "relUrl": "/index"
  }
}
